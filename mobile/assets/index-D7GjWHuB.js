function h5(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const f5="modulepreload",p5=function(n){return"/mobile/"+n},LE={},jn=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let d=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=d(t.map(u=>{if(u=p5(u),u in LE)return;LE[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const b=document.createElement("link");if(b.rel=f?"stylesheet":f5,f||(b.as="script"),b.crossOrigin="",b.href=u,l&&b.setAttribute("nonce",l),document.head.appendChild(b),f)return new Promise((v,y)=>{b.addEventListener("load",v),b.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})};var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Zg={exports:{}},Wc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function m5(){if(DE)return Wc;DE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,r){var o=null;if(r!==void 0&&(o=""+r),s.key!==void 0&&(o=""+s.key),"key"in s){r={};for(var l in s)l!=="key"&&(r[l]=s[l])}else r=s;return s=r.ref,{$$typeof:n,type:i,key:o,ref:s!==void 0?s:null,props:r}}return Wc.Fragment=e,Wc.jsx=t,Wc.jsxs=t,Wc}var OE;function g5(){return OE||(OE=1,Zg.exports=m5()),Zg.exports}var m=g5(),Jg={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE;function b5(){if(NE)return gt;NE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),b=Symbol.iterator;function v(j){return j===null||typeof j!="object"?null:(j=b&&j[b]||j["@@iterator"],typeof j=="function"?j:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function T(j,H,K){this.props=j,this.context=H,this.refs=E,this.updater=K||y}T.prototype.isReactComponent={},T.prototype.setState=function(j,H){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,H,"setState")},T.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function k(){}k.prototype=T.prototype;function _(j,H,K){this.props=j,this.context=H,this.refs=E,this.updater=K||y}var O=_.prototype=new k;O.constructor=_,w(O,T.prototype),O.isPureReactComponent=!0;var R=Array.isArray;function M(){}var P={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function L(j,H,K){var X=K.ref;return{$$typeof:n,type:j,key:H,ref:X!==void 0?X:null,props:K}}function D(j,H){return L(j.type,H,j.props)}function $(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function U(j){var H={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(K){return H[K]})}var G=/\/+/g;function Z(j,H){return typeof j=="object"&&j!==null&&j.key!=null?U(""+j.key):H.toString(36)}function se(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(M,M):(j.status="pending",j.then(function(H){j.status==="pending"&&(j.status="fulfilled",j.value=H)},function(H){j.status==="pending"&&(j.status="rejected",j.reason=H)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function z(j,H,K,X,ae){var re=typeof j;(re==="undefined"||re==="boolean")&&(j=null);var ge=!1;if(j===null)ge=!0;else switch(re){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(j.$$typeof){case n:case e:ge=!0;break;case f:return ge=j._init,z(ge(j._payload),H,K,X,ae)}}if(ge)return ae=ae(j),ge=X===""?"."+Z(j,0):X,R(ae)?(K="",ge!=null&&(K=ge.replace(G,"$&/")+"/"),z(ae,H,K,"",function(ze){return ze})):ae!=null&&($(ae)&&(ae=D(ae,K+(ae.key==null||j&&j.key===ae.key?"":(""+ae.key).replace(G,"$&/")+"/")+ge)),H.push(ae)),1;ge=0;var Se=X===""?".":X+":";if(R(j))for(var De=0;De<j.length;De++)X=j[De],re=Se+Z(X,De),ge+=z(X,H,K,re,ae);else if(De=v(j),typeof De=="function")for(j=De.call(j),De=0;!(X=j.next()).done;)X=X.value,re=Se+Z(X,De++),ge+=z(X,H,K,re,ae);else if(re==="object"){if(typeof j.then=="function")return z(se(j),H,K,X,ae);throw H=String(j),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ge}function Y(j,H,K){if(j==null)return j;var X=[],ae=0;return z(j,X,"","",function(re){return H.call(K,re,ae++)}),X}function V(j){if(j._status===-1){var H=j._result;H=H(),H.then(function(K){(j._status===0||j._status===-1)&&(j._status=1,j._result=K)},function(K){(j._status===0||j._status===-1)&&(j._status=2,j._result=K)}),j._status===-1&&(j._status=0,j._result=H)}if(j._status===1)return j._result.default;throw j._result}var q=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},ie={map:Y,forEach:function(j,H,K){Y(j,function(){H.apply(this,arguments)},K)},count:function(j){var H=0;return Y(j,function(){H++}),H},toArray:function(j){return Y(j,function(H){return H})||[]},only:function(j){if(!$(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return gt.Activity=p,gt.Children=ie,gt.Component=T,gt.Fragment=t,gt.Profiler=s,gt.PureComponent=_,gt.StrictMode=i,gt.Suspense=d,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,gt.__COMPILER_RUNTIME={__proto__:null,c:function(j){return P.H.useMemoCache(j)}},gt.cache=function(j){return function(){return j.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function(j,H,K){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var X=w({},j.props),ae=j.key;if(H!=null)for(re in H.key!==void 0&&(ae=""+H.key),H)!N.call(H,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&H.ref===void 0||(X[re]=H[re]);var re=arguments.length-2;if(re===1)X.children=K;else if(1<re){for(var ge=Array(re),Se=0;Se<re;Se++)ge[Se]=arguments[Se+2];X.children=ge}return L(j.type,ae,X)},gt.createContext=function(j){return j={$$typeof:o,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:r,_context:j},j},gt.createElement=function(j,H,K){var X,ae={},re=null;if(H!=null)for(X in H.key!==void 0&&(re=""+H.key),H)N.call(H,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(ae[X]=H[X]);var ge=arguments.length-2;if(ge===1)ae.children=K;else if(1<ge){for(var Se=Array(ge),De=0;De<ge;De++)Se[De]=arguments[De+2];ae.children=Se}if(j&&j.defaultProps)for(X in ge=j.defaultProps,ge)ae[X]===void 0&&(ae[X]=ge[X]);return L(j,re,ae)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(j){return{$$typeof:l,render:j}},gt.isValidElement=$,gt.lazy=function(j){return{$$typeof:f,_payload:{_status:-1,_result:j},_init:V}},gt.memo=function(j,H){return{$$typeof:u,type:j,compare:H===void 0?null:H}},gt.startTransition=function(j){var H=P.T,K={};P.T=K;try{var X=j(),ae=P.S;ae!==null&&ae(K,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(M,q)}catch(re){q(re)}finally{H!==null&&K.types!==null&&(H.types=K.types),P.T=H}},gt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},gt.use=function(j){return P.H.use(j)},gt.useActionState=function(j,H,K){return P.H.useActionState(j,H,K)},gt.useCallback=function(j,H){return P.H.useCallback(j,H)},gt.useContext=function(j){return P.H.useContext(j)},gt.useDebugValue=function(){},gt.useDeferredValue=function(j,H){return P.H.useDeferredValue(j,H)},gt.useEffect=function(j,H){return P.H.useEffect(j,H)},gt.useEffectEvent=function(j){return P.H.useEffectEvent(j)},gt.useId=function(){return P.H.useId()},gt.useImperativeHandle=function(j,H,K){return P.H.useImperativeHandle(j,H,K)},gt.useInsertionEffect=function(j,H){return P.H.useInsertionEffect(j,H)},gt.useLayoutEffect=function(j,H){return P.H.useLayoutEffect(j,H)},gt.useMemo=function(j,H){return P.H.useMemo(j,H)},gt.useOptimistic=function(j,H){return P.H.useOptimistic(j,H)},gt.useReducer=function(j,H,K){return P.H.useReducer(j,H,K)},gt.useRef=function(j){return P.H.useRef(j)},gt.useState=function(j){return P.H.useState(j)},gt.useSyncExternalStore=function(j,H,K){return P.H.useSyncExternalStore(j,H,K)},gt.useTransition=function(){return P.H.useTransition()},gt.version="19.2.0",gt}var PE;function ay(){return PE||(PE=1,Jg.exports=b5()),Jg.exports}var C=ay();const Pe=zr(C),v5=h5({__proto__:null,default:Pe},[C]);var e0={exports:{}},Kc={},t0={exports:{}},i0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ME;function y5(){return ME||(ME=1,(function(n){function e(z,Y){var V=z.length;z.push(Y);e:for(;0<V;){var q=V-1>>>1,ie=z[q];if(0<s(ie,Y))z[q]=Y,z[V]=ie,V=q;else break e}}function t(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var Y=z[0],V=z.pop();if(V!==Y){z[0]=V;e:for(var q=0,ie=z.length,j=ie>>>1;q<j;){var H=2*(q+1)-1,K=z[H],X=H+1,ae=z[X];if(0>s(K,V))X<ie&&0>s(ae,K)?(z[q]=ae,z[X]=V,q=X):(z[q]=K,z[H]=V,q=H);else if(X<ie&&0>s(ae,V))z[q]=ae,z[X]=V,q=X;else break e}}return Y}function s(z,Y){var V=z.sortIndex-Y.sortIndex;return V!==0?V:z.id-Y.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var d=[],u=[],f=1,p=null,b=3,v=!1,y=!1,w=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function O(z){for(var Y=t(u);Y!==null;){if(Y.callback===null)i(u);else if(Y.startTime<=z)i(u),Y.sortIndex=Y.expirationTime,e(d,Y);else break;Y=t(u)}}function R(z){if(w=!1,O(z),!y)if(t(d)!==null)y=!0,M||(M=!0,U());else{var Y=t(u);Y!==null&&se(R,Y.startTime-z)}}var M=!1,P=-1,N=5,L=-1;function D(){return E?!0:!(n.unstable_now()-L<N)}function $(){if(E=!1,M){var z=n.unstable_now();L=z;var Y=!0;try{e:{y=!1,w&&(w=!1,k(P),P=-1),v=!0;var V=b;try{t:{for(O(z),p=t(d);p!==null&&!(p.expirationTime>z&&D());){var q=p.callback;if(typeof q=="function"){p.callback=null,b=p.priorityLevel;var ie=q(p.expirationTime<=z);if(z=n.unstable_now(),typeof ie=="function"){p.callback=ie,O(z),Y=!0;break t}p===t(d)&&i(d),O(z)}else i(d);p=t(d)}if(p!==null)Y=!0;else{var j=t(u);j!==null&&se(R,j.startTime-z),Y=!1}}break e}finally{p=null,b=V,v=!1}Y=void 0}}finally{Y?U():M=!1}}}var U;if(typeof _=="function")U=function(){_($)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Z=G.port2;G.port1.onmessage=$,U=function(){Z.postMessage(null)}}else U=function(){T($,0)};function se(z,Y){P=T(function(){z(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(z){switch(b){case 1:case 2:case 3:var Y=3;break;default:Y=b}var V=b;b=Y;try{return z()}finally{b=V}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var V=b;b=z;try{return Y()}finally{b=V}},n.unstable_scheduleCallback=function(z,Y,V){var q=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?q+V:q):V=q,z){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=V+ie,z={id:f++,callback:Y,priorityLevel:z,startTime:V,expirationTime:ie,sortIndex:-1},V>q?(z.sortIndex=V,e(u,z),t(d)===null&&z===t(u)&&(w?(k(P),P=-1):w=!0,se(R,V-q))):(z.sortIndex=ie,e(d,z),y||v||(y=!0,M||(M=!0,U()))),z},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(z){var Y=b;return function(){var V=b;b=Y;try{return z.apply(this,arguments)}finally{b=V}}}})(i0)),i0}var $E;function x5(){return $E||($E=1,t0.exports=y5()),t0.exports}var n0={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function w5(){if(FE)return vn;FE=1;var n=ay();function e(d){var u="https://react.dev/errors/"+d;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+d+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(d,u,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:d,containerInfo:u,implementation:f}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,u){if(d==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,vn.createPortal=function(d,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return r(d,u,null,f)},vn.flushSync=function(d){var u=o.T,f=i.p;try{if(o.T=null,i.p=2,d)return d()}finally{o.T=u,i.p=f,i.d.f()}},vn.preconnect=function(d,u){typeof d=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(d,u))},vn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},vn.preinit=function(d,u){if(typeof d=="string"&&u&&typeof u.as=="string"){var f=u.as,p=l(f,u.crossOrigin),b=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?i.d.S(d,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:p,integrity:b,fetchPriority:v}):f==="script"&&i.d.X(d,{crossOrigin:p,integrity:b,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},vn.preinitModule=function(d,u){if(typeof d=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=l(u.as,u.crossOrigin);i.d.M(d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(d)},vn.preload=function(d,u){if(typeof d=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,p=l(f,u.crossOrigin);i.d.L(d,f,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},vn.preloadModule=function(d,u){if(typeof d=="string")if(u){var f=l(u.as,u.crossOrigin);i.d.m(d,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(d)},vn.requestFormReset=function(d){i.d.r(d)},vn.unstable_batchedUpdates=function(d,u){return d(u)},vn.useFormState=function(d,u,f){return o.H.useFormState(d,u,f)},vn.useFormStatus=function(){return o.H.useHostTransitionStatus()},vn.version="19.2.0",vn}var jE;function fC(){if(jE)return n0.exports;jE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),n0.exports=w5(),n0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE;function S5(){if(BE)return Kc;BE=1;var n=x5(),e=ay(),t=fC();function i(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var c=a,h=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(h=c.return),a=c.return;while(a)}return c.tag===3?h:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(a.tag===31){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function d(a){if(r(a)!==a)throw Error(i(188))}function u(a){var c=a.alternate;if(!c){if(c=r(a),c===null)throw Error(i(188));return c!==a?null:a}for(var h=a,g=c;;){var x=h.return;if(x===null)break;var S=x.alternate;if(S===null){if(g=x.return,g!==null){h=g;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===h)return d(x),a;if(S===g)return d(x),c;S=S.sibling}throw Error(i(188))}if(h.return!==g.return)h=x,g=S;else{for(var A=!1,F=x.child;F;){if(F===h){A=!0,h=x,g=S;break}if(F===g){A=!0,g=x,h=S;break}F=F.sibling}if(!A){for(F=S.child;F;){if(F===h){A=!0,h=S,g=x;break}if(F===g){A=!0,g=S,h=x;break}F=F.sibling}if(!A)throw Error(i(189))}}if(h.alternate!==g)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?a:c}function f(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=f(a),c!==null)return c;a=a.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),_=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function U(a){return a===null||typeof a!="object"?null:(a=$&&a[$]||a["@@iterator"],typeof a=="function"?a:null)}var G=Symbol.for("react.client.reference");function Z(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===G?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case w:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case M:return"SuspenseList";case L:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case y:return"Portal";case _:return a.displayName||"Context";case k:return(a._context.displayName||"Context")+".Consumer";case O:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case P:return c=a.displayName||null,c!==null?c:Z(a.type)||"Memo";case N:c=a._payload,a=a._init;try{return Z(a(c))}catch{}}return null}var se=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},q=[],ie=-1;function j(a){return{current:a}}function H(a){0>ie||(a.current=q[ie],q[ie]=null,ie--)}function K(a,c){ie++,q[ie]=a.current,a.current=c}var X=j(null),ae=j(null),re=j(null),ge=j(null);function Se(a,c){switch(K(re,c),K(ae,a),K(X,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?eE(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=eE(c),a=tE(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}H(X),K(X,a)}function De(){H(X),H(ae),H(re)}function ze(a){a.memoizedState!==null&&K(ge,a);var c=X.current,h=tE(c,a.type);c!==h&&(K(ae,a),K(X,h))}function Qe(a){ae.current===a&&(H(X),H(ae)),ge.current===a&&(H(ge),Hc._currentValue=V)}var nt,Pt;function Ce(a){if(nt===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);nt=c&&c[1]||"",Pt=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+a+Pt}var at=!1;function Ie(a,c){if(!a||at)return"";at=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(me){var he=me}Reflect.construct(a,[],xe)}else{try{xe.call()}catch(me){he=me}a.call(xe.prototype)}}else{try{throw Error()}catch(me){he=me}(xe=a())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(me){if(me&&he&&typeof me.stack=="string")return[me.stack,he.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=g.DetermineComponentFrameRoot(),A=S[0],F=S[1];if(A&&F){var W=A.split(`
`),de=F.split(`
`);for(x=g=0;g<W.length&&!W[g].includes("DetermineComponentFrameRoot");)g++;for(;x<de.length&&!de[x].includes("DetermineComponentFrameRoot");)x++;if(g===W.length||x===de.length)for(g=W.length-1,x=de.length-1;1<=g&&0<=x&&W[g]!==de[x];)x--;for(;1<=g&&0<=x;g--,x--)if(W[g]!==de[x]){if(g!==1||x!==1)do if(g--,x--,0>x||W[g]!==de[x]){var be=`
`+W[g].replace(" at new "," at ");return a.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",a.displayName)),be}while(1<=g&&0<=x);break}}}finally{at=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?Ce(h):""}function et(a,c){switch(a.tag){case 26:case 27:case 5:return Ce(a.type);case 16:return Ce("Lazy");case 13:return a.child!==c&&c!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return Ie(a.type,!1);case 11:return Ie(a.type.render,!1);case 1:return Ie(a.type,!0);case 31:return Ce("Activity");default:return""}}function we(a){try{var c="",h=null;do c+=et(a,h),h=a,a=a.return;while(a);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var ee=Object.prototype.hasOwnProperty,_e=n.unstable_scheduleCallback,Be=n.unstable_cancelCallback,Xe=n.unstable_shouldYield,tt=n.unstable_requestPaint,He=n.unstable_now,We=n.unstable_getCurrentPriorityLevel,vt=n.unstable_ImmediatePriority,Yt=n.unstable_UserBlockingPriority,ii=n.unstable_NormalPriority,$t=n.unstable_LowPriority,Te=n.unstable_IdlePriority,Me=n.log,kt=n.unstable_setDisableYieldValue,Ct=null,Bt=null;function Xt(a){if(typeof Me=="function"&&kt(a),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Ct,a)}catch{}}var Ut=Math.clz32?Math.clz32:Ee,ke=Math.log,lt=Math.LN2;function Ee(a){return a>>>=0,a===0?32:31-(ke(a)/lt|0)|0}var $e=256,It=262144,Et=4194304;function Tt(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ni(a,c,h){var g=a.pendingLanes;if(g===0)return 0;var x=0,S=a.suspendedLanes,A=a.pingedLanes;a=a.warmLanes;var F=g&134217727;return F!==0?(g=F&~S,g!==0?x=Tt(g):(A&=F,A!==0?x=Tt(A):h||(h=F&~a,h!==0&&(x=Tt(h))))):(F=g&~S,F!==0?x=Tt(F):A!==0?x=Tt(A):h||(h=g&~a,h!==0&&(x=Tt(h)))),x===0?0:c!==0&&c!==x&&(c&S)===0&&(S=x&-x,h=c&-c,S>=h||S===32&&(h&4194048)!==0)?c:x}function Qt(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function yt(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ct(){var a=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),a}function pi(a){for(var c=[],h=0;31>h;h++)c.push(a);return c}function Xi(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Qi(a,c,h,g,x,S){var A=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var F=a.entanglements,W=a.expirationTimes,de=a.hiddenUpdates;for(h=A&~h;0<h;){var be=31-Ut(h),xe=1<<be;F[be]=0,W[be]=-1;var he=de[be];if(he!==null)for(de[be]=null,be=0;be<he.length;be++){var me=he[be];me!==null&&(me.lane&=-536870913)}h&=~xe}g!==0&&Sn(a,g,0),S!==0&&x===0&&a.tag!==0&&(a.suspendedLanes|=S&~(A&~c))}function Sn(a,c,h){a.pendingLanes|=c,a.suspendedLanes&=~c;var g=31-Ut(c);a.entangledLanes|=c,a.entanglements[g]=a.entanglements[g]|1073741824|h&261930}function Zi(a,c){var h=a.entangledLanes|=c;for(a=a.entanglements;h;){var g=31-Ut(h),x=1<<g;x&c|a[g]&c&&(a[g]|=c),h&=~x}}function pe(a,c){var h=c&-c;return h=(h&42)!==0?1:je(h),(h&(a.suspendedLanes|c))!==0?0:h}function je(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function xt(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Mt(){var a=Y.p;return a!==0?a:(a=window.event,a===void 0?32:TE(a.type))}function rt(a,c){var h=Y.p;try{return Y.p=a,c()}finally{Y.p=h}}var xi=Math.random().toString(36).slice(2),te="__reactFiber$"+xi,Re="__reactProps$"+xi,Ke="__reactContainer$"+xi,Ye="__reactEvents$"+xi,pt="__reactListeners$"+xi,ki="__reactHandles$"+xi,Ri="__reactResources$"+xi,bi="__reactMarker$"+xi;function ue(a){delete a[te],delete a[Re],delete a[Ye],delete a[pt],delete a[ki]}function Le(a){var c=a[te];if(c)return c;for(var h=a.parentNode;h;){if(c=h[Ke]||h[te]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(a=lE(a);a!==null;){if(h=a[te])return h;a=lE(a)}return c}a=h,h=a.parentNode}return null}function Ge(a){if(a=a[te]||a[Ke]){var c=a.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return a}return null}function ot(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(i(33))}function fe(a){var c=a[Ri];return c||(c=a[Ri]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Ae(a){a[bi]=!0}var mt=new Set,Vt={};function an(a,c){wi(a,c),wi(a+"Capture",c)}function wi(a,c){for(Vt[a]=c,a=0;a<c.length;a++)mt.add(c[a])}var xs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Li={},Gp={};function rc(a){return ee.call(Gp,a)?!0:ee.call(Li,a)?!1:xs.test(a)?Gp[a]=!0:(Li[a]=!0,!1)}function Yr(a,c,h){if(rc(c))if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+h)}}function Oa(a,c,h){if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+h)}}function bn(a,c,h,g){if(g===null)a.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(c,h,""+g)}}function Ji(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function qx(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function rO(a,c,h){var g=Object.getOwnPropertyDescriptor(a.constructor.prototype,c);if(!a.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,S=g.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return x.call(this)},set:function(A){h=""+A,S.call(this,A)}}),Object.defineProperty(a,c,{enumerable:g.enumerable}),{getValue:function(){return h},setValue:function(A){h=""+A},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Vp(a){if(!a._valueTracker){var c=qx(a)?"checked":"value";a._valueTracker=rO(a,c,""+a[c])}}function Wx(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return a&&(g=qx(a)?a.checked?"true":"false":a.value),a=g,a!==h?(c.setValue(a),!0):!1}function su(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var oO=/[\n"\\]/g;function rs(a){return a.replace(oO,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function qp(a,c,h,g,x,S,A,F){a.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?a.type=A:a.removeAttribute("type"),c!=null?A==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Ji(c)):a.value!==""+Ji(c)&&(a.value=""+Ji(c)):A!=="submit"&&A!=="reset"||a.removeAttribute("value"),c!=null?Wp(a,A,Ji(c)):h!=null?Wp(a,A,Ji(h)):g!=null&&a.removeAttribute("value"),x==null&&S!=null&&(a.defaultChecked=!!S),x!=null&&(a.checked=x&&typeof x!="function"&&typeof x!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?a.name=""+Ji(F):a.removeAttribute("name")}function Kx(a,c,h,g,x,S,A,F){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(a.type=S),c!=null||h!=null){if(!(S!=="submit"&&S!=="reset"||c!=null)){Vp(a);return}h=h!=null?""+Ji(h):"",c=c!=null?""+Ji(c):h,F||c===a.value||(a.value=c),a.defaultValue=c}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=F?a.checked:!!g,a.defaultChecked=!!g,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(a.name=A),Vp(a)}function Wp(a,c,h){c==="number"&&su(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function Na(a,c,h,g){if(a=a.options,c){c={};for(var x=0;x<h.length;x++)c["$"+h[x]]=!0;for(h=0;h<a.length;h++)x=c.hasOwnProperty("$"+a[h].value),a[h].selected!==x&&(a[h].selected=x),x&&g&&(a[h].defaultSelected=!0)}else{for(h=""+Ji(h),c=null,x=0;x<a.length;x++){if(a[x].value===h){a[x].selected=!0,g&&(a[x].defaultSelected=!0);return}c!==null||a[x].disabled||(c=a[x])}c!==null&&(c.selected=!0)}}function Yx(a,c,h){if(c!=null&&(c=""+Ji(c),c!==a.value&&(a.value=c),h==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=h!=null?""+Ji(h):""}function Xx(a,c,h,g){if(c==null){if(g!=null){if(h!=null)throw Error(i(92));if(se(g)){if(1<g.length)throw Error(i(93));g=g[0]}h=g}h==null&&(h=""),c=h}h=Ji(c),a.defaultValue=h,g=a.textContent,g===h&&g!==""&&g!==null&&(a.value=g),Vp(a)}function Pa(a,c){if(c){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=c;return}}a.textContent=c}var aO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qx(a,c,h){var g=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?g?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":g?a.setProperty(c,h):typeof h!="number"||h===0||aO.has(c)?c==="float"?a.cssFloat=h:a[c]=(""+h).trim():a[c]=h+"px"}function Zx(a,c,h){if(c!=null&&typeof c!="object")throw Error(i(62));if(a=a.style,h!=null){for(var g in h)!h.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var x in c)g=c[x],c.hasOwnProperty(x)&&h[x]!==g&&Qx(a,x,g)}else for(var S in c)c.hasOwnProperty(S)&&Qx(a,S,c[S])}function Kp(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ru(a){return cO.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function sr(){}var Yp=null;function Xp(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ma=null,$a=null;function Jx(a){var c=Ge(a);if(c&&(a=c.stateNode)){var h=a[Re]||null;e:switch(a=c.stateNode,c.type){case"input":if(qp(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+rs(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==a&&g.form===a.form){var x=g[Re]||null;if(!x)throw Error(i(90));qp(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<h.length;c++)g=h[c],g.form===a.form&&Wx(g)}break e;case"textarea":Yx(a,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&Na(a,!!h.multiple,c,!1)}}}var Qp=!1;function e1(a,c,h){if(Qp)return a(c,h);Qp=!0;try{var g=a(c);return g}finally{if(Qp=!1,(Ma!==null||$a!==null)&&(qu(),Ma&&(c=Ma,a=$a,$a=Ma=null,Jx(c),a)))for(c=0;c<a.length;c++)Jx(a[c])}}function oc(a,c){var h=a.stateNode;if(h===null)return null;var g=h[Re]||null;if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(i(231,c,typeof h));return h}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zp=!1;if(rr)try{var ac={};Object.defineProperty(ac,"passive",{get:function(){Zp=!0}}),window.addEventListener("test",ac,ac),window.removeEventListener("test",ac,ac)}catch{Zp=!1}var Xr=null,Jp=null,ou=null;function t1(){if(ou)return ou;var a,c=Jp,h=c.length,g,x="value"in Xr?Xr.value:Xr.textContent,S=x.length;for(a=0;a<h&&c[a]===x[a];a++);var A=h-a;for(g=1;g<=A&&c[h-g]===x[S-g];g++);return ou=x.slice(a,1<g?1-g:void 0)}function au(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function lu(){return!0}function i1(){return!1}function Rn(a){function c(h,g,x,S,A){this._reactName=h,this._targetInst=x,this.type=g,this.nativeEvent=S,this.target=A,this.currentTarget=null;for(var F in a)a.hasOwnProperty(F)&&(h=a[F],this[F]=h?h(S):S[F]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?lu:i1,this.isPropagationStopped=i1,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=lu)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=lu)},persist:function(){},isPersistent:lu}),c}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cu=Rn(Vo),lc=p({},Vo,{view:0,detail:0}),dO=Rn(lc),em,tm,cc,du=p({},lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nm,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==cc&&(cc&&a.type==="mousemove"?(em=a.screenX-cc.screenX,tm=a.screenY-cc.screenY):tm=em=0,cc=a),em)},movementY:function(a){return"movementY"in a?a.movementY:tm}}),n1=Rn(du),uO=p({},du,{dataTransfer:0}),hO=Rn(uO),fO=p({},lc,{relatedTarget:0}),im=Rn(fO),pO=p({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),mO=Rn(pO),gO=p({},Vo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),bO=Rn(gO),vO=p({},Vo,{data:0}),s1=Rn(vO),yO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SO(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=wO[a])?!!c[a]:!1}function nm(){return SO}var EO=p({},lc,{key:function(a){if(a.key){var c=yO[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=au(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?xO[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nm,charCode:function(a){return a.type==="keypress"?au(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?au(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),TO=Rn(EO),kO=p({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r1=Rn(kO),_O=p({},lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nm}),AO=Rn(_O),CO=p({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),IO=Rn(CO),RO=p({},du,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),LO=Rn(RO),DO=p({},Vo,{newState:0,oldState:0}),OO=Rn(DO),NO=[9,13,27,32],sm=rr&&"CompositionEvent"in window,dc=null;rr&&"documentMode"in document&&(dc=document.documentMode);var PO=rr&&"TextEvent"in window&&!dc,o1=rr&&(!sm||dc&&8<dc&&11>=dc),a1=" ",l1=!1;function c1(a,c){switch(a){case"keyup":return NO.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Fa=!1;function MO(a,c){switch(a){case"compositionend":return d1(c);case"keypress":return c.which!==32?null:(l1=!0,a1);case"textInput":return a=c.data,a===a1&&l1?null:a;default:return null}}function $O(a,c){if(Fa)return a==="compositionend"||!sm&&c1(a,c)?(a=t1(),ou=Jp=Xr=null,Fa=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return o1&&c.locale!=="ko"?null:c.data;default:return null}}var FO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u1(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!FO[a.type]:c==="textarea"}function h1(a,c,h,g){Ma?$a?$a.push(g):$a=[g]:Ma=g,c=Ju(c,"onChange"),0<c.length&&(h=new cu("onChange","change",null,h,g),a.push({event:h,listeners:c}))}var uc=null,hc=null;function jO(a){KS(a,0)}function uu(a){var c=ot(a);if(Wx(c))return a}function f1(a,c){if(a==="change")return c}var p1=!1;if(rr){var rm;if(rr){var om="oninput"in document;if(!om){var m1=document.createElement("div");m1.setAttribute("oninput","return;"),om=typeof m1.oninput=="function"}rm=om}else rm=!1;p1=rm&&(!document.documentMode||9<document.documentMode)}function g1(){uc&&(uc.detachEvent("onpropertychange",b1),hc=uc=null)}function b1(a){if(a.propertyName==="value"&&uu(hc)){var c=[];h1(c,hc,a,Xp(a)),e1(jO,c)}}function BO(a,c,h){a==="focusin"?(g1(),uc=c,hc=h,uc.attachEvent("onpropertychange",b1)):a==="focusout"&&g1()}function UO(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return uu(hc)}function zO(a,c){if(a==="click")return uu(c)}function HO(a,c){if(a==="input"||a==="change")return uu(c)}function GO(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Hn=typeof Object.is=="function"?Object.is:GO;function fc(a,c){if(Hn(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var h=Object.keys(a),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var x=h[g];if(!ee.call(c,x)||!Hn(a[x],c[x]))return!1}return!0}function v1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function y1(a,c){var h=v1(a);a=0;for(var g;h;){if(h.nodeType===3){if(g=a+h.textContent.length,a<=c&&g>=c)return{node:h,offset:c-a};a=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=v1(h)}}function x1(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?x1(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function w1(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=su(a.document);c instanceof a.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)a=c.contentWindow;else break;c=su(a.document)}return c}function am(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var VO=rr&&"documentMode"in document&&11>=document.documentMode,ja=null,lm=null,pc=null,cm=!1;function S1(a,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;cm||ja==null||ja!==su(g)||(g=ja,"selectionStart"in g&&am(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),pc&&fc(pc,g)||(pc=g,g=Ju(lm,"onSelect"),0<g.length&&(c=new cu("onSelect","select",null,c,h),a.push({event:c,listeners:g}),c.target=ja)))}function qo(a,c){var h={};return h[a.toLowerCase()]=c.toLowerCase(),h["Webkit"+a]="webkit"+c,h["Moz"+a]="moz"+c,h}var Ba={animationend:qo("Animation","AnimationEnd"),animationiteration:qo("Animation","AnimationIteration"),animationstart:qo("Animation","AnimationStart"),transitionrun:qo("Transition","TransitionRun"),transitionstart:qo("Transition","TransitionStart"),transitioncancel:qo("Transition","TransitionCancel"),transitionend:qo("Transition","TransitionEnd")},dm={},E1={};rr&&(E1=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function Wo(a){if(dm[a])return dm[a];if(!Ba[a])return a;var c=Ba[a],h;for(h in c)if(c.hasOwnProperty(h)&&h in E1)return dm[a]=c[h];return a}var T1=Wo("animationend"),k1=Wo("animationiteration"),_1=Wo("animationstart"),qO=Wo("transitionrun"),WO=Wo("transitionstart"),KO=Wo("transitioncancel"),A1=Wo("transitionend"),C1=new Map,um="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");um.push("scrollEnd");function ws(a,c){C1.set(a,c),an(c,[a])}var hu=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},os=[],Ua=0,hm=0;function fu(){for(var a=Ua,c=hm=Ua=0;c<a;){var h=os[c];os[c++]=null;var g=os[c];os[c++]=null;var x=os[c];os[c++]=null;var S=os[c];if(os[c++]=null,g!==null&&x!==null){var A=g.pending;A===null?x.next=x:(x.next=A.next,A.next=x),g.pending=x}S!==0&&I1(h,x,S)}}function pu(a,c,h,g){os[Ua++]=a,os[Ua++]=c,os[Ua++]=h,os[Ua++]=g,hm|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function fm(a,c,h,g){return pu(a,c,h,g),mu(a)}function Ko(a,c){return pu(a,null,null,c),mu(a)}function I1(a,c,h){a.lanes|=h;var g=a.alternate;g!==null&&(g.lanes|=h);for(var x=!1,S=a.return;S!==null;)S.childLanes|=h,g=S.alternate,g!==null&&(g.childLanes|=h),S.tag===22&&(a=S.stateNode,a===null||a._visibility&1||(x=!0)),a=S,S=S.return;return a.tag===3?(S=a.stateNode,x&&c!==null&&(x=31-Ut(h),a=S.hiddenUpdates,g=a[x],g===null?a[x]=[c]:g.push(c),c.lane=h|536870912),S):null}function mu(a){if(50<Mc)throw Mc=0,Sg=null,Error(i(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var za={};function YO(a,c,h,g){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(a,c,h,g){return new YO(a,c,h,g)}function pm(a){return a=a.prototype,!(!a||!a.isReactComponent)}function or(a,c){var h=a.alternate;return h===null?(h=Gn(a.tag,c,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=c,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,c=a.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function R1(a,c){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,c=h.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function gu(a,c,h,g,x,S){var A=0;if(g=a,typeof a=="function")pm(a)&&(A=1);else if(typeof a=="string")A=e5(a,h,X.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case L:return a=Gn(31,h,c,x),a.elementType=L,a.lanes=S,a;case w:return Yo(h.children,x,S,c);case E:A=8,x|=24;break;case T:return a=Gn(12,h,c,x|2),a.elementType=T,a.lanes=S,a;case R:return a=Gn(13,h,c,x),a.elementType=R,a.lanes=S,a;case M:return a=Gn(19,h,c,x),a.elementType=M,a.lanes=S,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case _:A=10;break e;case k:A=9;break e;case O:A=11;break e;case P:A=14;break e;case N:A=16,g=null;break e}A=29,h=Error(i(130,a===null?"null":typeof a,"")),g=null}return c=Gn(A,h,c,x),c.elementType=a,c.type=g,c.lanes=S,c}function Yo(a,c,h,g){return a=Gn(7,a,g,c),a.lanes=h,a}function mm(a,c,h){return a=Gn(6,a,null,c),a.lanes=h,a}function L1(a){var c=Gn(18,null,null,0);return c.stateNode=a,c}function gm(a,c,h){return c=Gn(4,a.children!==null?a.children:[],a.key,c),c.lanes=h,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var D1=new WeakMap;function as(a,c){if(typeof a=="object"&&a!==null){var h=D1.get(a);return h!==void 0?h:(c={value:a,source:c,stack:we(c)},D1.set(a,c),c)}return{value:a,source:c,stack:we(c)}}var Ha=[],Ga=0,bu=null,mc=0,ls=[],cs=0,Qr=null,js=1,Bs="";function ar(a,c){Ha[Ga++]=mc,Ha[Ga++]=bu,bu=a,mc=c}function O1(a,c,h){ls[cs++]=js,ls[cs++]=Bs,ls[cs++]=Qr,Qr=a;var g=js;a=Bs;var x=32-Ut(g)-1;g&=~(1<<x),h+=1;var S=32-Ut(c)+x;if(30<S){var A=x-x%5;S=(g&(1<<A)-1).toString(32),g>>=A,x-=A,js=1<<32-Ut(c)+x|h<<x|g,Bs=S+a}else js=1<<S|h<<x|g,Bs=a}function bm(a){a.return!==null&&(ar(a,1),O1(a,1,0))}function vm(a){for(;a===bu;)bu=Ha[--Ga],Ha[Ga]=null,mc=Ha[--Ga],Ha[Ga]=null;for(;a===Qr;)Qr=ls[--cs],ls[cs]=null,Bs=ls[--cs],ls[cs]=null,js=ls[--cs],ls[cs]=null}function N1(a,c){ls[cs++]=js,ls[cs++]=Bs,ls[cs++]=Qr,js=c.id,Bs=c.overflow,Qr=a}var ln=null,mi=null,Nt=!1,Zr=null,ds=!1,ym=Error(i(519));function Jr(a){var c=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gc(as(c,a)),ym}function P1(a){var c=a.stateNode,h=a.type,g=a.memoizedProps;switch(c[te]=a,c[Re]=g,h){case"dialog":Lt("cancel",c),Lt("close",c);break;case"iframe":case"object":case"embed":Lt("load",c);break;case"video":case"audio":for(h=0;h<Fc.length;h++)Lt(Fc[h],c);break;case"source":Lt("error",c);break;case"img":case"image":case"link":Lt("error",c),Lt("load",c);break;case"details":Lt("toggle",c);break;case"input":Lt("invalid",c),Kx(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Lt("invalid",c);break;case"textarea":Lt("invalid",c),Xx(c,g.value,g.defaultValue,g.children)}h=g.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||g.suppressHydrationWarning===!0||ZS(c.textContent,h)?(g.popover!=null&&(Lt("beforetoggle",c),Lt("toggle",c)),g.onScroll!=null&&Lt("scroll",c),g.onScrollEnd!=null&&Lt("scrollend",c),g.onClick!=null&&(c.onclick=sr),c=!0):c=!1,c||Jr(a,!0)}function M1(a){for(ln=a.return;ln;)switch(ln.tag){case 5:case 31:case 13:ds=!1;return;case 27:case 3:ds=!0;return;default:ln=ln.return}}function Va(a){if(a!==ln)return!1;if(!Nt)return M1(a),Nt=!0,!1;var c=a.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||$g(a.type,a.memoizedProps)),h=!h),h&&mi&&Jr(a),M1(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));mi=aE(a)}else if(c===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));mi=aE(a)}else c===27?(c=mi,po(a.type)?(a=zg,zg=null,mi=a):mi=c):mi=ln?hs(a.stateNode.nextSibling):null;return!0}function Xo(){mi=ln=null,Nt=!1}function xm(){var a=Zr;return a!==null&&(Nn===null?Nn=a:Nn.push.apply(Nn,a),Zr=null),a}function gc(a){Zr===null?Zr=[a]:Zr.push(a)}var wm=j(null),Qo=null,lr=null;function eo(a,c,h){K(wm,c._currentValue),c._currentValue=h}function cr(a){a._currentValue=wm.current,H(wm)}function Sm(a,c,h){for(;a!==null;){var g=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),a===h)break;a=a.return}}function Em(a,c,h,g){var x=a.child;for(x!==null&&(x.return=a);x!==null;){var S=x.dependencies;if(S!==null){var A=x.child;S=S.firstContext;e:for(;S!==null;){var F=S;S=x;for(var W=0;W<c.length;W++)if(F.context===c[W]){S.lanes|=h,F=S.alternate,F!==null&&(F.lanes|=h),Sm(S.return,h,a),g||(A=null);break e}S=F.next}}else if(x.tag===18){if(A=x.return,A===null)throw Error(i(341));A.lanes|=h,S=A.alternate,S!==null&&(S.lanes|=h),Sm(A,h,a),A=null}else A=x.child;if(A!==null)A.return=x;else for(A=x;A!==null;){if(A===a){A=null;break}if(x=A.sibling,x!==null){x.return=A.return,A=x;break}A=A.return}x=A}}function qa(a,c,h,g){a=null;for(var x=c,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var A=x.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var F=x.type;Hn(x.pendingProps.value,A.value)||(a!==null?a.push(F):a=[F])}}else if(x===ge.current){if(A=x.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(a!==null?a.push(Hc):a=[Hc])}x=x.return}a!==null&&Em(c,a,h,g),c.flags|=262144}function vu(a){for(a=a.firstContext;a!==null;){if(!Hn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Zo(a){Qo=a,lr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function cn(a){return $1(Qo,a)}function yu(a,c){return Qo===null&&Zo(a),$1(a,c)}function $1(a,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},lr===null){if(a===null)throw Error(i(308));lr=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else lr=lr.next=c;return h}var XO=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(h,g){a.push(g)}};this.abort=function(){c.aborted=!0,a.forEach(function(h){return h()})}},QO=n.unstable_scheduleCallback,ZO=n.unstable_NormalPriority,Fi={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tm(){return{controller:new XO,data:new Map,refCount:0}}function bc(a){a.refCount--,a.refCount===0&&QO(ZO,function(){a.controller.abort()})}var vc=null,km=0,Wa=0,Ka=null;function JO(a,c){if(vc===null){var h=vc=[];km=0,Wa=Cg(),Ka={status:"pending",value:void 0,then:function(g){h.push(g)}}}return km++,c.then(F1,F1),c}function F1(){if(--km===0&&vc!==null){Ka!==null&&(Ka.status="fulfilled");var a=vc;vc=null,Wa=0,Ka=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function eN(a,c){var h=[],g={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return a.then(function(){g.status="fulfilled",g.value=c;for(var x=0;x<h.length;x++)(0,h[x])(c)},function(x){for(g.status="rejected",g.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),g}var j1=z.S;z.S=function(a,c){SS=He(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&JO(a,c),j1!==null&&j1(a,c)};var Jo=j(null);function _m(){var a=Jo.current;return a!==null?a:li.pooledCache}function xu(a,c){c===null?K(Jo,Jo.current):K(Jo,c.pool)}function B1(){var a=_m();return a===null?null:{parent:Fi._currentValue,pool:a}}var Ya=Error(i(460)),Am=Error(i(474)),wu=Error(i(542)),Su={then:function(){}};function U1(a){return a=a.status,a==="fulfilled"||a==="rejected"}function z1(a,c,h){switch(h=a[h],h===void 0?a.push(c):h!==c&&(c.then(sr,sr),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,G1(a),a;default:if(typeof c.status=="string")c.then(sr,sr);else{if(a=li,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=c,a.status="pending",a.then(function(g){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=g}},function(g){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,G1(a),a}throw ta=c,Ya}}function ea(a){try{var c=a._init;return c(a._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(ta=h,Ya):h}}var ta=null;function H1(){if(ta===null)throw Error(i(459));var a=ta;return ta=null,a}function G1(a){if(a===Ya||a===wu)throw Error(i(483))}var Xa=null,yc=0;function Eu(a){var c=yc;return yc+=1,Xa===null&&(Xa=[]),z1(Xa,a,c)}function xc(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function Tu(a,c){throw c.$$typeof===b?Error(i(525)):(a=Object.prototype.toString.call(c),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function V1(a){function c(ne,Q){if(a){var ce=ne.deletions;ce===null?(ne.deletions=[Q],ne.flags|=16):ce.push(Q)}}function h(ne,Q){if(!a)return null;for(;Q!==null;)c(ne,Q),Q=Q.sibling;return null}function g(ne){for(var Q=new Map;ne!==null;)ne.key!==null?Q.set(ne.key,ne):Q.set(ne.index,ne),ne=ne.sibling;return Q}function x(ne,Q){return ne=or(ne,Q),ne.index=0,ne.sibling=null,ne}function S(ne,Q,ce){return ne.index=ce,a?(ce=ne.alternate,ce!==null?(ce=ce.index,ce<Q?(ne.flags|=67108866,Q):ce):(ne.flags|=67108866,Q)):(ne.flags|=1048576,Q)}function A(ne){return a&&ne.alternate===null&&(ne.flags|=67108866),ne}function F(ne,Q,ce,ye){return Q===null||Q.tag!==6?(Q=mm(ce,ne.mode,ye),Q.return=ne,Q):(Q=x(Q,ce),Q.return=ne,Q)}function W(ne,Q,ce,ye){var Je=ce.type;return Je===w?be(ne,Q,ce.props.children,ye,ce.key):Q!==null&&(Q.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===N&&ea(Je)===Q.type)?(Q=x(Q,ce.props),xc(Q,ce),Q.return=ne,Q):(Q=gu(ce.type,ce.key,ce.props,null,ne.mode,ye),xc(Q,ce),Q.return=ne,Q)}function de(ne,Q,ce,ye){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ce.containerInfo||Q.stateNode.implementation!==ce.implementation?(Q=gm(ce,ne.mode,ye),Q.return=ne,Q):(Q=x(Q,ce.children||[]),Q.return=ne,Q)}function be(ne,Q,ce,ye,Je){return Q===null||Q.tag!==7?(Q=Yo(ce,ne.mode,ye,Je),Q.return=ne,Q):(Q=x(Q,ce),Q.return=ne,Q)}function xe(ne,Q,ce){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=mm(""+Q,ne.mode,ce),Q.return=ne,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case v:return ce=gu(Q.type,Q.key,Q.props,null,ne.mode,ce),xc(ce,Q),ce.return=ne,ce;case y:return Q=gm(Q,ne.mode,ce),Q.return=ne,Q;case N:return Q=ea(Q),xe(ne,Q,ce)}if(se(Q)||U(Q))return Q=Yo(Q,ne.mode,ce,null),Q.return=ne,Q;if(typeof Q.then=="function")return xe(ne,Eu(Q),ce);if(Q.$$typeof===_)return xe(ne,yu(ne,Q),ce);Tu(ne,Q)}return null}function he(ne,Q,ce,ye){var Je=Q!==null?Q.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Je!==null?null:F(ne,Q,""+ce,ye);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case v:return ce.key===Je?W(ne,Q,ce,ye):null;case y:return ce.key===Je?de(ne,Q,ce,ye):null;case N:return ce=ea(ce),he(ne,Q,ce,ye)}if(se(ce)||U(ce))return Je!==null?null:be(ne,Q,ce,ye,null);if(typeof ce.then=="function")return he(ne,Q,Eu(ce),ye);if(ce.$$typeof===_)return he(ne,Q,yu(ne,ce),ye);Tu(ne,ce)}return null}function me(ne,Q,ce,ye,Je){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ne=ne.get(ce)||null,F(Q,ne,""+ye,Je);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case v:return ne=ne.get(ye.key===null?ce:ye.key)||null,W(Q,ne,ye,Je);case y:return ne=ne.get(ye.key===null?ce:ye.key)||null,de(Q,ne,ye,Je);case N:return ye=ea(ye),me(ne,Q,ce,ye,Je)}if(se(ye)||U(ye))return ne=ne.get(ce)||null,be(Q,ne,ye,Je,null);if(typeof ye.then=="function")return me(ne,Q,ce,Eu(ye),Je);if(ye.$$typeof===_)return me(ne,Q,ce,yu(Q,ye),Je);Tu(Q,ye)}return null}function Ue(ne,Q,ce,ye){for(var Je=null,Ft=null,Ve=Q,St=Q=0,Ot=null;Ve!==null&&St<ce.length;St++){Ve.index>St?(Ot=Ve,Ve=null):Ot=Ve.sibling;var jt=he(ne,Ve,ce[St],ye);if(jt===null){Ve===null&&(Ve=Ot);break}a&&Ve&&jt.alternate===null&&c(ne,Ve),Q=S(jt,Q,St),Ft===null?Je=jt:Ft.sibling=jt,Ft=jt,Ve=Ot}if(St===ce.length)return h(ne,Ve),Nt&&ar(ne,St),Je;if(Ve===null){for(;St<ce.length;St++)Ve=xe(ne,ce[St],ye),Ve!==null&&(Q=S(Ve,Q,St),Ft===null?Je=Ve:Ft.sibling=Ve,Ft=Ve);return Nt&&ar(ne,St),Je}for(Ve=g(Ve);St<ce.length;St++)Ot=me(Ve,ne,St,ce[St],ye),Ot!==null&&(a&&Ot.alternate!==null&&Ve.delete(Ot.key===null?St:Ot.key),Q=S(Ot,Q,St),Ft===null?Je=Ot:Ft.sibling=Ot,Ft=Ot);return a&&Ve.forEach(function(yo){return c(ne,yo)}),Nt&&ar(ne,St),Je}function it(ne,Q,ce,ye){if(ce==null)throw Error(i(151));for(var Je=null,Ft=null,Ve=Q,St=Q=0,Ot=null,jt=ce.next();Ve!==null&&!jt.done;St++,jt=ce.next()){Ve.index>St?(Ot=Ve,Ve=null):Ot=Ve.sibling;var yo=he(ne,Ve,jt.value,ye);if(yo===null){Ve===null&&(Ve=Ot);break}a&&Ve&&yo.alternate===null&&c(ne,Ve),Q=S(yo,Q,St),Ft===null?Je=yo:Ft.sibling=yo,Ft=yo,Ve=Ot}if(jt.done)return h(ne,Ve),Nt&&ar(ne,St),Je;if(Ve===null){for(;!jt.done;St++,jt=ce.next())jt=xe(ne,jt.value,ye),jt!==null&&(Q=S(jt,Q,St),Ft===null?Je=jt:Ft.sibling=jt,Ft=jt);return Nt&&ar(ne,St),Je}for(Ve=g(Ve);!jt.done;St++,jt=ce.next())jt=me(Ve,ne,St,jt.value,ye),jt!==null&&(a&&jt.alternate!==null&&Ve.delete(jt.key===null?St:jt.key),Q=S(jt,Q,St),Ft===null?Je=jt:Ft.sibling=jt,Ft=jt);return a&&Ve.forEach(function(u5){return c(ne,u5)}),Nt&&ar(ne,St),Je}function oi(ne,Q,ce,ye){if(typeof ce=="object"&&ce!==null&&ce.type===w&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case v:e:{for(var Je=ce.key;Q!==null;){if(Q.key===Je){if(Je=ce.type,Je===w){if(Q.tag===7){h(ne,Q.sibling),ye=x(Q,ce.props.children),ye.return=ne,ne=ye;break e}}else if(Q.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===N&&ea(Je)===Q.type){h(ne,Q.sibling),ye=x(Q,ce.props),xc(ye,ce),ye.return=ne,ne=ye;break e}h(ne,Q);break}else c(ne,Q);Q=Q.sibling}ce.type===w?(ye=Yo(ce.props.children,ne.mode,ye,ce.key),ye.return=ne,ne=ye):(ye=gu(ce.type,ce.key,ce.props,null,ne.mode,ye),xc(ye,ce),ye.return=ne,ne=ye)}return A(ne);case y:e:{for(Je=ce.key;Q!==null;){if(Q.key===Je)if(Q.tag===4&&Q.stateNode.containerInfo===ce.containerInfo&&Q.stateNode.implementation===ce.implementation){h(ne,Q.sibling),ye=x(Q,ce.children||[]),ye.return=ne,ne=ye;break e}else{h(ne,Q);break}else c(ne,Q);Q=Q.sibling}ye=gm(ce,ne.mode,ye),ye.return=ne,ne=ye}return A(ne);case N:return ce=ea(ce),oi(ne,Q,ce,ye)}if(se(ce))return Ue(ne,Q,ce,ye);if(U(ce)){if(Je=U(ce),typeof Je!="function")throw Error(i(150));return ce=Je.call(ce),it(ne,Q,ce,ye)}if(typeof ce.then=="function")return oi(ne,Q,Eu(ce),ye);if(ce.$$typeof===_)return oi(ne,Q,yu(ne,ce),ye);Tu(ne,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,Q!==null&&Q.tag===6?(h(ne,Q.sibling),ye=x(Q,ce),ye.return=ne,ne=ye):(h(ne,Q),ye=mm(ce,ne.mode,ye),ye.return=ne,ne=ye),A(ne)):h(ne,Q)}return function(ne,Q,ce,ye){try{yc=0;var Je=oi(ne,Q,ce,ye);return Xa=null,Je}catch(Ve){if(Ve===Ya||Ve===wu)throw Ve;var Ft=Gn(29,Ve,null,ne.mode);return Ft.lanes=ye,Ft.return=ne,Ft}finally{}}}var ia=V1(!0),q1=V1(!1),to=!1;function Cm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Im(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function io(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function no(a,c,h){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(zt&2)!==0){var x=g.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),g.pending=c,c=mu(a),I1(a,null,h),c}return pu(a,g,c,h),mu(a)}function wc(a,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var g=c.lanes;g&=a.pendingLanes,h|=g,c.lanes=h,Zi(a,h)}}function Rm(a,c){var h=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var x=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var A={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};S===null?x=S=A:S=S.next=A,h=h.next}while(h!==null);S===null?x=S=c:S=S.next=c}else x=S=c;h={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:g.shared,callbacks:g.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=c}var Lm=!1;function Sc(){if(Lm){var a=Ka;if(a!==null)throw a}}function Ec(a,c,h,g){Lm=!1;var x=a.updateQueue;to=!1;var S=x.firstBaseUpdate,A=x.lastBaseUpdate,F=x.shared.pending;if(F!==null){x.shared.pending=null;var W=F,de=W.next;W.next=null,A===null?S=de:A.next=de,A=W;var be=a.alternate;be!==null&&(be=be.updateQueue,F=be.lastBaseUpdate,F!==A&&(F===null?be.firstBaseUpdate=de:F.next=de,be.lastBaseUpdate=W))}if(S!==null){var xe=x.baseState;A=0,be=de=W=null,F=S;do{var he=F.lane&-536870913,me=he!==F.lane;if(me?(Dt&he)===he:(g&he)===he){he!==0&&he===Wa&&(Lm=!0),be!==null&&(be=be.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var Ue=a,it=F;he=c;var oi=h;switch(it.tag){case 1:if(Ue=it.payload,typeof Ue=="function"){xe=Ue.call(oi,xe,he);break e}xe=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=it.payload,he=typeof Ue=="function"?Ue.call(oi,xe,he):Ue,he==null)break e;xe=p({},xe,he);break e;case 2:to=!0}}he=F.callback,he!==null&&(a.flags|=64,me&&(a.flags|=8192),me=x.callbacks,me===null?x.callbacks=[he]:me.push(he))}else me={lane:he,tag:F.tag,payload:F.payload,callback:F.callback,next:null},be===null?(de=be=me,W=xe):be=be.next=me,A|=he;if(F=F.next,F===null){if(F=x.shared.pending,F===null)break;me=F,F=me.next,me.next=null,x.lastBaseUpdate=me,x.shared.pending=null}}while(!0);be===null&&(W=xe),x.baseState=W,x.firstBaseUpdate=de,x.lastBaseUpdate=be,S===null&&(x.shared.lanes=0),lo|=A,a.lanes=A,a.memoizedState=xe}}function W1(a,c){if(typeof a!="function")throw Error(i(191,a));a.call(c)}function K1(a,c){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)W1(h[a],c)}var Qa=j(null),ku=j(0);function Y1(a,c){a=vr,K(ku,a),K(Qa,c),vr=a|c.baseLanes}function Dm(){K(ku,vr),K(Qa,Qa.current)}function Om(){vr=ku.current,H(Qa),H(ku)}var Vn=j(null),us=null;function so(a){var c=a.alternate;K(Di,Di.current&1),K(Vn,a),us===null&&(c===null||Qa.current!==null||c.memoizedState!==null)&&(us=a)}function Nm(a){K(Di,Di.current),K(Vn,a),us===null&&(us=a)}function X1(a){a.tag===22?(K(Di,Di.current),K(Vn,a),us===null&&(us=a)):ro()}function ro(){K(Di,Di.current),K(Vn,Vn.current)}function qn(a){H(Vn),us===a&&(us=null),H(Di)}var Di=j(0);function _u(a){for(var c=a;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Bg(h)||Ug(h)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var dr=0,wt=null,si=null,ji=null,Au=!1,Za=!1,na=!1,Cu=0,Tc=0,Ja=null,tN=0;function _i(){throw Error(i(321))}function Pm(a,c){if(c===null)return!1;for(var h=0;h<c.length&&h<a.length;h++)if(!Hn(a[h],c[h]))return!1;return!0}function Mm(a,c,h,g,x,S){return dr=S,wt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,z.H=a===null||a.memoizedState===null?Ow:Qm,na=!1,S=h(g,x),na=!1,Za&&(S=Z1(c,h,g,x)),Q1(a),S}function Q1(a){z.H=Ac;var c=si!==null&&si.next!==null;if(dr=0,ji=si=wt=null,Au=!1,Tc=0,Ja=null,c)throw Error(i(300));a===null||Bi||(a=a.dependencies,a!==null&&vu(a)&&(Bi=!0))}function Z1(a,c,h,g){wt=a;var x=0;do{if(Za&&(Ja=null),Tc=0,Za=!1,25<=x)throw Error(i(301));if(x+=1,ji=si=null,a.updateQueue!=null){var S=a.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}z.H=Nw,S=c(h,g)}while(Za);return S}function iN(){var a=z.H,c=a.useState()[0];return c=typeof c.then=="function"?kc(c):c,a=a.useState()[0],(si!==null?si.memoizedState:null)!==a&&(wt.flags|=1024),c}function $m(){var a=Cu!==0;return Cu=0,a}function Fm(a,c,h){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~h}function jm(a){if(Au){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Au=!1}dr=0,ji=si=wt=null,Za=!1,Tc=Cu=0,Ja=null}function En(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ji===null?wt.memoizedState=ji=a:ji=ji.next=a,ji}function Oi(){if(si===null){var a=wt.alternate;a=a!==null?a.memoizedState:null}else a=si.next;var c=ji===null?wt.memoizedState:ji.next;if(c!==null)ji=c,si=a;else{if(a===null)throw wt.alternate===null?Error(i(467)):Error(i(310));si=a,a={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},ji===null?wt.memoizedState=ji=a:ji=ji.next=a}return ji}function Iu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kc(a){var c=Tc;return Tc+=1,Ja===null&&(Ja=[]),a=z1(Ja,a,c),c=wt,(ji===null?c.memoizedState:ji.next)===null&&(c=c.alternate,z.H=c===null||c.memoizedState===null?Ow:Qm),a}function Ru(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return kc(a);if(a.$$typeof===_)return cn(a)}throw Error(i(438,String(a)))}function Bm(a){var c=null,h=wt.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var g=wt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=Iu(),wt.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(a),g=0;g<a;g++)h[g]=D;return c.index++,h}function ur(a,c){return typeof c=="function"?c(a):c}function Lu(a){var c=Oi();return Um(c,si,a)}function Um(a,c,h){var g=a.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=h;var x=a.baseQueue,S=g.pending;if(S!==null){if(x!==null){var A=x.next;x.next=S.next,S.next=A}c.baseQueue=x=S,g.pending=null}if(S=a.baseState,x===null)a.memoizedState=S;else{c=x.next;var F=A=null,W=null,de=c,be=!1;do{var xe=de.lane&-536870913;if(xe!==de.lane?(Dt&xe)===xe:(dr&xe)===xe){var he=de.revertLane;if(he===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),xe===Wa&&(be=!0);else if((dr&he)===he){de=de.next,he===Wa&&(be=!0);continue}else xe={lane:0,revertLane:de.revertLane,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},W===null?(F=W=xe,A=S):W=W.next=xe,wt.lanes|=he,lo|=he;xe=de.action,na&&h(S,xe),S=de.hasEagerState?de.eagerState:h(S,xe)}else he={lane:xe,revertLane:de.revertLane,gesture:de.gesture,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},W===null?(F=W=he,A=S):W=W.next=he,wt.lanes|=xe,lo|=xe;de=de.next}while(de!==null&&de!==c);if(W===null?A=S:W.next=F,!Hn(S,a.memoizedState)&&(Bi=!0,be&&(h=Ka,h!==null)))throw h;a.memoizedState=S,a.baseState=A,a.baseQueue=W,g.lastRenderedState=S}return x===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function zm(a){var c=Oi(),h=c.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=a;var g=h.dispatch,x=h.pending,S=c.memoizedState;if(x!==null){h.pending=null;var A=x=x.next;do S=a(S,A.action),A=A.next;while(A!==x);Hn(S,c.memoizedState)||(Bi=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),h.lastRenderedState=S}return[S,g]}function J1(a,c,h){var g=wt,x=Oi(),S=Nt;if(S){if(h===void 0)throw Error(i(407));h=h()}else h=c();var A=!Hn((si||x).memoizedState,h);if(A&&(x.memoizedState=h,Bi=!0),x=x.queue,Vm(iw.bind(null,g,x,a),[a]),x.getSnapshot!==c||A||ji!==null&&ji.memoizedState.tag&1){if(g.flags|=2048,el(9,{destroy:void 0},tw.bind(null,g,x,h,c),null),li===null)throw Error(i(349));S||(dr&127)!==0||ew(g,c,h)}return h}function ew(a,c,h){a.flags|=16384,a={getSnapshot:c,value:h},c=wt.updateQueue,c===null?(c=Iu(),wt.updateQueue=c,c.stores=[a]):(h=c.stores,h===null?c.stores=[a]:h.push(a))}function tw(a,c,h,g){c.value=h,c.getSnapshot=g,nw(c)&&sw(a)}function iw(a,c,h){return h(function(){nw(c)&&sw(a)})}function nw(a){var c=a.getSnapshot;a=a.value;try{var h=c();return!Hn(a,h)}catch{return!0}}function sw(a){var c=Ko(a,2);c!==null&&Pn(c,a,2)}function Hm(a){var c=En();if(typeof a=="function"){var h=a;if(a=h(),na){Xt(!0);try{h()}finally{Xt(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:a},c}function rw(a,c,h,g){return a.baseState=h,Um(a,si,typeof g=="function"?g:ur)}function nN(a,c,h,g,x){if(Nu(a))throw Error(i(485));if(a=c.action,a!==null){var S={payload:x,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){S.listeners.push(A)}};z.T!==null?h(!0):S.isTransition=!1,g(S),h=c.pending,h===null?(S.next=c.pending=S,ow(c,S)):(S.next=h.next,c.pending=h.next=S)}}function ow(a,c){var h=c.action,g=c.payload,x=a.state;if(c.isTransition){var S=z.T,A={};z.T=A;try{var F=h(x,g),W=z.S;W!==null&&W(A,F),aw(a,c,F)}catch(de){Gm(a,c,de)}finally{S!==null&&A.types!==null&&(S.types=A.types),z.T=S}}else try{S=h(x,g),aw(a,c,S)}catch(de){Gm(a,c,de)}}function aw(a,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(g){lw(a,c,g)},function(g){return Gm(a,c,g)}):lw(a,c,h)}function lw(a,c,h){c.status="fulfilled",c.value=h,cw(c),a.state=h,c=a.pending,c!==null&&(h=c.next,h===c?a.pending=null:(h=h.next,c.next=h,ow(a,h)))}function Gm(a,c,h){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=h,cw(c),c=c.next;while(c!==g)}a.action=null}function cw(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function dw(a,c){return c}function uw(a,c){if(Nt){var h=li.formState;if(h!==null){e:{var g=wt;if(Nt){if(mi){t:{for(var x=mi,S=ds;x.nodeType!==8;){if(!S){x=null;break t}if(x=hs(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){mi=hs(x.nextSibling),g=x.data==="F!";break e}}Jr(g)}g=!1}g&&(c=h[0])}}return h=En(),h.memoizedState=h.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dw,lastRenderedState:c},h.queue=g,h=Rw.bind(null,wt,g),g.dispatch=h,g=Hm(!1),S=Xm.bind(null,wt,!1,g.queue),g=En(),x={state:c,dispatch:null,action:a,pending:null},g.queue=x,h=nN.bind(null,wt,x,S,h),x.dispatch=h,g.memoizedState=a,[c,h,!1]}function hw(a){var c=Oi();return fw(c,si,a)}function fw(a,c,h){if(c=Um(a,c,dw)[0],a=Lu(ur)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=kc(c)}catch(A){throw A===Ya?wu:A}else g=c;c=Oi();var x=c.queue,S=x.dispatch;return h!==c.memoizedState&&(wt.flags|=2048,el(9,{destroy:void 0},sN.bind(null,x,h),null)),[g,S,a]}function sN(a,c){a.action=c}function pw(a){var c=Oi(),h=si;if(h!==null)return fw(c,h,a);Oi(),c=c.memoizedState,h=Oi();var g=h.queue.dispatch;return h.memoizedState=a,[c,g,!1]}function el(a,c,h,g){return a={tag:a,create:h,deps:g,inst:c,next:null},c=wt.updateQueue,c===null&&(c=Iu(),wt.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=a.next=a:(g=h.next,h.next=a,a.next=g,c.lastEffect=a),a}function mw(){return Oi().memoizedState}function Du(a,c,h,g){var x=En();wt.flags|=a,x.memoizedState=el(1|c,{destroy:void 0},h,g===void 0?null:g)}function Ou(a,c,h,g){var x=Oi();g=g===void 0?null:g;var S=x.memoizedState.inst;si!==null&&g!==null&&Pm(g,si.memoizedState.deps)?x.memoizedState=el(c,S,h,g):(wt.flags|=a,x.memoizedState=el(1|c,S,h,g))}function gw(a,c){Du(8390656,8,a,c)}function Vm(a,c){Ou(2048,8,a,c)}function rN(a){wt.flags|=4;var c=wt.updateQueue;if(c===null)c=Iu(),wt.updateQueue=c,c.events=[a];else{var h=c.events;h===null?c.events=[a]:h.push(a)}}function bw(a){var c=Oi().memoizedState;return rN({ref:c,nextImpl:a}),function(){if((zt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}function vw(a,c){return Ou(4,2,a,c)}function yw(a,c){return Ou(4,4,a,c)}function xw(a,c){if(typeof c=="function"){a=a();var h=c(a);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function ww(a,c,h){h=h!=null?h.concat([a]):null,Ou(4,4,xw.bind(null,c,a),h)}function qm(){}function Sw(a,c){var h=Oi();c=c===void 0?null:c;var g=h.memoizedState;return c!==null&&Pm(c,g[1])?g[0]:(h.memoizedState=[a,c],a)}function Ew(a,c){var h=Oi();c=c===void 0?null:c;var g=h.memoizedState;if(c!==null&&Pm(c,g[1]))return g[0];if(g=a(),na){Xt(!0);try{a()}finally{Xt(!1)}}return h.memoizedState=[g,c],g}function Wm(a,c,h){return h===void 0||(dr&1073741824)!==0&&(Dt&261930)===0?a.memoizedState=c:(a.memoizedState=h,a=TS(),wt.lanes|=a,lo|=a,h)}function Tw(a,c,h,g){return Hn(h,c)?h:Qa.current!==null?(a=Wm(a,h,g),Hn(a,c)||(Bi=!0),a):(dr&42)===0||(dr&1073741824)!==0&&(Dt&261930)===0?(Bi=!0,a.memoizedState=h):(a=TS(),wt.lanes|=a,lo|=a,c)}function kw(a,c,h,g,x){var S=Y.p;Y.p=S!==0&&8>S?S:8;var A=z.T,F={};z.T=F,Xm(a,!1,c,h);try{var W=x(),de=z.S;if(de!==null&&de(F,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var be=eN(W,g);_c(a,c,be,Yn(a))}else _c(a,c,g,Yn(a))}catch(xe){_c(a,c,{then:function(){},status:"rejected",reason:xe},Yn())}finally{Y.p=S,A!==null&&F.types!==null&&(A.types=F.types),z.T=A}}function oN(){}function Km(a,c,h,g){if(a.tag!==5)throw Error(i(476));var x=_w(a).queue;kw(a,x,c,V,h===null?oN:function(){return Aw(a),h(g)})}function _w(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:V},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:h},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function Aw(a){var c=_w(a);c.next===null&&(c=a.alternate.memoizedState),_c(a,c.next.queue,{},Yn())}function Ym(){return cn(Hc)}function Cw(){return Oi().memoizedState}function Iw(){return Oi().memoizedState}function aN(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var h=Yn();a=io(h);var g=no(c,a,h);g!==null&&(Pn(g,c,h),wc(g,c,h)),c={cache:Tm()},a.payload=c;return}c=c.return}}function lN(a,c,h){var g=Yn();h={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Nu(a)?Lw(c,h):(h=fm(a,c,h,g),h!==null&&(Pn(h,a,g),Dw(h,c,g)))}function Rw(a,c,h){var g=Yn();_c(a,c,h,g)}function _c(a,c,h,g){var x={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Nu(a))Lw(c,x);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var A=c.lastRenderedState,F=S(A,h);if(x.hasEagerState=!0,x.eagerState=F,Hn(F,A))return pu(a,c,x,0),li===null&&fu(),!1}catch{}finally{}if(h=fm(a,c,x,g),h!==null)return Pn(h,a,g),Dw(h,c,g),!0}return!1}function Xm(a,c,h,g){if(g={lane:2,revertLane:Cg(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Nu(a)){if(c)throw Error(i(479))}else c=fm(a,h,g,2),c!==null&&Pn(c,a,2)}function Nu(a){var c=a.alternate;return a===wt||c!==null&&c===wt}function Lw(a,c){Za=Au=!0;var h=a.pending;h===null?c.next=c:(c.next=h.next,h.next=c),a.pending=c}function Dw(a,c,h){if((h&4194048)!==0){var g=c.lanes;g&=a.pendingLanes,h|=g,c.lanes=h,Zi(a,h)}}var Ac={readContext:cn,use:Ru,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useLayoutEffect:_i,useInsertionEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useSyncExternalStore:_i,useId:_i,useHostTransitionStatus:_i,useFormState:_i,useActionState:_i,useOptimistic:_i,useMemoCache:_i,useCacheRefresh:_i};Ac.useEffectEvent=_i;var Ow={readContext:cn,use:Ru,useCallback:function(a,c){return En().memoizedState=[a,c===void 0?null:c],a},useContext:cn,useEffect:gw,useImperativeHandle:function(a,c,h){h=h!=null?h.concat([a]):null,Du(4194308,4,xw.bind(null,c,a),h)},useLayoutEffect:function(a,c){return Du(4194308,4,a,c)},useInsertionEffect:function(a,c){Du(4,2,a,c)},useMemo:function(a,c){var h=En();c=c===void 0?null:c;var g=a();if(na){Xt(!0);try{a()}finally{Xt(!1)}}return h.memoizedState=[g,c],g},useReducer:function(a,c,h){var g=En();if(h!==void 0){var x=h(c);if(na){Xt(!0);try{h(c)}finally{Xt(!1)}}}else x=c;return g.memoizedState=g.baseState=x,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:x},g.queue=a,a=a.dispatch=lN.bind(null,wt,a),[g.memoizedState,a]},useRef:function(a){var c=En();return a={current:a},c.memoizedState=a},useState:function(a){a=Hm(a);var c=a.queue,h=Rw.bind(null,wt,c);return c.dispatch=h,[a.memoizedState,h]},useDebugValue:qm,useDeferredValue:function(a,c){var h=En();return Wm(h,a,c)},useTransition:function(){var a=Hm(!1);return a=kw.bind(null,wt,a.queue,!0,!1),En().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,h){var g=wt,x=En();if(Nt){if(h===void 0)throw Error(i(407));h=h()}else{if(h=c(),li===null)throw Error(i(349));(Dt&127)!==0||ew(g,c,h)}x.memoizedState=h;var S={value:h,getSnapshot:c};return x.queue=S,gw(iw.bind(null,g,S,a),[a]),g.flags|=2048,el(9,{destroy:void 0},tw.bind(null,g,S,h,c),null),h},useId:function(){var a=En(),c=li.identifierPrefix;if(Nt){var h=Bs,g=js;h=(g&~(1<<32-Ut(g)-1)).toString(32)+h,c="_"+c+"R_"+h,h=Cu++,0<h&&(c+="H"+h.toString(32)),c+="_"}else h=tN++,c="_"+c+"r_"+h.toString(32)+"_";return a.memoizedState=c},useHostTransitionStatus:Ym,useFormState:uw,useActionState:uw,useOptimistic:function(a){var c=En();c.memoizedState=c.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=Xm.bind(null,wt,!0,h),h.dispatch=c,[a,c]},useMemoCache:Bm,useCacheRefresh:function(){return En().memoizedState=aN.bind(null,wt)},useEffectEvent:function(a){var c=En(),h={impl:a};return c.memoizedState=h,function(){if((zt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},Qm={readContext:cn,use:Ru,useCallback:Sw,useContext:cn,useEffect:Vm,useImperativeHandle:ww,useInsertionEffect:vw,useLayoutEffect:yw,useMemo:Ew,useReducer:Lu,useRef:mw,useState:function(){return Lu(ur)},useDebugValue:qm,useDeferredValue:function(a,c){var h=Oi();return Tw(h,si.memoizedState,a,c)},useTransition:function(){var a=Lu(ur)[0],c=Oi().memoizedState;return[typeof a=="boolean"?a:kc(a),c]},useSyncExternalStore:J1,useId:Cw,useHostTransitionStatus:Ym,useFormState:hw,useActionState:hw,useOptimistic:function(a,c){var h=Oi();return rw(h,si,a,c)},useMemoCache:Bm,useCacheRefresh:Iw};Qm.useEffectEvent=bw;var Nw={readContext:cn,use:Ru,useCallback:Sw,useContext:cn,useEffect:Vm,useImperativeHandle:ww,useInsertionEffect:vw,useLayoutEffect:yw,useMemo:Ew,useReducer:zm,useRef:mw,useState:function(){return zm(ur)},useDebugValue:qm,useDeferredValue:function(a,c){var h=Oi();return si===null?Wm(h,a,c):Tw(h,si.memoizedState,a,c)},useTransition:function(){var a=zm(ur)[0],c=Oi().memoizedState;return[typeof a=="boolean"?a:kc(a),c]},useSyncExternalStore:J1,useId:Cw,useHostTransitionStatus:Ym,useFormState:pw,useActionState:pw,useOptimistic:function(a,c){var h=Oi();return si!==null?rw(h,si,a,c):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:Bm,useCacheRefresh:Iw};Nw.useEffectEvent=bw;function Zm(a,c,h,g){c=a.memoizedState,h=h(g,c),h=h==null?c:p({},c,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Jm={enqueueSetState:function(a,c,h){a=a._reactInternals;var g=Yn(),x=io(g);x.payload=c,h!=null&&(x.callback=h),c=no(a,x,g),c!==null&&(Pn(c,a,g),wc(c,a,g))},enqueueReplaceState:function(a,c,h){a=a._reactInternals;var g=Yn(),x=io(g);x.tag=1,x.payload=c,h!=null&&(x.callback=h),c=no(a,x,g),c!==null&&(Pn(c,a,g),wc(c,a,g))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var h=Yn(),g=io(h);g.tag=2,c!=null&&(g.callback=c),c=no(a,g,h),c!==null&&(Pn(c,a,h),wc(c,a,h))}};function Pw(a,c,h,g,x,S,A){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,S,A):c.prototype&&c.prototype.isPureReactComponent?!fc(h,g)||!fc(x,S):!0}function Mw(a,c,h,g){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==a&&Jm.enqueueReplaceState(c,c.state,null)}function sa(a,c){var h=c;if("ref"in c){h={};for(var g in c)g!=="ref"&&(h[g]=c[g])}if(a=a.defaultProps){h===c&&(h=p({},h));for(var x in a)h[x]===void 0&&(h[x]=a[x])}return h}function $w(a){hu(a)}function Fw(a){console.error(a)}function jw(a){hu(a)}function Pu(a,c){try{var h=a.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function Bw(a,c,h){try{var g=a.onCaughtError;g(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function eg(a,c,h){return h=io(h),h.tag=3,h.payload={element:null},h.callback=function(){Pu(a,c)},h}function Uw(a){return a=io(a),a.tag=3,a}function zw(a,c,h,g){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var S=g.value;a.payload=function(){return x(S)},a.callback=function(){Bw(c,h,g)}}var A=h.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(a.callback=function(){Bw(c,h,g),typeof x!="function"&&(co===null?co=new Set([this]):co.add(this));var F=g.stack;this.componentDidCatch(g.value,{componentStack:F!==null?F:""})})}function cN(a,c,h,g,x){if(h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=h.alternate,c!==null&&qa(c,h,x,!0),h=Vn.current,h!==null){switch(h.tag){case 31:case 13:return us===null?Wu():h.alternate===null&&Ai===0&&(Ai=3),h.flags&=-257,h.flags|=65536,h.lanes=x,g===Su?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([g]):c.add(g),kg(a,g,x)),!1;case 22:return h.flags|=65536,g===Su?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([g]):h.add(g)),kg(a,g,x)),!1}throw Error(i(435,h.tag))}return kg(a,g,x),Wu(),!1}if(Nt)return c=Vn.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,g!==ym&&(a=Error(i(422),{cause:g}),gc(as(a,h)))):(g!==ym&&(c=Error(i(423),{cause:g}),gc(as(c,h))),a=a.current.alternate,a.flags|=65536,x&=-x,a.lanes|=x,g=as(g,h),x=eg(a.stateNode,g,x),Rm(a,x),Ai!==4&&(Ai=2)),!1;var S=Error(i(520),{cause:g});if(S=as(S,h),Pc===null?Pc=[S]:Pc.push(S),Ai!==4&&(Ai=2),c===null)return!0;g=as(g,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,a=x&-x,h.lanes|=a,a=eg(h.stateNode,g,a),Rm(h,a),!1;case 1:if(c=h.type,S=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(co===null||!co.has(S))))return h.flags|=65536,x&=-x,h.lanes|=x,x=Uw(x),zw(x,a,h,g),Rm(h,x),!1}h=h.return}while(h!==null);return!1}var tg=Error(i(461)),Bi=!1;function dn(a,c,h,g){c.child=a===null?q1(c,null,h,g):ia(c,a.child,h,g)}function Hw(a,c,h,g,x){h=h.render;var S=c.ref;if("ref"in g){var A={};for(var F in g)F!=="ref"&&(A[F]=g[F])}else A=g;return Zo(c),g=Mm(a,c,h,A,S,x),F=$m(),a!==null&&!Bi?(Fm(a,c,x),hr(a,c,x)):(Nt&&F&&bm(c),c.flags|=1,dn(a,c,g,x),c.child)}function Gw(a,c,h,g,x){if(a===null){var S=h.type;return typeof S=="function"&&!pm(S)&&S.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=S,Vw(a,c,S,g,x)):(a=gu(h.type,null,g,c,c.mode,x),a.ref=c.ref,a.return=c,c.child=a)}if(S=a.child,!cg(a,x)){var A=S.memoizedProps;if(h=h.compare,h=h!==null?h:fc,h(A,g)&&a.ref===c.ref)return hr(a,c,x)}return c.flags|=1,a=or(S,g),a.ref=c.ref,a.return=c,c.child=a}function Vw(a,c,h,g,x){if(a!==null){var S=a.memoizedProps;if(fc(S,g)&&a.ref===c.ref)if(Bi=!1,c.pendingProps=g=S,cg(a,x))(a.flags&131072)!==0&&(Bi=!0);else return c.lanes=a.lanes,hr(a,c,x)}return ig(a,c,h,g,x)}function qw(a,c,h,g){var x=g.children,S=a!==null?a.memoizedState:null;if(a===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((c.flags&128)!==0){if(S=S!==null?S.baseLanes|h:h,a!==null){for(g=c.child=a.child,x=0;g!==null;)x=x|g.lanes|g.childLanes,g=g.sibling;g=x&~S}else g=0,c.child=null;return Ww(a,c,S,h,g)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&xu(c,S!==null?S.cachePool:null),S!==null?Y1(c,S):Dm(),X1(c);else return g=c.lanes=536870912,Ww(a,c,S!==null?S.baseLanes|h:h,h,g)}else S!==null?(xu(c,S.cachePool),Y1(c,S),ro(),c.memoizedState=null):(a!==null&&xu(c,null),Dm(),ro());return dn(a,c,x,h),c.child}function Cc(a,c){return a!==null&&a.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function Ww(a,c,h,g,x){var S=_m();return S=S===null?null:{parent:Fi._currentValue,pool:S},c.memoizedState={baseLanes:h,cachePool:S},a!==null&&xu(c,null),Dm(),X1(c),a!==null&&qa(a,c,g,!0),c.childLanes=x,null}function Mu(a,c){return c=Fu({mode:c.mode,children:c.children},a.mode),c.ref=a.ref,a.child=c,c.return=a,c}function Kw(a,c,h){return ia(c,a.child,null,h),a=Mu(c,c.pendingProps),a.flags|=2,qn(c),c.memoizedState=null,a}function dN(a,c,h){var g=c.pendingProps,x=(c.flags&128)!==0;if(c.flags&=-129,a===null){if(Nt){if(g.mode==="hidden")return a=Mu(c,g),c.lanes=536870912,Cc(null,a);if(Nm(c),(a=mi)?(a=oE(a,ds),a=a!==null&&a.data==="&"?a:null,a!==null&&(c.memoizedState={dehydrated:a,treeContext:Qr!==null?{id:js,overflow:Bs}:null,retryLane:536870912,hydrationErrors:null},h=L1(a),h.return=c,c.child=h,ln=c,mi=null)):a=null,a===null)throw Jr(c);return c.lanes=536870912,null}return Mu(c,g)}var S=a.memoizedState;if(S!==null){var A=S.dehydrated;if(Nm(c),x)if(c.flags&256)c.flags&=-257,c=Kw(a,c,h);else if(c.memoizedState!==null)c.child=a.child,c.flags|=128,c=null;else throw Error(i(558));else if(Bi||qa(a,c,h,!1),x=(h&a.childLanes)!==0,Bi||x){if(g=li,g!==null&&(A=pe(g,h),A!==0&&A!==S.retryLane))throw S.retryLane=A,Ko(a,A),Pn(g,a,A),tg;Wu(),c=Kw(a,c,h)}else a=S.treeContext,mi=hs(A.nextSibling),ln=c,Nt=!0,Zr=null,ds=!1,a!==null&&N1(c,a),c=Mu(c,g),c.flags|=4096;return c}return a=or(a.child,{mode:g.mode,children:g.children}),a.ref=c.ref,c.child=a,a.return=c,a}function $u(a,c){var h=c.ref;if(h===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(a===null||a.ref!==h)&&(c.flags|=4194816)}}function ig(a,c,h,g,x){return Zo(c),h=Mm(a,c,h,g,void 0,x),g=$m(),a!==null&&!Bi?(Fm(a,c,x),hr(a,c,x)):(Nt&&g&&bm(c),c.flags|=1,dn(a,c,h,x),c.child)}function Yw(a,c,h,g,x,S){return Zo(c),c.updateQueue=null,h=Z1(c,g,h,x),Q1(a),g=$m(),a!==null&&!Bi?(Fm(a,c,S),hr(a,c,S)):(Nt&&g&&bm(c),c.flags|=1,dn(a,c,h,S),c.child)}function Xw(a,c,h,g,x){if(Zo(c),c.stateNode===null){var S=za,A=h.contextType;typeof A=="object"&&A!==null&&(S=cn(A)),S=new h(g,S),c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Jm,c.stateNode=S,S._reactInternals=c,S=c.stateNode,S.props=g,S.state=c.memoizedState,S.refs={},Cm(c),A=h.contextType,S.context=typeof A=="object"&&A!==null?cn(A):za,S.state=c.memoizedState,A=h.getDerivedStateFromProps,typeof A=="function"&&(Zm(c,h,A,g),S.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(A=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),A!==S.state&&Jm.enqueueReplaceState(S,S.state,null),Ec(c,g,S,x),Sc(),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(a===null){S=c.stateNode;var F=c.memoizedProps,W=sa(h,F);S.props=W;var de=S.context,be=h.contextType;A=za,typeof be=="object"&&be!==null&&(A=cn(be));var xe=h.getDerivedStateFromProps;be=typeof xe=="function"||typeof S.getSnapshotBeforeUpdate=="function",F=c.pendingProps!==F,be||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F||de!==A)&&Mw(c,S,g,A),to=!1;var he=c.memoizedState;S.state=he,Ec(c,g,S,x),Sc(),de=c.memoizedState,F||he!==de||to?(typeof xe=="function"&&(Zm(c,h,xe,g),de=c.memoizedState),(W=to||Pw(c,h,W,g,he,de,A))?(be||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(c.flags|=4194308)):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=de),S.props=g,S.state=de,S.context=A,g=W):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{S=c.stateNode,Im(a,c),A=c.memoizedProps,be=sa(h,A),S.props=be,xe=c.pendingProps,he=S.context,de=h.contextType,W=za,typeof de=="object"&&de!==null&&(W=cn(de)),F=h.getDerivedStateFromProps,(de=typeof F=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==xe||he!==W)&&Mw(c,S,g,W),to=!1,he=c.memoizedState,S.state=he,Ec(c,g,S,x),Sc();var me=c.memoizedState;A!==xe||he!==me||to||a!==null&&a.dependencies!==null&&vu(a.dependencies)?(typeof F=="function"&&(Zm(c,h,F,g),me=c.memoizedState),(be=to||Pw(c,h,be,g,he,me,W)||a!==null&&a.dependencies!==null&&vu(a.dependencies))?(de||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,me,W),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,me,W)),typeof S.componentDidUpdate=="function"&&(c.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof S.componentDidUpdate!="function"||A===a.memoizedProps&&he===a.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===a.memoizedProps&&he===a.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=me),S.props=g,S.state=me,S.context=W,g=be):(typeof S.componentDidUpdate!="function"||A===a.memoizedProps&&he===a.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===a.memoizedProps&&he===a.memoizedState||(c.flags|=1024),g=!1)}return S=g,$u(a,c),g=(c.flags&128)!==0,S||g?(S=c.stateNode,h=g&&typeof h.getDerivedStateFromError!="function"?null:S.render(),c.flags|=1,a!==null&&g?(c.child=ia(c,a.child,null,x),c.child=ia(c,null,h,x)):dn(a,c,h,x),c.memoizedState=S.state,a=c.child):a=hr(a,c,x),a}function Qw(a,c,h,g){return Xo(),c.flags|=256,dn(a,c,h,g),c.child}var ng={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sg(a){return{baseLanes:a,cachePool:B1()}}function rg(a,c,h){return a=a!==null?a.childLanes&~h:0,c&&(a|=Kn),a}function Zw(a,c,h){var g=c.pendingProps,x=!1,S=(c.flags&128)!==0,A;if((A=S)||(A=a!==null&&a.memoizedState===null?!1:(Di.current&2)!==0),A&&(x=!0,c.flags&=-129),A=(c.flags&32)!==0,c.flags&=-33,a===null){if(Nt){if(x?so(c):ro(),(a=mi)?(a=oE(a,ds),a=a!==null&&a.data!=="&"?a:null,a!==null&&(c.memoizedState={dehydrated:a,treeContext:Qr!==null?{id:js,overflow:Bs}:null,retryLane:536870912,hydrationErrors:null},h=L1(a),h.return=c,c.child=h,ln=c,mi=null)):a=null,a===null)throw Jr(c);return Ug(a)?c.lanes=32:c.lanes=536870912,null}var F=g.children;return g=g.fallback,x?(ro(),x=c.mode,F=Fu({mode:"hidden",children:F},x),g=Yo(g,x,h,null),F.return=c,g.return=c,F.sibling=g,c.child=F,g=c.child,g.memoizedState=sg(h),g.childLanes=rg(a,A,h),c.memoizedState=ng,Cc(null,g)):(so(c),og(c,F))}var W=a.memoizedState;if(W!==null&&(F=W.dehydrated,F!==null)){if(S)c.flags&256?(so(c),c.flags&=-257,c=ag(a,c,h)):c.memoizedState!==null?(ro(),c.child=a.child,c.flags|=128,c=null):(ro(),F=g.fallback,x=c.mode,g=Fu({mode:"visible",children:g.children},x),F=Yo(F,x,h,null),F.flags|=2,g.return=c,F.return=c,g.sibling=F,c.child=g,ia(c,a.child,null,h),g=c.child,g.memoizedState=sg(h),g.childLanes=rg(a,A,h),c.memoizedState=ng,c=Cc(null,g));else if(so(c),Ug(F)){if(A=F.nextSibling&&F.nextSibling.dataset,A)var de=A.dgst;A=de,g=Error(i(419)),g.stack="",g.digest=A,gc({value:g,source:null,stack:null}),c=ag(a,c,h)}else if(Bi||qa(a,c,h,!1),A=(h&a.childLanes)!==0,Bi||A){if(A=li,A!==null&&(g=pe(A,h),g!==0&&g!==W.retryLane))throw W.retryLane=g,Ko(a,g),Pn(A,a,g),tg;Bg(F)||Wu(),c=ag(a,c,h)}else Bg(F)?(c.flags|=192,c.child=a.child,c=null):(a=W.treeContext,mi=hs(F.nextSibling),ln=c,Nt=!0,Zr=null,ds=!1,a!==null&&N1(c,a),c=og(c,g.children),c.flags|=4096);return c}return x?(ro(),F=g.fallback,x=c.mode,W=a.child,de=W.sibling,g=or(W,{mode:"hidden",children:g.children}),g.subtreeFlags=W.subtreeFlags&65011712,de!==null?F=or(de,F):(F=Yo(F,x,h,null),F.flags|=2),F.return=c,g.return=c,g.sibling=F,c.child=g,Cc(null,g),g=c.child,F=a.child.memoizedState,F===null?F=sg(h):(x=F.cachePool,x!==null?(W=Fi._currentValue,x=x.parent!==W?{parent:W,pool:W}:x):x=B1(),F={baseLanes:F.baseLanes|h,cachePool:x}),g.memoizedState=F,g.childLanes=rg(a,A,h),c.memoizedState=ng,Cc(a.child,g)):(so(c),h=a.child,a=h.sibling,h=or(h,{mode:"visible",children:g.children}),h.return=c,h.sibling=null,a!==null&&(A=c.deletions,A===null?(c.deletions=[a],c.flags|=16):A.push(a)),c.child=h,c.memoizedState=null,h)}function og(a,c){return c=Fu({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function Fu(a,c){return a=Gn(22,a,null,c),a.lanes=0,a}function ag(a,c,h){return ia(c,a.child,null,h),a=og(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function Jw(a,c,h){a.lanes|=c;var g=a.alternate;g!==null&&(g.lanes|=c),Sm(a.return,c,h)}function lg(a,c,h,g,x,S){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:x,treeForkCount:S}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=g,A.tail=h,A.tailMode=x,A.treeForkCount=S)}function eS(a,c,h){var g=c.pendingProps,x=g.revealOrder,S=g.tail;g=g.children;var A=Di.current,F=(A&2)!==0;if(F?(A=A&1|2,c.flags|=128):A&=1,K(Di,A),dn(a,c,g,h),g=Nt?mc:0,!F&&a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Jw(a,h,c);else if(a.tag===19)Jw(a,h,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(x){case"forwards":for(h=c.child,x=null;h!==null;)a=h.alternate,a!==null&&_u(a)===null&&(x=h),h=h.sibling;h=x,h===null?(x=c.child,c.child=null):(x=h.sibling,h.sibling=null),lg(c,!1,x,h,S,g);break;case"backwards":case"unstable_legacy-backwards":for(h=null,x=c.child,c.child=null;x!==null;){if(a=x.alternate,a!==null&&_u(a)===null){c.child=x;break}a=x.sibling,x.sibling=h,h=x,x=a}lg(c,!0,h,null,S,g);break;case"together":lg(c,!1,null,null,void 0,g);break;default:c.memoizedState=null}return c.child}function hr(a,c,h){if(a!==null&&(c.dependencies=a.dependencies),lo|=c.lanes,(h&c.childLanes)===0)if(a!==null){if(qa(a,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(i(153));if(c.child!==null){for(a=c.child,h=or(a,a.pendingProps),c.child=h,h.return=c;a.sibling!==null;)a=a.sibling,h=h.sibling=or(a,a.pendingProps),h.return=c;h.sibling=null}return c.child}function cg(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&vu(a)))}function uN(a,c,h){switch(c.tag){case 3:Se(c,c.stateNode.containerInfo),eo(c,Fi,a.memoizedState.cache),Xo();break;case 27:case 5:ze(c);break;case 4:Se(c,c.stateNode.containerInfo);break;case 10:eo(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,Nm(c),null;break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(so(c),c.flags|=128,null):(h&c.child.childLanes)!==0?Zw(a,c,h):(so(c),a=hr(a,c,h),a!==null?a.sibling:null);so(c);break;case 19:var x=(a.flags&128)!==0;if(g=(h&c.childLanes)!==0,g||(qa(a,c,h,!1),g=(h&c.childLanes)!==0),x){if(g)return eS(a,c,h);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),K(Di,Di.current),g)break;return null;case 22:return c.lanes=0,qw(a,c,h,c.pendingProps);case 24:eo(c,Fi,a.memoizedState.cache)}return hr(a,c,h)}function tS(a,c,h){if(a!==null)if(a.memoizedProps!==c.pendingProps)Bi=!0;else{if(!cg(a,h)&&(c.flags&128)===0)return Bi=!1,uN(a,c,h);Bi=(a.flags&131072)!==0}else Bi=!1,Nt&&(c.flags&1048576)!==0&&O1(c,mc,c.index);switch(c.lanes=0,c.tag){case 16:e:{var g=c.pendingProps;if(a=ea(c.elementType),c.type=a,typeof a=="function")pm(a)?(g=sa(a,g),c.tag=1,c=Xw(null,c,a,g,h)):(c.tag=0,c=ig(null,c,a,g,h));else{if(a!=null){var x=a.$$typeof;if(x===O){c.tag=11,c=Hw(null,c,a,g,h);break e}else if(x===P){c.tag=14,c=Gw(null,c,a,g,h);break e}}throw c=Z(a)||a,Error(i(306,c,""))}}return c;case 0:return ig(a,c,c.type,c.pendingProps,h);case 1:return g=c.type,x=sa(g,c.pendingProps),Xw(a,c,g,x,h);case 3:e:{if(Se(c,c.stateNode.containerInfo),a===null)throw Error(i(387));g=c.pendingProps;var S=c.memoizedState;x=S.element,Im(a,c),Ec(c,g,null,h);var A=c.memoizedState;if(g=A.cache,eo(c,Fi,g),g!==S.cache&&Em(c,[Fi],h,!0),Sc(),g=A.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:A.cache},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){c=Qw(a,c,g,h);break e}else if(g!==x){x=as(Error(i(424)),c),gc(x),c=Qw(a,c,g,h);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(mi=hs(a.firstChild),ln=c,Nt=!0,Zr=null,ds=!0,h=q1(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Xo(),g===x){c=hr(a,c,h);break e}dn(a,c,g,h)}c=c.child}return c;case 26:return $u(a,c),a===null?(h=hE(c.type,null,c.pendingProps,null))?c.memoizedState=h:Nt||(h=c.type,a=c.pendingProps,g=eh(re.current).createElement(h),g[te]=c,g[Re]=a,un(g,h,a),Ae(g),c.stateNode=g):c.memoizedState=hE(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return ze(c),a===null&&Nt&&(g=c.stateNode=cE(c.type,c.pendingProps,re.current),ln=c,ds=!0,x=mi,po(c.type)?(zg=x,mi=hs(g.firstChild)):mi=x),dn(a,c,c.pendingProps.children,h),$u(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&Nt&&((x=g=mi)&&(g=UN(g,c.type,c.pendingProps,ds),g!==null?(c.stateNode=g,ln=c,mi=hs(g.firstChild),ds=!1,x=!0):x=!1),x||Jr(c)),ze(c),x=c.type,S=c.pendingProps,A=a!==null?a.memoizedProps:null,g=S.children,$g(x,S)?g=null:A!==null&&$g(x,A)&&(c.flags|=32),c.memoizedState!==null&&(x=Mm(a,c,iN,null,null,h),Hc._currentValue=x),$u(a,c),dn(a,c,g,h),c.child;case 6:return a===null&&Nt&&((a=h=mi)&&(h=zN(h,c.pendingProps,ds),h!==null?(c.stateNode=h,ln=c,mi=null,a=!0):a=!1),a||Jr(c)),null;case 13:return Zw(a,c,h);case 4:return Se(c,c.stateNode.containerInfo),g=c.pendingProps,a===null?c.child=ia(c,null,g,h):dn(a,c,g,h),c.child;case 11:return Hw(a,c,c.type,c.pendingProps,h);case 7:return dn(a,c,c.pendingProps,h),c.child;case 8:return dn(a,c,c.pendingProps.children,h),c.child;case 12:return dn(a,c,c.pendingProps.children,h),c.child;case 10:return g=c.pendingProps,eo(c,c.type,g.value),dn(a,c,g.children,h),c.child;case 9:return x=c.type._context,g=c.pendingProps.children,Zo(c),x=cn(x),g=g(x),c.flags|=1,dn(a,c,g,h),c.child;case 14:return Gw(a,c,c.type,c.pendingProps,h);case 15:return Vw(a,c,c.type,c.pendingProps,h);case 19:return eS(a,c,h);case 31:return dN(a,c,h);case 22:return qw(a,c,h,c.pendingProps);case 24:return Zo(c),g=cn(Fi),a===null?(x=_m(),x===null&&(x=li,S=Tm(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=h),x=S),c.memoizedState={parent:g,cache:x},Cm(c),eo(c,Fi,x)):((a.lanes&h)!==0&&(Im(a,c),Ec(c,null,null,h),Sc()),x=a.memoizedState,S=c.memoizedState,x.parent!==g?(x={parent:g,cache:g},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),eo(c,Fi,g)):(g=S.cache,eo(c,Fi,g),g!==x.cache&&Em(c,[Fi],h,!0))),dn(a,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function fr(a){a.flags|=4}function dg(a,c,h,g,x){if((c=(a.mode&32)!==0)&&(c=!1),c){if(a.flags|=16777216,(x&335544128)===x)if(a.stateNode.complete)a.flags|=8192;else if(CS())a.flags|=8192;else throw ta=Su,Am}else a.flags&=-16777217}function iS(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!bE(c))if(CS())a.flags|=8192;else throw ta=Su,Am}function ju(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?ct():536870912,a.lanes|=c,sl|=c)}function Ic(a,c){if(!Nt)switch(a.tailMode){case"hidden":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function gi(a){var c=a.alternate!==null&&a.alternate.child===a.child,h=0,g=0;if(c)for(var x=a.child;x!==null;)h|=x.lanes|x.childLanes,g|=x.subtreeFlags&65011712,g|=x.flags&65011712,x.return=a,x=x.sibling;else for(x=a.child;x!==null;)h|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=a,x=x.sibling;return a.subtreeFlags|=g,a.childLanes=h,c}function hN(a,c,h){var g=c.pendingProps;switch(vm(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(c),null;case 1:return gi(c),null;case 3:return h=c.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),cr(Fi),De(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(Va(c)?fr(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,xm())),gi(c),null;case 26:var x=c.type,S=c.memoizedState;return a===null?(fr(c),S!==null?(gi(c),iS(c,S)):(gi(c),dg(c,x,null,g,h))):S?S!==a.memoizedState?(fr(c),gi(c),iS(c,S)):(gi(c),c.flags&=-16777217):(a=a.memoizedProps,a!==g&&fr(c),gi(c),dg(c,x,a,g,h)),null;case 27:if(Qe(c),h=re.current,x=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==g&&fr(c);else{if(!g){if(c.stateNode===null)throw Error(i(166));return gi(c),null}a=X.current,Va(c)?P1(c):(a=cE(x,g,h),c.stateNode=a,fr(c))}return gi(c),null;case 5:if(Qe(c),x=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==g&&fr(c);else{if(!g){if(c.stateNode===null)throw Error(i(166));return gi(c),null}if(S=X.current,Va(c))P1(c);else{var A=eh(re.current);switch(S){case 1:S=A.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:S=A.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":S=A.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":S=A.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":S=A.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof g.is=="string"?A.createElement("select",{is:g.is}):A.createElement("select"),g.multiple?S.multiple=!0:g.size&&(S.size=g.size);break;default:S=typeof g.is=="string"?A.createElement(x,{is:g.is}):A.createElement(x)}}S[te]=c,S[Re]=g;e:for(A=c.child;A!==null;){if(A.tag===5||A.tag===6)S.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===c)break e;for(;A.sibling===null;){if(A.return===null||A.return===c)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}c.stateNode=S;e:switch(un(S,x,g),x){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&fr(c)}}return gi(c),dg(c,c.type,a===null?null:a.memoizedProps,c.pendingProps,h),null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==g&&fr(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(i(166));if(a=re.current,Va(c)){if(a=c.stateNode,h=c.memoizedProps,g=null,x=ln,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}a[te]=c,a=!!(a.nodeValue===h||g!==null&&g.suppressHydrationWarning===!0||ZS(a.nodeValue,h)),a||Jr(c,!0)}else a=eh(a).createTextNode(g),a[te]=c,c.stateNode=a}return gi(c),null;case 31:if(h=c.memoizedState,a===null||a.memoizedState!==null){if(g=Va(c),h!==null){if(a===null){if(!g)throw Error(i(318));if(a=c.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[te]=c}else Xo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;gi(c),a=!1}else h=xm(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=h),a=!0;if(!a)return c.flags&256?(qn(c),c):(qn(c),null);if((c.flags&128)!==0)throw Error(i(558))}return gi(c),null;case 13:if(g=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(x=Va(c),g!==null&&g.dehydrated!==null){if(a===null){if(!x)throw Error(i(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[te]=c}else Xo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;gi(c),x=!1}else x=xm(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(qn(c),c):(qn(c),null)}return qn(c),(c.flags&128)!==0?(c.lanes=h,c):(h=g!==null,a=a!==null&&a.memoizedState!==null,h&&(g=c.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool),S=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==x&&(g.flags|=2048)),h!==a&&h&&(c.child.flags|=8192),ju(c,c.updateQueue),gi(c),null);case 4:return De(),a===null&&Dg(c.stateNode.containerInfo),gi(c),null;case 10:return cr(c.type),gi(c),null;case 19:if(H(Di),g=c.memoizedState,g===null)return gi(c),null;if(x=(c.flags&128)!==0,S=g.rendering,S===null)if(x)Ic(g,!1);else{if(Ai!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(S=_u(a),S!==null){for(c.flags|=128,Ic(g,!1),a=S.updateQueue,c.updateQueue=a,ju(c,a),c.subtreeFlags=0,a=h,h=c.child;h!==null;)R1(h,a),h=h.sibling;return K(Di,Di.current&1|2),Nt&&ar(c,g.treeForkCount),c.child}a=a.sibling}g.tail!==null&&He()>Gu&&(c.flags|=128,x=!0,Ic(g,!1),c.lanes=4194304)}else{if(!x)if(a=_u(S),a!==null){if(c.flags|=128,x=!0,a=a.updateQueue,c.updateQueue=a,ju(c,a),Ic(g,!0),g.tail===null&&g.tailMode==="hidden"&&!S.alternate&&!Nt)return gi(c),null}else 2*He()-g.renderingStartTime>Gu&&h!==536870912&&(c.flags|=128,x=!0,Ic(g,!1),c.lanes=4194304);g.isBackwards?(S.sibling=c.child,c.child=S):(a=g.last,a!==null?a.sibling=S:c.child=S,g.last=S)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=He(),a.sibling=null,h=Di.current,K(Di,x?h&1|2:h&1),Nt&&ar(c,g.treeForkCount),a):(gi(c),null);case 22:case 23:return qn(c),Om(),g=c.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(h&536870912)!==0&&(c.flags&128)===0&&(gi(c),c.subtreeFlags&6&&(c.flags|=8192)):gi(c),h=c.updateQueue,h!==null&&ju(c,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==h&&(c.flags|=2048),a!==null&&H(Jo),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),cr(Fi),gi(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function fN(a,c){switch(vm(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return cr(Fi),De(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return Qe(c),null;case 31:if(c.memoizedState!==null){if(qn(c),c.alternate===null)throw Error(i(340));Xo()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 13:if(qn(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(i(340));Xo()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return H(Di),null;case 4:return De(),null;case 10:return cr(c.type),null;case 22:case 23:return qn(c),Om(),a!==null&&H(Jo),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return cr(Fi),null;case 25:return null;default:return null}}function nS(a,c){switch(vm(c),c.tag){case 3:cr(Fi),De();break;case 26:case 27:case 5:Qe(c);break;case 4:De();break;case 31:c.memoizedState!==null&&qn(c);break;case 13:qn(c);break;case 19:H(Di);break;case 10:cr(c.type);break;case 22:case 23:qn(c),Om(),a!==null&&H(Jo);break;case 24:cr(Fi)}}function Rc(a,c){try{var h=c.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var x=g.next;h=x;do{if((h.tag&a)===a){g=void 0;var S=h.create,A=h.inst;g=S(),A.destroy=g}h=h.next}while(h!==x)}}catch(F){Jt(c,c.return,F)}}function oo(a,c,h){try{var g=c.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var S=x.next;g=S;do{if((g.tag&a)===a){var A=g.inst,F=A.destroy;if(F!==void 0){A.destroy=void 0,x=c;var W=h,de=F;try{de()}catch(be){Jt(x,W,be)}}}g=g.next}while(g!==S)}}catch(be){Jt(c,c.return,be)}}function sS(a){var c=a.updateQueue;if(c!==null){var h=a.stateNode;try{K1(c,h)}catch(g){Jt(a,a.return,g)}}}function rS(a,c,h){h.props=sa(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(g){Jt(a,c,g)}}function Lc(a,c){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof h=="function"?a.refCleanup=h(g):h.current=g}}catch(x){Jt(a,c,x)}}function Us(a,c){var h=a.ref,g=a.refCleanup;if(h!==null)if(typeof g=="function")try{g()}catch(x){Jt(a,c,x)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){Jt(a,c,x)}else h.current=null}function oS(a){var c=a.type,h=a.memoizedProps,g=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&g.focus();break e;case"img":h.src?g.src=h.src:h.srcSet&&(g.srcset=h.srcSet)}}catch(x){Jt(a,a.return,x)}}function ug(a,c,h){try{var g=a.stateNode;PN(g,a.type,h,c),g[Re]=c}catch(x){Jt(a,a.return,x)}}function aS(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&po(a.type)||a.tag===4}function hg(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||aS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&po(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function fg(a,c,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(a),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=sr));else if(g!==4&&(g===27&&po(a.type)&&(h=a.stateNode,c=null),a=a.child,a!==null))for(fg(a,c,h),a=a.sibling;a!==null;)fg(a,c,h),a=a.sibling}function Bu(a,c,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?h.insertBefore(a,c):h.appendChild(a);else if(g!==4&&(g===27&&po(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(Bu(a,c,h),a=a.sibling;a!==null;)Bu(a,c,h),a=a.sibling}function lS(a){var c=a.stateNode,h=a.memoizedProps;try{for(var g=a.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);un(c,g,h),c[te]=a,c[Re]=h}catch(S){Jt(a,a.return,S)}}var pr=!1,Ui=!1,pg=!1,cS=typeof WeakSet=="function"?WeakSet:Set,en=null;function pN(a,c){if(a=a.containerInfo,Pg=ah,a=w1(a),am(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var x=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break e}var A=0,F=-1,W=-1,de=0,be=0,xe=a,he=null;t:for(;;){for(var me;xe!==h||x!==0&&xe.nodeType!==3||(F=A+x),xe!==S||g!==0&&xe.nodeType!==3||(W=A+g),xe.nodeType===3&&(A+=xe.nodeValue.length),(me=xe.firstChild)!==null;)he=xe,xe=me;for(;;){if(xe===a)break t;if(he===h&&++de===x&&(F=A),he===S&&++be===g&&(W=A),(me=xe.nextSibling)!==null)break;xe=he,he=xe.parentNode}xe=me}h=F===-1||W===-1?null:{start:F,end:W}}else h=null}h=h||{start:0,end:0}}else h=null;for(Mg={focusedElem:a,selectionRange:h},ah=!1,en=c;en!==null;)if(c=en,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,en=a;else for(;en!==null;){switch(c=en,S=c.alternate,a=c.flags,c.tag){case 0:if((a&4)!==0&&(a=c.updateQueue,a=a!==null?a.events:null,a!==null))for(h=0;h<a.length;h++)x=a[h],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&S!==null){a=void 0,h=c,x=S.memoizedProps,S=S.memoizedState,g=h.stateNode;try{var Ue=sa(h.type,x);a=g.getSnapshotBeforeUpdate(Ue,S),g.__reactInternalSnapshotBeforeUpdate=a}catch(it){Jt(h,h.return,it)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,h=a.nodeType,h===9)jg(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":jg(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=c.sibling,a!==null){a.return=c.return,en=a;break}en=c.return}}function dS(a,c,h){var g=h.flags;switch(h.tag){case 0:case 11:case 15:gr(a,h),g&4&&Rc(5,h);break;case 1:if(gr(a,h),g&4)if(a=h.stateNode,c===null)try{a.componentDidMount()}catch(A){Jt(h,h.return,A)}else{var x=sa(h.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(x,c,a.__reactInternalSnapshotBeforeUpdate)}catch(A){Jt(h,h.return,A)}}g&64&&sS(h),g&512&&Lc(h,h.return);break;case 3:if(gr(a,h),g&64&&(a=h.updateQueue,a!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{K1(a,c)}catch(A){Jt(h,h.return,A)}}break;case 27:c===null&&g&4&&lS(h);case 26:case 5:gr(a,h),c===null&&g&4&&oS(h),g&512&&Lc(h,h.return);break;case 12:gr(a,h);break;case 31:gr(a,h),g&4&&fS(a,h);break;case 13:gr(a,h),g&4&&pS(a,h),g&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=EN.bind(null,h),HN(a,h))));break;case 22:if(g=h.memoizedState!==null||pr,!g){c=c!==null&&c.memoizedState!==null||Ui,x=pr;var S=Ui;pr=g,(Ui=c)&&!S?br(a,h,(h.subtreeFlags&8772)!==0):gr(a,h),pr=x,Ui=S}break;case 30:break;default:gr(a,h)}}function uS(a){var c=a.alternate;c!==null&&(a.alternate=null,uS(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&ue(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var vi=null,Ln=!1;function mr(a,c,h){for(h=h.child;h!==null;)hS(a,c,h),h=h.sibling}function hS(a,c,h){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Ct,h)}catch{}switch(h.tag){case 26:Ui||Us(h,c),mr(a,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Ui||Us(h,c);var g=vi,x=Ln;po(h.type)&&(vi=h.stateNode,Ln=!1),mr(a,c,h),Bc(h.stateNode),vi=g,Ln=x;break;case 5:Ui||Us(h,c);case 6:if(g=vi,x=Ln,vi=null,mr(a,c,h),vi=g,Ln=x,vi!==null)if(Ln)try{(vi.nodeType===9?vi.body:vi.nodeName==="HTML"?vi.ownerDocument.body:vi).removeChild(h.stateNode)}catch(S){Jt(h,c,S)}else try{vi.removeChild(h.stateNode)}catch(S){Jt(h,c,S)}break;case 18:vi!==null&&(Ln?(a=vi,sE(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),hl(a)):sE(vi,h.stateNode));break;case 4:g=vi,x=Ln,vi=h.stateNode.containerInfo,Ln=!0,mr(a,c,h),vi=g,Ln=x;break;case 0:case 11:case 14:case 15:oo(2,h,c),Ui||oo(4,h,c),mr(a,c,h);break;case 1:Ui||(Us(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"&&rS(h,c,g)),mr(a,c,h);break;case 21:mr(a,c,h);break;case 22:Ui=(g=Ui)||h.memoizedState!==null,mr(a,c,h),Ui=g;break;default:mr(a,c,h)}}function fS(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{hl(a)}catch(h){Jt(c,c.return,h)}}}function pS(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{hl(a)}catch(h){Jt(c,c.return,h)}}function mN(a){switch(a.tag){case 31:case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new cS),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new cS),c;default:throw Error(i(435,a.tag))}}function Uu(a,c){var h=mN(a);c.forEach(function(g){if(!h.has(g)){h.add(g);var x=TN.bind(null,a,g);g.then(x,x)}})}function Dn(a,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var x=h[g],S=a,A=c,F=A;e:for(;F!==null;){switch(F.tag){case 27:if(po(F.type)){vi=F.stateNode,Ln=!1;break e}break;case 5:vi=F.stateNode,Ln=!1;break e;case 3:case 4:vi=F.stateNode.containerInfo,Ln=!0;break e}F=F.return}if(vi===null)throw Error(i(160));hS(S,A,x),vi=null,Ln=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)mS(c,a),c=c.sibling}var Ss=null;function mS(a,c){var h=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Dn(c,a),On(a),g&4&&(oo(3,a,a.return),Rc(3,a),oo(5,a,a.return));break;case 1:Dn(c,a),On(a),g&512&&(Ui||h===null||Us(h,h.return)),g&64&&pr&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?g:h.concat(g))));break;case 26:var x=Ss;if(Dn(c,a),On(a),g&512&&(Ui||h===null||Us(h,h.return)),g&4){var S=h!==null?h.memoizedState:null;if(g=a.memoizedState,h===null)if(g===null)if(a.stateNode===null){e:{g=a.type,h=a.memoizedProps,x=x.ownerDocument||x;t:switch(g){case"title":S=x.getElementsByTagName("title")[0],(!S||S[bi]||S[te]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(g),x.head.insertBefore(S,x.querySelector("head > title"))),un(S,g,h),S[te]=a,Ae(S),g=S;break e;case"link":var A=mE("link","href",x).get(g+(h.href||""));if(A){for(var F=0;F<A.length;F++)if(S=A[F],S.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&S.getAttribute("rel")===(h.rel==null?null:h.rel)&&S.getAttribute("title")===(h.title==null?null:h.title)&&S.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){A.splice(F,1);break t}}S=x.createElement(g),un(S,g,h),x.head.appendChild(S);break;case"meta":if(A=mE("meta","content",x).get(g+(h.content||""))){for(F=0;F<A.length;F++)if(S=A[F],S.getAttribute("content")===(h.content==null?null:""+h.content)&&S.getAttribute("name")===(h.name==null?null:h.name)&&S.getAttribute("property")===(h.property==null?null:h.property)&&S.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&S.getAttribute("charset")===(h.charSet==null?null:h.charSet)){A.splice(F,1);break t}}S=x.createElement(g),un(S,g,h),x.head.appendChild(S);break;default:throw Error(i(468,g))}S[te]=a,Ae(S),g=S}a.stateNode=g}else gE(x,a.type,a.stateNode);else a.stateNode=pE(x,g,a.memoizedProps);else S!==g?(S===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):S.count--,g===null?gE(x,a.type,a.stateNode):pE(x,g,a.memoizedProps)):g===null&&a.stateNode!==null&&ug(a,a.memoizedProps,h.memoizedProps)}break;case 27:Dn(c,a),On(a),g&512&&(Ui||h===null||Us(h,h.return)),h!==null&&g&4&&ug(a,a.memoizedProps,h.memoizedProps);break;case 5:if(Dn(c,a),On(a),g&512&&(Ui||h===null||Us(h,h.return)),a.flags&32){x=a.stateNode;try{Pa(x,"")}catch(Ue){Jt(a,a.return,Ue)}}g&4&&a.stateNode!=null&&(x=a.memoizedProps,ug(a,x,h!==null?h.memoizedProps:x)),g&1024&&(pg=!0);break;case 6:if(Dn(c,a),On(a),g&4){if(a.stateNode===null)throw Error(i(162));g=a.memoizedProps,h=a.stateNode;try{h.nodeValue=g}catch(Ue){Jt(a,a.return,Ue)}}break;case 3:if(nh=null,x=Ss,Ss=th(c.containerInfo),Dn(c,a),Ss=x,On(a),g&4&&h!==null&&h.memoizedState.isDehydrated)try{hl(c.containerInfo)}catch(Ue){Jt(a,a.return,Ue)}pg&&(pg=!1,gS(a));break;case 4:g=Ss,Ss=th(a.stateNode.containerInfo),Dn(c,a),On(a),Ss=g;break;case 12:Dn(c,a),On(a);break;case 31:Dn(c,a),On(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Uu(a,g)));break;case 13:Dn(c,a),On(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Hu=He()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Uu(a,g)));break;case 22:x=a.memoizedState!==null;var W=h!==null&&h.memoizedState!==null,de=pr,be=Ui;if(pr=de||x,Ui=be||W,Dn(c,a),Ui=be,pr=de,On(a),g&8192)e:for(c=a.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(h===null||W||pr||Ui||ra(a)),h=null,c=a;;){if(c.tag===5||c.tag===26){if(h===null){W=h=c;try{if(S=W.stateNode,x)A=S.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{F=W.stateNode;var xe=W.memoizedProps.style,he=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;F.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(Ue){Jt(W,W.return,Ue)}}}else if(c.tag===6){if(h===null){W=c;try{W.stateNode.nodeValue=x?"":W.memoizedProps}catch(Ue){Jt(W,W.return,Ue)}}}else if(c.tag===18){if(h===null){W=c;try{var me=W.stateNode;x?rE(me,!0):rE(W.stateNode,!1)}catch(Ue){Jt(W,W.return,Ue)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=a.updateQueue,g!==null&&(h=g.retryQueue,h!==null&&(g.retryQueue=null,Uu(a,h))));break;case 19:Dn(c,a),On(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Uu(a,g)));break;case 30:break;case 21:break;default:Dn(c,a),On(a)}}function On(a){var c=a.flags;if(c&2){try{for(var h,g=a.return;g!==null;){if(aS(g)){h=g;break}g=g.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var x=h.stateNode,S=hg(a);Bu(a,S,x);break;case 5:var A=h.stateNode;h.flags&32&&(Pa(A,""),h.flags&=-33);var F=hg(a);Bu(a,F,A);break;case 3:case 4:var W=h.stateNode.containerInfo,de=hg(a);fg(a,de,W);break;default:throw Error(i(161))}}catch(be){Jt(a,a.return,be)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function gS(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;gS(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function gr(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)dS(a,c.alternate,c),c=c.sibling}function ra(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:oo(4,c,c.return),ra(c);break;case 1:Us(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&rS(c,c.return,h),ra(c);break;case 27:Bc(c.stateNode);case 26:case 5:Us(c,c.return),ra(c);break;case 22:c.memoizedState===null&&ra(c);break;case 30:ra(c);break;default:ra(c)}a=a.sibling}}function br(a,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,x=a,S=c,A=S.flags;switch(S.tag){case 0:case 11:case 15:br(x,S,h),Rc(4,S);break;case 1:if(br(x,S,h),g=S,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(de){Jt(g,g.return,de)}if(g=S,x=g.updateQueue,x!==null){var F=g.stateNode;try{var W=x.shared.hiddenCallbacks;if(W!==null)for(x.shared.hiddenCallbacks=null,x=0;x<W.length;x++)W1(W[x],F)}catch(de){Jt(g,g.return,de)}}h&&A&64&&sS(S),Lc(S,S.return);break;case 27:lS(S);case 26:case 5:br(x,S,h),h&&g===null&&A&4&&oS(S),Lc(S,S.return);break;case 12:br(x,S,h);break;case 31:br(x,S,h),h&&A&4&&fS(x,S);break;case 13:br(x,S,h),h&&A&4&&pS(x,S);break;case 22:S.memoizedState===null&&br(x,S,h),Lc(S,S.return);break;case 30:break;default:br(x,S,h)}c=c.sibling}}function mg(a,c){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&bc(h))}function gg(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&bc(a))}function Es(a,c,h,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)bS(a,c,h,g),c=c.sibling}function bS(a,c,h,g){var x=c.flags;switch(c.tag){case 0:case 11:case 15:Es(a,c,h,g),x&2048&&Rc(9,c);break;case 1:Es(a,c,h,g);break;case 3:Es(a,c,h,g),x&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&bc(a)));break;case 12:if(x&2048){Es(a,c,h,g),a=c.stateNode;try{var S=c.memoizedProps,A=S.id,F=S.onPostCommit;typeof F=="function"&&F(A,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(W){Jt(c,c.return,W)}}else Es(a,c,h,g);break;case 31:Es(a,c,h,g);break;case 13:Es(a,c,h,g);break;case 23:break;case 22:S=c.stateNode,A=c.alternate,c.memoizedState!==null?S._visibility&2?Es(a,c,h,g):Dc(a,c):S._visibility&2?Es(a,c,h,g):(S._visibility|=2,tl(a,c,h,g,(c.subtreeFlags&10256)!==0||!1)),x&2048&&mg(A,c);break;case 24:Es(a,c,h,g),x&2048&&gg(c.alternate,c);break;default:Es(a,c,h,g)}}function tl(a,c,h,g,x){for(x=x&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var S=a,A=c,F=h,W=g,de=A.flags;switch(A.tag){case 0:case 11:case 15:tl(S,A,F,W,x),Rc(8,A);break;case 23:break;case 22:var be=A.stateNode;A.memoizedState!==null?be._visibility&2?tl(S,A,F,W,x):Dc(S,A):(be._visibility|=2,tl(S,A,F,W,x)),x&&de&2048&&mg(A.alternate,A);break;case 24:tl(S,A,F,W,x),x&&de&2048&&gg(A.alternate,A);break;default:tl(S,A,F,W,x)}c=c.sibling}}function Dc(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=a,g=c,x=g.flags;switch(g.tag){case 22:Dc(h,g),x&2048&&mg(g.alternate,g);break;case 24:Dc(h,g),x&2048&&gg(g.alternate,g);break;default:Dc(h,g)}c=c.sibling}}var Oc=8192;function il(a,c,h){if(a.subtreeFlags&Oc)for(a=a.child;a!==null;)vS(a,c,h),a=a.sibling}function vS(a,c,h){switch(a.tag){case 26:il(a,c,h),a.flags&Oc&&a.memoizedState!==null&&t5(h,Ss,a.memoizedState,a.memoizedProps);break;case 5:il(a,c,h);break;case 3:case 4:var g=Ss;Ss=th(a.stateNode.containerInfo),il(a,c,h),Ss=g;break;case 22:a.memoizedState===null&&(g=a.alternate,g!==null&&g.memoizedState!==null?(g=Oc,Oc=16777216,il(a,c,h),Oc=g):il(a,c,h));break;default:il(a,c,h)}}function yS(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function Nc(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var g=c[h];en=g,wS(g,a)}yS(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)xS(a),a=a.sibling}function xS(a){switch(a.tag){case 0:case 11:case 15:Nc(a),a.flags&2048&&oo(9,a,a.return);break;case 3:Nc(a);break;case 12:Nc(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,zu(a)):Nc(a);break;default:Nc(a)}}function zu(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var g=c[h];en=g,wS(g,a)}yS(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:oo(8,c,c.return),zu(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,zu(c));break;default:zu(c)}a=a.sibling}}function wS(a,c){for(;en!==null;){var h=en;switch(h.tag){case 0:case 11:case 15:oo(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var g=h.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:bc(h.memoizedState.cache)}if(g=h.child,g!==null)g.return=h,en=g;else e:for(h=a;en!==null;){g=en;var x=g.sibling,S=g.return;if(uS(g),g===h){en=null;break e}if(x!==null){x.return=S,en=x;break e}en=S}}}var gN={getCacheForType:function(a){var c=cn(Fi),h=c.data.get(a);return h===void 0&&(h=a(),c.data.set(a,h)),h},cacheSignal:function(){return cn(Fi).controller.signal}},bN=typeof WeakMap=="function"?WeakMap:Map,zt=0,li=null,Rt=null,Dt=0,Zt=0,Wn=null,ao=!1,nl=!1,bg=!1,vr=0,Ai=0,lo=0,oa=0,vg=0,Kn=0,sl=0,Pc=null,Nn=null,yg=!1,Hu=0,SS=0,Gu=1/0,Vu=null,co=null,Gi=0,uo=null,rl=null,yr=0,xg=0,wg=null,ES=null,Mc=0,Sg=null;function Yn(){return(zt&2)!==0&&Dt!==0?Dt&-Dt:z.T!==null?Cg():Mt()}function TS(){if(Kn===0)if((Dt&536870912)===0||Nt){var a=It;It<<=1,(It&3932160)===0&&(It=262144),Kn=a}else Kn=536870912;return a=Vn.current,a!==null&&(a.flags|=32),Kn}function Pn(a,c,h){(a===li&&(Zt===2||Zt===9)||a.cancelPendingCommit!==null)&&(ol(a,0),ho(a,Dt,Kn,!1)),Xi(a,h),((zt&2)===0||a!==li)&&(a===li&&((zt&2)===0&&(oa|=h),Ai===4&&ho(a,Dt,Kn,!1)),zs(a))}function kS(a,c,h){if((zt&6)!==0)throw Error(i(327));var g=!h&&(c&127)===0&&(c&a.expiredLanes)===0||Qt(a,c),x=g?xN(a,c):Tg(a,c,!0),S=g;do{if(x===0){nl&&!g&&ho(a,c,0,!1);break}else{if(h=a.current.alternate,S&&!vN(h)){x=Tg(a,c,!1),S=!1;continue}if(x===2){if(S=c,a.errorRecoveryDisabledLanes&S)var A=0;else A=a.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){c=A;e:{var F=a;x=Pc;var W=F.current.memoizedState.isDehydrated;if(W&&(ol(F,A).flags|=256),A=Tg(F,A,!1),A!==2){if(bg&&!W){F.errorRecoveryDisabledLanes|=S,oa|=S,x=4;break e}S=Nn,Nn=x,S!==null&&(Nn===null?Nn=S:Nn.push.apply(Nn,S))}x=A}if(S=!1,x!==2)continue}}if(x===1){ol(a,0),ho(a,c,0,!0);break}e:{switch(g=a,S=x,S){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:ho(g,c,Kn,!ao);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(x=Hu+300-He(),10<x)){if(ho(g,c,Kn,!ao),ni(g,0,!0)!==0)break e;yr=c,g.timeoutHandle=iE(_S.bind(null,g,h,Nn,Vu,yg,c,Kn,oa,sl,ao,S,"Throttled",-0,0),x);break e}_S(g,h,Nn,Vu,yg,c,Kn,oa,sl,ao,S,null,-0,0)}}break}while(!0);zs(a)}function _S(a,c,h,g,x,S,A,F,W,de,be,xe,he,me){if(a.timeoutHandle=-1,xe=c.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sr},vS(c,S,xe);var Ue=(S&62914560)===S?Hu-He():(S&4194048)===S?SS-He():0;if(Ue=i5(xe,Ue),Ue!==null){yr=S,a.cancelPendingCommit=Ue(NS.bind(null,a,c,S,h,g,x,A,F,W,be,xe,null,he,me)),ho(a,S,A,!de);return}}NS(a,c,S,h,g,x,A,F,W)}function vN(a){for(var c=a;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var g=0;g<h.length;g++){var x=h[g],S=x.getSnapshot;x=x.value;try{if(!Hn(S(),x))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ho(a,c,h,g){c&=~vg,c&=~oa,a.suspendedLanes|=c,a.pingedLanes&=~c,g&&(a.warmLanes|=c),g=a.expirationTimes;for(var x=c;0<x;){var S=31-Ut(x),A=1<<S;g[S]=-1,x&=~A}h!==0&&Sn(a,h,c)}function qu(){return(zt&6)===0?($c(0),!1):!0}function Eg(){if(Rt!==null){if(Zt===0)var a=Rt.return;else a=Rt,lr=Qo=null,jm(a),Xa=null,yc=0,a=Rt;for(;a!==null;)nS(a.alternate,a),a=a.return;Rt=null}}function ol(a,c){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,FN(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),yr=0,Eg(),li=a,Rt=h=or(a.current,null),Dt=c,Zt=0,Wn=null,ao=!1,nl=Qt(a,c),bg=!1,sl=Kn=vg=oa=lo=Ai=0,Nn=Pc=null,yg=!1,(c&8)!==0&&(c|=c&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=c;0<g;){var x=31-Ut(g),S=1<<x;c|=a[x],g&=~S}return vr=c,fu(),h}function AS(a,c){wt=null,z.H=Ac,c===Ya||c===wu?(c=H1(),Zt=3):c===Am?(c=H1(),Zt=4):Zt=c===tg?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Wn=c,Rt===null&&(Ai=1,Pu(a,as(c,a.current)))}function CS(){var a=Vn.current;return a===null?!0:(Dt&4194048)===Dt?us===null:(Dt&62914560)===Dt||(Dt&536870912)!==0?a===us:!1}function IS(){var a=z.H;return z.H=Ac,a===null?Ac:a}function RS(){var a=z.A;return z.A=gN,a}function Wu(){Ai=4,ao||(Dt&4194048)!==Dt&&Vn.current!==null||(nl=!0),(lo&134217727)===0&&(oa&134217727)===0||li===null||ho(li,Dt,Kn,!1)}function Tg(a,c,h){var g=zt;zt|=2;var x=IS(),S=RS();(li!==a||Dt!==c)&&(Vu=null,ol(a,c)),c=!1;var A=Ai;e:do try{if(Zt!==0&&Rt!==null){var F=Rt,W=Wn;switch(Zt){case 8:Eg(),A=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(c=!0);var de=Zt;if(Zt=0,Wn=null,al(a,F,W,de),h&&nl){A=0;break e}break;default:de=Zt,Zt=0,Wn=null,al(a,F,W,de)}}yN(),A=Ai;break}catch(be){AS(a,be)}while(!0);return c&&a.shellSuspendCounter++,lr=Qo=null,zt=g,z.H=x,z.A=S,Rt===null&&(li=null,Dt=0,fu()),A}function yN(){for(;Rt!==null;)LS(Rt)}function xN(a,c){var h=zt;zt|=2;var g=IS(),x=RS();li!==a||Dt!==c?(Vu=null,Gu=He()+500,ol(a,c)):nl=Qt(a,c);e:do try{if(Zt!==0&&Rt!==null){c=Rt;var S=Wn;t:switch(Zt){case 1:Zt=0,Wn=null,al(a,c,S,1);break;case 2:case 9:if(U1(S)){Zt=0,Wn=null,DS(c);break}c=function(){Zt!==2&&Zt!==9||li!==a||(Zt=7),zs(a)},S.then(c,c);break e;case 3:Zt=7;break e;case 4:Zt=5;break e;case 7:U1(S)?(Zt=0,Wn=null,DS(c)):(Zt=0,Wn=null,al(a,c,S,7));break;case 5:var A=null;switch(Rt.tag){case 26:A=Rt.memoizedState;case 5:case 27:var F=Rt;if(A?bE(A):F.stateNode.complete){Zt=0,Wn=null;var W=F.sibling;if(W!==null)Rt=W;else{var de=F.return;de!==null?(Rt=de,Ku(de)):Rt=null}break t}}Zt=0,Wn=null,al(a,c,S,5);break;case 6:Zt=0,Wn=null,al(a,c,S,6);break;case 8:Eg(),Ai=6;break e;default:throw Error(i(462))}}wN();break}catch(be){AS(a,be)}while(!0);return lr=Qo=null,z.H=g,z.A=x,zt=h,Rt!==null?0:(li=null,Dt=0,fu(),Ai)}function wN(){for(;Rt!==null&&!Xe();)LS(Rt)}function LS(a){var c=tS(a.alternate,a,vr);a.memoizedProps=a.pendingProps,c===null?Ku(a):Rt=c}function DS(a){var c=a,h=c.alternate;switch(c.tag){case 15:case 0:c=Yw(h,c,c.pendingProps,c.type,void 0,Dt);break;case 11:c=Yw(h,c,c.pendingProps,c.type.render,c.ref,Dt);break;case 5:jm(c);default:nS(h,c),c=Rt=R1(c,vr),c=tS(h,c,vr)}a.memoizedProps=a.pendingProps,c===null?Ku(a):Rt=c}function al(a,c,h,g){lr=Qo=null,jm(c),Xa=null,yc=0;var x=c.return;try{if(cN(a,x,c,h,Dt)){Ai=1,Pu(a,as(h,a.current)),Rt=null;return}}catch(S){if(x!==null)throw Rt=x,S;Ai=1,Pu(a,as(h,a.current)),Rt=null;return}c.flags&32768?(Nt||g===1?a=!0:nl||(Dt&536870912)!==0?a=!1:(ao=a=!0,(g===2||g===9||g===3||g===6)&&(g=Vn.current,g!==null&&g.tag===13&&(g.flags|=16384))),OS(c,a)):Ku(c)}function Ku(a){var c=a;do{if((c.flags&32768)!==0){OS(c,ao);return}a=c.return;var h=hN(c.alternate,c,vr);if(h!==null){Rt=h;return}if(c=c.sibling,c!==null){Rt=c;return}Rt=c=a}while(c!==null);Ai===0&&(Ai=5)}function OS(a,c){do{var h=fN(a.alternate,a);if(h!==null){h.flags&=32767,Rt=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(a=a.sibling,a!==null)){Rt=a;return}Rt=a=h}while(a!==null);Ai=6,Rt=null}function NS(a,c,h,g,x,S,A,F,W){a.cancelPendingCommit=null;do Yu();while(Gi!==0);if((zt&6)!==0)throw Error(i(327));if(c!==null){if(c===a.current)throw Error(i(177));if(S=c.lanes|c.childLanes,S|=hm,Qi(a,h,S,A,F,W),a===li&&(Rt=li=null,Dt=0),rl=c,uo=a,yr=h,xg=S,wg=x,ES=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,kN(ii,function(){return jS(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=z.T,z.T=null,x=Y.p,Y.p=2,A=zt,zt|=4;try{pN(a,c,h)}finally{zt=A,Y.p=x,z.T=g}}Gi=1,PS(),MS(),$S()}}function PS(){if(Gi===1){Gi=0;var a=uo,c=rl,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=z.T,z.T=null;var g=Y.p;Y.p=2;var x=zt;zt|=4;try{mS(c,a);var S=Mg,A=w1(a.containerInfo),F=S.focusedElem,W=S.selectionRange;if(A!==F&&F&&F.ownerDocument&&x1(F.ownerDocument.documentElement,F)){if(W!==null&&am(F)){var de=W.start,be=W.end;if(be===void 0&&(be=de),"selectionStart"in F)F.selectionStart=de,F.selectionEnd=Math.min(be,F.value.length);else{var xe=F.ownerDocument||document,he=xe&&xe.defaultView||window;if(he.getSelection){var me=he.getSelection(),Ue=F.textContent.length,it=Math.min(W.start,Ue),oi=W.end===void 0?it:Math.min(W.end,Ue);!me.extend&&it>oi&&(A=oi,oi=it,it=A);var ne=y1(F,it),Q=y1(F,oi);if(ne&&Q&&(me.rangeCount!==1||me.anchorNode!==ne.node||me.anchorOffset!==ne.offset||me.focusNode!==Q.node||me.focusOffset!==Q.offset)){var ce=xe.createRange();ce.setStart(ne.node,ne.offset),me.removeAllRanges(),it>oi?(me.addRange(ce),me.extend(Q.node,Q.offset)):(ce.setEnd(Q.node,Q.offset),me.addRange(ce))}}}}for(xe=[],me=F;me=me.parentNode;)me.nodeType===1&&xe.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<xe.length;F++){var ye=xe[F];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}ah=!!Pg,Mg=Pg=null}finally{zt=x,Y.p=g,z.T=h}}a.current=c,Gi=2}}function MS(){if(Gi===2){Gi=0;var a=uo,c=rl,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=z.T,z.T=null;var g=Y.p;Y.p=2;var x=zt;zt|=4;try{dS(a,c.alternate,c)}finally{zt=x,Y.p=g,z.T=h}}Gi=3}}function $S(){if(Gi===4||Gi===3){Gi=0,tt();var a=uo,c=rl,h=yr,g=ES;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Gi=5:(Gi=0,rl=uo=null,FS(a,a.pendingLanes));var x=a.pendingLanes;if(x===0&&(co=null),xt(h),c=c.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Ct,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=z.T,x=Y.p,Y.p=2,z.T=null;try{for(var S=a.onRecoverableError,A=0;A<g.length;A++){var F=g[A];S(F.value,{componentStack:F.stack})}}finally{z.T=c,Y.p=x}}(yr&3)!==0&&Yu(),zs(a),x=a.pendingLanes,(h&261930)!==0&&(x&42)!==0?a===Sg?Mc++:(Mc=0,Sg=a):Mc=0,$c(0)}}function FS(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,bc(c)))}function Yu(){return PS(),MS(),$S(),jS()}function jS(){if(Gi!==5)return!1;var a=uo,c=xg;xg=0;var h=xt(yr),g=z.T,x=Y.p;try{Y.p=32>h?32:h,z.T=null,h=wg,wg=null;var S=uo,A=yr;if(Gi=0,rl=uo=null,yr=0,(zt&6)!==0)throw Error(i(331));var F=zt;if(zt|=4,xS(S.current),bS(S,S.current,A,h),zt=F,$c(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Ct,S)}catch{}return!0}finally{Y.p=x,z.T=g,FS(a,c)}}function BS(a,c,h){c=as(h,c),c=eg(a.stateNode,c,2),a=no(a,c,2),a!==null&&(Xi(a,2),zs(a))}function Jt(a,c,h){if(a.tag===3)BS(a,a,h);else for(;c!==null;){if(c.tag===3){BS(c,a,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(co===null||!co.has(g))){a=as(h,a),h=Uw(2),g=no(c,h,2),g!==null&&(zw(h,g,c,a),Xi(g,2),zs(g));break}}c=c.return}}function kg(a,c,h){var g=a.pingCache;if(g===null){g=a.pingCache=new bN;var x=new Set;g.set(c,x)}else x=g.get(c),x===void 0&&(x=new Set,g.set(c,x));x.has(h)||(bg=!0,x.add(h),a=SN.bind(null,a,c,h),c.then(a,a))}function SN(a,c,h){var g=a.pingCache;g!==null&&g.delete(c),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,li===a&&(Dt&h)===h&&(Ai===4||Ai===3&&(Dt&62914560)===Dt&&300>He()-Hu?(zt&2)===0&&ol(a,0):vg|=h,sl===Dt&&(sl=0)),zs(a)}function US(a,c){c===0&&(c=ct()),a=Ko(a,c),a!==null&&(Xi(a,c),zs(a))}function EN(a){var c=a.memoizedState,h=0;c!==null&&(h=c.retryLane),US(a,h)}function TN(a,c){var h=0;switch(a.tag){case 31:case 13:var g=a.stateNode,x=a.memoizedState;x!==null&&(h=x.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(c),US(a,h)}function kN(a,c){return _e(a,c)}var Xu=null,ll=null,_g=!1,Qu=!1,Ag=!1,fo=0;function zs(a){a!==ll&&a.next===null&&(ll===null?Xu=ll=a:ll=ll.next=a),Qu=!0,_g||(_g=!0,AN())}function $c(a,c){if(!Ag&&Qu){Ag=!0;do for(var h=!1,g=Xu;g!==null;){if(a!==0){var x=g.pendingLanes;if(x===0)var S=0;else{var A=g.suspendedLanes,F=g.pingedLanes;S=(1<<31-Ut(42|a)+1)-1,S&=x&~(A&~F),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(h=!0,VS(g,S))}else S=Dt,S=ni(g,g===li?S:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(S&3)===0||Qt(g,S)||(h=!0,VS(g,S));g=g.next}while(h);Ag=!1}}function _N(){zS()}function zS(){Qu=_g=!1;var a=0;fo!==0&&$N()&&(a=fo);for(var c=He(),h=null,g=Xu;g!==null;){var x=g.next,S=HS(g,c);S===0?(g.next=null,h===null?Xu=x:h.next=x,x===null&&(ll=h)):(h=g,(a!==0||(S&3)!==0)&&(Qu=!0)),g=x}Gi!==0&&Gi!==5||$c(a),fo!==0&&(fo=0)}function HS(a,c){for(var h=a.suspendedLanes,g=a.pingedLanes,x=a.expirationTimes,S=a.pendingLanes&-62914561;0<S;){var A=31-Ut(S),F=1<<A,W=x[A];W===-1?((F&h)===0||(F&g)!==0)&&(x[A]=yt(F,c)):W<=c&&(a.expiredLanes|=F),S&=~F}if(c=li,h=Dt,h=ni(a,a===c?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,h===0||a===c&&(Zt===2||Zt===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&Be(g),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||Qt(a,h)){if(c=h&-h,c===a.callbackPriority)return c;switch(g!==null&&Be(g),xt(h)){case 2:case 8:h=Yt;break;case 32:h=ii;break;case 268435456:h=Te;break;default:h=ii}return g=GS.bind(null,a),h=_e(h,g),a.callbackPriority=c,a.callbackNode=h,c}return g!==null&&g!==null&&Be(g),a.callbackPriority=2,a.callbackNode=null,2}function GS(a,c){if(Gi!==0&&Gi!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(Yu()&&a.callbackNode!==h)return null;var g=Dt;return g=ni(a,a===li?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(kS(a,g,c),HS(a,He()),a.callbackNode!=null&&a.callbackNode===h?GS.bind(null,a):null)}function VS(a,c){if(Yu())return null;kS(a,c,!0)}function AN(){jN(function(){(zt&6)!==0?_e(vt,_N):zS()})}function Cg(){if(fo===0){var a=Wa;a===0&&(a=$e,$e<<=1,($e&261888)===0&&($e=256)),fo=a}return fo}function qS(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ru(""+a)}function WS(a,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,a.id&&h.setAttribute("form",a.id),c.parentNode.insertBefore(h,c),a=new FormData(a),h.parentNode.removeChild(h),a}function CN(a,c,h,g,x){if(c==="submit"&&h&&h.stateNode===x){var S=qS((x[Re]||null).action),A=g.submitter;A&&(c=(c=A[Re]||null)?qS(c.formAction):A.getAttribute("formAction"),c!==null&&(S=c,A=null));var F=new cu("action","action",null,g,x);a.push({event:F,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(fo!==0){var W=A?WS(x,A):new FormData(x);Km(h,{pending:!0,data:W,method:x.method,action:S},null,W)}}else typeof S=="function"&&(F.preventDefault(),W=A?WS(x,A):new FormData(x),Km(h,{pending:!0,data:W,method:x.method,action:S},S,W))},currentTarget:x}]})}}for(var Ig=0;Ig<um.length;Ig++){var Rg=um[Ig],IN=Rg.toLowerCase(),RN=Rg[0].toUpperCase()+Rg.slice(1);ws(IN,"on"+RN)}ws(T1,"onAnimationEnd"),ws(k1,"onAnimationIteration"),ws(_1,"onAnimationStart"),ws("dblclick","onDoubleClick"),ws("focusin","onFocus"),ws("focusout","onBlur"),ws(qO,"onTransitionRun"),ws(WO,"onTransitionStart"),ws(KO,"onTransitionCancel"),ws(A1,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),an("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),an("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),an("onBeforeInput",["compositionend","keypress","textInput","paste"]),an("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fc));function KS(a,c){c=(c&4)!==0;for(var h=0;h<a.length;h++){var g=a[h],x=g.event;g=g.listeners;e:{var S=void 0;if(c)for(var A=g.length-1;0<=A;A--){var F=g[A],W=F.instance,de=F.currentTarget;if(F=F.listener,W!==S&&x.isPropagationStopped())break e;S=F,x.currentTarget=de;try{S(x)}catch(be){hu(be)}x.currentTarget=null,S=W}else for(A=0;A<g.length;A++){if(F=g[A],W=F.instance,de=F.currentTarget,F=F.listener,W!==S&&x.isPropagationStopped())break e;S=F,x.currentTarget=de;try{S(x)}catch(be){hu(be)}x.currentTarget=null,S=W}}}}function Lt(a,c){var h=c[Ye];h===void 0&&(h=c[Ye]=new Set);var g=a+"__bubble";h.has(g)||(YS(c,a,2,!1),h.add(g))}function Lg(a,c,h){var g=0;c&&(g|=4),YS(h,a,g,c)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function Dg(a){if(!a[Zu]){a[Zu]=!0,mt.forEach(function(h){h!=="selectionchange"&&(LN.has(h)||Lg(h,!1,a),Lg(h,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Zu]||(c[Zu]=!0,Lg("selectionchange",!1,c))}}function YS(a,c,h,g){switch(TE(c)){case 2:var x=r5;break;case 8:x=o5;break;default:x=Wg}h=x.bind(null,c,h,a),x=void 0,!Zp||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),g?x!==void 0?a.addEventListener(c,h,{capture:!0,passive:x}):a.addEventListener(c,h,!0):x!==void 0?a.addEventListener(c,h,{passive:x}):a.addEventListener(c,h,!1)}function Og(a,c,h,g,x){var S=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var A=g.tag;if(A===3||A===4){var F=g.stateNode.containerInfo;if(F===x)break;if(A===4)for(A=g.return;A!==null;){var W=A.tag;if((W===3||W===4)&&A.stateNode.containerInfo===x)return;A=A.return}for(;F!==null;){if(A=Le(F),A===null)return;if(W=A.tag,W===5||W===6||W===26||W===27){g=S=A;continue e}F=F.parentNode}}g=g.return}e1(function(){var de=S,be=Xp(h),xe=[];e:{var he=C1.get(a);if(he!==void 0){var me=cu,Ue=a;switch(a){case"keypress":if(au(h)===0)break e;case"keydown":case"keyup":me=TO;break;case"focusin":Ue="focus",me=im;break;case"focusout":Ue="blur",me=im;break;case"beforeblur":case"afterblur":me=im;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=n1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=hO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=AO;break;case T1:case k1:case _1:me=mO;break;case A1:me=IO;break;case"scroll":case"scrollend":me=dO;break;case"wheel":me=LO;break;case"copy":case"cut":case"paste":me=bO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=r1;break;case"toggle":case"beforetoggle":me=OO}var it=(c&4)!==0,oi=!it&&(a==="scroll"||a==="scrollend"),ne=it?he!==null?he+"Capture":null:he;it=[];for(var Q=de,ce;Q!==null;){var ye=Q;if(ce=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ce===null||ne===null||(ye=oc(Q,ne),ye!=null&&it.push(jc(Q,ye,ce))),oi)break;Q=Q.return}0<it.length&&(he=new me(he,Ue,null,h,be),xe.push({event:he,listeners:it}))}}if((c&7)===0){e:{if(he=a==="mouseover"||a==="pointerover",me=a==="mouseout"||a==="pointerout",he&&h!==Yp&&(Ue=h.relatedTarget||h.fromElement)&&(Le(Ue)||Ue[Ke]))break e;if((me||he)&&(he=be.window===be?be:(he=be.ownerDocument)?he.defaultView||he.parentWindow:window,me?(Ue=h.relatedTarget||h.toElement,me=de,Ue=Ue?Le(Ue):null,Ue!==null&&(oi=r(Ue),it=Ue.tag,Ue!==oi||it!==5&&it!==27&&it!==6)&&(Ue=null)):(me=null,Ue=de),me!==Ue)){if(it=n1,ye="onMouseLeave",ne="onMouseEnter",Q="mouse",(a==="pointerout"||a==="pointerover")&&(it=r1,ye="onPointerLeave",ne="onPointerEnter",Q="pointer"),oi=me==null?he:ot(me),ce=Ue==null?he:ot(Ue),he=new it(ye,Q+"leave",me,h,be),he.target=oi,he.relatedTarget=ce,ye=null,Le(be)===de&&(it=new it(ne,Q+"enter",Ue,h,be),it.target=ce,it.relatedTarget=oi,ye=it),oi=ye,me&&Ue)t:{for(it=DN,ne=me,Q=Ue,ce=0,ye=ne;ye;ye=it(ye))ce++;ye=0;for(var Je=Q;Je;Je=it(Je))ye++;for(;0<ce-ye;)ne=it(ne),ce--;for(;0<ye-ce;)Q=it(Q),ye--;for(;ce--;){if(ne===Q||Q!==null&&ne===Q.alternate){it=ne;break t}ne=it(ne),Q=it(Q)}it=null}else it=null;me!==null&&XS(xe,he,me,it,!1),Ue!==null&&oi!==null&&XS(xe,oi,Ue,it,!0)}}e:{if(he=de?ot(de):window,me=he.nodeName&&he.nodeName.toLowerCase(),me==="select"||me==="input"&&he.type==="file")var Ft=f1;else if(u1(he))if(p1)Ft=HO;else{Ft=UO;var Ve=BO}else me=he.nodeName,!me||me.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?de&&Kp(de.elementType)&&(Ft=f1):Ft=zO;if(Ft&&(Ft=Ft(a,de))){h1(xe,Ft,h,be);break e}Ve&&Ve(a,he,de),a==="focusout"&&de&&he.type==="number"&&de.memoizedProps.value!=null&&Wp(he,"number",he.value)}switch(Ve=de?ot(de):window,a){case"focusin":(u1(Ve)||Ve.contentEditable==="true")&&(ja=Ve,lm=de,pc=null);break;case"focusout":pc=lm=ja=null;break;case"mousedown":cm=!0;break;case"contextmenu":case"mouseup":case"dragend":cm=!1,S1(xe,h,be);break;case"selectionchange":if(VO)break;case"keydown":case"keyup":S1(xe,h,be)}var St;if(sm)e:{switch(a){case"compositionstart":var Ot="onCompositionStart";break e;case"compositionend":Ot="onCompositionEnd";break e;case"compositionupdate":Ot="onCompositionUpdate";break e}Ot=void 0}else Fa?c1(a,h)&&(Ot="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Ot="onCompositionStart");Ot&&(o1&&h.locale!=="ko"&&(Fa||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&Fa&&(St=t1()):(Xr=be,Jp="value"in Xr?Xr.value:Xr.textContent,Fa=!0)),Ve=Ju(de,Ot),0<Ve.length&&(Ot=new s1(Ot,a,null,h,be),xe.push({event:Ot,listeners:Ve}),St?Ot.data=St:(St=d1(h),St!==null&&(Ot.data=St)))),(St=PO?MO(a,h):$O(a,h))&&(Ot=Ju(de,"onBeforeInput"),0<Ot.length&&(Ve=new s1("onBeforeInput","beforeinput",null,h,be),xe.push({event:Ve,listeners:Ot}),Ve.data=St)),CN(xe,a,de,h,be)}KS(xe,c)})}function jc(a,c,h){return{instance:a,listener:c,currentTarget:h}}function Ju(a,c){for(var h=c+"Capture",g=[];a!==null;){var x=a,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=oc(a,h),x!=null&&g.unshift(jc(a,x,S)),x=oc(a,c),x!=null&&g.push(jc(a,x,S))),a.tag===3)return g;a=a.return}return[]}function DN(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function XS(a,c,h,g,x){for(var S=c._reactName,A=[];h!==null&&h!==g;){var F=h,W=F.alternate,de=F.stateNode;if(F=F.tag,W!==null&&W===g)break;F!==5&&F!==26&&F!==27||de===null||(W=de,x?(de=oc(h,S),de!=null&&A.unshift(jc(h,de,W))):x||(de=oc(h,S),de!=null&&A.push(jc(h,de,W)))),h=h.return}A.length!==0&&a.push({event:c,listeners:A})}var ON=/\r\n?/g,NN=/\u0000|\uFFFD/g;function QS(a){return(typeof a=="string"?a:""+a).replace(ON,`
`).replace(NN,"")}function ZS(a,c){return c=QS(c),QS(a)===c}function ri(a,c,h,g,x,S){switch(h){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||Pa(a,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&Pa(a,""+g);break;case"className":Oa(a,"class",g);break;case"tabIndex":Oa(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Oa(a,h,g);break;case"style":Zx(a,g,S);break;case"data":if(c!=="object"){Oa(a,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||h!=="href")){a.removeAttribute(h);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(h);break}g=ru(""+g),a.setAttribute(h,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(h==="formAction"?(c!=="input"&&ri(a,c,"name",x.name,x,null),ri(a,c,"formEncType",x.formEncType,x,null),ri(a,c,"formMethod",x.formMethod,x,null),ri(a,c,"formTarget",x.formTarget,x,null)):(ri(a,c,"encType",x.encType,x,null),ri(a,c,"method",x.method,x,null),ri(a,c,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(h);break}g=ru(""+g),a.setAttribute(h,g);break;case"onClick":g!=null&&(a.onclick=sr);break;case"onScroll":g!=null&&Lt("scroll",a);break;case"onScrollEnd":g!=null&&Lt("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(h=g.__html,h!=null){if(x.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}h=ru(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(h,""+g):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":g===!0?a.setAttribute(h,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(h,g):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(h,g):a.removeAttribute(h);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(h):a.setAttribute(h,g);break;case"popover":Lt("beforetoggle",a),Lt("toggle",a),Yr(a,"popover",g);break;case"xlinkActuate":bn(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":bn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":bn(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":bn(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":bn(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":bn(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":bn(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":bn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":bn(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Yr(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=lO.get(h)||h,Yr(a,h,g))}}function Ng(a,c,h,g,x,S){switch(h){case"style":Zx(a,g,S);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(h=g.__html,h!=null){if(x.children!=null)throw Error(i(60));a.innerHTML=h}}break;case"children":typeof g=="string"?Pa(a,g):(typeof g=="number"||typeof g=="bigint")&&Pa(a,""+g);break;case"onScroll":g!=null&&Lt("scroll",a);break;case"onScrollEnd":g!=null&&Lt("scrollend",a);break;case"onClick":g!=null&&(a.onclick=sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vt.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),c=h.slice(2,x?h.length-7:void 0),S=a[Re]||null,S=S!=null?S[h]:null,typeof S=="function"&&a.removeEventListener(c,S,x),typeof g=="function")){typeof S!="function"&&S!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(c,g,x);break e}h in a?a[h]=g:g===!0?a.setAttribute(h,""):Yr(a,h,g)}}}function un(a,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",a),Lt("load",a);var g=!1,x=!1,S;for(S in h)if(h.hasOwnProperty(S)){var A=h[S];if(A!=null)switch(S){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:ri(a,c,S,A,h,null)}}x&&ri(a,c,"srcSet",h.srcSet,h,null),g&&ri(a,c,"src",h.src,h,null);return;case"input":Lt("invalid",a);var F=S=A=x=null,W=null,de=null;for(g in h)if(h.hasOwnProperty(g)){var be=h[g];if(be!=null)switch(g){case"name":x=be;break;case"type":A=be;break;case"checked":W=be;break;case"defaultChecked":de=be;break;case"value":S=be;break;case"defaultValue":F=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(i(137,c));break;default:ri(a,c,g,be,h,null)}}Kx(a,S,F,W,de,A,x,!1);return;case"select":Lt("invalid",a),g=A=S=null;for(x in h)if(h.hasOwnProperty(x)&&(F=h[x],F!=null))switch(x){case"value":S=F;break;case"defaultValue":A=F;break;case"multiple":g=F;default:ri(a,c,x,F,h,null)}c=S,h=A,a.multiple=!!g,c!=null?Na(a,!!g,c,!1):h!=null&&Na(a,!!g,h,!0);return;case"textarea":Lt("invalid",a),S=x=g=null;for(A in h)if(h.hasOwnProperty(A)&&(F=h[A],F!=null))switch(A){case"value":g=F;break;case"defaultValue":x=F;break;case"children":S=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(91));break;default:ri(a,c,A,F,h,null)}Xx(a,g,x,S);return;case"option":for(W in h)if(h.hasOwnProperty(W)&&(g=h[W],g!=null))switch(W){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:ri(a,c,W,g,h,null)}return;case"dialog":Lt("beforetoggle",a),Lt("toggle",a),Lt("cancel",a),Lt("close",a);break;case"iframe":case"object":Lt("load",a);break;case"video":case"audio":for(g=0;g<Fc.length;g++)Lt(Fc[g],a);break;case"image":Lt("error",a),Lt("load",a);break;case"details":Lt("toggle",a);break;case"embed":case"source":case"link":Lt("error",a),Lt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in h)if(h.hasOwnProperty(de)&&(g=h[de],g!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:ri(a,c,de,g,h,null)}return;default:if(Kp(c)){for(be in h)h.hasOwnProperty(be)&&(g=h[be],g!==void 0&&Ng(a,c,be,g,h,void 0));return}}for(F in h)h.hasOwnProperty(F)&&(g=h[F],g!=null&&ri(a,c,F,g,h,null))}function PN(a,c,h,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,A=null,F=null,W=null,de=null,be=null;for(me in h){var xe=h[me];if(h.hasOwnProperty(me)&&xe!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":W=xe;default:g.hasOwnProperty(me)||ri(a,c,me,null,g,xe)}}for(var he in g){var me=g[he];if(xe=h[he],g.hasOwnProperty(he)&&(me!=null||xe!=null))switch(he){case"type":S=me;break;case"name":x=me;break;case"checked":de=me;break;case"defaultChecked":be=me;break;case"value":A=me;break;case"defaultValue":F=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(137,c));break;default:me!==xe&&ri(a,c,he,me,g,xe)}}qp(a,A,F,W,de,be,S,x);return;case"select":me=A=F=he=null;for(S in h)if(W=h[S],h.hasOwnProperty(S)&&W!=null)switch(S){case"value":break;case"multiple":me=W;default:g.hasOwnProperty(S)||ri(a,c,S,null,g,W)}for(x in g)if(S=g[x],W=h[x],g.hasOwnProperty(x)&&(S!=null||W!=null))switch(x){case"value":he=S;break;case"defaultValue":F=S;break;case"multiple":A=S;default:S!==W&&ri(a,c,x,S,g,W)}c=F,h=A,g=me,he!=null?Na(a,!!h,he,!1):!!g!=!!h&&(c!=null?Na(a,!!h,c,!0):Na(a,!!h,h?[]:"",!1));return;case"textarea":me=he=null;for(F in h)if(x=h[F],h.hasOwnProperty(F)&&x!=null&&!g.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:ri(a,c,F,null,g,x)}for(A in g)if(x=g[A],S=h[A],g.hasOwnProperty(A)&&(x!=null||S!=null))switch(A){case"value":he=x;break;case"defaultValue":me=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==S&&ri(a,c,A,x,g,S)}Yx(a,he,me);return;case"option":for(var Ue in h)if(he=h[Ue],h.hasOwnProperty(Ue)&&he!=null&&!g.hasOwnProperty(Ue))switch(Ue){case"selected":a.selected=!1;break;default:ri(a,c,Ue,null,g,he)}for(W in g)if(he=g[W],me=h[W],g.hasOwnProperty(W)&&he!==me&&(he!=null||me!=null))switch(W){case"selected":a.selected=he&&typeof he!="function"&&typeof he!="symbol";break;default:ri(a,c,W,he,g,me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var it in h)he=h[it],h.hasOwnProperty(it)&&he!=null&&!g.hasOwnProperty(it)&&ri(a,c,it,null,g,he);for(de in g)if(he=g[de],me=h[de],g.hasOwnProperty(de)&&he!==me&&(he!=null||me!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,c));break;default:ri(a,c,de,he,g,me)}return;default:if(Kp(c)){for(var oi in h)he=h[oi],h.hasOwnProperty(oi)&&he!==void 0&&!g.hasOwnProperty(oi)&&Ng(a,c,oi,void 0,g,he);for(be in g)he=g[be],me=h[be],!g.hasOwnProperty(be)||he===me||he===void 0&&me===void 0||Ng(a,c,be,he,g,me);return}}for(var ne in h)he=h[ne],h.hasOwnProperty(ne)&&he!=null&&!g.hasOwnProperty(ne)&&ri(a,c,ne,null,g,he);for(xe in g)he=g[xe],me=h[xe],!g.hasOwnProperty(xe)||he===me||he==null&&me==null||ri(a,c,xe,he,g,me)}function JS(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function MN(){if(typeof performance.getEntriesByType=="function"){for(var a=0,c=0,h=performance.getEntriesByType("resource"),g=0;g<h.length;g++){var x=h[g],S=x.transferSize,A=x.initiatorType,F=x.duration;if(S&&F&&JS(A)){for(A=0,F=x.responseEnd,g+=1;g<h.length;g++){var W=h[g],de=W.startTime;if(de>F)break;var be=W.transferSize,xe=W.initiatorType;be&&JS(xe)&&(W=W.responseEnd,A+=be*(W<F?1:(F-de)/(W-de)))}if(--g,c+=8*(S+A)/(x.duration/1e3),a++,10<a)break}}if(0<a)return c/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Pg=null,Mg=null;function eh(a){return a.nodeType===9?a:a.ownerDocument}function eE(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tE(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function $g(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Fg=null;function $N(){var a=window.event;return a&&a.type==="popstate"?a===Fg?!1:(Fg=a,!0):(Fg=null,!1)}var iE=typeof setTimeout=="function"?setTimeout:void 0,FN=typeof clearTimeout=="function"?clearTimeout:void 0,nE=typeof Promise=="function"?Promise:void 0,jN=typeof queueMicrotask=="function"?queueMicrotask:typeof nE<"u"?function(a){return nE.resolve(null).then(a).catch(BN)}:iE;function BN(a){setTimeout(function(){throw a})}function po(a){return a==="head"}function sE(a,c){var h=c,g=0;do{var x=h.nextSibling;if(a.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"||h==="/&"){if(g===0){a.removeChild(x),hl(c);return}g--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")g++;else if(h==="html")Bc(a.ownerDocument.documentElement);else if(h==="head"){h=a.ownerDocument.head,Bc(h);for(var S=h.firstChild;S;){var A=S.nextSibling,F=S.nodeName;S[bi]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&S.rel.toLowerCase()==="stylesheet"||h.removeChild(S),S=A}}else h==="body"&&Bc(a.ownerDocument.body);h=x}while(h);hl(c)}function rE(a,c){var h=a;a=0;do{var g=h.nextSibling;if(h.nodeType===1?c?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(c?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),g&&g.nodeType===8)if(h=g.data,h==="/$"){if(a===0)break;a--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||a++;h=g}while(h)}function jg(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":jg(h),ue(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function UN(a,c,h,g){for(;a.nodeType===1;){var x=h;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[bi])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(S=a.getAttribute("rel"),S==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(S!==x.rel||a.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||a.getAttribute("title")!==(x.title==null?null:x.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(S=a.getAttribute("src"),(S!==(x.src==null?null:x.src)||a.getAttribute("type")!==(x.type==null?null:x.type)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&a.getAttribute("name")===S)return a}else return a;if(a=hs(a.nextSibling),a===null)break}return null}function zN(a,c,h){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=hs(a.nextSibling),a===null))return null;return a}function oE(a,c){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=hs(a.nextSibling),a===null))return null;return a}function Bg(a){return a.data==="$?"||a.data==="$~"}function Ug(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function HN(a,c){var h=a.ownerDocument;if(a.data==="$~")a._reactRetry=c;else if(a.data!=="$?"||h.readyState!=="loading")c();else{var g=function(){c(),h.removeEventListener("DOMContentLoaded",g)};h.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function hs(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return a}var zg=null;function aE(a){a=a.nextSibling;for(var c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"||h==="/&"){if(c===0)return hs(a.nextSibling);c--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||c++}a=a.nextSibling}return null}function lE(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(c===0)return a;c--}else h!=="/$"&&h!=="/&"||c++}a=a.previousSibling}return null}function cE(a,c,h){switch(c=eh(h),a){case"html":if(a=c.documentElement,!a)throw Error(i(452));return a;case"head":if(a=c.head,!a)throw Error(i(453));return a;case"body":if(a=c.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function Bc(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);ue(a)}var fs=new Map,dE=new Set;function th(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var xr=Y.d;Y.d={f:GN,r:VN,D:qN,C:WN,L:KN,m:YN,X:QN,S:XN,M:ZN};function GN(){var a=xr.f(),c=qu();return a||c}function VN(a){var c=Ge(a);c!==null&&c.tag===5&&c.type==="form"?Aw(c):xr.r(a)}var cl=typeof document>"u"?null:document;function uE(a,c,h){var g=cl;if(g&&typeof c=="string"&&c){var x=rs(c);x='link[rel="'+a+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),dE.has(x)||(dE.add(x),a={rel:a,crossOrigin:h,href:c},g.querySelector(x)===null&&(c=g.createElement("link"),un(c,"link",a),Ae(c),g.head.appendChild(c)))}}function qN(a){xr.D(a),uE("dns-prefetch",a,null)}function WN(a,c){xr.C(a,c),uE("preconnect",a,c)}function KN(a,c,h){xr.L(a,c,h);var g=cl;if(g&&a&&c){var x='link[rel="preload"][as="'+rs(c)+'"]';c==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+rs(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+rs(h.imageSizes)+'"]')):x+='[href="'+rs(a)+'"]';var S=x;switch(c){case"style":S=dl(a);break;case"script":S=ul(a)}fs.has(S)||(a=p({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:a,as:c},h),fs.set(S,a),g.querySelector(x)!==null||c==="style"&&g.querySelector(Uc(S))||c==="script"&&g.querySelector(zc(S))||(c=g.createElement("link"),un(c,"link",a),Ae(c),g.head.appendChild(c)))}}function YN(a,c){xr.m(a,c);var h=cl;if(h&&a){var g=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+rs(g)+'"][href="'+rs(a)+'"]',S=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=ul(a)}if(!fs.has(S)&&(a=p({rel:"modulepreload",href:a},c),fs.set(S,a),h.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(zc(S)))return}g=h.createElement("link"),un(g,"link",a),Ae(g),h.head.appendChild(g)}}}function XN(a,c,h){xr.S(a,c,h);var g=cl;if(g&&a){var x=fe(g).hoistableStyles,S=dl(a);c=c||"default";var A=x.get(S);if(!A){var F={loading:0,preload:null};if(A=g.querySelector(Uc(S)))F.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":c},h),(h=fs.get(S))&&Hg(a,h);var W=A=g.createElement("link");Ae(W),un(W,"link",a),W._p=new Promise(function(de,be){W.onload=de,W.onerror=be}),W.addEventListener("load",function(){F.loading|=1}),W.addEventListener("error",function(){F.loading|=2}),F.loading|=4,ih(A,c,g)}A={type:"stylesheet",instance:A,count:1,state:F},x.set(S,A)}}}function QN(a,c){xr.X(a,c);var h=cl;if(h&&a){var g=fe(h).hoistableScripts,x=ul(a),S=g.get(x);S||(S=h.querySelector(zc(x)),S||(a=p({src:a,async:!0},c),(c=fs.get(x))&&Gg(a,c),S=h.createElement("script"),Ae(S),un(S,"link",a),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(x,S))}}function ZN(a,c){xr.M(a,c);var h=cl;if(h&&a){var g=fe(h).hoistableScripts,x=ul(a),S=g.get(x);S||(S=h.querySelector(zc(x)),S||(a=p({src:a,async:!0,type:"module"},c),(c=fs.get(x))&&Gg(a,c),S=h.createElement("script"),Ae(S),un(S,"link",a),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(x,S))}}function hE(a,c,h,g){var x=(x=re.current)?th(x):null;if(!x)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=dl(h.href),h=fe(x).hoistableStyles,g=h.get(c),g||(g={type:"style",instance:null,count:0,state:null},h.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=dl(h.href);var S=fe(x).hoistableStyles,A=S.get(a);if(A||(x=x.ownerDocument||x,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(a,A),(S=x.querySelector(Uc(a)))&&!S._p&&(A.instance=S,A.state.loading=5),fs.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},fs.set(a,h),S||JN(x,a,h,A.state))),c&&g===null)throw Error(i(528,""));return A}if(c&&g!==null)throw Error(i(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=ul(h),h=fe(x).hoistableScripts,g=h.get(c),g||(g={type:"script",instance:null,count:0,state:null},h.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function dl(a){return'href="'+rs(a)+'"'}function Uc(a){return'link[rel="stylesheet"]['+a+"]"}function fE(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function JN(a,c,h,g){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=a.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),un(c,"link",h),Ae(c),a.head.appendChild(c))}function ul(a){return'[src="'+rs(a)+'"]'}function zc(a){return"script[async]"+a}function pE(a,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var g=a.querySelector('style[data-href~="'+rs(h.href)+'"]');if(g)return c.instance=g,Ae(g),g;var x=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),Ae(g),un(g,"style",x),ih(g,h.precedence,a),c.instance=g;case"stylesheet":x=dl(h.href);var S=a.querySelector(Uc(x));if(S)return c.state.loading|=4,c.instance=S,Ae(S),S;g=fE(h),(x=fs.get(x))&&Hg(g,x),S=(a.ownerDocument||a).createElement("link"),Ae(S);var A=S;return A._p=new Promise(function(F,W){A.onload=F,A.onerror=W}),un(S,"link",g),c.state.loading|=4,ih(S,h.precedence,a),c.instance=S;case"script":return S=ul(h.src),(x=a.querySelector(zc(S)))?(c.instance=x,Ae(x),x):(g=h,(x=fs.get(S))&&(g=p({},h),Gg(g,x)),a=a.ownerDocument||a,x=a.createElement("script"),Ae(x),un(x,"link",g),a.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,ih(g,h.precedence,a));return c.instance}function ih(a,c,h){for(var g=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,S=x,A=0;A<g.length;A++){var F=g[A];if(F.dataset.precedence===c)S=F;else if(S!==x)break}S?S.parentNode.insertBefore(a,S.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(a,c.firstChild))}function Hg(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function Gg(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var nh=null;function mE(a,c,h){if(nh===null){var g=new Map,x=nh=new Map;x.set(h,g)}else x=nh,g=x.get(h),g||(g=new Map,x.set(h,g));if(g.has(a))return g;for(g.set(a,null),h=h.getElementsByTagName(a),x=0;x<h.length;x++){var S=h[x];if(!(S[bi]||S[te]||a==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var A=S.getAttribute(c)||"";A=a+A;var F=g.get(A);F?F.push(S):g.set(A,[S])}}return g}function gE(a,c,h){a=a.ownerDocument||a,a.head.insertBefore(h,c==="title"?a.querySelector("head > title"):null)}function e5(a,c,h){if(h===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function bE(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function t5(a,c,h,g){if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var x=dl(g.href),S=c.querySelector(Uc(x));if(S){c=S._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(a.count++,a=sh.bind(a),c.then(a,a)),h.state.loading|=4,h.instance=S,Ae(S);return}S=c.ownerDocument||c,g=fE(g),(x=fs.get(x))&&Hg(g,x),S=S.createElement("link"),Ae(S);var A=S;A._p=new Promise(function(F,W){A.onload=F,A.onerror=W}),un(S,"link",g),h.instance=S}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(h,c),(c=h.state.preload)&&(h.state.loading&3)===0&&(a.count++,h=sh.bind(a),c.addEventListener("load",h),c.addEventListener("error",h))}}var Vg=0;function i5(a,c){return a.stylesheets&&a.count===0&&oh(a,a.stylesheets),0<a.count||0<a.imgCount?function(h){var g=setTimeout(function(){if(a.stylesheets&&oh(a,a.stylesheets),a.unsuspend){var S=a.unsuspend;a.unsuspend=null,S()}},6e4+c);0<a.imgBytes&&Vg===0&&(Vg=62500*MN());var x=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&oh(a,a.stylesheets),a.unsuspend)){var S=a.unsuspend;a.unsuspend=null,S()}},(a.imgBytes>Vg?50:800)+c);return a.unsuspend=h,function(){a.unsuspend=null,clearTimeout(g),clearTimeout(x)}}:null}function sh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)oh(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var rh=null;function oh(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,rh=new Map,c.forEach(n5,a),rh=null,sh.call(a))}function n5(a,c){if(!(c.state.loading&4)){var h=rh.get(a);if(h)var g=h.get(null);else{h=new Map,rh.set(a,h);for(var x=a.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var A=x[S];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(h.set(A.dataset.precedence,A),g=A)}g&&h.set(null,g)}x=c.instance,A=x.getAttribute("data-precedence"),S=h.get(A)||g,S===g&&h.set(null,x),h.set(A,x),this.count++,g=sh.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),S?S.parentNode.insertBefore(x,S.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(x,a.firstChild)),c.state.loading|=4}}var Hc={$$typeof:_,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function s5(a,c,h,g,x,S,A,F,W){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.hiddenUpdates=pi(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function vE(a,c,h,g,x,S,A,F,W,de,be,xe){return a=new s5(a,c,h,A,W,de,be,xe,F),c=1,S===!0&&(c|=24),S=Gn(3,null,null,c),a.current=S,S.stateNode=a,c=Tm(),c.refCount++,a.pooledCache=c,c.refCount++,S.memoizedState={element:g,isDehydrated:h,cache:c},Cm(S),a}function yE(a){return a?(a=za,a):za}function xE(a,c,h,g,x,S){x=yE(x),g.context===null?g.context=x:g.pendingContext=x,g=io(c),g.payload={element:h},S=S===void 0?null:S,S!==null&&(g.callback=S),h=no(a,g,c),h!==null&&(Pn(h,a,c),wc(h,a,c))}function wE(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<c?h:c}}function qg(a,c){wE(a,c),(a=a.alternate)&&wE(a,c)}function SE(a){if(a.tag===13||a.tag===31){var c=Ko(a,67108864);c!==null&&Pn(c,a,67108864),qg(a,67108864)}}function EE(a){if(a.tag===13||a.tag===31){var c=Yn();c=je(c);var h=Ko(a,c);h!==null&&Pn(h,a,c),qg(a,c)}}var ah=!0;function r5(a,c,h,g){var x=z.T;z.T=null;var S=Y.p;try{Y.p=2,Wg(a,c,h,g)}finally{Y.p=S,z.T=x}}function o5(a,c,h,g){var x=z.T;z.T=null;var S=Y.p;try{Y.p=8,Wg(a,c,h,g)}finally{Y.p=S,z.T=x}}function Wg(a,c,h,g){if(ah){var x=Kg(g);if(x===null)Og(a,c,g,lh,h),kE(a,g);else if(l5(x,a,c,h,g))g.stopPropagation();else if(kE(a,g),c&4&&-1<a5.indexOf(a)){for(;x!==null;){var S=Ge(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var A=Tt(S.pendingLanes);if(A!==0){var F=S;for(F.pendingLanes|=2,F.entangledLanes|=2;A;){var W=1<<31-Ut(A);F.entanglements[1]|=W,A&=~W}zs(S),(zt&6)===0&&(Gu=He()+500,$c(0))}}break;case 31:case 13:F=Ko(S,2),F!==null&&Pn(F,S,2),qu(),qg(S,2)}if(S=Kg(g),S===null&&Og(a,c,g,lh,h),S===x)break;x=S}x!==null&&g.stopPropagation()}else Og(a,c,g,null,h)}}function Kg(a){return a=Xp(a),Yg(a)}var lh=null;function Yg(a){if(lh=null,a=Le(a),a!==null){var c=r(a);if(c===null)a=null;else{var h=c.tag;if(h===13){if(a=o(c),a!==null)return a;a=null}else if(h===31){if(a=l(c),a!==null)return a;a=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return lh=a,null}function TE(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(We()){case vt:return 2;case Yt:return 8;case ii:case $t:return 32;case Te:return 268435456;default:return 32}default:return 32}}var Xg=!1,mo=null,go=null,bo=null,Gc=new Map,Vc=new Map,vo=[],a5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kE(a,c){switch(a){case"focusin":case"focusout":mo=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":bo=null;break;case"pointerover":case"pointerout":Gc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(c.pointerId)}}function qc(a,c,h,g,x,S){return a===null||a.nativeEvent!==S?(a={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:S,targetContainers:[x]},c!==null&&(c=Ge(c),c!==null&&SE(c)),a):(a.eventSystemFlags|=g,c=a.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),a)}function l5(a,c,h,g,x){switch(c){case"focusin":return mo=qc(mo,a,c,h,g,x),!0;case"dragenter":return go=qc(go,a,c,h,g,x),!0;case"mouseover":return bo=qc(bo,a,c,h,g,x),!0;case"pointerover":var S=x.pointerId;return Gc.set(S,qc(Gc.get(S)||null,a,c,h,g,x)),!0;case"gotpointercapture":return S=x.pointerId,Vc.set(S,qc(Vc.get(S)||null,a,c,h,g,x)),!0}return!1}function _E(a){var c=Le(a.target);if(c!==null){var h=r(c);if(h!==null){if(c=h.tag,c===13){if(c=o(h),c!==null){a.blockedOn=c,rt(a.priority,function(){EE(h)});return}}else if(c===31){if(c=l(h),c!==null){a.blockedOn=c,rt(a.priority,function(){EE(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function ch(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var h=Kg(a.nativeEvent);if(h===null){h=a.nativeEvent;var g=new h.constructor(h.type,h);Yp=g,h.target.dispatchEvent(g),Yp=null}else return c=Ge(h),c!==null&&SE(c),a.blockedOn=h,!1;c.shift()}return!0}function AE(a,c,h){ch(a)&&h.delete(c)}function c5(){Xg=!1,mo!==null&&ch(mo)&&(mo=null),go!==null&&ch(go)&&(go=null),bo!==null&&ch(bo)&&(bo=null),Gc.forEach(AE),Vc.forEach(AE)}function dh(a,c){a.blockedOn===c&&(a.blockedOn=null,Xg||(Xg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,c5)))}var uh=null;function CE(a){uh!==a&&(uh=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){uh===a&&(uh=null);for(var c=0;c<a.length;c+=3){var h=a[c],g=a[c+1],x=a[c+2];if(typeof g!="function"){if(Yg(g||h)===null)continue;break}var S=Ge(h);S!==null&&(a.splice(c,3),c-=3,Km(S,{pending:!0,data:x,method:h.method,action:g},g,x))}}))}function hl(a){function c(W){return dh(W,a)}mo!==null&&dh(mo,a),go!==null&&dh(go,a),bo!==null&&dh(bo,a),Gc.forEach(c),Vc.forEach(c);for(var h=0;h<vo.length;h++){var g=vo[h];g.blockedOn===a&&(g.blockedOn=null)}for(;0<vo.length&&(h=vo[0],h.blockedOn===null);)_E(h),h.blockedOn===null&&vo.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(g=0;g<h.length;g+=3){var x=h[g],S=h[g+1],A=x[Re]||null;if(typeof S=="function")A||CE(h);else if(A){var F=null;if(S&&S.hasAttribute("formAction")){if(x=S,A=S[Re]||null)F=A.formAction;else if(Yg(x)!==null)continue}else F=A.action;typeof F=="function"?h[g+1]=F:(h.splice(g,3),g-=3),CE(h)}}}function IE(){function a(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(A){return x=A})},focusReset:"manual",scroll:"manual"})}function c(){x!==null&&(x(),x=null),g||setTimeout(h,20)}function h(){if(!g&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,x=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(h,100),function(){g=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),x!==null&&(x(),x=null)}}}function Qg(a){this._internalRoot=a}hh.prototype.render=Qg.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(i(409));var h=c.current,g=Yn();xE(h,g,a,c,null,null)},hh.prototype.unmount=Qg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;xE(a.current,2,null,a,null,null),qu(),c[Ke]=null}};function hh(a){this._internalRoot=a}hh.prototype.unstable_scheduleHydration=function(a){if(a){var c=Mt();a={blockedOn:null,target:a,priority:c};for(var h=0;h<vo.length&&c!==0&&c<vo[h].priority;h++);vo.splice(h,0,a),h===0&&_E(a)}};var RE=e.version;if(RE!=="19.2.0")throw Error(i(527,RE,"19.2.0"));Y.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=u(c),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var d5={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fh.isDisabled&&fh.supportsFiber)try{Ct=fh.inject(d5),Bt=fh}catch{}}return Kc.createRoot=function(a,c){if(!s(a))throw Error(i(299));var h=!1,g="",x=$w,S=Fw,A=jw;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError)),c=vE(a,1,!1,null,null,h,g,null,x,S,A,IE),a[Ke]=c.current,Dg(a),new Qg(c)},Kc.hydrateRoot=function(a,c,h){if(!s(a))throw Error(i(299));var g=!1,x="",S=$w,A=Fw,F=jw,W=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(S=h.onUncaughtError),h.onCaughtError!==void 0&&(A=h.onCaughtError),h.onRecoverableError!==void 0&&(F=h.onRecoverableError),h.formState!==void 0&&(W=h.formState)),c=vE(a,1,!0,c,h??null,g,x,W,S,A,F,IE),c.context=yE(null),h=c.current,g=Yn(),g=je(g),x=io(g),x.callback=null,no(h,x,g),h=g,c.current.lanes=h,Xi(c,h),zs(c),a[Ke]=c.current,Dg(a),new hh(c)},Kc.version="19.2.0",Kc}var UE;function E5(){if(UE)return e0.exports;UE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),e0.exports=S5(),e0.exports}var T5=E5();const k5=zr(T5);var Mi={allRenderFn:!1,element:!0,event:!0,hasRenderFn:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,propChangeCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!0,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},_5="app",A5=Object.defineProperty,C5=(n,e)=>{for(var t in e)A5(n,t,{get:e[t],enumerable:!0})},I5={isBrowser:!0},R5="http://www.w3.org/2000/svg",L5="http://www.w3.org/1999/xhtml",D5=(n,e)=>{var t;const i=e.$cmpMeta$;Object.entries((t=i.$members$)!=null?t:{}).map(([r,[o]])=>{if(o&31||o&32){const l=n[r],d=O5(Object.getPrototypeOf(n),r)||Object.getOwnPropertyDescriptor(n,r);d&&Object.defineProperty(n,r,{get(){return d.get.call(this)},set(u){d.set.call(this,u)},configurable:!0,enumerable:!0}),n[r]=e.$instanceValues$.has(r)?e.$instanceValues$.get(r):l}})};function O5(n,e){for(;n;){const t=Object.getOwnPropertyDescriptor(n,e);if(t?.get)return t;n=Object.getPrototypeOf(n)}}var Fr=n=>{if(n.__stencil__getHostRef)return n.__stencil__getHostRef()},N5=(n,e)=>{const t={$flags$:0,$hostElement$:n,$cmpMeta$:e,$instanceValues$:new Map,$serializerValues$:new Map};t.$onReadyPromise$=new Promise(s=>t.$onReadyResolve$=s),n["s-p"]=[],n["s-rc"]=[];const i=t;return n.__stencil__getHostRef=()=>i,Mi.modernPropertyDecls&&Mi.state&&D5(n,t),i},zE=(n,e)=>e in n,Ud=(n,e)=>(0,console.error)(n,e),Ef=new Map,pC=[],P5="slot-fb{display:contents}slot-fb[hidden]{display:none}",HE="http://www.w3.org/1999/xlink",Ii=typeof window<"u"?window:{},Ht=Ii.HTMLElement||class{},mn={$flags$:0,$resourcesUrl$:"",jmp:n=>n(),raf:n=>requestAnimationFrame(n),ael:(n,e,t,i)=>n.addEventListener(e,t,i),rel:(n,e,t,i)=>n.removeEventListener(e,t,i),ce:(n,e)=>new CustomEvent(n,e)},M5=(()=>{var n;let e=!1;try{(n=Ii.document)==null||n.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),$5=n=>Promise.resolve(n),ly=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Ub=ly?!!Ii.document&&Object.getOwnPropertyDescriptor(Ii.document.adoptedStyleSheets,"length").writable:!1,zb=!1,Hb=[],mC=[],gC=(n,e)=>t=>{n.push(t),zb||(zb=!0,e&&mn.$flags$&4?cy(Gb):mn.raf(Gb))},GE=n=>{for(let e=0;e<n.length;e++)try{n[e](performance.now())}catch(t){Ud(t)}n.length=0},Gb=()=>{GE(Hb),GE(mC),(zb=Hb.length>0)&&mn.raf(Gb)},cy=n=>$5().then(n),va=gC(Hb,!1),An=gC(mC,!0),F5=n=>{const e=new URL(n,mn.$resourcesUrl$);return e.origin!==Ii.location.origin?e.href:e.pathname},j5=n=>n!=null&&n!==void 0,dy=n=>(n=typeof n,n==="object"||n==="function");function B5(n){var e,t,i;return(i=(t=(e=n.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:t.getAttribute("content"))!=null?i:void 0}var U5=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),z5={};C5(z5,{err:()=>bC,map:()=>H5,ok:()=>Vb,unwrap:()=>G5,unwrapErr:()=>V5});var Vb=n=>({isOk:!0,isErr:!1,value:n}),bC=n=>({isOk:!1,isErr:!0,value:n});function H5(n,e){if(n.isOk){const t=e(n.value);return t instanceof Promise?t.then(i=>Vb(i)):Vb(t)}if(n.isErr){const t=n.value;return bC(t)}throw"should never get here"}var G5=n=>{if(n.isOk)return n.value;throw n.value},V5=n=>{if(n.isErr)return n.value;throw n.value};var Yc;function q5(n){var e;const t=this.attachShadow({mode:"open",delegatesFocus:!!(n.$flags$&16)});Yc===void 0&&(Yc=(e=void 0)!=null?e:null),Yc&&(Ub?t.adoptedStyleSheets.push(Yc):t.adoptedStyleSheets=[...t.adoptedStyleSheets,Yc])}var vC=n=>{const e=qE(n,"childNodes");n.tagName&&n.tagName.includes("-")&&n["s-cr"]&&n.tagName!=="SLOT-FB"&&yC(e,n.tagName).forEach(i=>{i.nodeType===1&&i.tagName==="SLOT-FB"&&(K5(i,uy(i),!1).length?i.hidden=!0:i.hidden=!1)});let t=0;for(t=0;t<e.length;t++){const i=e[t];i.nodeType===1&&qE(i,"childNodes").length&&vC(i)}},W5=n=>{const e=[];for(let t=0;t<n.length;t++){const i=n[t]["s-nr"]||void 0;i&&i.isConnected&&e.push(i)}return e};function yC(n,e,t){let i=0,s=[],r;for(;i<n.length;i++)r=n[i],r["s-sr"]&&(!e||r["s-hn"]===e)&&t===void 0&&s.push(r),s=[...s,...yC(r.childNodes,e,t)];return s}var K5=(n,e,t=!0)=>{const i=[];(t&&n["s-sr"]||!n["s-sr"])&&i.push(n);let s=n;for(;s=s.nextSibling;)uy(s)===e&&(t||!s["s-sr"])&&i.push(s);return i},VE=(n,e)=>n.nodeType===1?n.getAttribute("slot")===null&&e===""||n.getAttribute("slot")===e:n["s-sn"]===e?!0:e==="",uy=n=>typeof n["s-sn"]=="string"?n["s-sn"]:n.nodeType===1&&n.getAttribute("slot")||void 0;function Y5(n){if(n.assignedElements||n.assignedNodes||!n["s-sr"])return;const e=t=>(function(i){const s=[],r=this["s-sn"];i?.flatten&&console.error(`
          Flattening is not supported for Stencil non-shadow slots.
          You can use \`.childNodes\` to nested slot fallback content.
          If you have a particular use case, please open an issue on the Stencil repo.
        `);const o=this["s-cr"].parentElement;return(o.__childNodes?o.childNodes:W5(o.childNodes)).forEach(d=>{r===uy(d)&&s.push(d)}),t?s.filter(d=>d.nodeType===1):s}).bind(n);n.assignedElements=e(!0),n.assignedNodes=e(!1)}function qE(n,e){if("__"+e in n){const t=n["__"+e];return typeof t!="function"?t:t.bind(n)}else return typeof n[e]!="function"?n[e]:n[e].bind(n)}var ya=(n,e="")=>()=>{},kl=new WeakMap,X5=(n,e,t)=>{let i=Ef.get(n);ly&&t?(i=i||new CSSStyleSheet,typeof i=="string"?i=e:i.replaceSync(e)):i=e,Ef.set(n,i)},Q5=(n,e,t)=>{var i;const s=xC(e,t),r=Ef.get(s);if(!Ii.document)return s;if(n=n.nodeType===11?n:Ii.document,r)if(typeof r=="string"){n=n.head||n;let o=kl.get(n),l;if(o||kl.set(n,o=new Set),!o.has(s)){{l=Ii.document.createElement("style"),l.innerHTML=r;const d=(i=mn.$nonce$)!=null?i:B5(Ii.document);if(d!=null&&l.setAttribute("nonce",d),!(e.$flags$&1))if(n.nodeName==="HEAD"){const u=n.querySelectorAll("link[rel=preconnect]"),f=u.length>0?u[u.length-1].nextSibling:n.querySelector("style");n.insertBefore(l,f?.parentNode===n?f:null)}else if("host"in n)if(ly){const u=new CSSStyleSheet;u.replaceSync(r),Ub?n.adoptedStyleSheets.unshift(u):n.adoptedStyleSheets=[u,...n.adoptedStyleSheets]}else{const u=n.querySelector("style");u?u.innerHTML=r+u.innerHTML:n.prepend(l)}else n.append(l);e.$flags$&1&&n.insertBefore(l,null)}e.$flags$&4&&(l.innerHTML+=P5),o&&o.add(s)}}else n.adoptedStyleSheets.includes(r)||(Ub?n.adoptedStyleSheets.push(r):n.adoptedStyleSheets=[...n.adoptedStyleSheets,r]);return s},Z5=n=>{const e=n.$cmpMeta$,t=n.$hostElement$,i=e.$flags$,s=ya("attachStyles",e.$tagName$),r=Q5(t.shadowRoot?t.shadowRoot:t.getRootNode(),e,n.$modeName$);i&10&&(t["s-sc"]=r,t.classList.add(r+"-h")),s()},xC=(n,e)=>"sc-"+(e&&n.$flags$&32?n.$tagName$+"-"+e:n.$tagName$),J=(n,e,...t)=>{let i=null,s=null,r=null,o=!1,l=!1;const d=[],u=p=>{for(let b=0;b<p.length;b++)i=p[b],Array.isArray(i)?u(i):i!=null&&typeof i!="boolean"&&((o=typeof n!="function"&&!dy(i))&&(i=String(i)),o&&l?d[d.length-1].$text$+=i:d.push(o?Tf(null,i):i),l=o)};if(u(t),e){e.key&&(s=e.key),e.name&&(r=e.name);{const p=e.className||e.class;p&&(e.class=typeof p!="object"?p:Object.keys(p).filter(b=>p[b]).join(" "))}}if(typeof n=="function")return n(e===null?{}:e,d,eP);const f=Tf(n,null);return f.$attrs$=e,d.length>0&&(f.$children$=d),f.$key$=s,f.$name$=r,f},Tf=(n,e)=>{const t={$flags$:0,$tag$:n,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t.$key$=null,t.$name$=null,t},Kt={},J5=n=>n&&n.$tag$===Kt,eP={forEach:(n,e)=>n.map(WE).forEach(e),map:(n,e)=>n.map(WE).map(e).map(tP)},WE=n=>({vattrs:n.$attrs$,vchildren:n.$children$,vkey:n.$key$,vname:n.$name$,vtag:n.$tag$,vtext:n.$text$}),tP=n=>{if(typeof n.vtag=="function"){const t={...n.vattrs};return n.vkey&&(t.key=n.vkey),n.vname&&(t.name=n.vname),J(n.vtag,t,...n.vchildren||[])}const e=Tf(n.vtag,n.vtext);return e.$attrs$=n.vattrs,e.$children$=n.vchildren,e.$key$=n.vkey,e.$name$=n.vname,e},hy=n=>{const e=U5(n);return new RegExp(`(^|[^@]|@(?!supports\\s+selector\\s*\\([^{]*?${e}))(${e}\\b)`,"g")};hy("::slotted");hy(":host");hy(":host-context");var iP=n=>pC.map(e=>e(n)).find(e=>!!e),nP=n=>pC.push(n),sP=n=>{var e;return(e=Fr(n))==null?void 0:e.$modeName$},wC=(n,e,t)=>n!=null&&!dy(n)?e&4?n==="false"?!1:n===""||!!n:e&2?typeof n=="string"?parseFloat(n):typeof n=="number"?n:NaN:e&1?String(n):n:n,rP=n=>n,Ze=(n,e,t)=>{const i=rP(n);return{emit:s=>SC(i,e,{bubbles:!!(t&4),composed:!!(t&2),cancelable:!!(t&1),detail:s})}},SC=(n,e,t)=>{const i=mn.ce(e,t);return n.dispatchEvent(i),i},KE=(n,e,t,i,s,r,o)=>{if(t===i)return;let l=zE(n,e),d=e.toLowerCase();if(e==="class"){const u=n.classList,f=YE(t);let p=YE(i);u.remove(...f.filter(b=>b&&!p.includes(b))),u.add(...p.filter(b=>b&&!f.includes(b)))}else if(e==="style"){for(const u in t)(!i||i[u]==null)&&(u.includes("-")?n.style.removeProperty(u):n.style[u]="");for(const u in i)(!t||i[u]!==t[u])&&(u.includes("-")?n.style.setProperty(u,i[u]):n.style[u]=i[u])}else if(e!=="key")if(e==="ref")i&&i(n);else if(!n.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):zE(Ii,d)?e=d.slice(2):e=d[2]+e.slice(3),t||i){const u=e.endsWith(EC);e=e.replace(aP,""),t&&mn.rel(n,e,t,u),i&&mn.ael(n,e,i,u)}}else{const u=dy(i);if((l||u&&i!==null)&&!s)try{if(n.tagName.includes("-"))n[e]!==i&&(n[e]=i);else{const p=i??"";e==="list"?l=!1:(t==null||n[e]!=p)&&(typeof n.__lookupSetter__(e)=="function"?n[e]=p:n.setAttribute(e,p))}}catch{}let f=!1;d!==(d=d.replace(/^xlink\:?/,""))&&(e=d,f=!0),i==null||i===!1?(i!==!1||n.getAttribute(e)==="")&&(f?n.removeAttributeNS(HE,e):n.removeAttribute(e)):(!l||r&4||s)&&!u&&n.nodeType===1&&(i=i===!0?"":i,f?n.setAttributeNS(HE,e,i):n.setAttribute(e,i))}},oP=/\s/,YE=n=>(typeof n=="object"&&n&&"baseVal"in n&&(n=n.baseVal),!n||typeof n!="string"?[]:n.split(oP)),EC="Capture",aP=new RegExp(EC+"$"),qb=(n,e,t,i)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,r=n&&n.$attrs$||{},o=e.$attrs$||{};for(const l of XE(Object.keys(r)))l in o||KE(s,l,r[l],void 0,t,e.$flags$);for(const l of XE(Object.keys(o)))KE(s,l,r[l],o[l],t,e.$flags$)};function XE(n){return n.includes("ref")?[...n.filter(e=>e!=="ref"),"ref"]:n}var sf,kf,vd,Wb=!1,_f=!1,fy=!1,Fn=!1,Af=(n,e,t)=>{var i;const s=e.$children$[t];let r=0,o,l,d;if(Wb||(fy=!0,s.$tag$==="slot"&&(s.$flags$|=s.$children$?2:1)),s.$text$!==null)o=s.$elm$=Ii.document.createTextNode(s.$text$);else if(s.$flags$&1)o=s.$elm$=Ii.document.createTextNode(""),qb(null,s,Fn);else{if(Fn||(Fn=s.$tag$==="svg"),!Ii.document)throw new Error("You are trying to render a Stencil component in an environment that doesn't support the DOM. Make sure to populate the [`window`](https://developer.mozilla.org/en-US/docs/Web/API/Window/window) object before rendering a component.");if(o=s.$elm$=Ii.document.createElementNS(Fn?R5:L5,!Wb&&Mi.slotRelocation&&s.$flags$&2?"slot-fb":s.$tag$),Fn&&s.$tag$==="foreignObject"&&(Fn=!1),qb(null,s,Fn),j5(sf)&&o["s-si"]!==sf&&o.classList.add(o["s-si"]=sf),s.$children$)for(r=0;r<s.$children$.length;++r)l=Af(n,s,r),l&&o.appendChild(l);s.$tag$==="svg"?Fn=!1:o.tagName==="foreignObject"&&(Fn=!0)}return o["s-hn"]=vd,s.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=kf,o["s-sn"]=s.$name$||"",o["s-rf"]=(i=s.$attrs$)==null?void 0:i.ref,Y5(o),d=n&&n.$children$&&n.$children$[t],d&&d.$tag$===s.$tag$&&n.$elm$&&yd(n.$elm$,!1),CC(kf,o,e.$elm$,n?.$elm$)),o},yd=(n,e)=>{mn.$flags$|=1;const t=Array.from(n.__childNodes||n.childNodes);n["s-sr"]&&Mi.experimentalSlotFixes;for(let i=t.length-1;i>=0;i--){const s=t[i];s["s-hn"]!==vd&&s["s-ol"]&&(No(xd(s).parentNode,s,xd(s)),s["s-ol"].remove(),s["s-ol"]=void 0,s["s-sh"]=void 0,fy=!0),e&&yd(s,e)}mn.$flags$&=-2},TC=(n,e,t,i,s,r)=>{let o=n["s-cr"]&&n["s-cr"].parentNode||n,l;for(o.shadowRoot&&o.tagName===vd&&(o=o.shadowRoot);s<=r;++s)i[s]&&(l=Af(null,t,s),l&&(i[s].$elm$=l,No(o,l,xd(e))))},kC=(n,e,t)=>{for(let i=e;i<=t;++i){const s=n[i];if(s){const r=s.$elm$;AC(s),r&&(_f=!0,r["s-ol"]?r["s-ol"].remove():yd(r,!0),r.remove())}}},lP=(n,e,t,i,s=!1)=>{let r=0,o=0,l=0,d=0,u=e.length-1,f=e[0],p=e[u],b=i.length-1,v=i[0],y=i[b],w,E;for(;r<=u&&o<=b;)if(f==null)f=e[++r];else if(p==null)p=e[--u];else if(v==null)v=i[++o];else if(y==null)y=i[--b];else if(mh(f,v,s))wl(f,v,s),f=e[++r],v=i[++o];else if(mh(p,y,s))wl(p,y,s),p=e[--u],y=i[--b];else if(mh(f,y,s))(f.$tag$==="slot"||y.$tag$==="slot")&&yd(f.$elm$.parentNode,!1),wl(f,y,s),No(n,f.$elm$,p.$elm$.nextSibling),f=e[++r],y=i[--b];else if(mh(p,v,s))(f.$tag$==="slot"||y.$tag$==="slot")&&yd(p.$elm$.parentNode,!1),wl(p,v,s),No(n,p.$elm$,f.$elm$),p=e[--u],v=i[++o];else{for(l=-1,d=r;d<=u;++d)if(e[d]&&e[d].$key$!==null&&e[d].$key$===v.$key$){l=d;break}l>=0?(E=e[l],E.$tag$!==v.$tag$?w=Af(e&&e[o],t,l):(wl(E,v,s),e[l]=void 0,w=E.$elm$),v=i[++o]):(w=Af(e&&e[o],t,o),v=i[++o]),w&&No(xd(f.$elm$).parentNode,w,xd(f.$elm$))}r>u?TC(n,i[b+1]==null?null:i[b+1].$elm$,t,i,o,b):o>b&&kC(e,r,u)},mh=(n,e,t=!1)=>n.$tag$===e.$tag$?n.$tag$==="slot"?n.$name$===e.$name$:t?(t&&!n.$key$&&e.$key$&&(n.$key$=e.$key$),!0):n.$key$===e.$key$:!1,xd=n=>n&&n["s-ol"]||n,wl=(n,e,t=!1)=>{const i=e.$elm$=n.$elm$,s=n.$children$,r=e.$children$,o=e.$tag$,l=e.$text$;let d;l===null?(Fn=o==="svg"?!0:o==="foreignObject"?!1:Fn,qb(n,e,Fn),s!==null&&r!==null?lP(i,s,e,r,t):r!==null?(n.$text$!==null&&(i.textContent=""),TC(i,null,e,r,0,r.length-1)):!t&&Mi.updatable&&s!==null&&kC(s,0,s.length-1),Fn&&o==="svg"&&(Fn=!1)):(d=i["s-cr"])?d.parentNode.textContent=l:n.$text$!==l&&(i.data=l)},Cr=[],_C=n=>{let e,t,i;const s=n.__childNodes||n.childNodes;for(const r of s){if(r["s-sr"]&&(e=r["s-cr"])&&e.parentNode){t=e.parentNode.__childNodes||e.parentNode.childNodes;const o=r["s-sn"];for(i=t.length-1;i>=0;i--)if(e=t[i],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==r["s-hn"])if(VE(e,o)){let l=Cr.find(d=>d.$nodeToRelocate$===e);_f=!0,e["s-sn"]=e["s-sn"]||o,l?(l.$nodeToRelocate$["s-sh"]=r["s-hn"],l.$slotRefNode$=r):(e["s-sh"]=r["s-hn"],Cr.push({$slotRefNode$:r,$nodeToRelocate$:e})),e["s-sr"]&&Cr.map(d=>{VE(d.$nodeToRelocate$,e["s-sn"])&&(l=Cr.find(u=>u.$nodeToRelocate$===e),l&&!d.$slotRefNode$&&(d.$slotRefNode$=l.$slotRefNode$))})}else Cr.some(l=>l.$nodeToRelocate$===e)||Cr.push({$nodeToRelocate$:e})}r.nodeType===1&&_C(r)}},AC=n=>{n.$attrs$&&n.$attrs$.ref&&n.$attrs$.ref(null),n.$children$&&n.$children$.map(AC)},No=(n,e,t)=>(typeof e["s-sn"]=="string"&&e["s-sr"]&&e["s-cr"]&&CC(e["s-cr"],e,n,e.parentElement),n?.insertBefore(e,t));function CC(n,e,t,i){var s,r;let o;if(n&&typeof e["s-sn"]=="string"&&e["s-sr"]&&n.parentNode&&n.parentNode["s-sc"]&&(o=e["s-si"]||n.parentNode["s-sc"])){const l=e["s-sn"],d=e["s-hn"];if((s=t.classList)==null||s.add(o+"-s"),i&&((r=i.classList)!=null&&r.contains(o+"-s"))){let u=(i.__childNodes||i.childNodes)[0],f=!1;for(;u;){if(u["s-sn"]!==l&&u["s-hn"]===d&&u["s-sr"]){f=!0;break}u=u.nextSibling}f||i.classList.remove(o+"-s")}}}var cP=(n,e,t=!1)=>{var i,s,r,o,l;const d=n.$hostElement$,u=n.$cmpMeta$,f=n.$vnode$||Tf(null,null),b=J5(e)?e:J(null,null,e);if(vd=d.tagName,u.$attrsToReflect$&&(b.$attrs$=b.$attrs$||{},u.$attrsToReflect$.forEach(([v,y])=>{Mi.serializer&&n.$serializerValues$.has(v)?b.$attrs$[y]=n.$serializerValues$.get(v):b.$attrs$[y]=d[v]})),t&&b.$attrs$)for(const v of Object.keys(b.$attrs$))d.hasAttribute(v)&&!["key","ref","style","class"].includes(v)&&(b.$attrs$[v]=d[v]);b.$tag$=null,b.$flags$|=4,n.$vnode$=b,b.$elm$=f.$elm$=d.shadowRoot||d,sf=d["s-sc"],Wb=!!(u.$flags$&1)&&!(u.$flags$&128),kf=d["s-cr"],_f=!1,wl(f,b,t);{if(mn.$flags$|=1,fy){_C(b.$elm$);for(const v of Cr){const y=v.$nodeToRelocate$;if(!y["s-ol"]&&Ii.document){const w=Ii.document.createTextNode("");w["s-nr"]=y,No(y.parentNode,y["s-ol"]=w,y)}}for(const v of Cr){const y=v.$nodeToRelocate$,w=v.$slotRefNode$;if(w){const E=w.parentNode;let T=w.nextSibling;{let O=(i=y["s-ol"])==null?void 0:i.previousSibling;for(;O;){let R=(s=O["s-nr"])!=null?s:null;if(R&&R["s-sn"]===y["s-sn"]&&E===(R.__parentNode||R.parentNode)){for(R=R.nextSibling;R===y||R?.["s-sr"];)R=R?.nextSibling;if(!R||!R["s-nr"]){T=R;break}}O=O.previousSibling}}const k=y.__parentNode||y.parentNode,_=y.__nextSibling||y.nextSibling;(!T&&E!==k||_!==T)&&y!==T&&(!y["s-hn"]&&y["s-ol"]&&(y["s-hn"]=y["s-ol"].parentNode.nodeName),No(E,y,T),y.nodeType===1&&y.tagName!=="SLOT-FB"&&(y.hidden=(r=y["s-ih"])!=null?r:!1)),y&&typeof w["s-rf"]=="function"&&w["s-rf"](w)}else y.nodeType===1&&(t&&(y["s-ih"]=(o=y.hidden)!=null?o:!1),y.hidden=!0)}}_f&&vC(b.$elm$),mn.$flags$&=-2,Cr.length=0}if(Mi.experimentalScopedSlotChanges&&u.$flags$&2){const v=b.$elm$.__childNodes||b.$elm$.childNodes;for(const y of v)y["s-hn"]!==vd&&!y["s-sh"]&&(t&&y["s-ih"]==null&&(y["s-ih"]=(l=y.hidden)!=null?l:!1),y.hidden=!0)}kf=void 0},IC=(n,e)=>{if(e&&!n.$onRenderResolve$&&e["s-p"]){const t=e["s-p"].push(new Promise(i=>n.$onRenderResolve$=()=>{e["s-p"].splice(t-1,1),i()}))}},Ep=(n,e)=>{if(n.$flags$|=16,n.$flags$&4){n.$flags$|=512;return}IC(n,n.$ancestorComponent$);const t=()=>dP(n,e);if(e){queueMicrotask(()=>{t()});return}return An(t)},dP=(n,e)=>{const t=n.$hostElement$,i=ya("scheduleUpdate",n.$cmpMeta$.$tagName$),s=t;if(!s)throw new Error(`Can't render component <${t.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let r;return e?r=Il(s,"componentWillLoad",void 0,t):r=Il(s,"componentWillUpdate",void 0,t),r=QE(r,()=>Il(s,"componentWillRender",void 0,t)),i(),QE(r,()=>hP(n,s,e))},QE=(n,e)=>uP(n)?n.then(e).catch(t=>{console.error(t),e()}):e(),uP=n=>n instanceof Promise||n&&n.then&&typeof n.then=="function",hP=async(n,e,t)=>{var i;const s=n.$hostElement$,r=ya("update",n.$cmpMeta$.$tagName$),o=s["s-rc"];t&&Z5(n);const l=ya("render",n.$cmpMeta$.$tagName$);fP(n,e,s,t),o&&(o.map(d=>d()),s["s-rc"]=void 0),l(),r();{const d=(i=s["s-p"])!=null?i:[],u=()=>pP(n);d.length===0?u():(Promise.all(d).then(u),n.$flags$|=4,d.length=0)}},ZE=null,fP=(n,e,t,i)=>{try{ZE=e,e=e.render&&e.render(),n.$flags$&=-17,n.$flags$|=2,(Mi.hasRenderFn||Mi.reflect)&&(Mi.vdomRender||Mi.reflect)&&(Mi.hydrateServerSide||cP(n,e,i))}catch(d){Ud(d,n.$hostElement$)}return ZE=null,null},pP=n=>{const e=n.$cmpMeta$.$tagName$,t=n.$hostElement$,i=ya("postUpdate",e),s=t,r=n.$ancestorComponent$;Il(s,"componentDidRender",void 0,t),n.$flags$&64?(Il(s,"componentDidUpdate",void 0,t),i()):(n.$flags$|=64,gP(t),Il(s,"componentDidLoad",void 0,t),i(),n.$onReadyResolve$(t),r||mP()),n.$onRenderResolve$&&(n.$onRenderResolve$(),n.$onRenderResolve$=void 0),n.$flags$&512&&cy(()=>Ep(n,!1)),n.$flags$&=-517},Ns=n=>{var e;{const t=Fr(n),i=(e=t?.$hostElement$)==null?void 0:e.isConnected;return i&&(t.$flags$&18)===2&&Ep(t,!1),i}},mP=n=>{cy(()=>SC(Ii,"appload",{detail:{namespace:_5}}))},Il=(n,e,t,i)=>{if(n&&n[e])try{return n[e](t)}catch(s){Ud(s,i)}},gP=n=>{var e;return n.classList.add((e=Mi.hydratedSelectorName)!=null?e:"hydrated")},bP=(n,e)=>Fr(n).$instanceValues$.get(e),JE=(n,e,t,i)=>{const s=Fr(n);if(!s||Mi.serializer&&s.$serializerValues$.has(e)&&s.$serializerValues$.get(e)===t)return;const r=n,o=s.$instanceValues$.get(e),l=s.$flags$,d=r;t=wC(t,i.$members$[e][0]);const u=Number.isNaN(o)&&Number.isNaN(t);if(t!==o&&!u){if(s.$instanceValues$.set(e,t),Mi.serializer&&Mi.reflect&&i.$attrsToReflect$&&d&&i.$serializers$&&i.$serializers$[e]){let p=t;for(const b of i.$serializers$[e])p=d[b](p,e);s.$serializerValues$.set(e,p)}{if(i.$watchers$&&l&128){const p=i.$watchers$[e];p&&p.map(b=>{try{d[b](t,o,e)}catch(v){Ud(v,r)}})}if((l&18)===2){if(d.componentShouldUpdate&&d.componentShouldUpdate(t,o,e)===!1)return;Ep(s,!1)}}}},vP=(n,e,t)=>{var i,s;const r=n.prototype;if(e.$members$||Mi.propChangeCallback){n.watchers&&!e.$watchers$&&(e.$watchers$=n.watchers),n.deserializers&&!e.$deserializers$&&(e.$deserializers$=n.deserializers),n.serializers&&!e.$serializers$&&(e.$serializers$=n.serializers);const o=Object.entries((i=e.$members$)!=null?i:{});o.map(([l,[d]])=>{if(d&31||d&32){const{get:u,set:f}=Object.getOwnPropertyDescriptor(r,l)||{};u&&(e.$members$[l][0]|=2048),f&&(e.$members$[l][0]|=4096),Object.defineProperty(r,l,{get(){return u?u.apply(this):bP(this,l)},configurable:!0,enumerable:!0}),Object.defineProperty(r,l,{set(p){const b=Fr(this);if(b){if(f){typeof(d&32?this[l]:b.$hostElement$[l])>"u"&&b.$instanceValues$.get(l)&&(p=b.$instanceValues$.get(l)),f.apply(this,[wC(p,d)]),p=d&32?this[l]:b.$hostElement$[l],JE(this,l,p,e);return}{JE(this,l,p,e);return}}}})}});{const l=new Map;r.attributeChangedCallback=function(d,u,f){mn.jmp(()=>{var p;const b=l.get(d),v=Fr(this);if(Mi.serializer&&v.$serializerValues$.has(b)&&v.$serializerValues$.get(b)===f)return;if(this.hasOwnProperty(b)&&Mi.lazyLoad,Mi.deserializer&&e.$deserializers$&&e.$deserializers$[b]){const w=(E,T)=>{const k=T?.[E](f,b);k!==this[b]&&(this[b]=k)};for(const E of e.$deserializers$[b])w(E,this);return}else{if(r.hasOwnProperty(b)&&typeof this[b]=="number"&&this[b]==f)return;if(b==null){const w=v?.$flags$;if(v&&w&&!(w&8)&&w&128&&f!==u){const T=this,k=(p=e.$watchers$)==null?void 0:p[d];k?.forEach(_=>{T[_]!=null&&T[_].call(T,f,u,d)})}return}}const y=Object.getOwnPropertyDescriptor(r,b);f=f===null&&typeof this[b]=="boolean"?!1:f,f!=this[b]&&(!y.get||y.set)&&(this[b]=f)})},n.observedAttributes=Array.from(new Set([...Object.keys((s=e.$watchers$)!=null?s:{}),...o.filter(([d,u])=>u[0]&31).map(([d,u])=>{var f;const p=u[1]||d;return l.set(p,d),u[0]&512&&((f=e.$attrsToReflect$)==null||f.push([d,p])),p})]))}}return n},yP=async(n,e,t,i)=>{let s;if((e.$flags$&32)===0){e.$flags$|=32,t.$lazyBundleId$;{s=n.constructor;const l=n.localName;customElements.whenDefined(l).then(()=>e.$flags$|=128)}if(s&&s.style){let l;typeof s.style=="string"?l=s.style:typeof s.style!="string"&&(e.$modeName$=iP(n),e.$modeName$&&(l=s.style[e.$modeName$]));const d=xC(t,e.$modeName$);if(!Ef.has(d)){const u=ya("registerStyles",t.$tagName$);X5(d,l,!!(t.$flags$&1)),u()}}}const r=e.$ancestorComponent$,o=()=>Ep(e,!0);r&&r["s-rc"]?r["s-rc"].push(o):o()},eT=(n,e)=>{},xP=n=>{if((mn.$flags$&1)===0){const e=Fr(n);if(!e)return;const t=e.$cmpMeta$,i=ya("connectedCallback",t.$tagName$);if(e.$flags$&1)RC(n,e,t.$listeners$),e?.$lazyInstance$?eT(e.$lazyInstance$):e?.$onReadyPromise$&&e.$onReadyPromise$.then(()=>eT(e.$lazyInstance$));else{e.$flags$|=1,t.$flags$&12&&wP(n);{let s=n;for(;s=s.parentNode||s.host;)if(s["s-p"]){IC(e,e.$ancestorComponent$=s);break}}t.$members$&&Object.entries(t.$members$).map(([s,[r]])=>{if(r&31&&s in n&&n[s]!==Object.prototype[s]){const o=n[s];delete n[s],n[s]=o}}),yP(n,e,t)}i()}},wP=n=>{if(!Ii.document)return;const e=n["s-cr"]=Ii.document.createComment("");e["s-cn"]=!0,No(n,e,n.firstChild)},SP=async n=>{if((mn.$flags$&1)===0){const e=Fr(n);e?.$rmListeners$&&(e.$rmListeners$.map(t=>t()),e.$rmListeners$=void 0)}kl.has(n)&&kl.delete(n),n.shadowRoot&&kl.has(n.shadowRoot)&&kl.delete(n.shadowRoot)},Gt=(n,e)=>{const t={$flags$:e[0],$tagName$:e[1]};t.$members$=e[2],t.$listeners$=e[3],t.$watchers$=n.$watchers$,t.$deserializers$=n.$deserializers$,t.$serializers$=n.$serializers$,t.$attrsToReflect$=[],!(t.$flags$&1)&&t.$flags$&256;const i=n.prototype.connectedCallback,s=n.prototype.disconnectedCallback;return Object.assign(n.prototype,{__hasHostListenerAttached:!1,__registerHost(){N5(this,t)},connectedCallback(){if(!this.__hasHostListenerAttached){const r=Fr(this);if(!r)return;RC(this,r,t.$listeners$),this.__hasHostListenerAttached=!0}xP(this),i&&i.call(this)},disconnectedCallback(){SP(this),s&&s.call(this)},__attachShadow(){if(!this.shadowRoot)q5.call(this,t);else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${t.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),n.is=t.$tagName$,vP(n,t)},RC=(n,e,t,i)=>{t&&Ii.document&&t.map(([s,r,o])=>{const l=TP(Ii.document,n,s),d=EP(e,o),u=kP(s);mn.ael(l,r,d,u),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>mn.rel(l,r,d,u))})},EP=(n,e)=>t=>{var i;try{Mi.lazyLoad||n.$hostElement$[e](t)}catch(s){Ud(s,n.$hostElement$)}},TP=(n,e,t)=>t&4?n:t&8?Ii:t&16?n.body:e,kP=n=>M5?{passive:(n&1)!==0,capture:(n&2)!==0}:(n&2)!==0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class _P{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,t){const i=this.m.get(e);return i!==void 0?i:t}getBoolean(e,t=!1){const i=this.m.get(e);return i===void 0?t:typeof i=="string"?i==="true":!!i}getNumber(e,t){const i=parseFloat(this.m.get(e));return isNaN(i)?t!==void 0?t:NaN:i}set(e,t){this.m.set(e,t)}}const bt=new _P,AP=n=>{try{const e=n.sessionStorage.getItem(LC);return e!==null?JSON.parse(e):{}}catch{return{}}},CP=(n,e)=>{try{n.sessionStorage.setItem(LC,JSON.stringify(e))}catch{return}},IP=n=>{const e={};return n.location.search.slice(1).split("&").map(t=>t.split("=")).map(([t,i])=>{try{return[decodeURIComponent(t),decodeURIComponent(i)]}catch{return["",""]}}).filter(([t])=>RP(t,tT)).map(([t,i])=>[t.slice(tT.length),i]).forEach(([t,i])=>{e[t]=i}),e},RP=(n,e)=>n.substr(0,e.length)===e,tT="ionic:",LC="ionic-persist-config";var ma;(function(n){n.OFF="OFF",n.ERROR="ERROR",n.WARN="WARN"})(ma||(ma={}));const zn=(n,...e)=>{const t=bt.get("logLevel",ma.WARN);if([ma.WARN].includes(t))return console.warn(`[Ionic Warning]: ${n}`,...e)},Hr=(n,...e)=>{const t=bt.get("logLevel",ma.ERROR);if([ma.ERROR,ma.WARN].includes(t))return console.error(`[Ionic Error]: ${n}`,...e)},LP=(n,...e)=>console.error(`<${n.tagName.toLowerCase()}> must be used inside ${e.join(" or ")}.`);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ci=typeof window<"u"?window:void 0,ld=typeof document<"u"?document:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let s0;const DP=n=>{if(s0===void 0){const e=n.style.animationName!==void 0,t=n.style.webkitAnimationName!==void 0;s0=!e&&t?"-webkit-":""}return s0},r0=(n,e,t)=>{const i=e.startsWith("animation")?DP(n):"";n.style.setProperty(i+e,t)},gh=(n=[],e)=>{if(e!==void 0){const t=Array.isArray(e)?e:[e];return[...n,...t]}return n},ht=n=>{let e,t,i,s,r,o,l=[],d=[],u=[],f=!1,p,b={},v=[],y=[],w={},E=0,T=!1,k=!1,_,O,R,M=!0,P=!1,N=!0,L,D=!1;const $=n,U=[],G=[],Z=[],se=[],z=[],Y=[],V=[],q=[],ie=[],j=[],H=[],K=typeof AnimationEffect=="function"||ci!==void 0&&typeof ci.AnimationEffect=="function",X=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&K,ae=()=>H,re=ue=>(z.forEach(Le=>{Le.destroy(ue)}),ge(ue),se.length=0,z.length=0,l.length=0,Pt(),f=!1,N=!0,L),ge=ue=>{Ce(),ue&&at()},Se=()=>{T=!1,k=!1,N=!0,_=void 0,O=void 0,R=void 0,E=0,P=!1,M=!0,D=!1},De=()=>E!==0&&!D,ze=(ue,Le)=>{const Ge=Le.findIndex(ot=>ot.c===ue);Ge>-1&&Le.splice(Ge,1)},Qe=(ue,Le)=>(Z.push({c:ue,o:Le}),L),nt=(ue,Le)=>((Le?.oneTimeCallback?G:U).push({c:ue,o:Le}),L),Pt=()=>(U.length=0,G.length=0,L),Ce=()=>{X&&(H.forEach(ue=>{ue.cancel()}),H.length=0)},at=()=>{Y.forEach(ue=>{ue?.parentNode&&ue.parentNode.removeChild(ue)}),Y.length=0},Ie=ue=>(V.push(ue),L),et=ue=>(q.push(ue),L),we=ue=>(ie.push(ue),L),ee=ue=>(j.push(ue),L),_e=ue=>(d=gh(d,ue),L),Be=ue=>(u=gh(u,ue),L),Xe=(ue={})=>(b=ue,L),tt=(ue=[])=>{for(const Le of ue)b[Le]="";return L},He=ue=>(v=gh(v,ue),L),We=ue=>(y=gh(y,ue),L),vt=(ue={})=>(w=ue,L),Yt=(ue=[])=>{for(const Le of ue)w[Le]="";return L},ii=()=>r!==void 0?r:p?p.getFill():"both",$t=()=>_!==void 0?_:o!==void 0?o:p?p.getDirection():"normal",Te=()=>T?"linear":i!==void 0?i:p?p.getEasing():"linear",Me=()=>k?0:O!==void 0?O:t!==void 0?t:p?p.getDuration():0,kt=()=>s!==void 0?s:p?p.getIterations():1,Ct=()=>R!==void 0?R:e!==void 0?e:p?p.getDelay():0,Bt=()=>l,Xt=ue=>(o=ue,pe(!0),L),Ut=ue=>(r=ue,pe(!0),L),ke=ue=>(e=ue,pe(!0),L),lt=ue=>(i=ue,pe(!0),L),Ee=ue=>(!X&&ue===0&&(ue=1),t=ue,pe(!0),L),$e=ue=>(s=ue,pe(!0),L),It=ue=>(p=ue,L),Et=ue=>{if(ue!=null)if(ue.nodeType===1)se.push(ue);else if(ue.length>=0)for(let Le=0;Le<ue.length;Le++)se.push(ue[Le]);else Hr("createAnimation - Invalid addElement value.");return L},Tt=ue=>{if(ue!=null)if(Array.isArray(ue))for(const Le of ue)Le.parent(L),z.push(Le);else ue.parent(L),z.push(ue);return L},ni=ue=>{const Le=l!==ue;return l=ue,Le&&Qt(l),L},Qt=ue=>{X&&ae().forEach(Le=>{const Ge=Le.effect;if(Ge.setKeyframes)Ge.setKeyframes(ue);else{const ot=new KeyframeEffect(Ge.target,ue,Ge.getTiming());Le.effect=ot}})},yt=()=>{V.forEach(ot=>ot()),q.forEach(ot=>ot());const ue=d,Le=u,Ge=b;se.forEach(ot=>{const fe=ot.classList;ue.forEach(Ae=>fe.add(Ae)),Le.forEach(Ae=>fe.remove(Ae));for(const Ae in Ge)Ge.hasOwnProperty(Ae)&&r0(ot,Ae,Ge[Ae])})},ct=()=>{ie.forEach(fe=>fe()),j.forEach(fe=>fe());const ue=M?1:0,Le=v,Ge=y,ot=w;se.forEach(fe=>{const Ae=fe.classList;Le.forEach(mt=>Ae.add(mt)),Ge.forEach(mt=>Ae.remove(mt));for(const mt in ot)ot.hasOwnProperty(mt)&&r0(fe,mt,ot[mt])}),O=void 0,_=void 0,R=void 0,U.forEach(fe=>fe.c(ue,L)),G.forEach(fe=>fe.c(ue,L)),G.length=0,N=!0,M&&(P=!0),M=!0},pi=()=>{E!==0&&(E--,E===0&&(ct(),p&&p.animationFinish()))},Xi=()=>{se.forEach(ue=>{const Le=ue.animate(l,{id:$,delay:Ct(),duration:Me(),easing:Te(),iterations:kt(),fill:ii(),direction:$t()});Le.pause(),H.push(Le)}),H.length>0&&(H[0].onfinish=()=>{pi()})},Qi=()=>{yt(),l.length>0&&X&&Xi(),f=!0},Sn=ue=>{ue=Math.min(Math.max(ue,0),.9999),X&&H.forEach(Le=>{Le.currentTime=Le.effect.getComputedTiming().delay+Me()*ue,Le.pause()})},Zi=ue=>{H.forEach(Le=>{Le.effect.updateTiming({delay:Ct(),duration:Me(),easing:Te(),iterations:kt(),fill:ii(),direction:$t()})}),ue!==void 0&&Sn(ue)},pe=(ue=!1,Le=!0,Ge)=>(ue&&z.forEach(ot=>{ot.update(ue,Le,Ge)}),X&&Zi(Ge),L),je=(ue=!1,Le)=>(z.forEach(Ge=>{Ge.progressStart(ue,Le)}),rt(),T=ue,f||Qi(),pe(!1,!0,Le),L),xt=ue=>(z.forEach(Le=>{Le.progressStep(ue)}),Sn(ue),L),Mt=(ue,Le,Ge)=>(T=!1,z.forEach(ot=>{ot.progressEnd(ue,Le,Ge)}),Ge!==void 0&&(O=Ge),P=!1,M=!0,ue===0?(_=$t()==="reverse"?"normal":"reverse",_==="reverse"&&(M=!1),X?(pe(),Sn(1-Le)):(R=(1-Le)*Me()*-1,pe(!1,!1))):ue===1&&(X?(pe(),Sn(Le)):(R=Le*Me()*-1,pe(!1,!1))),ue!==void 0&&!p&&Ye(),L),rt=()=>{f&&(X?H.forEach(ue=>{ue.pause()}):se.forEach(ue=>{r0(ue,"animation-play-state","paused")}),D=!0)},xi=()=>(z.forEach(ue=>{ue.pause()}),rt(),L),te=()=>{pi()},Re=()=>{H.forEach(ue=>{ue.play()}),(l.length===0||se.length===0)&&pi()},Ke=()=>{X&&(Sn(0),Zi())},Ye=ue=>new Promise(Le=>{ue?.sync&&(k=!0,nt(()=>k=!1,{oneTimeCallback:!0})),f||Qi(),P&&(Ke(),P=!1),N&&(E=z.length+1,N=!1);const Ge=()=>{ze(ot,G),Le()},ot=()=>{ze(Ge,Z),Le()};nt(ot,{oneTimeCallback:!0}),Qe(Ge,{oneTimeCallback:!0}),z.forEach(fe=>{fe.play()}),X?Re():te(),D=!1}),pt=()=>{z.forEach(ue=>{ue.stop()}),f&&(Ce(),f=!1),Se(),Z.forEach(ue=>ue.c(0,L)),Z.length=0},ki=(ue,Le)=>{const Ge=l[0];return Ge!==void 0&&(Ge.offset===void 0||Ge.offset===0)?Ge[ue]=Le:l=[{offset:0,[ue]:Le},...l],L};return L={parentAnimation:p,elements:se,childAnimations:z,id:$,animationFinish:pi,from:ki,to:(ue,Le)=>{const Ge=l[l.length-1];return Ge!==void 0&&(Ge.offset===void 0||Ge.offset===1)?Ge[ue]=Le:l=[...l,{offset:1,[ue]:Le}],L},fromTo:(ue,Le,Ge)=>ki(ue,Le).to(ue,Ge),parent:It,play:Ye,pause:xi,stop:pt,destroy:re,keyframes:ni,addAnimation:Tt,addElement:Et,update:pe,fill:Ut,direction:Xt,iterations:$e,duration:Ee,easing:lt,delay:ke,getWebAnimations:ae,getKeyframes:Bt,getFill:ii,getDirection:$t,getDelay:Ct,getIterations:kt,getEasing:Te,getDuration:Me,afterAddRead:we,afterAddWrite:ee,afterClearStyles:Yt,afterStyles:vt,afterRemoveClass:We,afterAddClass:He,beforeAddRead:Ie,beforeAddWrite:et,beforeClearStyles:tt,beforeStyles:Xe,beforeRemoveClass:Be,beforeAddClass:_e,onFinish:nt,isRunning:De,progressStart:je,progressStep:xt,progressEnd:Mt}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Fo=(n,e)=>{n.componentOnReady?n.componentOnReady().then(t=>e(t)):is(()=>e(n))},Cf=n=>n.componentOnReady!==void 0,ec=(n,e=[])=>{const t={};return e.forEach(i=>{n.hasAttribute(i)&&(n.getAttribute(i)!==null&&(t[i]=n.getAttribute(i)),n.removeAttribute(i))}),t},OP=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],zo=(n,e)=>ec(n,OP),NP=(n,e,t,i)=>n.addEventListener(e,t,i),PP=(n,e,t,i)=>n.removeEventListener(e,t,i),xn=(n,e=n)=>n.shadowRoot||e,is=n=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(n):typeof requestAnimationFrame=="function"?requestAnimationFrame(n):setTimeout(n),MP=n=>!!n.shadowRoot&&!!n.attachShadow,DC=n=>{if(n.focus(),n.classList.contains("ion-focusable")){const e=n.closest("ion-app");e&&e.setFocus([n])}},OC=(n,e,t,i,s)=>{{let r=e.querySelector("input.aux-input");r||(r=e.ownerDocument.createElement("input"),r.type="hidden",r.classList.add("aux-input"),e.appendChild(r)),r.disabled=s,r.name=t,r.value=i||""}},ts=(n,e,t)=>Math.max(n,Math.min(e,t)),$n=(n,e)=>{if(!n){const t="ASSERT: "+e;Hr(t);debugger;throw new Error(t)}},oJ=n=>{if(n){const e=n.changedTouches;if(e&&e.length>0){const t=e[0];return{x:t.clientX,y:t.clientY}}if(n.pageX!==void 0)return{x:n.pageX,y:n.pageY}}return{x:0,y:0}},Kb=n=>{const e=document.dir==="rtl";switch(n){case"start":return e;case"end":return!e;default:throw new Error(`"${n}" is not a valid value for [side]. Use "start" or "end" instead.`)}},py=(n,e)=>{const t=n._original||n;return{_original:n,emit:$P(t.emit.bind(t),e)}},$P=(n,e=0)=>{let t;return(...i)=>{clearTimeout(t),t=setTimeout(n,e,...i)}},NC=(n,e)=>{if(n??(n={}),e??(e={}),n===e)return!0;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const i of t)if(!(i in e)||n[i]!==e[i])return!1;return!0},Eo=n=>typeof n=="number"&&!isNaN(n)&&isFinite(n),FP="ionViewWillEnter",jP="ionViewDidEnter",PC="ionViewWillLeave",MC="ionViewDidLeave",o0="ionViewWillUnload",Xc=n=>{n.tabIndex=-1,n.focus()},bh=n=>n.offsetParent!==null,BP=()=>({saveViewFocus:t=>{if(bt.get("focusManagerPriority",!1)){const s=document.activeElement;s!==null&&t?.contains(s)&&s.setAttribute(iT,"true")}},setViewFocus:t=>{const i=bt.get("focusManagerPriority",!1);if(Array.isArray(i)&&!t.contains(document.activeElement)){const s=t.querySelector(`[${iT}]`);if(s&&bh(s)){Xc(s);return}for(const r of i)switch(r){case"content":const o=t.querySelector('main, [role="main"]');if(o&&bh(o)){Xc(o);return}break;case"heading":const l=t.querySelector('h1, [role="heading"][aria-level="1"]');if(l&&bh(l)){Xc(l);return}break;case"banner":const d=t.querySelector('header, [role="banner"]');if(d&&bh(d)){Xc(d);return}break;default:zn(`Unrecognized focus manager priority value ${r}`);break}Xc(t)}}}),iT="ion-last-focus",UP=()=>jn(()=>import("./ios.transition-BkTjGvqO.js"),[]),zP=()=>jn(()=>import("./md.transition-DGsgUX2k.js"),[]),$C=BP(),FC=n=>new Promise((e,t)=>{An(()=>{const i=ZP(n);HP(n,i),GP(n).then(s=>{s.animation&&s.animation.destroy(),nT(n),e(s)},s=>{nT(n),t(s)}).finally(()=>{zC(i,!1)})})}),HP=(n,e)=>{const t=n.enteringEl,i=n.leavingEl;$C.saveViewFocus(i),QP(t,i,n.direction),zC(e,!0),n.showGoBack?t.classList.add("can-go-back"):t.classList.remove("can-go-back"),Yb(t,!1),t.style.setProperty("pointer-events","none"),i&&(Yb(i,!1),i.style.setProperty("pointer-events","none"))},GP=async n=>{const e=await VP(n);return e&&I5.isBrowser?qP(e,n):WP(n)},nT=n=>{const e=n.enteringEl,t=n.leavingEl;e.classList.remove("ion-page-invisible"),e.style.removeProperty("pointer-events"),t!==void 0&&(t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events")),$C.setViewFocus(e)},VP=async n=>!n.leavingEl||!n.animated||n.duration===0?void 0:n.animationBuilder?n.animationBuilder:n.mode==="ios"?(await UP()).iosTransitionAnimation:(await zP()).mdTransitionAnimation,qP=async(n,e)=>{await jC(e,!0);const t=n(e.baseEl,e);BC(e.enteringEl,e.leavingEl);const i=await YP(t,e);return e.progressCallback&&e.progressCallback(void 0),i&&UC(e.enteringEl,e.leavingEl),{hasCompleted:i,animation:t}},WP=async n=>{const e=n.enteringEl,t=n.leavingEl,i=bt.get("focusManagerPriority",!1);return await jC(n,i),BC(e,t),UC(e,t),{hasCompleted:!0}},jC=async(n,e)=>{(n.deepWait!==void 0?n.deepWait:e)&&await Promise.all([If(n.enteringEl),If(n.leavingEl)]),await KP(n.viewIsReady,n.enteringEl)},KP=async(n,e)=>{n&&await n(e)},YP=(n,e)=>{const t=e.progressCallback,i=new Promise(s=>{n.onFinish(r=>s(r===1))});return t?(n.progressStart(!0),t(n)):n.play(),i},BC=(n,e)=>{Rr(e,PC),Rr(n,FP)},UC=(n,e)=>{Rr(n,jP),Rr(e,MC)},Rr=(n,e)=>{if(n){const t=new CustomEvent(e,{bubbles:!1,cancelable:!1});n.dispatchEvent(t)}},XP=()=>new Promise(n=>is(()=>is(()=>n()))),If=async n=>{const e=n;if(e){if(e.componentOnReady!=null){if(await e.componentOnReady()!=null)return}else if(e.__registerHost!=null){await new Promise(i=>is(i));return}await Promise.all(Array.from(e.children).map(If))}},Yb=(n,e)=>{e?(n.setAttribute("aria-hidden","true"),n.classList.add("ion-page-hidden")):(n.hidden=!1,n.removeAttribute("aria-hidden"),n.classList.remove("ion-page-hidden"))},QP=(n,e,t)=>{n!==void 0&&(n.style.zIndex=t==="back"?"99":"101"),e!==void 0&&(e.style.zIndex="100")},zC=(n,e)=>{if(!n)return;const t="header-transitioning";e?n.classList.add(t):n.classList.remove(t)},aJ=n=>{if(n.classList.contains("ion-page"))return n;const e=n.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return e||n},ZP=n=>{const e=n.enteringEl,t=n.leavingEl,i=n.direction;if(n.mode!=="ios")return null;const r=i==="back"?t:e;return r?r.querySelector("ion-header"):null};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Gl=(n,e,t,i,s)=>e3(n[1],e[1],t[1],i[1],s).map(r=>JP(n[0],e[0],t[0],i[0],r)),JP=(n,e,t,i,s)=>{const r=3*e*Math.pow(s-1,2),o=-3*t*s+3*t+i*s,l=n*Math.pow(s-1,3);return s*(r+s*o)-l},e3=(n,e,t,i,s)=>(n-=s,e-=s,t-=s,i-=s,i3(i-3*t+3*e-n,3*t-6*e+3*n,3*e-3*n,n).filter(o=>o>=0&&o<=1)),t3=(n,e,t)=>{const i=e*e-4*n*t;return i<0?[]:[(-e+Math.sqrt(i))/(2*n),(-e-Math.sqrt(i))/(2*n)]},i3=(n,e,t,i)=>{if(n===0)return t3(e,t,i);e/=n,t/=n,i/=n;const s=(3*t-e*e)/3,r=(2*e*e*e-9*e*t+27*i)/27;if(s===0)return[Math.pow(-r,1/3)];if(r===0)return[Math.sqrt(-s),-Math.sqrt(-s)];const o=Math.pow(r/2,2)+Math.pow(s/3,3);if(o===0)return[Math.pow(r/2,1/2)-e/3];if(o>0)return[Math.pow(-(r/2)+Math.sqrt(o),1/3)-Math.pow(r/2+Math.sqrt(o),1/3)-e/3];const l=Math.sqrt(Math.pow(-(s/3),3)),d=Math.acos(-(r/(2*Math.sqrt(Math.pow(-(s/3),3))))),u=2*Math.pow(l,1/3);return[u*Math.cos(d/3)-e/3,u*Math.cos((d+2*Math.PI)/3)-e/3,u*Math.cos((d+4*Math.PI)/3)-e/3]};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class n3{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(e){var t;return new s3(this,this.newID(),e.name,(t=e.priority)!==null&&t!==void 0?t:0,!!e.disableScroll)}createBlocker(e={}){return new r3(this,this.newID(),e.disable,!!e.disableScroll)}start(e,t,i){return this.canStart(e)?(this.requestedStart.set(t,i),!0):(this.requestedStart.delete(t),!1)}capture(e,t,i){if(!this.start(e,t,i))return!1;const s=this.requestedStart;let r=-1e4;if(s.forEach(o=>{r=Math.max(r,o)}),r===i){this.capturedId=t,s.clear();const o=new CustomEvent("ionGestureCaptured",{detail:{gestureName:e}});return document.dispatchEvent(o),!0}return s.delete(t),!1}release(e){this.requestedStart.delete(e),this.capturedId===e&&(this.capturedId=void 0)}disableGesture(e,t){let i=this.disabledGestures.get(e);i===void 0&&(i=new Set,this.disabledGestures.set(e,i)),i.add(t)}enableGesture(e,t){const i=this.disabledGestures.get(e);i!==void 0&&i.delete(t)}disableScroll(e){this.disabledScroll.add(e),this.disabledScroll.size===1&&document.body.classList.add(Rf)}enableScroll(e){this.disabledScroll.delete(e),this.disabledScroll.size===0&&document.body.classList.remove(Rf)}canStart(e){return!(this.capturedId!==void 0||this.isDisabled(e))}isCaptured(){return this.capturedId!==void 0}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(e){const t=this.disabledGestures.get(e);return!!(t&&t.size>0)}newID(){return this.gestureId++,this.gestureId}}class s3{constructor(e,t,i,s,r){this.id=t,this.name=i,this.disableScroll=r,this.priority=s*1e6+t,this.ctrl=e}canStart(){return this.ctrl?this.ctrl.canStart(this.name):!1}start(){return this.ctrl?this.ctrl.start(this.name,this.id,this.priority):!1}capture(){if(!this.ctrl)return!1;const e=this.ctrl.capture(this.name,this.id,this.priority);return e&&this.disableScroll&&this.ctrl.disableScroll(this.id),e}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class r3{constructor(e,t,i,s){this.id=t,this.disable=i,this.disableScroll=s,this.ctrl=e}block(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.disableGesture(e,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.enableGesture(e,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Rf="backdrop-no-scroll",HC=new n3;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const aa=(n,e,t,i)=>{const s=o3(n)?{capture:!1,passive:!!i.passive}:!1;let r,o;return n.__zone_symbol__addEventListener?(r="__zone_symbol__addEventListener",o="__zone_symbol__removeEventListener"):(r="addEventListener",o="removeEventListener"),n[r](e,t,s),()=>{n[o](e,t,s)}},o3=n=>{if(vh===void 0)try{const e=Object.defineProperty({},"passive",{get:()=>{vh=!0}});n.addEventListener("optsTest",()=>{},e)}catch{vh=!1}return!!vh};let vh;const a3=2e3,l3=(n,e,t,i,s)=>{let r,o,l,d,u,f,p,b=0;const v=M=>{b=Date.now()+a3,e(M)&&(!o&&t&&(o=aa(n,"touchmove",t,s)),l||(l=aa(M.target,"touchend",w,s)),d||(d=aa(M.target,"touchcancel",w,s)))},y=M=>{b>Date.now()||e(M)&&(!f&&t&&(f=aa(sT(n),"mousemove",t,s)),p||(p=aa(sT(n),"mouseup",E,s)))},w=M=>{T(),i&&i(M)},E=M=>{k(),i&&i(M)},T=()=>{o&&o(),l&&l(),d&&d(),o=l=d=void 0},k=()=>{f&&f(),p&&p(),f=p=void 0},_=()=>{T(),k()},O=(M=!0)=>{M?(r||(r=aa(n,"touchstart",v,s)),u||(u=aa(n,"mousedown",y,s))):(r&&r(),u&&u(),r=u=void 0,_())};return{enable:O,stop:_,destroy:()=>{O(!1),i=t=e=void 0}}},sT=n=>n instanceof Document?n:n.ownerDocument,c3=(n,e,t)=>{const i=t*(Math.PI/180),s=n==="x",r=Math.cos(i),o=e*e;let l=0,d=0,u=!1,f=0;return{start(p,b){l=p,d=b,f=0,u=!0},detect(p,b){if(!u)return!1;const v=p-l,y=b-d,w=v*v+y*y;if(w<o)return!1;const E=Math.sqrt(w),T=(s?v:y)/E;return T>r?f=1:T<-r?f=-1:f=0,u=!1,!0},isGesture(){return f!==0},getDirection(){return f}}},Tp=n=>{let e=!1,t=!1,i=!0,s=!1;const r=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},n),o=r.canStart,l=r.onWillStart,d=r.onStart,u=r.onEnd,f=r.notCaptured,p=r.onMove,b=r.threshold,v=r.passive,y=r.blurOnStart,w={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},E=c3(r.direction,r.threshold,r.maxAngle),T=HC.createGesture({name:n.gestureName,priority:n.gesturePriority,disableScroll:n.disableScroll}),k=U=>{const G=VC(U);return t||!i||(GC(U,w),w.startX=w.currentX,w.startY=w.currentY,w.startTime=w.currentTime=G,w.velocityX=w.velocityY=w.deltaX=w.deltaY=0,w.event=U,o&&o(w)===!1)||(T.release(),!T.start())?!1:(t=!0,b===0?R():(E.start(w.startX,w.startY),!0))},_=U=>{if(e){!s&&i&&(s=!0,a0(w,U),requestAnimationFrame(O));return}a0(w,U),E.detect(w.currentX,w.currentY)&&(!E.isGesture()||!R())&&$()},O=()=>{e&&(s=!1,p&&p(w))},R=()=>T.capture()?(e=!0,i=!1,w.startX=w.currentX,w.startY=w.currentY,w.startTime=w.currentTime,l?l(w).then(P):P(),!0):!1,M=()=>{if(typeof document<"u"){const U=document.activeElement;U?.blur&&U.blur()}},P=()=>{y&&M(),d&&d(w),i=!0},N=()=>{e=!1,t=!1,s=!1,i=!0,T.release()},L=U=>{const G=e,Z=i;if(N(),!!Z){if(a0(w,U),G){u&&u(w);return}f&&f(w)}},D=l3(r.el,k,_,L,{passive:v}),$=()=>{N(),D.stop(),f&&f(w)};return{enable(U=!0){U||(e&&L(void 0),N()),D.enable(U)},destroy(){T.destroy(),D.destroy()}}},a0=(n,e)=>{if(!e)return;const t=n.currentX,i=n.currentY,s=n.currentTime;GC(e,n);const r=n.currentX,o=n.currentY,d=(n.currentTime=VC(e))-s;if(d>0&&d<100){const u=(r-t)/d,f=(o-i)/d;n.velocityX=u*.7+n.velocityX*.3,n.velocityY=f*.7+n.velocityY*.3}n.deltaX=r-n.startX,n.deltaY=o-n.startY,n.event=e},GC=(n,e)=>{let t=0,i=0;if(n){const s=n.changedTouches;if(s&&s.length>0){const r=s[0];t=r.clientX,i=r.clientY}else n.pageX!==void 0&&(t=n.pageX,i=n.pageY)}e.currentX=t,e.currentY=i},VC=n=>n.timeStamp||Date.now(),my=Object.freeze(Object.defineProperty({__proto__:null,GESTURE_CONTROLLER:HC,createGesture:Tp},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const d3=n=>qC(n),Dr=(n,e)=>(typeof n=="string"&&(e=n,n=void 0),d3(n).includes(e)),qC=(n=window)=>{if(typeof n>"u")return[];n.Ionic=n.Ionic||{};let e=n.Ionic.platforms;return e==null&&(e=n.Ionic.platforms=u3(n),e.forEach(t=>n.document.documentElement.classList.add(`plt-${t}`))),e},u3=n=>{const e=bt.get("platform");return Object.keys(rT).filter(t=>{const i=e?.[t];return typeof i=="function"?i(n):rT[t](n)})},h3=n=>kp(n)&&!KC(n),gy=n=>!!(xa(n,/iPad/i)||xa(n,/Macintosh/i)&&kp(n)),f3=n=>xa(n,/iPhone/i),p3=n=>xa(n,/iPhone|iPod/i)||gy(n),WC=n=>xa(n,/android|sink/i),m3=n=>WC(n)&&!xa(n,/mobile/i),g3=n=>{const e=n.innerWidth,t=n.innerHeight,i=Math.min(e,t),s=Math.max(e,t);return i>390&&i<520&&s>620&&s<800},b3=n=>{const e=n.innerWidth,t=n.innerHeight,i=Math.min(e,t),s=Math.max(e,t);return gy(n)||m3(n)||i>460&&i<820&&s>780&&s<1400},kp=n=>w3(n,"(any-pointer:coarse)"),v3=n=>!kp(n),KC=n=>YC(n)||XC(n),YC=n=>!!(n.cordova||n.phonegap||n.PhoneGap),XC=n=>{const e=n.Capacitor;return!!(e?.isNative||e?.isNativePlatform&&e.isNativePlatform())},y3=n=>xa(n,/electron/i),x3=n=>{var e;return!!(!((e=n.matchMedia)===null||e===void 0)&&e.call(n,"(display-mode: standalone)").matches||n.navigator.standalone)},xa=(n,e)=>e.test(n.navigator.userAgent),w3=(n,e)=>{var t;return(t=n.matchMedia)===null||t===void 0?void 0:t.call(n,e).matches},rT={ipad:gy,iphone:f3,ios:p3,android:WC,phablet:g3,tablet:b3,cordova:YC,capacitor:XC,electron:y3,pwa:x3,mobile:kp,mobileweb:h3,desktop:v3,hybrid:KC};let Sl;const ut=n=>n&&sP(n)||Sl,S3=(n={})=>{if(typeof window>"u")return;const e=window.document,t=window,i=t.Ionic=t.Ionic||{},s=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},AP(t)),{persistConfig:!1}),i.config),IP(t)),n);bt.reset(s),bt.getBoolean("persistConfig")&&CP(t,s),qC(t),i.config=bt,i.mode=Sl=bt.get("mode",e.documentElement.getAttribute("mode")||(Dr(t,"ios")?"ios":"md")),bt.set("mode",Sl),e.documentElement.setAttribute("mode",Sl),e.documentElement.classList.add(Sl),bt.getBoolean("_testing")&&bt.set("animated",!1);const r=l=>{var d;return(d=l.tagName)===null||d===void 0?void 0:d.startsWith("ION-")},o=l=>["ios","md"].includes(l);nP(l=>{for(;l;){const d=l.mode||l.getAttribute("mode");if(d){if(o(d))return d;r(l)&&zn('Invalid ionic mode: "'+d+'", expected: "ios" or "md"')}l=l.parentElement}return Sl})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const E3=n=>{try{if(n instanceof A3)return n.value;if(!T3()||typeof n!="string"||n==="")return n;if(n.includes("onload="))return"";const e=document.createDocumentFragment(),t=document.createElement("div");e.appendChild(t),t.innerHTML=n,_3.forEach(o=>{const l=e.querySelectorAll(o);for(let d=l.length-1;d>=0;d--){const u=l[d];u.parentNode?u.parentNode.removeChild(u):e.removeChild(u);const f=Qb(u);for(let p=0;p<f.length;p++)Xb(f[p])}});const i=Qb(e);for(let o=0;o<i.length;o++)Xb(i[o]);const s=document.createElement("div");s.appendChild(e);const r=s.querySelector("div");return r!==null?r.innerHTML:s.innerHTML}catch(e){return Hr("sanitizeDOMString",e),""}},Xb=n=>{if(n.nodeType&&n.nodeType!==1)return;if(typeof NamedNodeMap<"u"&&!(n.attributes instanceof NamedNodeMap)){n.remove();return}for(let t=n.attributes.length-1;t>=0;t--){const i=n.attributes.item(t),s=i.name;if(!k3.includes(s.toLowerCase())){n.removeAttribute(s);continue}const r=i.value,o=n[s];(r!=null&&r.toLowerCase().includes("javascript:")||o!=null&&o.toLowerCase().includes("javascript:"))&&n.removeAttribute(s)}const e=Qb(n);for(let t=0;t<e.length;t++)Xb(e[t])},Qb=n=>n.children!=null?n.children:n.childNodes,T3=()=>{var n;const e=window,t=(n=e?.Ionic)===null||n===void 0?void 0:n.config;return t?t.get?t.get("sanitizerEnabled",!0):t.sanitizerEnabled===!0||t.sanitizerEnabled===void 0:!0},k3=["class","id","href","src","name","slot"],_3=["script","style","iframe","meta","link","object","embed"];class A3{constructor(e){this.value=e}}const C3=!1;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const _n=(n,e)=>e.closest(n)!==null,ss=(n,e)=>typeof n=="string"&&n.length>0?Object.assign({"ion-color":!0,[`ion-color-${n}`]:!0},e):e,I3=n=>n!==void 0?(Array.isArray(n)?n:n.split(" ")).filter(t=>t!=null).map(t=>t.trim()).filter(t=>t!==""):[],by=n=>{const e={};return I3(n).forEach(t=>e[t]=!0),e},R3=/^[a-z][a-z0-9+\-.]*:/,vy=async(n,e,t,i)=>{if(n!=null&&n[0]!=="#"&&!R3.test(n)){const s=document.querySelector("ion-router");if(s)return e?.preventDefault(),s.push(n,t,i)}return!1};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const wd=()=>bt.get("experimentalCloseWatcher",!1)&&ci!==void 0&&"CloseWatcher"in ci,L3=()=>{document.addEventListener("backbutton",()=>{})},D3=()=>{const n=document;let e=!1;const t=()=>{if(e)return;let i=0,s=[];const r=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(d,u){s.push({priority:d,handler:u,id:i++})}}});n.dispatchEvent(r);const o=async d=>{try{if(d?.handler){const u=d.handler(l);u!=null&&await u}}catch(u){Hr("[ion-app] - Exception in startHardwareBackButton:",u)}},l=()=>{if(s.length>0){let d={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};s.forEach(u=>{u.priority>=d.priority&&(d=u)}),e=!0,s=s.filter(u=>u.id!==d.id),o(d).then(()=>e=!1)}};l()};if(wd()){let i;const s=()=>{i?.destroy(),i=new ci.CloseWatcher,i.onclose=()=>{t(),s()}};s()}else n.addEventListener("backbutton",t)},QC=100,O3=99,N3=Object.freeze(Object.defineProperty({__proto__:null,MENU_BACK_BUTTON_PRIORITY:O3,OVERLAY_BACK_BUTTON_PRIORITY:QC,blockHardwareBackButton:L3,shouldUseCloseWatcher:wd,startHardwareBackButton:D3},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const _p=async(n,e,t,i,s,r)=>{var o;if(n)return n.attachViewToDom(e,t,s,i);if(!r&&typeof t!="string"&&!(t instanceof HTMLElement))throw new Error("framework delegate is missing");const l=typeof t=="string"?(o=e.ownerDocument)===null||o===void 0?void 0:o.createElement(t):t;return i&&i.forEach(d=>l.classList.add(d)),s&&Object.assign(l,s),e.appendChild(l),await new Promise(d=>Fo(l,d)),l},ZC=(n,e)=>{if(e){if(n){const t=e.parentElement;return n.removeViewFromDom(t,e)}e.remove()}return Promise.resolve()},JC=()=>{let n,e;return{attachViewToDom:async(s,r,o={},l=[])=>{var d,u;n=s;let f;if(r){const b=typeof r=="string"?(d=n.ownerDocument)===null||d===void 0?void 0:d.createElement(r):r;l.forEach(v=>b.classList.add(v)),Object.assign(b,o),n.appendChild(b),f=b,await new Promise(v=>Fo(b,v))}else if(n.children.length>0&&(n.tagName==="ION-MODAL"||n.tagName==="ION-POPOVER")&&!(f=n.children[0]).classList.contains("ion-delegate-host")){const v=(u=n.ownerDocument)===null||u===void 0?void 0:u.createElement("div");v.classList.add("ion-delegate-host"),l.forEach(y=>v.classList.add(y)),v.append(...n.children),n.appendChild(v),f=v}const p=document.querySelector("ion-app")||document.body;return e=document.createComment("ionic teleport"),n.parentNode.insertBefore(e,n),p.appendChild(n),f??n},removeViewFromDom:()=>(n&&e&&(e.parentNode.insertBefore(n,e),e.remove()),Promise.resolve())}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const zd='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), ion-checkbox:not([tabindex^="-"]):not([hidden]):not([disabled]), ion-radio:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',oT=(n,e)=>{const t=n.querySelector(zd);e2(t,e??n)},aT=(n,e)=>{const t=Array.from(n.querySelectorAll(zd)),i=t.length>0?t[t.length-1]:null;e2(i,e??n)},e2=(n,e)=>{let t=n;const i=n?.shadowRoot;if(i&&(t=i.querySelector(zd)||n),t){const s=t.closest("ion-radio-group");s?s.setFocus():DC(t)}else e.focus()};let Zb=0,P3=0;const Lf=new WeakMap,t2=n=>{typeof document<"u"&&F3(document);const e=Zb++;n.overlayIndex=e},i2=n=>(n.hasAttribute("id")||(n.id=`ion-overlay-${++P3}`),n.id),M3=n=>n.classList.contains("overlay-hidden"),lT=(n,e)=>{let t=n;const i=n?.shadowRoot;i&&(t=i.querySelector(zd)||n),t?DC(t):e.focus()},$3=(n,e)=>{const t=Jb(e,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),i=n.target;if(!t||!i||t.classList.contains(Of))return;const s=()=>{if(t===i)t.lastFocus=void 0;else if(i.tagName==="ION-TOAST")lT(t.lastFocus,t);else{const o=xn(t);if(!o.contains(i))return;const l=o.querySelector(".ion-overlay-wrapper");if(!l)return;if(l.contains(i)||i===o.querySelector("ion-backdrop"))t.lastFocus=i;else{const d=t.lastFocus;oT(l,t),d===e.activeElement&&aT(l,t),t.lastFocus=e.activeElement}}},r=()=>{if(t.contains(i))t.lastFocus=i;else if(i.tagName==="ION-TOAST")lT(t.lastFocus,t);else{const o=t.lastFocus;oT(t),o===e.activeElement&&aT(t),t.lastFocus=e.activeElement}};t.shadowRoot?r():s()},F3=n=>{Zb===0&&(Zb=1,n.addEventListener("focus",e=>{$3(e,n)},!0),n.addEventListener("ionBackButton",e=>{const t=Jb(n);t?.backdropDismiss&&e.detail.register(QC,()=>{t.dismiss(void 0,Sd)})}),wd()||n.addEventListener("keydown",e=>{if(e.key==="Escape"){const t=Jb(n);t?.backdropDismiss&&t.dismiss(void 0,Sd)}}))},j3=(n,e)=>(e===void 0&&(e="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(n.querySelectorAll(e)).filter(t=>t.overlayIndex>0)),n2=(n,e)=>j3(n,e).filter(t=>!M3(t)),Jb=(n,e,t)=>{const i=n2(n,e);return i[i.length-1]},s2=(n=!1)=>{const t=a2(document).querySelector("ion-router-outlet, #ion-view-container-root");t&&(n?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))},r2=async(n,e,t,i,s)=>{var r,o;if(n.presented)return;n.el.tagName!=="ION-TOAST"&&B3(n.el);const l=n.el,u=l.tagName!=="ION-TOAST"&&l.focusTrap!==!1&&l.showBackdrop!==!1;if(n.presented=!0,n.willPresent.emit(),u){const y=a2(document).querySelector("ion-router-outlet, #ion-view-container-root");(y?y.contains(l):!1)||s2(!0),document.body.classList.add(Rf)}(r=n.willPresentShorthand)===null||r===void 0||r.emit();const f=ut(n),p=n.enterAnimation?n.enterAnimation:bt.get(e,f==="ios"?t:i);await l2(n,p,n.el,s)&&(n.didPresent.emit(),(o=n.didPresentShorthand)===null||o===void 0||o.emit()),n.keyboardClose&&(document.activeElement===null||!n.el.contains(document.activeElement))&&n.el.focus(),n.el.removeAttribute("aria-hidden"),n.el.removeAttribute("inert")},B3=async n=>{let e=document.activeElement;if(!e)return;e.blur();const t=e?.shadowRoot;t&&(e=t.querySelector(zd)||e),await n.onDidDismiss(),(document.activeElement===null||document.activeElement===document.body)&&e.focus()},o2=async(n,e,t,i,s,r,o)=>{var l,d;if(!n.presented)return!1;const f=(ld!==void 0?n2(ld):[]).filter(y=>{const w=y;return w.tagName!=="ION-TOAST"&&w.focusTrap!==!1&&w.showBackdrop!==!1}),p=n.el;p.tagName!=="ION-TOAST"&&p.focusTrap!==!1&&p.showBackdrop!==!1&&f.length===1&&f[0].id===p.id&&(s2(!1),document.body.classList.remove(Rf)),n.presented=!1;try{n.el.style.setProperty("pointer-events","none"),n.willDismiss.emit({data:e,role:t}),(l=n.willDismissShorthand)===null||l===void 0||l.emit({data:e,role:t});const y=ut(n),w=n.leaveAnimation?n.leaveAnimation:bt.get(i,y==="ios"?s:r);t!==cd&&await l2(n,w,n.el,o),n.didDismiss.emit({data:e,role:t}),(d=n.didDismissShorthand)===null||d===void 0||d.emit({data:e,role:t}),(Lf.get(n)||[]).forEach(T=>T.destroy()),Lf.delete(n),n.el.classList.add("overlay-hidden"),n.el.style.removeProperty("pointer-events"),n.el.lastFocus!==void 0&&(n.el.lastFocus=void 0)}catch(y){Hr(`[${n.el.tagName.toLowerCase()}] - `,y)}return n.el.remove(),!0},a2=n=>n.querySelector("ion-app")||n.body,l2=async(n,e,t,i)=>{t.classList.remove("overlay-hidden");const s=n.el,r=e(s,i);(!n.animated||!bt.getBoolean("animated",!0))&&r.duration(0),n.keyboardClose&&r.beforeAddWrite(()=>{const l=t.ownerDocument.activeElement;l?.matches("input,ion-input, ion-textarea")&&l.blur()});const o=Lf.get(n)||[];return Lf.set(n,[...o,r]),await r.play(),!0},Df=(n,e)=>{let t;const i=new Promise(s=>t=s);return U3(n,e,s=>{t(s.detail)}),i},U3=(n,e,t)=>{const i=s=>{PP(n,e,i),t(s)};NP(n,e,i)},cT=n=>n==="cancel"||n===Sd,z3=n=>n(),H3=(n,e)=>{if(typeof n=="function")return bt.get("_zoneGate",z3)(()=>{try{return n(e)}catch(i){throw i}})},Sd="backdrop",cd="gesture",G3=39,V3=n=>{let e=!1,t;const i=JC(),s=(l=!1)=>{if(t&&!l)return{delegate:t,inline:e};const{el:d,hasController:u,delegate:f}=n;return e=d.parentNode!==null&&!u,t=e?f||i:f,{inline:e,delegate:t}};return{attachViewToDom:async l=>{const{delegate:d}=s(!0);if(d)return await d.attachViewToDom(n.el,l);const{hasController:u}=n;if(u&&l!==void 0)throw new Error("framework delegate is missing");return null},removeViewFromDom:()=>{const{delegate:l}=s();l&&n.el!==void 0&&l.removeViewFromDom(n.el.parentElement,n.el)}}},c2=()=>{let n;const e=()=>{n&&(n(),n=void 0)};return{addClickListener:(i,s)=>{e();const r=s!==void 0?document.getElementById(s):null;if(!r){zn(`[${i.tagName.toLowerCase()}] - A trigger element with the ID "${s}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,i);return}n=((l,d)=>{const u=()=>{d.present()};return l.addEventListener("click",u),()=>{l.removeEventListener("click",u)}})(r,i)},removeClickListener:e}},Of="ion-disable-focus-trap";var d2=fC();const q3=zr(d2);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const W3="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M244 400 100 256l144-144M120 256h292' stroke-linecap='square' stroke-miterlimit='10' stroke-width='48px' class='ionicon-fill-none'/></svg>",K3="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M416 128 192 384l-96-96' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Y3="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M328 112 184 256l144 144' stroke-linecap='round' stroke-linejoin='round' stroke-width='48px' class='ionicon-fill-none'/></svg>",dT="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='m184 112 144 144-144 144' stroke-linecap='round' stroke-linejoin='round' stroke-width='48px' class='ionicon-fill-none'/></svg>",X3="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48m75.31 260.69a16 16 0 1 1-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 0 1-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0 1 22.62-22.62L256 233.37l52.69-52.68a16 16 0 0 1 22.62 22.62L278.63 256Z'/></svg>",Q3="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M400 145.49 366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256z'/></svg>",Z3="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><circle cx='256' cy='256' r='192' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",uT="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M400 256H112' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let l0;const J3=()=>{if(typeof window>"u")return new Map;if(!l0){const n=window;n.Ionicons=n.Ionicons||{},l0=n.Ionicons.map=n.Ionicons.map||new Map}return l0},eM=n=>{let e=c0(n.src);return e||(e=u2(n.name,n.icon,n.mode,n.ios,n.md),e?tM(e,n):n.icon&&(e=c0(n.icon),e||(e=c0(n.icon[n.mode]),e))?e:null)},tM=(n,e)=>{const t=J3().get(n);if(t)return t;try{return F5(`svg/${n}.svg`)}catch(i){console.log("e",i),console.warn(`[Ionicons Warning]: Could not load icon with name "${n}". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.`,e)}},u2=(n,e,t,i,s)=>(t=(t&&yh(t))==="ios"?"ios":"md",i&&t==="ios"?n=yh(i):s&&t==="md"?n=yh(s):(!n&&e&&!h2(e)&&(n=e),Nf(n)&&(n=yh(n))),!Nf(n)||n.trim()===""||n.replace(/[a-z]|-|\d/gi,"")!==""?null:n),c0=n=>Nf(n)&&(n=n.trim(),h2(n))?n:null,h2=n=>n.length>0&&/(\/|\.)/.test(n),Nf=n=>typeof n=="string",yh=n=>n.toLowerCase(),iM=(n,e=[])=>{const t={};return e.forEach(i=>{n.hasAttribute(i)&&(n.getAttribute(i)!==null&&(t[i]=n.getAttribute(i)),n.removeAttribute(i))}),t},nM=n=>n&&n.dir!==""?n.dir.toLowerCase()==="rtl":document?.dir.toLowerCase()==="rtl",sM=n=>{const e=document.createElement("div");e.innerHTML=n;for(let i=e.childNodes.length-1;i>=0;i--)e.childNodes[i].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[i]);const t=e.firstElementChild;if(t&&t.nodeName.toLowerCase()==="svg"){const i=t.getAttribute("class")||"";if(t.setAttribute("class",(i+" s-ion-icon").trim()),f2(t))return e.innerHTML}return""},f2=n=>{if(n.nodeType===1){if(n.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e].name;if(Nf(t)&&t.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<n.childNodes.length;e++)if(!f2(n.childNodes[e]))return!1}return!0},rM=n=>n.startsWith("data:image/svg+xml"),oM=n=>n.indexOf(";utf8,")!==-1,Rl=new Map,p2=new Map;let d0;function ev(n){return Rl.set(n,""),""}const aM=(n,e)=>{const t=p2.get(n);return t||(typeof fetch<"u"&&typeof document<"u"?rM(n)&&oM(n)?Promise.resolve(lM(n)):cM(n,e):Promise.resolve(ev(n)))};function lM(n){d0||(d0=new DOMParser);const t=d0.parseFromString(n,"text/html").querySelector("svg");if(t)return Rl.set(n,t.outerHTML),t.outerHTML;throw new Error(`Could not parse svg from ${n}`)}function cM(n,e){const t=fetch(n).then(i=>i.text().then(s=>{s&&e!==!1&&(s=sM(s));const r=s||"";return Rl.set(n,r),r}).catch(()=>ev(n))).catch(()=>ev(n));return p2.set(n,t),t}const dM=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",uM=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.isVisible=!1,this.mode=hM(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=iM(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,i){if(!!!(this.lazy&&typeof window<"u"&&window.IntersectionObserver))return i();const r=this.io=new window.IntersectionObserver(o=>{o[0].isIntersecting&&(r.disconnect(),this.io=void 0,i())},{rootMargin:t});r.observe(e)}loadIcon(){if(this.isVisible){const e=eM(this);e&&(Rl.has(e)?this.svgContent=Rl.get(e):aM(e,this.sanitize).then(()=>this.svgContent=Rl.get(e)),this.didLoadIcon=!0)}this.iconName=u2(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:t,inheritedAttributes:i,el:s}=this,r=this.mode||"md",o=t?(t.includes("arrow")||t.includes("chevron"))&&e!==!1:!1,l=e||o;return J(Kt,Object.assign({key:"0578c899781ca145dd8205acd9670af39b57cf2e",role:"img",class:Object.assign(Object.assign({[r]:!0},fM(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":l,"icon-rtl":l&&nM(s)})},i),this.svgContent?J("div",{class:"icon-inner",innerHTML:this.svgContent}):J("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return dM}},[257,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]},void 0,{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}]),hM=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",fM=n=>n?{"ion-color":!0,[`ion-color-${n}`]:!0}:null;function Ap(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,uM);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const pM=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",mM=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",gM=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=Ze(this,"ionBackdropTap",7),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}onMouseDown(e){this.emitTap(e)}emitTap(e){this.stopPropagation&&(e.preventDefault(),e.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const e=ut(this);return J(Kt,{key:"7abaf2c310aa399607451b14063265e8a5846938","aria-hidden":"true",class:{[e]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:pM,md:mM}}},[289,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function m2(){if(typeof customElements>"u")return;["ion-backdrop"].forEach(e=>{switch(e){case"ion-backdrop":customElements.get(e)||customElements.define(e,gM);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const bM=".sc-ion-buttons-ios-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-ios-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-ios-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:5px;--padding-end:5px;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-ios-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-ios-s ion-button:not(.button-round){--border-radius:4px}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button{--color:initial;--border-color:initial;--background-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-solid,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-solid{--background:var(--ion-color-contrast);--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12;--background-hover:var(--ion-color-base);--background-hover-opacity:0.45;--color:var(--ion-color-base);--color-focused:var(--ion-color-base)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-clear,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-clear{--color-activated:var(--ion-color-contrast);--color-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-outline,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-outline{--color-activated:var(--ion-color-base);--color-focused:var(--ion-color-contrast);--background-activated:var(--ion-color-contrast)}.sc-ion-buttons-ios-s .button-clear,.sc-ion-buttons-ios-s .button-outline{--background-activated:transparent;--background-focused:currentColor;--background-hover:transparent}.sc-ion-buttons-ios-s .button-solid:not(.ion-color){--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12}.sc-ion-buttons-ios-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.41em;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.41em;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.65em;line-height:0.67}",vM=".sc-ion-buttons-md-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-md-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:8px;--padding-end:8px;--box-shadow:none;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-md-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-md-s ion-button:not(.button-round){--border-radius:2px}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button{--color:initial;--color-focused:var(--ion-color-contrast);--color-hover:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-contrast);--background-hover:var(--ion-color-contrast)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-solid,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-solid{--background:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-shade);--background-hover:var(--ion-color-base);--color:var(--ion-color-base);--color-focused:var(--ion-color-base);--color-hover:var(--ion-color-base)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-outline,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-outline{--border-color:var(--ion-color-contrast)}.sc-ion-buttons-md-s .button-has-icon-only.button-clear{--padding-top:12px;--padding-end:12px;--padding-bottom:12px;--padding-start:12px;--border-radius:50%;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;width:3rem;height:3rem}.sc-ion-buttons-md-s .button{--background-hover:currentColor}.sc-ion-buttons-md-s .button-solid{--color:var(--ion-toolbar-background, var(--ion-background-color, #fff));--background:var(--ion-toolbar-color, var(--ion-text-color, #424242));--background-activated:transparent;--background-focused:currentColor}.sc-ion-buttons-md-s .button-outline{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--border-color:currentColor}.sc-ion-buttons-md-s .button-clear{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor}.sc-ion-buttons-md-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.8em}",yM=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.collapse=!1}render(){const e=ut(this);return J(Kt,{key:"58c1fc5eb867d0731c63549b1ccb3ec3bbbe6e1b",class:{[e]:!0,"buttons-collapse":this.collapse}},J("slot",{key:"0c8f95b9840c8fa0c4e50be84c5159620a3eb5c8"}))}static get style(){return{ios:bM,md:vM}}},[294,"ion-buttons",{collapse:[4]}]);function xM(){if(typeof customElements>"u")return;["ion-buttons"].forEach(e=>{switch(e){case"ion-buttons":customElements.get(e)||customElements.define(e,yM);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const wM=xM;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const SM=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}",EM=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(e,t){return new Promise(i=>{va(()=>{const s=this.el.getBoundingClientRect(),r=s.width,o=s.height,l=Math.sqrt(r*r+o*o),d=Math.max(o,r),u=this.unbounded?d:l+kM,f=Math.floor(d*_M),p=u/f;let b=e-s.left,v=t-s.top;this.unbounded&&(b=r*.5,v=o*.5);const y=b-f*.5,w=v-f*.5,E=r*.5-b,T=o*.5-v;An(()=>{const k=document.createElement("div");k.classList.add("ripple-effect");const _=k.style;_.top=w+"px",_.left=y+"px",_.width=_.height=f+"px",_.setProperty("--final-scale",`${p}`),_.setProperty("--translate-end",`${E}px, ${T}px`),(this.el.shadowRoot||this.el).appendChild(k),setTimeout(()=>{i(()=>{TM(k)})},325)})})})}get unbounded(){return this.type==="unbounded"}render(){const e=ut(this);return J(Kt,{key:"ae9d3b1ed6773a9b9bb2267129f7e9af23b6c9fc",role:"presentation",class:{[e]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return SM}},[257,"ion-ripple-effect",{type:[1],addRipple:[64]}]),TM=n=>{n.classList.add("fade-out"),setTimeout(()=>{n.remove()},200)},kM=10,_M=.5;function yy(){if(typeof customElements>"u")return;["ion-ripple-effect"].forEach(e=>{switch(e){case"ion-ripple-effect":customElements.get(e)||customElements.define(e,EM);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const xh=typeof window<"u"?window:void 0;xh&&(xh.CSS&&xh.CSS.supports&&xh.CSS.supports("--a: 0"));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ll=n=>n&&n.dir!==""?n.dir.toLowerCase()==="rtl":document?.dir.toLowerCase()==="rtl";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const AM=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}',CM=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.ionScrollStart=Ze(this,"ionScrollStart",7),this.ionScroll=Ze(this,"ionScroll",7),this.ionScrollEnd=Ze(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.inheritedAttributes={},this.tabsElement=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.fullscreen=!1,this.fixedSlotPlacement="after",this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}componentWillLoad(){this.inheritedAttributes=zo(this.el)}connectedCallback(){if(this.isMainContent=this.el.closest("ion-menu, ion-popover, ion-modal")===null,Cf(this.el)){const e=this.tabsElement=this.el.closest("ion-tabs");e!==null&&(this.tabsLoadCallback=()=>this.resize(),e.addEventListener("ionTabBarLoaded",this.tabsLoadCallback))}}disconnectedCallback(){if(this.onScrollEnd(),Cf(this.el)){const{tabsElement:e,tabsLoadCallback:t}=this;e!==null&&t!==void 0&&e.removeEventListener("ionTabBarLoaded",t),this.tabsElement=null,this.tabsLoadCallback=void 0}}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{this.el.offsetParent!==null&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:e}=this,t=ut(this);return e===void 0?t==="ios"&&Dr("ios"):e}resize(){this.fullscreen?va(()=>this.readDimensions()):(this.cTop!==0||this.cBottom!==0)&&(this.cTop=this.cBottom=0,Ns(this))}readDimensions(){const e=RM(this.el),t=Math.max(this.el.offsetTop,0),i=Math.max(e.offsetHeight-t-this.el.offsetHeight,0);(t!==this.cTop||i!==this.cBottom)&&(this.cTop=t,this.cBottom=i,Ns(this))}onScroll(e){const t=Date.now(),i=!this.isScrolling;this.lastScroll=t,i&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,va(s=>{this.queued=!1,this.detail.event=e,LM(this.detail,this.scrollEl,s,i),this.ionScroll.emit(this.detail)}))}async getScrollElement(){return this.scrollEl||await new Promise(e=>Fo(this.el,e)),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise(e=>Fo(this.el,e)),Promise.resolve(this.backgroundContentEl)}scrollToTop(e=0){return this.scrollToPoint(void 0,0,e)}async scrollToBottom(e=0){const t=await this.getScrollElement(),i=t.scrollHeight-t.clientHeight;return this.scrollToPoint(void 0,i,e)}async scrollByPoint(e,t,i){const s=await this.getScrollElement();return this.scrollToPoint(e+s.scrollLeft,t+s.scrollTop,i)}async scrollToPoint(e,t,i=0){const s=await this.getScrollElement();if(i<32){t!=null&&(s.scrollTop=t),e!=null&&(s.scrollLeft=e);return}let r,o=0;const l=new Promise(v=>r=v),d=s.scrollTop,u=s.scrollLeft,f=t!=null?t-d:0,p=e!=null?e-u:0,b=v=>{const y=Math.min(1,(v-o)/i)-1,w=Math.pow(y,3)+1;f!==0&&(s.scrollTop=Math.floor(w*f+d)),p!==0&&(s.scrollLeft=Math.floor(w*p+u)),w<1?requestAnimationFrame(b):r()};return requestAnimationFrame(v=>{o=v,b(v)}),l}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{fixedSlotPlacement:e,inheritedAttributes:t,isMainContent:i,scrollX:s,scrollY:r,el:o}=this,l=Ll(o)?"rtl":"ltr",d=ut(this),u=this.shouldForceOverscroll(),f=d==="ios";return this.resize(),J(Kt,Object.assign({key:"f2a24aa66dbf5c76f9d4b06f708eb73cadc239df",role:i?"main":void 0,class:ss(this.color,{[d]:!0,"content-sizing":_n("ion-popover",this.el),overscroll:u,[`content-${l}`]:!0}),style:{"--offset-top":`${this.cTop}px`,"--offset-bottom":`${this.cBottom}px`}},t),J("div",{key:"6480ca7648b278abb36477b3838bccbcd4995e2a",ref:p=>this.backgroundContentEl=p,id:"background-content",part:"background"}),e==="before"?J("slot",{name:"fixed"}):null,J("div",{key:"29a23b663f5f0215bb000820c01e1814c0d55985",class:{"inner-scroll":!0,"scroll-x":s,"scroll-y":r,overscroll:(s||r)&&u},ref:p=>this.scrollEl=p,onScroll:this.scrollEvents?p=>this.onScroll(p):void 0,part:"scroll"},J("slot",{key:"0fe1bd05609a4b88ae2ce9addf5d5dc5dc1806f0"})),f?J("div",{class:"transition-effect"},J("div",{class:"transition-cover"}),J("div",{class:"transition-shadow"})):null,e==="after"?J("slot",{name:"fixed"}):null)}get el(){return this}static get style(){return AM}},[257,"ion-content",{color:[513],fullscreen:[4],fixedSlotPlacement:[1,"fixed-slot-placement"],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[9,"resize","onResize"]]]),IM=n=>{var e;return n.parentElement?n.parentElement:!((e=n.parentNode)===null||e===void 0)&&e.host?n.parentNode.host:null},RM=n=>{const e=n.closest("ion-tabs");if(e)return e;const t=n.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return t||IM(n)},LM=(n,e,t,i)=>{const s=n.currentX,r=n.currentY,o=n.currentTime,l=e.scrollLeft,d=e.scrollTop,u=t-o;if(i&&(n.startTime=t,n.startX=l,n.startY=d,n.velocityX=n.velocityY=0),n.currentTime=t,n.currentX=n.scrollLeft=l,n.currentY=n.scrollTop=d,n.deltaX=l-n.startX,n.deltaY=d-n.startY,u>0&&u<100){const f=(l-s)/u,p=(d-r)/u;n.velocityX=f*.7+n.velocityX*.3,n.velocityY=p*.7+n.velocityY*.3}};function DM(){if(typeof customElements>"u")return;["ion-content"].forEach(e=>{switch(e){case"ion-content":customElements.get(e)||customElements.define(e,CM);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const OM=DM;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const NM=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:normal;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #0054e9);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #0054e9);--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:14px;--padding-top:13px;--padding-bottom:13px;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:3.1em;font-size:min(1rem, 48px);font-weight:500;letter-spacing:0}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #004acd);--background-focused:var(--ion-color-primary-shade, #004acd);--background-hover:var(--ion-color-primary-tint, #1a65eb);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #0054e9);--background-focused:var(--ion-color-primary, #0054e9);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #0054e9);--background-hover:transparent;--background-focused-opacity:.1;font-size:min(1.0625rem, 51px);font-weight:normal}:host(.in-buttons){font-size:clamp(17px, 1.0625rem, 21.08px);font-weight:400}:host(.button-large){--border-radius:16px;--padding-top:17px;--padding-start:1em;--padding-end:1em;--padding-bottom:17px;min-height:3.1em;font-size:min(1.25rem, 60px)}:host(.button-small){--border-radius:6px;--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:min(0.8125rem, 39px)}:host(.button-round){--border-radius:999px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:var(--padding-top);--padding-end:var(--padding-top);--padding-start:var(--padding-end);min-width:clamp(30px, 2.125em, 60px);min-height:clamp(30px, 2.125em, 60px)}::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.12px, 1.125em, 43.02px)}:host(.button-small.button-has-icon-only){min-width:clamp(23px, 2.16em, 54px);min-height:clamp(23px, 2.16em, 54px)}:host(.button-small) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(12.1394px, 1.308125em, 40.1856px)}:host(.button-large.button-has-icon-only){min-width:clamp(46px, 2.5em, 78px);min-height:clamp(46px, 2.5em, 78px)}:host(.button-large) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.12px, 0.9em, 43.056px)}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}',PM=`:host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:normal;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #0054e9);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #0054e9);--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:4px;--padding-top:8px;--padding-bottom:8px;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),
                background-color 15ms linear,
                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:36px;font-size:0.875rem;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #0054e9);--background-hover:var(--ion-color-primary, #0054e9);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #0054e9);--background-hover:var(--ion-color-primary, #0054e9);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:999px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:14px;--padding-start:1em;--padding-end:1em;--padding-bottom:14px;min-height:2.8em;font-size:1.25rem}:host(.button-small){--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:0.8125rem}:host(.button-strong){font-weight:bold}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:var(--padding-top);--padding-end:var(--padding-top);--padding-start:var(--padding-end);min-width:clamp(30px, 2.86em, 60px);min-height:clamp(30px, 2.86em, 60px)}::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.104px, 1.6em, 43.008px)}:host(.button-small.button-has-icon-only){min-width:clamp(23px, 2.16em, 54px);min-height:clamp(23px, 2.16em, 54px)}:host(.button-small) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(13.002px, 1.23125em, 40.385px)}:host(.button-large.button-has-icon-only){min-width:clamp(46px, 2.5em, 78px);min-height:clamp(46px, 2.5em, 78px)}:host(.button-large) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.008px, 1.4em, 43.008px)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-background, var(--color));color:var(--ion-toolbar-color, var(--background), var(--ion-color-primary-contrast, #fff))}`,MM=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.ionFocus=Ze(this,"ionFocus",7),this.ionBlur=Ze(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.formButtonEl=null,this.formEl=null,this.inheritedAttributes={},this.isCircle=!1,this.buttonType="button",this.disabled=!1,this.routerDirection="forward",this.strong=!1,this.type="button",this.handleClick=t=>{const{el:i}=this;this.type==="button"?vy(this.href,t,this.routerDirection,this.routerAnimation):MP(i)&&this.submitForm(t)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.slotChanged=()=>{this.isCircle=this.hasIconOnly}}disabledChanged(){const{disabled:e}=this;this.formButtonEl&&(this.formButtonEl.disabled=e)}onAriaChanged(e,t,i){this.inheritedAttributes=Object.assign(Object.assign({},this.inheritedAttributes),{[i]:e}),Ns(this)}renderHiddenButton(){const e=this.formEl=this.findForm();if(e){const{formButtonEl:t}=this;if(t!==null&&e.contains(t))return;const i=this.formButtonEl=document.createElement("button");i.type=this.type,i.style.display="none",i.disabled=this.disabled,e.appendChild(i)}}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=zo(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(this.fill===void 0||this.fill==="clear")&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:e}=this;if(e instanceof HTMLFormElement)return e;if(typeof e=="string"){const t=document.getElementById(e);return t?t instanceof HTMLFormElement?t:(zn(`[ion-button] - Form with selector: "#${e}" could not be found. Verify that the id is attached to a <form> element.`,this.el),null):(zn(`[ion-button] - Form with selector: "#${e}" could not be found. Verify that the id is correct and the form is rendered in the DOM.`,this.el),null)}return e!==void 0?(zn('[ion-button] - The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',this.el),null):this.el.closest("form")}submitForm(e){this.formEl&&this.formButtonEl&&(e.preventDefault(),this.formButtonEl.click())}render(){const e=ut(this),{buttonType:t,type:i,disabled:s,rel:r,target:o,size:l,href:d,color:u,expand:f,hasIconOnly:p,shape:b,strong:v,inheritedAttributes:y}=this,w=l===void 0&&this.inItem?"small":l,E=d===void 0?"button":"a",T=E==="button"?{type:i}:{download:this.download,href:d,rel:r,target:o};let k=this.fill;return k===void 0&&(k=this.inToolbar||this.inListHeader?"clear":"solid"),i!=="button"&&this.renderHiddenButton(),J(Kt,{key:"ed82ea53705523f9afc5f1a9addff44cc6424f27",onClick:this.handleClick,"aria-disabled":s?"true":null,class:ss(u,{[e]:!0,[t]:!0,[`${t}-${f}`]:f!==void 0,[`${t}-${w}`]:w!==void 0,[`${t}-${b}`]:b!==void 0,[`${t}-${k}`]:!0,[`${t}-strong`]:v,"in-toolbar":_n("ion-toolbar",this.el),"in-toolbar-color":_n("ion-toolbar[color]",this.el),"in-buttons":_n("ion-buttons",this.el),"button-has-icon-only":p,"button-disabled":s,"ion-activatable":!0,"ion-focusable":!0})},J(E,Object.assign({key:"fadec13053469dd0405bbbc61b70ced568aa4826"},T,{class:"button-native",part:"native",disabled:s,onFocus:this.onFocus,onBlur:this.onBlur},y),J("span",{key:"6bf0e5144fb1148002e88038522402b789689d2c",class:"button-inner"},J("slot",{key:"25da0ca155cfa9e2754842c34f4fd09f576ac2d2",name:"icon-only",onSlotchange:this.slotChanged}),J("slot",{key:"51414065bb11953ec9d818f8d9353589bc9072c5",name:"start"}),J("slot",{key:"c9b5f8842aeabd20628df2f4600f1257ea913d8d"}),J("slot",{key:"478dd3671c7be1909fc84e672f0fa8dfe6082263",name:"end"})),e==="md"&&J("ion-ripple-effect",{key:"e1d55f85a55144d743f58a5914cd116cb065fa8c",type:this.rippleType})))}get el(){return this}static get watchers(){return{disabled:["disabledChanged"],"aria-checked":["onAriaChanged"],"aria-label":["onAriaChanged"]}}static get style(){return{ios:NM,md:PM}}},[289,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1],isCircle:[32]},void 0,{disabled:["disabledChanged"],"aria-checked":["onAriaChanged"],"aria-label":["onAriaChanged"]}]);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Pf=()=>{if(ci!==void 0)return ci.Capacitor};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var tv;(function(n){n.Heavy="HEAVY",n.Medium="MEDIUM",n.Light="LIGHT"})(tv||(tv={}));var hT;(function(n){n.Success="SUCCESS",n.Warning="WARNING",n.Error="ERROR"})(hT||(hT={}));const Hd={getEngine(){const n=Pf();if(n?.isPluginAvailable("Haptics"))return n.Plugins.Haptics},available(){if(!this.getEngine())return!1;const e=Pf();return e?.getPlatform()==="web"?typeof navigator<"u"&&navigator.vibrate!==void 0:!0},impact(n){const e=this.getEngine();e&&e.impact({style:n.style})},notification(n){const e=this.getEngine();e&&e.notification({type:n.type})},selection(){this.impact({style:tv.Light})},selectionStart(){const n=this.getEngine();n&&n.selectionStart()},selectionChanged(){const n=this.getEngine();n&&n.selectionChanged()},selectionEnd(){const n=this.getEngine();n&&n.selectionEnd()}},Cp=()=>Hd.available(),fT=()=>{Cp()&&Hd.selection()},$M=()=>{Cp()&&Hd.selectionStart()},FM=()=>{Cp()&&Hd.selectionChanged()},jM=()=>{Cp()&&Hd.selectionEnd()};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const xy=()=>{let n;return{lock:async()=>{const t=n;let i;return n=new Promise(s=>i=s),t!==void 0&&await t,i}}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const BM="ION-CONTENT",g2="ion-content",b2=".ion-content-scroll-host",v2=`${g2}, ${b2}`,er=n=>n.tagName===BM,iv=async n=>er(n)?(await new Promise(e=>Fo(n,e)),n.getScrollElement()):n,nv=n=>{const e=n.querySelector(b2);return e||n.querySelector(v2)},Vl=n=>n.closest(v2),pJ=(n,e)=>er(n)?n.scrollToTop(e):Promise.resolve(n.scrollTo({top:0,left:0,behavior:"smooth"})),mJ=(n,e,t,i)=>er(n)?n.scrollByPoint(e,t,i):Promise.resolve(n.scrollBy({top:t,left:e,behavior:i>0?"smooth":"auto"})),Mf=n=>LP(n,g2),$f=n=>{if(er(n)){const e=n,t=e.scrollY;return e.scrollY=!1,t}else return n.style.setProperty("overflow","hidden"),!0},wy=(n,e)=>{er(n)?n.scrollY=e:n.style.removeProperty("overflow")};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var sv;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(sv||(sv={}));var rv;(function(n){n.Body="body",n.Ionic="ionic",n.Native="native",n.None="none"})(rv||(rv={}));const y2={getEngine(){const n=Pf();if(n?.isPluginAvailable("Keyboard"))return n.Plugins.Keyboard},getResizeMode(){const n=this.getEngine();return n?.getResizeMode?n.getResizeMode().catch(e=>{if(e.code!==sv.Unimplemented)throw e}):Promise.resolve(void 0)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const x2=n=>{if(ld===void 0||n===rv.None||n===void 0)return null;const e=ld.querySelector("ion-app");return e??ld.body},pT=n=>{const e=x2(n);return e===null?0:e.clientHeight},UM=async n=>{let e,t,i,s;const r=async()=>{const f=await y2.getResizeMode(),p=f===void 0?void 0:f.mode;e=()=>{s===void 0&&(s=pT(p)),i=!0,o(i,p)},t=()=>{i=!1,o(i,p)},ci?.addEventListener("keyboardWillShow",e),ci?.addEventListener("keyboardWillHide",t)},o=(f,p)=>{n&&n(f,l(p))},l=f=>{if(s===0||s===pT(f))return;const p=x2(f);if(p!==null)return new Promise(b=>{const v=()=>{p.clientHeight===s&&(y.disconnect(),b())},y=new ResizeObserver(v);y.observe(p)})},d=()=>{ci?.removeEventListener("keyboardWillShow",e),ci?.removeEventListener("keyboardWillHide",t),e=t=void 0},u=()=>i;return await r(),{init:r,destroy:d,isKeyboardVisible:u}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const zM="all 0.2s ease-in-out",ov="none",w2="banner",mT=n=>{const e=document.querySelector(`${n}.ion-cloned-element`);if(e!==null)return e;const t=document.createElement(n);return t.classList.add("ion-cloned-element"),t.style.setProperty("display","none"),document.body.appendChild(t),t},gT=n=>{if(!n)return;const e=n.querySelectorAll("ion-toolbar");return{el:n,toolbars:Array.from(e).map(t=>{const i=t.querySelector("ion-title");return{el:t,background:t.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:i,innerTitleEl:i?i.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(t.querySelectorAll("ion-buttons"))}})}},HM=(n,e,t)=>{va(()=>{const i=n.scrollTop,s=ts(1,1+-i/500,1.1);t.querySelector("ion-refresher.refresher-native")===null&&An(()=>{qM(e.toolbars,s)})})},Sy=(n,e)=>{n.collapse!=="fade"&&(e===void 0?n.style.removeProperty("--opacity-scale"):n.style.setProperty("--opacity-scale",e.toString()))},GM=(n,e,t)=>{if(!n[0].isIntersecting)return;const i=n[0].intersectionRatio>.9||t<=0?0:(1-n[0].intersectionRatio)*100/75;Sy(e.el,i===1?void 0:i)},VM=(n,e,t,i)=>{An(()=>{const s=i.scrollTop;GM(n,e,s);const r=n[0],o=r.intersectionRect,l=o.width*o.height,d=r.rootBounds.width*r.rootBounds.height,u=l===0&&d===0,f=Math.abs(o.left-r.boundingClientRect.left),p=Math.abs(o.right-r.boundingClientRect.right),b=l>0&&(f>=5||p>=5);u||b||(r.isIntersecting?(id(e,!1),id(t)):(o.x===0&&o.y===0||o.width!==0&&o.height!==0)&&s>0&&(id(e),id(t,!1),Sy(e.el)))})},id=(n,e=!0)=>{const t=n.el,s=n.toolbars.map(r=>r.ionTitleEl);e?(t.setAttribute("role",w2),t.classList.remove("header-collapse-condense-inactive"),s.forEach(r=>{r&&r.removeAttribute("aria-hidden")})):(t.setAttribute("role",ov),t.classList.add("header-collapse-condense-inactive"),s.forEach(r=>{r&&r.setAttribute("aria-hidden","true")}))},qM=(n=[],e=1,t=!1)=>{n.forEach(i=>{const s=i.ionTitleEl,r=i.innerTitleEl;!s||s.size!=="large"||(r.style.transition=t?zM:"",r.style.transform=`scale3d(${e}, ${e}, 1)`)})},bT=(n,e,t)=>{va(()=>{const i=n.scrollTop,s=e.clientHeight,r=t?t.clientHeight:0;if(t!==null&&i<r){e.style.setProperty("--opacity-scale","0"),n.style.setProperty("clip-path",`inset(${s}px 0px 0px 0px)`);return}const o=i-r,d=ts(0,o/10,1);An(()=>{n.style.removeProperty("clip-path"),e.style.setProperty("--opacity-scale",d.toString())})})},WM=(n,e,t)=>n||e&&t==="md"?ov:w2,KM="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-fade.header-transitioning ion-toolbar{--background:transparent;--border-style:none}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:0px;z-index:1}.header-collapse-condense ion-toolbar{z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense ion-toolbar,.header-collapse-condense-inactive.header-transitioning:not(.header-collapse-condense) ion-toolbar{--background:var(--ion-background-color, #fff)}.header-collapse-condense-inactive.header-transitioning:not(.header-collapse-condense) ion-toolbar{--border-style:none;--opacity-scale:1}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}ion-header.header-ios:not(.header-collapse-main):has(~ion-content ion-header.header-ios[collapse=condense],~ion-content ion-header.header-ios.header-collapse-condense){opacity:0}",YM="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}",XM=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.inheritedAttributes={},this.translucent=!1,this.setupFadeHeader=async(t,i)=>{const s=this.scrollEl=await iv(t);this.contentScrollCallback=()=>{bT(this.scrollEl,this.el,i)},s.addEventListener("scroll",this.contentScrollCallback),bT(this.scrollEl,this.el,i)}}componentWillLoad(){this.inheritedAttributes=zo(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if(ut(this)!=="ios")return;const{collapse:t}=this,i=t==="condense",s=t==="fade";if(this.destroyCollapsibleHeader(),i){const r=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),o=r?nv(r):null;An(()=>{const l=mT("ion-title");l.size="large",mT("ion-back-button")}),await this.setupCondenseHeader(o,r)}else if(s){const r=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),o=r?nv(r):null;if(!o){Mf(this.el);return}const l=o.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(o,l)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(e,t){if(!e||!t){Mf(this.el);return}if(typeof IntersectionObserver>"u")return;this.scrollEl=await iv(e);const i=t.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(i).find(l=>l.collapse!=="condense"),!this.collapsibleMainHeader)return;const s=gT(this.collapsibleMainHeader),r=gT(this.el);if(!s||!r)return;id(s,!1),Sy(s.el,0);const o=l=>{VM(l,s,r,this.scrollEl)};this.intersectionObserver=new IntersectionObserver(o,{root:e,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(r.toolbars[r.toolbars.length-1].el),this.contentScrollCallback=()=>{HM(this.scrollEl,r,e)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),An(()=>{this.collapsibleMainHeader!==void 0&&this.collapsibleMainHeader.classList.add("header-collapse-main")})}render(){const{translucent:e,inheritedAttributes:t}=this,i=ut(this),s=this.collapse||"none",r=s==="condense",o=WM(_n("ion-menu",this.el),r,i);return J(Kt,Object.assign({key:"863c4568cd7b8c0ec55109f193bbbaed68a1346e",role:o,class:{[i]:!0,[`header-${i}`]:!0,"header-translucent":this.translucent,[`header-collapse-${s}`]:!0,[`header-translucent-${i}`]:this.translucent}},t),i==="ios"&&e&&J("div",{key:"25c3bdce328b0b35607d154c8b8374679313d881",class:"header-background"}),J("slot",{key:"b44fab0a9be7920b9650da26117c783e751e1702"}))}get el(){return this}static get style(){return{ios:KM,md:YM}}},[292,"ion-header",{collapse:[1],translucent:[4]}]);function QM(){if(typeof customElements>"u")return;["ion-header"].forEach(e=>{switch(e){case"ion-header":customElements.get(e)||customElements.define(e,XM);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ZM=QM;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const JM="ion-infinite-scroll{display:none;width:100%}.infinite-scroll-enabled{display:block}",e4=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.ionInfinite=Ze(this,"ionInfinite",7),this.thrPx=0,this.thrPc=0,this.didFire=!1,this.isBusy=!1,this.isLoading=!1,this.threshold="15%",this.disabled=!1,this.position="bottom",this.onScroll=()=>{const t=this.scrollEl;if(!t||!this.canStart())return 1;const i=this.el.offsetHeight;if(i===0)return 2;const s=t.scrollTop,r=t.scrollHeight,o=t.offsetHeight,l=this.thrPc!==0?o*this.thrPc:this.thrPx;return(this.position==="bottom"?r-i-s-l-o:s-i-l)<0&&!this.didFire?(this.isLoading=!0,this.didFire=!0,this.ionInfinite.emit(),3):4}}thresholdChanged(){const e=this.threshold;e.lastIndexOf("%")>-1?(this.thrPx=0,this.thrPc=parseFloat(e)/100):(this.thrPx=parseFloat(e),this.thrPc=0)}disabledChanged(){const e=this.disabled;e&&(this.isLoading=!1,this.isBusy=!1),this.enableScrollEvents(!e)}async connectedCallback(){const e=Vl(this.el);if(!e){Mf(this.el);return}this.scrollEl=await iv(e),this.thresholdChanged(),this.disabledChanged(),this.position==="top"&&An(()=>{this.scrollEl&&(this.scrollEl.scrollTop=this.scrollEl.scrollHeight-this.scrollEl.clientHeight)})}disconnectedCallback(){this.enableScrollEvents(!1),this.scrollEl=void 0}async complete(){const e=this.scrollEl;if(!(!this.isLoading||!e))if(this.isLoading=!1,this.position==="top"){this.isBusy=!0;const t=e.scrollHeight-e.scrollTop;requestAnimationFrame(()=>{va(()=>{const s=e.scrollHeight-t;requestAnimationFrame(()=>{An(()=>{e.scrollTop=s,this.isBusy=!1,this.didFire=!1})})})})}else this.didFire=!1}canStart(){return!this.disabled&&!this.isBusy&&!!this.scrollEl&&!this.isLoading}enableScrollEvents(e){this.scrollEl&&(e?this.scrollEl.addEventListener("scroll",this.onScroll):this.scrollEl.removeEventListener("scroll",this.onScroll))}render(){const e=ut(this),t=this.disabled;return J(Kt,{key:"e844956795f69be33396ce4480aa7a54ad01b28c",class:{[e]:!0,"infinite-scroll-loading":this.isLoading,"infinite-scroll-enabled":!t}})}get el(){return this}static get watchers(){return{threshold:["thresholdChanged"],disabled:["disabledChanged"]}}static get style(){return JM}},[256,"ion-infinite-scroll",{threshold:[1],disabled:[4],position:[1],isLoading:[32],complete:[64]},void 0,{threshold:["thresholdChanged"],disabled:["disabledChanged"]}]);function t4(){if(typeof customElements>"u")return;["ion-infinite-scroll"].forEach(e=>{switch(e){case"ion-infinite-scroll":customElements.get(e)||customElements.define(e,e4);break}})}const i4=t4;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const n4={bubbles:{dur:1e3,circles:9,fn:(n,e,t)=>{const i=`${n*e/t-n}ms`,s=2*Math.PI*e/t;return{r:5,style:{top:`${32*Math.sin(s)}%`,left:`${32*Math.cos(s)}%`,"animation-delay":i}}}},circles:{dur:1e3,circles:8,fn:(n,e,t)=>{const i=e/t,s=`${n*i-n}ms`,r=2*Math.PI*i;return{r:5,style:{top:`${32*Math.sin(r)}%`,left:`${32*Math.cos(r)}%`,"animation-delay":s}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(n,e)=>{const t=-(110*e)+"ms";return{r:6,style:{left:`${32-32*e}%`,"animation-delay":t}}}},lines:{dur:1e3,lines:8,fn:(n,e,t)=>{const i=`rotate(${360/t*e+(e<t/2?180:-180)}deg)`,s=`${n*e/t-n}ms`;return{y1:14,y2:26,style:{transform:i,"animation-delay":s}}}},"lines-small":{dur:1e3,lines:8,fn:(n,e,t)=>{const i=`rotate(${360/t*e+(e<t/2?180:-180)}deg)`,s=`${n*e/t-n}ms`;return{y1:12,y2:20,style:{transform:i,"animation-delay":s}}}},"lines-sharp":{dur:1e3,lines:12,fn:(n,e,t)=>{const i=`rotate(${30*e+(e<6?180:-180)}deg)`,s=`${n*e/t-n}ms`;return{y1:17,y2:29,style:{transform:i,"animation-delay":s}}}},"lines-sharp-small":{dur:1e3,lines:12,fn:(n,e,t)=>{const i=`rotate(${30*e+(e<6?180:-180)}deg)`,s=`${n*e/t-n}ms`;return{y1:12,y2:20,style:{transform:i,"animation-delay":s}}}}},vT=n4,s4=":host{display:inline-block;position:relative;width:28px;height:28px;color:var(--color);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.ion-color){color:var(--ion-color-base)}svg{-webkit-transform-origin:center;transform-origin:center;position:absolute;top:0;left:0;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0)}:host-context([dir=rtl]) svg{-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}[dir=rtl] svg{-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}@supports selector(:dir(rtl)){svg:dir(rtl){-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}}:host(.spinner-lines) line,:host(.spinner-lines-small) line{stroke-width:7px}:host(.spinner-lines-sharp) line,:host(.spinner-lines-sharp-small) line{stroke-width:4px}:host(.spinner-lines) line,:host(.spinner-lines-small) line,:host(.spinner-lines-sharp) line,:host(.spinner-lines-sharp-small) line{stroke-linecap:round;stroke:currentColor}:host(.spinner-lines) svg,:host(.spinner-lines-small) svg,:host(.spinner-lines-sharp) svg,:host(.spinner-lines-sharp-small) svg{-webkit-animation:spinner-fade-out 1s linear infinite;animation:spinner-fade-out 1s linear infinite}:host(.spinner-bubbles) svg{-webkit-animation:spinner-scale-out 1s linear infinite;animation:spinner-scale-out 1s linear infinite;fill:currentColor}:host(.spinner-circles) svg{-webkit-animation:spinner-fade-out 1s linear infinite;animation:spinner-fade-out 1s linear infinite;fill:currentColor}:host(.spinner-crescent) circle{fill:transparent;stroke-width:4px;stroke-dasharray:128px;stroke-dashoffset:82px;stroke:currentColor}:host(.spinner-crescent) svg{-webkit-animation:spinner-rotate 1s linear infinite;animation:spinner-rotate 1s linear infinite}:host(.spinner-dots) circle{stroke-width:0;fill:currentColor}:host(.spinner-dots) svg{-webkit-animation:spinner-dots 1s linear infinite;animation:spinner-dots 1s linear infinite}:host(.spinner-circular) svg{-webkit-animation:spinner-circular linear infinite;animation:spinner-circular linear infinite}:host(.spinner-circular) circle{-webkit-animation:spinner-circular-inner ease-in-out infinite;animation:spinner-circular-inner ease-in-out infinite;stroke:currentColor;stroke-dasharray:80px, 200px;stroke-dashoffset:0px;stroke-width:5.6;fill:none}:host(.spinner-paused),:host(.spinner-paused) svg,:host(.spinner-paused) circle{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes spinner-fade-out{0%{opacity:1}100%{opacity:0}}@keyframes spinner-fade-out{0%{opacity:1}100%{opacity:0}}@-webkit-keyframes spinner-scale-out{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1)}100%{-webkit-transform:scale(0, 0);transform:scale(0, 0)}}@keyframes spinner-scale-out{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1)}100%{-webkit-transform:scale(0, 0);transform:scale(0, 0)}}@-webkit-keyframes spinner-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-dots{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:0.9}50%{-webkit-transform:scale(0.4, 0.4);transform:scale(0.4, 0.4);opacity:0.3}100%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:0.9}}@keyframes spinner-dots{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:0.9}50%{-webkit-transform:scale(0.4, 0.4);transform:scale(0.4, 0.4);opacity:0.3}100%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:0.9}}@-webkit-keyframes spinner-circular{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-circular{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-circular-inner{0%{stroke-dasharray:1px, 200px;stroke-dashoffset:0px}50%{stroke-dasharray:100px, 200px;stroke-dashoffset:-15px}100%{stroke-dasharray:100px, 200px;stroke-dashoffset:-125px}}@keyframes spinner-circular-inner{0%{stroke-dasharray:1px, 200px;stroke-dashoffset:0px}50%{stroke-dasharray:100px, 200px;stroke-dashoffset:-15px}100%{stroke-dasharray:100px, 200px;stroke-dashoffset:-125px}}",r4=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.paused=!1}getName(){const e=this.name||bt.get("spinner"),t=ut(this);return e||(t==="ios"?"lines":"circular")}render(){var e;const t=this,i=ut(t),s=t.getName(),r=(e=vT[s])!==null&&e!==void 0?e:vT.lines,o=typeof t.duration=="number"&&t.duration>10?t.duration:r.dur,l=[];if(r.circles!==void 0)for(let d=0;d<r.circles;d++)l.push(o4(r,o,d,r.circles));else if(r.lines!==void 0)for(let d=0;d<r.lines;d++)l.push(a4(r,o,d,r.lines));return J(Kt,{key:"a33d6421fcc885995fbc7a348516525f68ca496c",class:ss(t.color,{[i]:!0,[`spinner-${s}`]:!0,"spinner-paused":t.paused||bt.getBoolean("_testing")}),role:"progressbar",style:r.elmDuration?{animationDuration:o+"ms"}:{}},l)}static get style(){return s4}},[257,"ion-spinner",{color:[513],duration:[2],name:[1],paused:[4]}]),o4=(n,e,t,i)=>{const s=n.fn(e,t,i);return s.style["animation-duration"]=e+"ms",J("svg",{viewBox:s.viewBox||"0 0 64 64",style:s.style},J("circle",{transform:s.transform||"translate(32,32)",cx:s.cx,cy:s.cy,r:s.r,style:n.elmDuration?{animationDuration:e+"ms"}:{}}))},a4=(n,e,t,i)=>{const s=n.fn(e,t,i);return s.style["animation-duration"]=e+"ms",J("svg",{viewBox:s.viewBox||"0 0 64 64",style:s.style},J("line",{transform:"translate(32,32)",y1:s.y1,y2:s.y2}))};function S2(){if(typeof customElements>"u")return;["ion-spinner"].forEach(e=>{switch(e){case"ion-spinner":customElements.get(e)||customElements.define(e,r4);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const l4="ion-infinite-scroll-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;min-height:84px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.infinite-loading{margin-left:0;margin-right:0;margin-top:0;margin-bottom:32px;display:none;width:100%}.infinite-loading-text{-webkit-margin-start:32px;margin-inline-start:32px;-webkit-margin-end:32px;margin-inline-end:32px;margin-top:4px;margin-bottom:0}.infinite-scroll-loading ion-infinite-scroll-content>.infinite-loading{display:block}.infinite-scroll-content-ios .infinite-loading-text{color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}.infinite-scroll-content-ios .infinite-loading-spinner .spinner-lines-ios line,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-lines-small-ios line,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-crescent circle{stroke:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}.infinite-scroll-content-ios .infinite-loading-spinner .spinner-bubbles circle,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-circles circle,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-dots circle{fill:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}",c4="ion-infinite-scroll-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;min-height:84px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.infinite-loading{margin-left:0;margin-right:0;margin-top:0;margin-bottom:32px;display:none;width:100%}.infinite-loading-text{-webkit-margin-start:32px;margin-inline-start:32px;-webkit-margin-end:32px;margin-inline-end:32px;margin-top:4px;margin-bottom:0}.infinite-scroll-loading ion-infinite-scroll-content>.infinite-loading{display:block}.infinite-scroll-content-md .infinite-loading-text{color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}.infinite-scroll-content-md .infinite-loading-spinner .spinner-lines-md line,.infinite-scroll-content-md .infinite-loading-spinner .spinner-lines-small-md line,.infinite-scroll-content-md .infinite-loading-spinner .spinner-crescent circle{stroke:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}.infinite-scroll-content-md .infinite-loading-spinner .spinner-bubbles circle,.infinite-scroll-content-md .infinite-loading-spinner .spinner-circles circle,.infinite-scroll-content-md .infinite-loading-spinner .spinner-dots circle{fill:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}",d4=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.customHTMLEnabled=bt.get("innerHTMLTemplatesEnabled",C3)}componentDidLoad(){if(this.loadingSpinner===void 0){const e=ut(this);this.loadingSpinner=bt.get("infiniteLoadingSpinner",bt.get("spinner",e==="ios"?"lines":"crescent"))}}renderLoadingText(){const{customHTMLEnabled:e,loadingText:t}=this;return e?J("div",{class:"infinite-loading-text",innerHTML:E3(t)}):J("div",{class:"infinite-loading-text"},this.loadingText)}render(){const e=ut(this);return J(Kt,{key:"7c16060dcfe2a0b0fb3e2f8f4c449589a76f1baa",class:{[e]:!0,[`infinite-scroll-content-${e}`]:!0}},J("div",{key:"a94f4d8746e053dc718f97520bd7e48cb316443a",class:"infinite-loading"},this.loadingSpinner&&J("div",{key:"10143d5d2a50a2a2bc5de1cee8e7ab51263bcf23",class:"infinite-loading-spinner"},J("ion-spinner",{key:"8846e88191690d9c61a0b462889ed56fbfed8b0d",name:this.loadingSpinner})),this.loadingText!==void 0&&this.renderLoadingText()))}static get style(){return{ios:l4,md:c4}}},[288,"ion-infinite-scroll-content",{loadingSpinner:[1025,"loading-spinner"],loadingText:[1,"loading-text"]}]);function u4(){if(typeof customElements>"u")return;["ion-infinite-scroll-content","ion-spinner"].forEach(e=>{switch(e){case"ion-infinite-scroll-content":customElements.get(e)||customElements.define(e,d4);break;case"ion-spinner":customElements.get(e)||S2();break}})}const h4=u4;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const E2=(n,e,t)=>{let i;const s=()=>!(e()===void 0||n.label!==void 0||t()===null),r=()=>{s()&&is(()=>{o()})},o=()=>{const d=e();if(d===void 0)return;if(!s()){d.style.removeProperty("width");return}const u=t().scrollWidth;if(u===0&&d.offsetParent===null&&ci!==void 0&&"IntersectionObserver"in ci){if(i!==void 0)return;const f=i=new IntersectionObserver(p=>{p[0].intersectionRatio===1&&(o(),f.disconnect(),i=void 0)},{threshold:.01,root:n});f.observe(d);return}d.style.setProperty("width",`${u*.75}px`)};return{calculateNotchWidth:r,destroy:()=>{i&&(i.disconnect(),i=void 0)}}},Ff=n=>{const e=n.classList.contains("ion-touched"),t=n.classList.contains("ion-invalid");return e&&t};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const T2=(n,e,t)=>{let i,s;if(ci!==void 0&&"MutationObserver"in ci){const d=Array.isArray(e)?e:[e];i=new MutationObserver(u=>{for(const f of u)for(const p of f.addedNodes)if(p.nodeType===Node.ELEMENT_NODE&&d.includes(p.slot)){t(),is(()=>r(p));return}}),i.observe(n,{childList:!0,subtree:!0})}const r=d=>{var u;s&&(s.disconnect(),s=void 0),s=new MutationObserver(f=>{t();for(const p of f)for(const b of p.removedNodes)b.nodeType===Node.ELEMENT_NODE&&b.slot===e&&l()}),s.observe((u=d.parentElement)!==null&&u!==void 0?u:d,{subtree:!0,childList:!0})},o=()=>{i&&(i.disconnect(),i=void 0),l()},l=()=>{s&&(s.disconnect(),s=void 0)};return{destroy:o}},k2=(n,e,t)=>{const i=n==null?0:n.toString().length,s=f4(i,e);if(t===void 0)return s;try{return t(i,e)}catch(r){return Hr("[ion-input] - Exception in provided `counterFormatter`:",r),s}},f4=(n,e)=>`${n} / ${e}`;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const p4=".sc-ion-input-ios-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item[slot=start].sc-ion-input-ios-h,ion-item [slot=start].sc-ion-input-ios-h,ion-item[slot=end].sc-ion-input-ios-h,ion-item [slot=end].sc-ion-input-ios-h{width:auto}.ion-color.sc-ion-input-ios-h{--highlight-color-focused:var(--ion-color-base)}.input-label-placement-floating.sc-ion-input-ios-h,.input-label-placement-stacked.sc-ion-input-ios-h{min-height:56px}.native-input.sc-ion-input-ios{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;height:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-ios::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-ios:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-ios::-ms-clear{display:none}.cloned-input.sc-ion-input-ios{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-input-ios{inset-inline-start:0}.cloned-input.sc-ion-input-ios:disabled{opacity:1}.input-clear-icon.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{color:inherit}.input-clear-icon.sc-ion-input-ios:focus{opacity:0.5}.has-value.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{visibility:visible}.input-wrapper.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;width:100%}.ion-touched.ion-invalid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem;white-space:normal}.has-focus.ion-valid.sc-ion-input-ios-h,.ion-touched.ion-invalid.sc-ion-input-ios-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:block;color:var(--ion-color-step-700, var(--ion-text-color-step-300, #4d4d4d))}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:block}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:none}.input-bottom.sc-ion-input-ios .counter.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-700, var(--ion-text-color-step-300, #4d4d4d));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-ios,.sc-ion-input-ios-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-ios,.input-outline-notch-hidden.sc-ion-input-ios{display:none}.input-wrapper.sc-ion-input-ios input.sc-ion-input-ios{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text.sc-ion-input-ios{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-ios-h:dir(rtl) .label-text-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h:dir(rtl) .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-ios-h input.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios,.has-value.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:1}.label-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.sc-ion-input-ios-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-input-ios-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.sc-ion-input-ios-h[disabled].sc-ion-input-ios-s>ion-input-password-toggle,.sc-ion-input-ios-h[disabled] .sc-ion-input-ios-s>ion-input-password-toggle,.sc-ion-input-ios-h[readonly].sc-ion-input-ios-s>ion-input-password-toggle,.sc-ion-input-ios-h[readonly] .sc-ion-input-ios-s>ion-input-password-toggle{visibility:hidden}.sc-ion-input-ios-h{--border-width:0.55px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));--highlight-height:0px;font-size:inherit}.input-clear-icon.sc-ion-input-ios ion-icon.sc-ion-input-ios{width:18px;height:18px}.input-disabled.sc-ion-input-ios-h{opacity:0.3}.sc-ion-input-ios-s>ion-button[slot=start].button-has-icon-only,.sc-ion-input-ios-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;aspect-ratio:1}",m4=".sc-ion-input-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item[slot=start].sc-ion-input-md-h,ion-item [slot=start].sc-ion-input-md-h,ion-item[slot=end].sc-ion-input-md-h,ion-item [slot=end].sc-ion-input-md-h{width:auto}.ion-color.sc-ion-input-md-h{--highlight-color-focused:var(--ion-color-base)}.input-label-placement-floating.sc-ion-input-md-h,.input-label-placement-stacked.sc-ion-input-md-h{min-height:56px}.native-input.sc-ion-input-md{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;height:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-md::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-md:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-md::-ms-clear{display:none}.cloned-input.sc-ion-input-md{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-input-md{inset-inline-start:0}.cloned-input.sc-ion-input-md:disabled{opacity:1}.input-clear-icon.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{color:inherit}.input-clear-icon.sc-ion-input-md:focus{opacity:0.5}.has-value.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{visibility:visible}.input-wrapper.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;width:100%}.ion-touched.ion-invalid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem;white-space:normal}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:block;color:var(--ion-color-step-700, var(--ion-text-color-step-300, #4d4d4d))}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:block}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:none}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-700, var(--ion-text-color-step-300, #4d4d4d));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-md-h input.sc-ion-input-md{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-md,.sc-ion-input-md-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-md,.input-outline-notch-hidden.sc-ion-input-md{display:none}.input-wrapper.sc-ion-input-md input.sc-ion-input-md{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text.sc-ion-input-md{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md,.has-value.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:1}.label-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.sc-ion-input-md-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-input-md-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.sc-ion-input-md-h[disabled].sc-ion-input-md-s>ion-input-password-toggle,.sc-ion-input-md-h[disabled] .sc-ion-input-md-s>ion-input-password-toggle,.sc-ion-input-md-h[readonly].sc-ion-input-md-s>ion-input-password-toggle,.sc-ion-input-md-h[readonly] .sc-ion-input-md-s>ion-input-password-toggle{visibility:hidden}.input-fill-solid.sc-ion-input-md-h{--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-color:var(--ion-color-step-500, var(--ion-background-color-step-500, gray));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:var(--border-width) var(--border-style) var(--border-color)}.has-focus.input-fill-solid.ion-valid.sc-ion-input-md-h,.input-fill-solid.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-fill-solid.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}@media (any-hover: hover){.input-fill-solid.sc-ion-input-md-h:hover{--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.input-fill-solid.has-focus.sc-ion-input-md-h{--background:var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0px;border-end-start-radius:0px}.label-floating.input-fill-solid.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{max-width:calc(100% / 0.75)}.input-fill-outline.sc-ion-input-md-h{--border-color:var(--ion-color-step-300, var(--ion-background-color-step-300, #b3b3b3));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.input-fill-outline.input-shape-round.sc-ion-input-md-h{--border-radius:28px;--padding-start:32px;--padding-end:32px}.has-focus.input-fill-outline.ion-valid.sc-ion-input-md-h,.input-fill-outline.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}@media (any-hover: hover){.input-fill-outline.sc-ion-input-md-h:hover{--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.input-fill-outline.has-focus.sc-ion-input-md-h{--border-width:var(--highlight-height);--border-color:var(--highlight-color)}.input-fill-outline.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}.input-fill-outline.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:none}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}}.input-fill-outline.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{position:relative}.label-floating.input-fill-outline.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc((100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75)}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:6px;margin-bottom:6px}.input-fill-outline.sc-ion-input-md-h .input-outline-container.sc-ion-input-md{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{pointer-events:none}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color)}.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{max-width:calc(100% - var(--padding-start) - var(--padding-end))}.input-fill-outline.sc-ion-input-md-h .notch-spacer.sc-ion-input-md{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none;-webkit-box-sizing:content-box;box-sizing:content-box}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md{border-start-start-radius:var(--border-radius);border-start-end-radius:0px;border-end-end-radius:0px;border-end-start-radius:var(--border-radius);-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color);width:calc(var(--padding-start) - 4px)}.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color);border-start-start-radius:0px;border-start-end-radius:var(--border-radius);border-end-end-radius:var(--border-radius);border-end-start-radius:0px;-ms-flex-positive:1;flex-grow:1}.label-floating.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{border-top:none}.sc-ion-input-md-h{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--highlight-height:2px;font-size:inherit}.input-clear-icon.sc-ion-input-md ion-icon.sc-ion-input-md{width:22px;height:22px}.input-disabled.sc-ion-input-md-h{opacity:0.38}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{letter-spacing:0.0333333333em}.input-label-placement-floating.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.has-focus.input-label-placement-floating.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-label-placement-stacked.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.input-highlight.sc-ion-input-md{bottom:-1px;position:absolute;width:100%;height:var(--highlight-height);-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}.input-highlight.sc-ion-input-md{inset-inline-start:0}.has-focus.sc-ion-input-md-h .input-highlight.sc-ion-input-md{-webkit-transform:scale(1);transform:scale(1)}.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{bottom:0}.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{inset-inline-start:0}.input-shape-round.sc-ion-input-md-h{--border-radius:16px}.sc-ion-input-md-s>ion-button[slot=start].button-has-icon-only,.sc-ion-input-md-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:8px;--padding-end:8px;--padding-top:8px;--padding-bottom:8px;aspect-ratio:1;min-height:40px}",g4=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.ionInput=Ze(this,"ionInput",7),this.ionChange=Ze(this,"ionChange",7),this.ionBlur=Ze(this,"ionBlur",7),this.ionFocus=Ze(this,"ionFocus",7),this.inputId=`ion-input-${b4++}`,this.helperTextId=`${this.inputId}-helper-text`,this.errorTextId=`${this.inputId}-error-text`,this.inheritedAttributes={},this.isComposing=!1,this.didInputClearOnEdit=!1,this.hasFocus=!1,this.isInvalid=!1,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.autofocus=!1,this.clearInput=!1,this.counter=!1,this.disabled=!1,this.labelPlacement="start",this.name=this.inputId,this.readonly=!1,this.required=!1,this.spellcheck=!1,this.type="text",this.value="",this.onInput=t=>{const i=t.target;i&&(this.value=i.value||""),this.emitInputChange(t)},this.onChange=t=>{this.emitValueChange(t)},this.onBlur=t=>{this.hasFocus=!1,this.focusedValue!==this.value&&this.emitValueChange(t),this.didInputClearOnEdit=!1,this.ionBlur.emit(t)},this.onFocus=t=>{this.hasFocus=!0,this.focusedValue=this.value,this.ionFocus.emit(t)},this.onKeydown=t=>{this.checkClearOnEdit(t)},this.onCompositionStart=()=>{this.isComposing=!0},this.onCompositionEnd=()=>{this.isComposing=!1},this.clearTextInput=t=>{this.clearInput&&!this.readonly&&!this.disabled&&t&&(t.preventDefault(),t.stopPropagation(),this.setFocus()),this.value="",this.emitInputChange(t)},this.onLabelClick=t=>{t.target===t.currentTarget&&t.stopPropagation()}}debounceChanged(){const{ionInput:e,debounce:t,originalIonInput:i}=this;this.ionInput=t===void 0?i??e:py(e,t)}onTypeChange(){const e=this.el.querySelector("ion-input-password-toggle");e&&(e.type=this.type)}valueChanged(){const e=this.nativeInput,t=this.getValue();e&&e.value!==t&&!this.isComposing&&(e.value=t)}onDirChanged(e){this.inheritedAttributes=Object.assign(Object.assign({},this.inheritedAttributes),{dir:e}),Ns(this)}onClickCapture(e){const t=this.nativeInput;t&&e.target===t&&(e.stopPropagation(),this.el.click())}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},zo(this.el)),ec(this.el,["tabindex","title","data-form-type","dir"]))}connectedCallback(){const{el:e}=this;this.slotMutationController=T2(e,["label","start","end"],()=>Ns(this)),this.notchController=E2(e,()=>this.notchSpacerEl,()=>this.labelSlot),typeof MutationObserver<"u"&&(this.validationObserver=new MutationObserver(()=>{const t=Ff(e);this.isInvalid!==t&&(this.isInvalid=t,Ns(this))}),this.validationObserver.observe(e,{attributes:!0,attributeFilter:["class"]})),this.isInvalid=Ff(e),this.debounceChanged(),document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}componentDidLoad(){this.originalIonInput=this.ionInput,this.onTypeChange(),this.debounceChanged()}componentDidRender(){var e;(e=this.notchController)===null||e===void 0||e.calculateNotchWidth()}disconnectedCallback(){document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el})),this.slotMutationController&&(this.slotMutationController.destroy(),this.slotMutationController=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0),this.validationObserver&&(this.validationObserver.disconnect(),this.validationObserver=void 0)}async setFocus(){this.nativeInput&&this.nativeInput.focus()}async getInputElement(){return this.nativeInput||await new Promise(e=>Fo(this.el,e)),Promise.resolve(this.nativeInput)}emitValueChange(e){const{value:t}=this,i=t==null?t:t.toString();this.focusedValue=i,this.ionChange.emit({value:i,event:e})}emitInputChange(e){const{value:t}=this,i=t==null?t:t.toString();this.ionInput.emit({value:i,event:e})}shouldClearOnEdit(){const{type:e,clearOnEdit:t}=this;return t===void 0?e==="password":t}getValue(){return typeof this.value=="number"?this.value.toString():(this.value||"").toString()}checkClearOnEdit(e){if(!this.shouldClearOnEdit())return;const i=["Enter","Tab","Shift","Meta","Alt","Control"].includes(e.key);!this.didInputClearOnEdit&&this.hasValue()&&!i&&(this.value="",this.emitInputChange(e)),i||(this.didInputClearOnEdit=!0)}hasValue(){return this.getValue().length>0}renderHintText(){const{helperText:e,errorText:t,helperTextId:i,errorTextId:s,isInvalid:r}=this;return[J("div",{id:i,class:"helper-text","aria-live":"polite"},r?null:e),J("div",{id:s,class:"error-text",role:"alert"},r?t:null)]}getHintTextID(){const{isInvalid:e,helperText:t,errorText:i,helperTextId:s,errorTextId:r}=this;if(e&&i)return r;if(t)return s}renderCounter(){const{counter:e,maxlength:t,counterFormatter:i,value:s}=this;if(!(e!==!0||t===void 0))return J("div",{class:"counter"},k2(s,t,i))}renderBottomContent(){const{counter:e,helperText:t,errorText:i,maxlength:s}=this;if(!(!(t||i)&&!(e===!0&&s!==void 0)))return J("div",{class:"input-bottom"},this.renderHintText(),this.renderCounter())}renderLabel(){const{label:e}=this;return J("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},e===void 0?J("slot",{name:"label"}):J("div",{class:"label-text"},e))}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return this.label!==void 0||this.labelSlot!==null}renderLabelContainer(){return ut(this)==="md"&&this.fill==="outline"?[J("div",{class:"input-outline-container"},J("div",{class:"input-outline-start"}),J("div",{class:{"input-outline-notch":!0,"input-outline-notch-hidden":!this.hasLabel}},J("div",{class:"notch-spacer","aria-hidden":"true",ref:i=>this.notchSpacerEl=i},this.label)),J("div",{class:"input-outline-end"})),this.renderLabel()]:this.renderLabel()}render(){const{disabled:e,fill:t,readonly:i,shape:s,inputId:r,labelPlacement:o,el:l,hasFocus:d,clearInputIcon:u}=this,f=ut(this),p=this.getValue(),b=_n("ion-item",this.el),v=f==="md"&&t!=="outline"&&!b,w=u??(f==="ios"?X3:Q3),E=this.hasValue(),T=l.querySelector('[slot="start"], [slot="end"]')!==null,k=o==="stacked"||o==="floating"&&(E||d||T);return J(Kt,{key:"97b5308021064d9e7434ef2d3d96f27045c1b0c4",class:ss(this.color,{[f]:!0,"has-value":E,"has-focus":d,"label-floating":k,[`input-fill-${t}`]:t!==void 0,[`input-shape-${s}`]:s!==void 0,[`input-label-placement-${o}`]:!0,"in-item":b,"in-item-color":_n("ion-item.ion-color",this.el),"input-disabled":e})},J("label",{key:"353f68726ce180299bd9adc81e5ff7d26a48f54f",class:"input-wrapper",htmlFor:r,onClick:this.onLabelClick},this.renderLabelContainer(),J("div",{key:"2034b4bad04fc157f3298a1805819216b6f439d0",class:"native-wrapper",onClick:this.onLabelClick},J("slot",{key:"96bb5e30176b2bd76dfb75bfbf6c1c3d4403f4bb",name:"start"}),J("input",Object.assign({key:"1a1d75b0e414a95c89d5a760757c33548d234aca",class:"native-input",ref:_=>this.nativeInput=_,id:r,disabled:e,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:i,required:this.required,spellcheck:this.spellcheck,step:this.step,type:this.type,value:p,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown,onCompositionstart:this.onCompositionStart,onCompositionend:this.onCompositionEnd,"aria-describedby":this.getHintTextID(),"aria-invalid":this.isInvalid?"true":void 0},this.inheritedAttributes)),this.clearInput&&!i&&!e&&J("button",{key:"95f3df17b7691d9a2e7dcd4a51f16a94aa3ca36f","aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:_=>{_.preventDefault()},onClick:this.clearTextInput},J("ion-icon",{key:"16b0af75eed50c8115fb5597f73b5fbf71c2530e","aria-hidden":"true",icon:w})),J("slot",{key:"c48da0f8ddb3764ac43efa705bb4a6bb2d9cc2fd",name:"end"})),v&&J("div",{key:"f15238481fc20de56ca7ecb6e350b3c024cc755e",class:"input-highlight"})),this.renderBottomContent())}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],type:["onTypeChange"],value:["valueChanged"],dir:["onDirChanged"]}}static get style(){return{ios:p4,md:m4}}},[294,"ion-input",{color:[513],autocapitalize:[1],autocomplete:[1],autocorrect:[1],autofocus:[4],clearInput:[4,"clear-input"],clearInputIcon:[1,"clear-input-icon"],clearOnEdit:[4,"clear-on-edit"],counter:[4],counterFormatter:[16],debounce:[2],disabled:[516],enterkeyhint:[1],errorText:[1,"error-text"],fill:[1],inputmode:[1],helperText:[1,"helper-text"],label:[1],labelPlacement:[1,"label-placement"],max:[8],maxlength:[2],min:[8],minlength:[2],multiple:[4],name:[1],pattern:[1],placeholder:[1],readonly:[516],required:[4],shape:[1],spellcheck:[4],step:[1],type:[1],value:[1032],hasFocus:[32],isInvalid:[32],setFocus:[64],getInputElement:[64]},[[2,"click","onClickCapture"]],{debounce:["debounceChanged"],type:["onTypeChange"],value:["valueChanged"],dir:["onDirChanged"]}]);let b4=0;function v4(){if(typeof customElements>"u")return;["ion-input","ion-icon"].forEach(e=>{switch(e){case"ion-input":customElements.get(e)||customElements.define(e,g4);break;case"ion-icon":customElements.get(e)||Ap();break}})}const y4=v4;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const x4="ion-item-options{top:0;right:0;-ms-flex-pack:end;justify-content:flex-end;display:none;position:absolute;height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1}:host-context([dir=rtl]) ion-item-options{-ms-flex-pack:start;justify-content:flex-start}:host-context([dir=rtl]) ion-item-options:not(.item-options-end){right:auto;left:0;-ms-flex-pack:end;justify-content:flex-end}[dir=rtl] ion-item-options{-ms-flex-pack:start;justify-content:flex-start}[dir=rtl] ion-item-options:not(.item-options-end){right:auto;left:0;-ms-flex-pack:end;justify-content:flex-end}@supports selector(:dir(rtl)){ion-item-options:dir(rtl){-ms-flex-pack:start;justify-content:flex-start}ion-item-options:dir(rtl):not(.item-options-end){right:auto;left:0;-ms-flex-pack:end;justify-content:flex-end}}.item-options-start{right:auto;left:0;-ms-flex-pack:start;justify-content:flex-start}:host-context([dir=rtl]) .item-options-start{-ms-flex-pack:end;justify-content:flex-end}[dir=rtl] .item-options-start{-ms-flex-pack:end;justify-content:flex-end}@supports selector(:dir(rtl)){.item-options-start:dir(rtl){-ms-flex-pack:end;justify-content:flex-end}}[dir=ltr] .item-options-start ion-item-option:first-child,[dir=rtl] .item-options-start ion-item-option:last-child{padding-left:var(--ion-safe-area-left)}[dir=ltr] .item-options-end ion-item-option:last-child,[dir=rtl] .item-options-end ion-item-option:first-child{padding-right:var(--ion-safe-area-right)}:host-context([dir=rtl]) .item-sliding-active-slide.item-sliding-active-options-start ion-item-options:not(.item-options-end){width:100%;visibility:visible}[dir=rtl] .item-sliding-active-slide.item-sliding-active-options-start ion-item-options:not(.item-options-end){width:100%;visibility:visible}@supports selector(:dir(rtl)){.item-sliding-active-slide:dir(rtl).item-sliding-active-options-start ion-item-options:not(.item-options-end){width:100%;visibility:visible}}.item-sliding-active-slide ion-item-options{display:-ms-flexbox;display:flex;visibility:hidden}.item-sliding-active-slide.item-sliding-active-options-start .item-options-start,.item-sliding-active-slide.item-sliding-active-options-end ion-item-options:not(.item-options-start){width:100%;visibility:visible}.item-options-ios{border-bottom-width:0;border-bottom-style:solid;border-bottom-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))))}.item-options-ios.item-options-end{border-bottom-width:0.55px}.list-ios-lines-none .item-options-ios{border-bottom-width:0}.list-ios-lines-full .item-options-ios,.list-ios-lines-inset .item-options-ios.item-options-end{border-bottom-width:0.55px}",w4="ion-item-options{top:0;right:0;-ms-flex-pack:end;justify-content:flex-end;display:none;position:absolute;height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1}:host-context([dir=rtl]) ion-item-options{-ms-flex-pack:start;justify-content:flex-start}:host-context([dir=rtl]) ion-item-options:not(.item-options-end){right:auto;left:0;-ms-flex-pack:end;justify-content:flex-end}[dir=rtl] ion-item-options{-ms-flex-pack:start;justify-content:flex-start}[dir=rtl] ion-item-options:not(.item-options-end){right:auto;left:0;-ms-flex-pack:end;justify-content:flex-end}@supports selector(:dir(rtl)){ion-item-options:dir(rtl){-ms-flex-pack:start;justify-content:flex-start}ion-item-options:dir(rtl):not(.item-options-end){right:auto;left:0;-ms-flex-pack:end;justify-content:flex-end}}.item-options-start{right:auto;left:0;-ms-flex-pack:start;justify-content:flex-start}:host-context([dir=rtl]) .item-options-start{-ms-flex-pack:end;justify-content:flex-end}[dir=rtl] .item-options-start{-ms-flex-pack:end;justify-content:flex-end}@supports selector(:dir(rtl)){.item-options-start:dir(rtl){-ms-flex-pack:end;justify-content:flex-end}}[dir=ltr] .item-options-start ion-item-option:first-child,[dir=rtl] .item-options-start ion-item-option:last-child{padding-left:var(--ion-safe-area-left)}[dir=ltr] .item-options-end ion-item-option:last-child,[dir=rtl] .item-options-end ion-item-option:first-child{padding-right:var(--ion-safe-area-right)}:host-context([dir=rtl]) .item-sliding-active-slide.item-sliding-active-options-start ion-item-options:not(.item-options-end){width:100%;visibility:visible}[dir=rtl] .item-sliding-active-slide.item-sliding-active-options-start ion-item-options:not(.item-options-end){width:100%;visibility:visible}@supports selector(:dir(rtl)){.item-sliding-active-slide:dir(rtl).item-sliding-active-options-start ion-item-options:not(.item-options-end){width:100%;visibility:visible}}.item-sliding-active-slide ion-item-options{display:-ms-flexbox;display:flex;visibility:hidden}.item-sliding-active-slide.item-sliding-active-options-start .item-options-start,.item-sliding-active-slide.item-sliding-active-options-end ion-item-options:not(.item-options-start){width:100%;visibility:visible}.item-options-md{border-bottom-width:0;border-bottom-style:solid;border-bottom-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))))}.list-md-lines-none .item-options-md{border-bottom-width:0}.list-md-lines-full .item-options-md,.list-md-lines-inset .item-options-md.item-options-end{border-bottom-width:1px}",S4=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.ionSwipe=Ze(this,"ionSwipe",7),this.side="end"}async fireSwipeEvent(){this.ionSwipe.emit({side:this.side})}render(){const e=ut(this),t=Kb(this.side);return J(Kt,{key:"05a22a505e043c2715e3805e5e26ab4668940af0",class:{[e]:!0,[`item-options-${e}`]:!0,"item-options-start":!t,"item-options-end":t}})}get el(){return this}static get style(){return{ios:x4,md:w4}}},[288,"ion-item-options",{side:[1],fireSwipeEvent:[64]}]);function E4(){if(typeof customElements>"u")return;["ion-item-options"].forEach(e=>{switch(e){case"ion-item-options":customElements.get(e)||customElements.define(e,S4);break}})}const T4=E4;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const k4=(n,e,t)=>{if(typeof MutationObserver>"u")return;const i=new MutationObserver(s=>{t(_4(s,e))});return i.observe(n,{childList:!0,subtree:!0}),i},_4=(n,e)=>{let t;return n.forEach(i=>{for(let s=0;s<i.addedNodes.length;s++)t=A4(i.addedNodes[s],e)||t}),t},A4=(n,e)=>{if(n.nodeType!==1)return;const t=n;return(t.tagName===e.toUpperCase()?[t]:Array.from(t.querySelectorAll(e))).find(s=>s.value===t.value)},C4="ion-item-sliding{display:block;position:relative;width:100%;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}ion-item-sliding .item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.item-sliding-active-slide .item{position:relative;-webkit-transition:-webkit-transform 500ms cubic-bezier(0.36, 0.66, 0.04, 1);transition:-webkit-transform 500ms cubic-bezier(0.36, 0.66, 0.04, 1);transition:transform 500ms cubic-bezier(0.36, 0.66, 0.04, 1);transition:transform 500ms cubic-bezier(0.36, 0.66, 0.04, 1), -webkit-transform 500ms cubic-bezier(0.36, 0.66, 0.04, 1);opacity:1;z-index:2;pointer-events:none;will-change:transform}.item-sliding-closing ion-item-options{pointer-events:none}.item-sliding-active-swipe-end .item-options-end .item-option-expandable{padding-left:100%;-ms-flex-order:1;order:1;-webkit-transition-duration:0.6s;transition-duration:0.6s;-webkit-transition-property:padding-left;transition-property:padding-left}:host-context([dir=rtl]) .item-sliding-active-swipe-end .item-options-end .item-option-expandable{-ms-flex-order:-1;order:-1}[dir=rtl] .item-sliding-active-swipe-end .item-options-end .item-option-expandable{-ms-flex-order:-1;order:-1}@supports selector(:dir(rtl)){.item-sliding-active-swipe-end .item-options-end .item-option-expandable:dir(rtl){-ms-flex-order:-1;order:-1}}.item-sliding-active-swipe-start .item-options-start .item-option-expandable{padding-right:100%;-ms-flex-order:-1;order:-1;-webkit-transition-duration:0.6s;transition-duration:0.6s;-webkit-transition-property:padding-right;transition-property:padding-right}:host-context([dir=rtl]) .item-sliding-active-swipe-start .item-options-start .item-option-expandable{-ms-flex-order:1;order:1}[dir=rtl] .item-sliding-active-swipe-start .item-options-start .item-option-expandable{-ms-flex-order:1;order:1}@supports selector(:dir(rtl)){.item-sliding-active-swipe-start .item-options-start .item-option-expandable:dir(rtl){-ms-flex-order:1;order:1}}",yT=30,xT=.55;let wr;const I4=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.ionDrag=Ze(this,"ionDrag",7),this.item=null,this.openAmount=0,this.initialOpenAmount=0,this.optsWidthRightSide=0,this.optsWidthLeftSide=0,this.sides=0,this.optsDirty=!0,this.contentEl=null,this.initialContentScrollY=!0,this.state=2,this.disabled=!1}disabledChanged(){this.gesture&&this.gesture.enable(!this.disabled)}async connectedCallback(){const{el:e}=this;this.item=e.querySelector("ion-item"),this.contentEl=Vl(e),this.mutationObserver=k4(e,"ion-item-option",async()=>{await this.updateOptions()}),await this.updateOptions(),this.gesture=(await jn(async()=>{const{createGesture:t}=await Promise.resolve().then(()=>my);return{createGesture:t}},void 0)).createGesture({el:e,gestureName:"item-swipe",gesturePriority:100,threshold:5,canStart:t=>this.canStart(t),onStart:()=>this.onStart(),onMove:t=>this.onMove(t),onEnd:t=>this.onEnd(t)}),this.disabledChanged()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.item=null,this.leftOptions=this.rightOptions=void 0,wr===this.el&&(wr=void 0),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=void 0)}getOpenAmount(){return Promise.resolve(this.openAmount)}getSlidingRatio(){return Promise.resolve(this.getSlidingRatioSync())}async open(e){var t;if((this.item=(t=this.item)!==null&&t!==void 0?t:this.el.querySelector("ion-item"))===null)return;const s=this.getOptions(e);if(!s)return;e===void 0&&(e=s===this.leftOptions?"start":"end"),e=Kb(e)?"end":"start";const r=this.openAmount<0,o=this.openAmount>0;r&&s===this.leftOptions||o&&s===this.rightOptions||(this.closeOpened(),this.state=4,requestAnimationFrame(()=>{this.calculateOptsWidth();const l=e==="end"?this.optsWidthRightSide:-this.optsWidthLeftSide;wr=this.el,this.setOpenAmount(l,!1),this.state=e==="end"?8:16}))}async close(){this.setOpenAmount(0,!0)}async closeOpened(){return wr!==void 0?(wr.close(),wr=void 0,!0):!1}getOptions(e){return e===void 0?this.leftOptions||this.rightOptions:e==="start"?this.leftOptions:this.rightOptions}async updateOptions(){var e;const t=this.el.querySelectorAll("ion-item-options");let i=0;this.leftOptions=this.rightOptions=void 0;for(let s=0;s<t.length;s++){const r=t.item(s),o=r.componentOnReady!==void 0?await r.componentOnReady():r;(Kb((e=o.side)!==null&&e!==void 0?e:o.getAttribute("side"))?"end":"start")==="start"?(this.leftOptions=o,i|=1):(this.rightOptions=o,i|=2)}this.optsDirty=!0,this.sides=i}canStart(e){if(document.dir==="rtl"?window.innerWidth-e.startX<15:e.startX<15)return!1;const s=wr;return s&&s!==this.el&&this.closeOpened(),!!(this.rightOptions||this.leftOptions)}onStart(){this.item=this.el.querySelector("ion-item");const{contentEl:e}=this;e&&(this.initialContentScrollY=$f(e)),wr=this.el,this.tmr!==void 0&&(clearTimeout(this.tmr),this.tmr=void 0),this.openAmount===0&&(this.optsDirty=!0,this.state=4),this.initialOpenAmount=this.openAmount,this.item&&(this.item.style.transition="none")}onMove(e){this.optsDirty&&this.calculateOptsWidth();let t=this.initialOpenAmount-e.deltaX;switch(this.sides){case 2:t=Math.max(0,t);break;case 1:t=Math.min(0,t);break;case 3:break;case 0:return;default:zn("[ion-item-sliding] - invalid ItemSideFlags value",this.sides);break}let i;t>this.optsWidthRightSide?(i=this.optsWidthRightSide,t=i+(t-i)*xT):t<-this.optsWidthLeftSide&&(i=-this.optsWidthLeftSide,t=i+(t-i)*xT),this.setOpenAmount(t,!1)}onEnd(e){const{contentEl:t,initialContentScrollY:i}=this;t&&wy(t,i);const s=e.velocityX;let r=this.openAmount>0?this.optsWidthRightSide:-this.optsWidthLeftSide;const o=this.openAmount>0==!(s<0),l=Math.abs(s)>.3,d=Math.abs(this.openAmount)<Math.abs(r/2);R4(o,l,d)&&(r=0);const u=this.state;this.setOpenAmount(r,!0),(u&32)!==0&&this.rightOptions?this.rightOptions.fireSwipeEvent():(u&64)!==0&&this.leftOptions&&this.leftOptions.fireSwipeEvent()}calculateOptsWidth(){this.optsWidthRightSide=0,this.rightOptions&&(this.rightOptions.style.display="flex",this.optsWidthRightSide=this.rightOptions.offsetWidth,this.rightOptions.style.display=""),this.optsWidthLeftSide=0,this.leftOptions&&(this.leftOptions.style.display="flex",this.optsWidthLeftSide=this.leftOptions.offsetWidth,this.leftOptions.style.display=""),this.optsDirty=!1}setOpenAmount(e,t){if(this.tmr!==void 0&&(clearTimeout(this.tmr),this.tmr=void 0),!this.item)return;const{el:i}=this,s=this.item.style;if(this.openAmount=e,t&&(s.transition=""),e>0)this.state=e>=this.optsWidthRightSide+yT?40:8;else if(e<0)this.state=e<=-this.optsWidthLeftSide-yT?80:16;else{i.classList.add("item-sliding-closing"),this.gesture&&this.gesture.enable(!1),this.tmr=setTimeout(()=>{this.state=2,this.tmr=void 0,this.gesture&&this.gesture.enable(!this.disabled),i.classList.remove("item-sliding-closing")},600),wr=void 0,s.transform="";return}s.transform=`translate3d(${-e}px,0,0)`,this.ionDrag.emit({amount:e,ratio:this.getSlidingRatioSync()})}getSlidingRatioSync(){return this.openAmount>0?this.openAmount/this.optsWidthRightSide:this.openAmount<0?this.openAmount/this.optsWidthLeftSide:0}render(){const e=ut(this);return J(Kt,{key:"d812322c9fb5da4ee16e99dc38bfb24cb4590d03",class:{[e]:!0,"item-sliding-active-slide":this.state!==2,"item-sliding-active-options-end":(this.state&8)!==0,"item-sliding-active-options-start":(this.state&16)!==0,"item-sliding-active-swipe-end":(this.state&32)!==0,"item-sliding-active-swipe-start":(this.state&64)!==0}})}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return C4}},[256,"ion-item-sliding",{disabled:[4],state:[32],getOpenAmount:[64],getSlidingRatio:[64],open:[64],close:[64],closeOpened:[64]},void 0,{disabled:["disabledChanged"]}]),R4=(n,e,t)=>!e&&t||n&&e;function L4(){if(typeof customElements>"u")return;["ion-item-sliding"].forEach(e=>{switch(e){case"ion-item-sliding":customElements.get(e)||customElements.define(e,I4);break}})}const D4=L4;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const O4="ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-ios{background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-ios.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:10px}.list-ios.list-inset ion-item:only-child,.list-ios.list-inset ion-item:not(:only-of-type):last-of-type,.list-ios.list-inset ion-item-sliding:last-of-type ion-item{--border-width:0;--inner-border-width:0}.list-ios.list-inset+ion-list.list-inset{margin-top:0}.list-ios-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-ios-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 0.55px 0}.list-ios-lines-inset .item-lines-default{--inner-border-width:0 0 0.55px 0;--border-width:0px}ion-card .list-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",N4="ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-md>.input:last-child::after{inset-inline-start:0}.list-md.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:2px}.list-md.list-inset ion-item:not(:only-of-type):last-of-type,.list-md.list-inset ion-item-sliding:last-of-type ion-item{--border-width:0;--inner-border-width:0}.list-md.list-inset ion-item:only-child{--border-width:0;--inner-border-width:0}.list-md.list-inset+ion-list.list-inset{margin-top:0}.list-md-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-md-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 1px 0}.list-md-lines-inset .item-lines-default{--inner-border-width:0 0 1px 0;--border-width:0px}ion-card .list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",P4=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.inset=!1}async closeSlidingItems(){const e=this.el.querySelector("ion-item-sliding");return e?.closeOpened?e.closeOpened():!1}render(){const e=ut(this),{lines:t,inset:i}=this;return J(Kt,{key:"7f9943751542d2cbd49a4ad3f28e16d9949f70d4",role:"list",class:{[e]:!0,[`list-${e}`]:!0,"list-inset":i,[`list-lines-${t}`]:t!==void 0,[`list-${e}-lines-${t}`]:t!==void 0}})}get el(){return this}static get style(){return{ios:O4,md:N4}}},[288,"ion-list",{lines:[1],inset:[4],closeSlidingItems:[64]}]);function M4(){if(typeof customElements>"u")return;["ion-list"].forEach(e=>{switch(e){case"ion-list":customElements.get(e)||customElements.define(e,P4);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const $4=M4,_2=1,A2=2,jf=3;class av{constructor(e,t){this.component=e,this.params=t,this.state=_2}async init(e){if(this.state=A2,!this.element){const t=this.component;this.element=await _p(this.delegate,e,t,["ion-page","ion-page-invisible"],this.params)}}_destroy(){$n(this.state!==jf,"view state must be ATTACHED");const e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=jf}}const wT=(n,e,t)=>!n||n.component!==e?!1:NC(n.params,t),ST=(n,e)=>n?n instanceof av?n:new av(n,e):null,F4=n=>n.map(e=>e instanceof av?e:"component"in e?ST(e.component,e.componentProps===null?void 0:e.componentProps):ST(e,void 0)).filter(e=>e!==null),j4=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}",B4=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Ze(this,"ionNavWillLoad",7),this.ionNavWillChange=Ze(this,"ionNavWillChange",3),this.ionNavDidChange=Ze(this,"ionNavDidChange",3),this.transInstr=[],this.gestureOrAnimationInProgress=!1,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.didLoad=!1,this.animated=!0}swipeGestureChanged(){this.gesture&&this.gesture.enable(this.swipeGesture===!0)}rootChanged(){this.root!==void 0&&this.didLoad!==!1&&(this.useRouter||this.root!==void 0&&this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=document.querySelector("ion-router")!==null&&this.el.closest("[no-router]")===null,this.swipeGesture===void 0){const e=ut(this);this.swipeGesture=bt.getBoolean("swipeBackEnabled",e==="ios")}this.ionNavWillLoad.emit()}async componentDidLoad(){this.didLoad=!0,this.rootChanged(),this.gesture=(await jn(async()=>{const{createSwipeBackGesture:e}=await import("./swipe-back-Cy8UdeB3.js");return{createSwipeBackGesture:e}},[])).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const e of this.views)Rr(e.element,o0),e._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(e,t,i,s){return this.insert(-1,e,t,i,s)}insert(e,t,i,s,r){return this.insertPages(e,[{component:t,componentProps:i}],s,r)}insertPages(e,t,i,s){return this.queueTrns({insertStart:e,insertViews:t,opts:i},s)}pop(e,t){return this.removeIndex(-1,1,e,t)}popTo(e,t,i){const s={removeStart:-1,removeCount:-1,opts:t};return typeof e=="object"&&e.component?(s.removeView=e,s.removeStart=1):typeof e=="number"&&(s.removeStart=e+1),this.queueTrns(s,i)}popToRoot(e,t){return this.removeIndex(1,-1,e,t)}removeIndex(e,t=1,i,s){return this.queueTrns({removeStart:e,removeCount:t,opts:i},s)}setRoot(e,t,i,s){return this.setPages([{component:e,componentProps:t}],i,s)}setPages(e,t,i){return t??(t={}),t.animated!==!0&&(t.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:t},i)}setRouteId(e,t,i,s){const r=this.getActiveSync();if(wT(r,e,t))return Promise.resolve({changed:!1,element:r.element});let o;const l=new Promise(f=>o=f);let d;const u={updateURL:!1,viewIsReady:f=>{let p;const b=new Promise(v=>p=v);return o({changed:!0,element:f,markVisible:async()=>{p(),await d}}),b}};if(i==="root")d=this.setRoot(e,t,u);else{const f=this.views.find(p=>wT(p,e,t));f?d=this.popTo(f,Object.assign(Object.assign({},u),{direction:"back",animationBuilder:s})):i==="forward"?d=this.push(e,t,Object.assign(Object.assign({},u),{animationBuilder:s})):i==="back"&&(d=this.setRoot(e,t,Object.assign(Object.assign({},u),{direction:"back",animated:!0,animationBuilder:s})))}return l}async getRouteId(){const e=this.getActiveSync();if(e)return{id:e.element.tagName,params:e.params,element:e.element}}async getActive(){return this.getActiveSync()}async getByIndex(e){return this.views[e]}async canGoBack(e){return this.canGoBackSync(e)}async getPrevious(e){return this.getPreviousSync(e)}async getLength(){return Promise.resolve(this.views.length)}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!!(e&&this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e)return;const t=this.views,i=t.indexOf(e);return i>0?t[i-1]:void 0}async queueTrns(e,t){var i,s;if(this.isTransitioning&&(!((i=e.opts)===null||i===void 0)&&i.skipIfBusy))return!1;const r=new Promise((o,l)=>{e.resolve=o,e.reject=l});if(e.done=t,e.opts&&e.opts.updateURL!==!1&&this.useRouter){const o=document.querySelector("ion-router");if(o){const l=await o.canTransition();if(l===!1)return!1;if(typeof l=="string")return o.push(l,e.opts.direction||"back"),!1}}return((s=e.insertViews)===null||s===void 0?void 0:s.length)===0&&(e.insertViews=void 0),this.transInstr.push(e),this.nextTrns(),r}success(e,t){if(this.destroyed){this.fireError("nav controller was destroyed",t);return}if(t.done&&t.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),t.resolve(e.hasCompleted),t.opts.updateURL!==!1&&this.useRouter){const i=document.querySelector("ion-router");if(i){const s=e.direction==="back"?"back":"forward";i.navChanged(s)}}}failed(e,t){if(this.destroyed){this.fireError("nav controller was destroyed",t);return}this.transInstr.length=0,this.fireError(e,t)}fireError(e,t){t.done&&t.done(!1,!1,e),t.reject&&!this.destroyed?t.reject(e):t.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const e=this.transInstr.shift();return e?(this.runTransition(e),!0):!1}async runTransition(e){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(e);const t=this.getActiveSync(),i=this.getEnteringView(e,t);if(!t&&!i)throw new Error("no views in the stack to be removed");i&&i.state===_2&&await i.init(this.el),this.postViewInit(i,t,e);const s=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&i!==t;s&&e.opts&&t&&(e.opts.direction==="back"&&(e.opts.animationBuilder=e.opts.animationBuilder||i?.animationBuilder),t.animationBuilder=e.opts.animationBuilder);let r;s?r=await this.transition(i,t,e):r={hasCompleted:!0,requiresTransition:!1},this.success(r,e),this.ionNavDidChange.emit()}catch(t){this.failed(t,e)}this.isTransitioning=!1,this.nextTrns()}prepareTI(e){var t,i,s;const r=this.views.length;if((t=e.opts)!==null&&t!==void 0||(e.opts={}),(i=(s=e.opts).delegate)!==null&&i!==void 0||(s.delegate=this.delegate),e.removeView!==void 0){$n(e.removeStart!==void 0,"removeView needs removeStart"),$n(e.removeCount!==void 0,"removeView needs removeCount");const d=this.views.indexOf(e.removeView);if(d<0)throw new Error("removeView was not found");e.removeStart+=d}e.removeStart!==void 0&&(e.removeStart<0&&(e.removeStart=r-1),e.removeCount<0&&(e.removeCount=r-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===r),e.insertViews&&((e.insertStart<0||e.insertStart>r)&&(e.insertStart=r),e.enteringRequiresTransition=e.insertStart===r);const o=e.insertViews;if(!o)return;$n(o.length>0,"length can not be zero");const l=F4(o);if(l.length===0)throw new Error("invalid views to insert");for(const d of l){d.delegate=e.opts.delegate;const u=d.nav;if(u&&u!==this)throw new Error("inserted view was already inserted");if(d.state===jf)throw new Error("inserted view was already destroyed")}e.insertViews=l}getEnteringView(e,t){const i=e.insertViews;if(i!==void 0)return i[i.length-1];const s=e.removeStart;if(s!==void 0){const r=this.views,o=s+e.removeCount;for(let l=r.length-1;l>=0;l--){const d=r[l];if((l<s||l>=o)&&d!==t)return d}}}postViewInit(e,t,i){var s,r,o;$n(t||e,"Both leavingView and enteringView are null"),$n(i.resolve,"resolve must be valid"),$n(i.reject,"reject must be valid");const l=i.opts,{insertViews:d,removeStart:u,removeCount:f}=i;let p;if(u!==void 0&&f!==void 0){$n(u>=0,"removeStart can not be negative"),$n(f>=0,"removeCount can not be negative"),p=[];for(let v=u;v<u+f;v++){const y=this.views[v];y!==void 0&&y!==e&&y!==t&&p.push(y)}(s=l.direction)!==null&&s!==void 0||(l.direction="back")}const b=this.views.length+((r=d?.length)!==null&&r!==void 0?r:0)-(f??0);if($n(b>=0,"final balance can not be negative"),b===0)throw zn("[ion-nav] - You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(d){let v=i.insertStart;for(const y of d)this.insertViewAt(y,v),v++;i.enteringRequiresTransition&&((o=l.direction)!==null&&o!==void 0||(l.direction="forward"))}if(p&&p.length>0){for(const v of p)Rr(v.element,PC),Rr(v.element,MC),Rr(v.element,o0);for(const v of p)this.destroyView(v)}}async transition(e,t,i){const s=i.opts,r=s.progressAnimation?p=>{p!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,p.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0}),p.progressEnd(0,0,0)):this.sbAni=p}:void 0,o=ut(this),l=e.element,d=t&&t.element,u=Object.assign(Object.assign({mode:o,showGoBack:this.canGoBackSync(e),baseEl:this.el,progressCallback:r,animated:this.animated&&bt.getBoolean("animated",!0),enteringEl:l,leavingEl:d},s),{animationBuilder:s.animationBuilder||this.animation||bt.get("navAnimation")}),{hasCompleted:f}=await FC(u);return this.transitionFinish(f,e,t,s)}transitionFinish(e,t,i,s){const r=e?t:i;return r&&this.unmountInactiveViews(r),{hasCompleted:e,requiresTransition:!0,enteringView:t,leavingView:i,direction:s.direction}}insertViewAt(e,t){const i=this.views,s=i.indexOf(e);s>-1?($n(e.nav===this,"view is not part of the nav"),i.splice(s,1),i.splice(t,0,e)):($n(!e.nav,"nav is used"),e.nav=this,i.splice(t,0,e))}removeView(e){$n(e.state===A2||e.state===jf,"view state should be loaded or destroyed");const t=this.views,i=t.indexOf(e);$n(i>-1,"view must be part of the stack"),i>=0&&t.splice(i,1)}destroyView(e){e._destroy(),this.removeView(e)}unmountInactiveViews(e){if(this.destroyed)return;const t=this.views,i=t.indexOf(e);for(let s=t.length-1;s>=0;s--){const r=t[s],o=r.element;o&&(s>i?(Rr(o,o0),this.destroyView(r)):s<i&&Yb(o,!0))}}canStart(){return!this.gestureOrAnimationInProgress&&!!this.swipeGesture&&!this.isTransitioning&&this.transInstr.length===0&&this.canGoBackSync()}onStart(){this.gestureOrAnimationInProgress=!0,this.pop({direction:"back",progressAnimation:!0})}onMove(e){this.sbAni&&this.sbAni.progressStep(e)}onEnd(e,t,i){if(this.sbAni){this.sbAni.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0});let s=e?-.001:.001;e?s+=Gl([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),s+=Gl([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.sbAni.progressEnd(e?1:0,s,i)}else this.gestureOrAnimationInProgress=!1}render(){return J("slot",{key:"8067c9835d255daec61f33dba200fd3a6ff839a0"})}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return j4}},[257,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64],getLength:[64]},void 0,{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}]);function U4(){if(typeof customElements>"u")return;["ion-nav"].forEach(e=>{switch(e){case"ion-nav":customElements.get(e)||customElements.define(e,B4);break}})}const z4=U4;function H4(n){return!Eo(n)||n%1===0?0:n.toString().split(".")[1].length}function G4(n,...e){if(!Eo(n))return 0;const t=Math.max(...e.map(i=>H4(i)));return Number(n.toFixed(t))}const V4=":host{--knob-handle-size:calc(var(--knob-size) * 2);display:-ms-flexbox;display:flex;position:relative;-ms-flex:3;flex:3;-ms-flex-align:center;align-items:center;font-family:var(--ion-font-family, inherit);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.range-disabled){pointer-events:none}::slotted(ion-label){-ms-flex:initial;flex:initial}::slotted(ion-icon[slot]){font-size:24px}.range-slider{position:relative;-ms-flex:1;flex:1;width:100%;height:var(--height);contain:size layout style;cursor:-webkit-grab;cursor:grab;-ms-touch-action:pan-y;touch-action:pan-y}:host(.range-pressed) .range-slider{cursor:-webkit-grabbing;cursor:grabbing}.range-pin{position:absolute;background:var(--ion-color-base);color:var(--ion-color-contrast);text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box}.range-knob-handle{top:calc((var(--height) - var(--knob-handle-size)) / 2);-webkit-margin-start:calc(0px - var(--knob-handle-size) / 2);margin-inline-start:calc(0px - var(--knob-handle-size) / 2);display:-ms-flexbox;display:flex;position:absolute;-ms-flex-pack:center;justify-content:center;width:var(--knob-handle-size);height:var(--knob-handle-size);text-align:center}.range-knob-handle{inset-inline-start:0}:host-context([dir=rtl]) .range-knob-handle{left:unset}[dir=rtl] .range-knob-handle{left:unset}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset}}.range-knob-handle:active,.range-knob-handle:focus{outline:none}.range-bar-container{border-radius:var(--bar-border-radius);top:calc((var(--height) - var(--bar-height)) / 2);position:absolute;width:100%;height:var(--bar-height)}.range-bar-container{inset-inline-start:0}:host-context([dir=rtl]) .range-bar-container{left:unset}[dir=rtl] .range-bar-container{left:unset}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset}}.range-bar{border-radius:var(--bar-border-radius);position:absolute;width:100%;height:var(--bar-height);background:var(--bar-background);pointer-events:none}.range-knob{border-radius:var(--knob-border-radius);top:calc(50% - var(--knob-size) / 2);position:absolute;width:var(--knob-size);height:var(--knob-size);background:var(--knob-background);-webkit-box-shadow:var(--knob-box-shadow);box-shadow:var(--knob-box-shadow);z-index:2;pointer-events:none}.range-knob{inset-inline-start:calc(50% - var(--knob-size) / 2)}:host-context([dir=rtl]) .range-knob{left:unset}[dir=rtl] .range-knob{left:unset}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset}}:host(.range-pressed) .range-bar-active{will-change:left, right}:host(.in-item){width:100%}:host([slot=start]),:host([slot=end]){width:auto}:host(.in-item) ::slotted(ion-label){-ms-flex-item-align:center;align-self:center}.range-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit}::slotted([slot=label]){max-width:200px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center}:host(.range-label-placement-start) .range-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.range-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-end) .range-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.range-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.range-label-placement-stacked) .range-wrapper{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:stretch;align-items:stretch}:host(.range-label-placement-stacked) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top;-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host-context([dir=rtl]):host(.range-label-placement-stacked) .label-text-wrapper,:host-context([dir=rtl]).range-label-placement-stacked .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.range-label-placement-stacked:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.in-item.range-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.range-label-placement-stacked) .native-wrapper{margin-bottom:0px}:host{--knob-border-radius:50%;--knob-background:#ffffff;--knob-box-shadow:0px 0.5px 4px rgba(0, 0, 0, 0.12), 0px 6px 13px rgba(0, 0, 0, 0.12);--knob-size:26px;--bar-height:4px;--bar-background:var(--ion-color-step-900, var(--ion-background-color-step-900, #e6e6e6));--bar-background-active:var(--ion-color-primary, #0054e9);--bar-border-radius:2px;--height:42px}:host(.range-item-start-adjustment){-webkit-padding-start:24px;padding-inline-start:24px}:host(.range-item-end-adjustment){-webkit-padding-end:24px;padding-inline-end:24px}:host(.ion-color) .range-bar-active,:host(.ion-color) .range-tick-active{background:var(--ion-color-base)}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}::slotted([slot=end]){-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-has-pin:not(.range-label-placement-stacked)){padding-top:calc(8px + 0.75rem)}:host(.range-has-pin.range-label-placement-stacked) .label-text-wrapper{margin-bottom:calc(8px + 0.75rem)}.range-bar-active{bottom:0;width:auto;background:var(--bar-background-active)}.range-bar-active.has-ticks{border-radius:0;-webkit-margin-start:-2px;margin-inline-start:-2px;-webkit-margin-end:-2px;margin-inline-end:-2px}.range-tick{-webkit-margin-start:-2px;margin-inline-start:-2px;border-radius:0;position:absolute;top:17px;width:4px;height:8px;background:var(--ion-color-step-900, var(--ion-background-color-step-900, #e6e6e6));pointer-events:none}.range-tick-active{background:var(--bar-background-active)}.range-pin{-webkit-transform:translate3d(0,  100%,  0) scale(0.01);transform:translate3d(0,  100%,  0) scale(0.01);-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;min-width:28px;-webkit-transition:-webkit-transform 120ms ease;transition:-webkit-transform 120ms ease;transition:transform 120ms ease;transition:transform 120ms ease, -webkit-transform 120ms ease;background:transparent;color:var(--ion-text-color, #000);font-size:0.75rem;text-align:center}.range-knob-pressed .range-pin,.range-knob-handle.ion-focused .range-pin{-webkit-transform:translate3d(0, calc(-100% + 11px), 0) scale(1);transform:translate3d(0, calc(-100% + 11px), 0) scale(1)}:host(.range-disabled){opacity:0.3}",q4=':host{--knob-handle-size:calc(var(--knob-size) * 2);display:-ms-flexbox;display:flex;position:relative;-ms-flex:3;flex:3;-ms-flex-align:center;align-items:center;font-family:var(--ion-font-family, inherit);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.range-disabled){pointer-events:none}::slotted(ion-label){-ms-flex:initial;flex:initial}::slotted(ion-icon[slot]){font-size:24px}.range-slider{position:relative;-ms-flex:1;flex:1;width:100%;height:var(--height);contain:size layout style;cursor:-webkit-grab;cursor:grab;-ms-touch-action:pan-y;touch-action:pan-y}:host(.range-pressed) .range-slider{cursor:-webkit-grabbing;cursor:grabbing}.range-pin{position:absolute;background:var(--ion-color-base);color:var(--ion-color-contrast);text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box}.range-knob-handle{top:calc((var(--height) - var(--knob-handle-size)) / 2);-webkit-margin-start:calc(0px - var(--knob-handle-size) / 2);margin-inline-start:calc(0px - var(--knob-handle-size) / 2);display:-ms-flexbox;display:flex;position:absolute;-ms-flex-pack:center;justify-content:center;width:var(--knob-handle-size);height:var(--knob-handle-size);text-align:center}.range-knob-handle{inset-inline-start:0}:host-context([dir=rtl]) .range-knob-handle{left:unset}[dir=rtl] .range-knob-handle{left:unset}@supports selector(:dir(rtl)){.range-knob-handle:dir(rtl){left:unset}}.range-knob-handle:active,.range-knob-handle:focus{outline:none}.range-bar-container{border-radius:var(--bar-border-radius);top:calc((var(--height) - var(--bar-height)) / 2);position:absolute;width:100%;height:var(--bar-height)}.range-bar-container{inset-inline-start:0}:host-context([dir=rtl]) .range-bar-container{left:unset}[dir=rtl] .range-bar-container{left:unset}@supports selector(:dir(rtl)){.range-bar-container:dir(rtl){left:unset}}.range-bar{border-radius:var(--bar-border-radius);position:absolute;width:100%;height:var(--bar-height);background:var(--bar-background);pointer-events:none}.range-knob{border-radius:var(--knob-border-radius);top:calc(50% - var(--knob-size) / 2);position:absolute;width:var(--knob-size);height:var(--knob-size);background:var(--knob-background);-webkit-box-shadow:var(--knob-box-shadow);box-shadow:var(--knob-box-shadow);z-index:2;pointer-events:none}.range-knob{inset-inline-start:calc(50% - var(--knob-size) / 2)}:host-context([dir=rtl]) .range-knob{left:unset}[dir=rtl] .range-knob{left:unset}@supports selector(:dir(rtl)){.range-knob:dir(rtl){left:unset}}:host(.range-pressed) .range-bar-active{will-change:left, right}:host(.in-item){width:100%}:host([slot=start]),:host([slot=end]){width:auto}:host(.in-item) ::slotted(ion-label){-ms-flex-item-align:center;align-self:center}.range-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;height:inherit}::slotted([slot=label]){max-width:200px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center}:host(.range-label-placement-start) .range-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.range-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-end) .range-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.range-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}:host(.range-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.range-label-placement-stacked) .range-wrapper{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:stretch;align-items:stretch}:host(.range-label-placement-stacked) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top;-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host-context([dir=rtl]):host(.range-label-placement-stacked) .label-text-wrapper,:host-context([dir=rtl]).range-label-placement-stacked .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.range-label-placement-stacked:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.in-item.range-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.range-label-placement-stacked) .native-wrapper{margin-bottom:0px}:host{--knob-border-radius:50%;--knob-background:var(--bar-background-active);--knob-box-shadow:none;--knob-size:18px;--bar-height:2px;--bar-background:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.26);--bar-background-active:var(--ion-color-primary, #0054e9);--bar-border-radius:0;--height:42px;--pin-background:var(--ion-color-primary, #0054e9);--pin-color:var(--ion-color-primary-contrast, #fff)}::slotted(:not(ion-icon)[slot=start]),::slotted(:not(ion-icon)[slot=end]),.native-wrapper{font-size:0.75rem}:host(.range-item-start-adjustment){-webkit-padding-start:18px;padding-inline-start:18px}:host(.range-item-end-adjustment){-webkit-padding-end:18px;padding-inline-end:18px}:host(.ion-color) .range-bar{background:rgba(var(--ion-color-base-rgb), 0.26)}:host(.ion-color) .range-bar-active,:host(.ion-color) .range-knob,:host(.ion-color) .range-knob::before,:host(.ion-color) .range-pin,:host(.ion-color) .range-pin::before,:host(.ion-color) .range-tick{background:var(--ion-color-base);color:var(--ion-color-contrast)}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:14px;margin-inline-end:14px;margin-top:0;margin-bottom:0}::slotted([slot=end]){-webkit-margin-start:14px;margin-inline-start:14px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}:host(.range-has-pin:not(.range-label-placement-stacked)){padding-top:1.75rem}:host(.range-has-pin.range-label-placement-stacked) .label-text-wrapper{margin-bottom:1.75rem}.range-bar-active{bottom:0;width:auto;background:var(--bar-background-active)}.range-knob{-webkit-transform:scale(0.67);transform:scale(0.67);-webkit-transition-duration:120ms;transition-duration:120ms;-webkit-transition-property:background-color, border, -webkit-transform;transition-property:background-color, border, -webkit-transform;transition-property:transform, background-color, border;transition-property:transform, background-color, border, -webkit-transform;-webkit-transition-timing-function:ease;transition-timing-function:ease;z-index:2}.range-knob::before{border-radius:50%;position:absolute;width:var(--knob-size);height:var(--knob-size);-webkit-transform:scale(1);transform:scale(1);-webkit-transition:0.267s cubic-bezier(0, 0, 0.58, 1);transition:0.267s cubic-bezier(0, 0, 0.58, 1);background:var(--knob-background);content:"";opacity:0.13;pointer-events:none}.range-knob::before{inset-inline-start:0}.range-tick{position:absolute;top:calc((var(--height) - var(--bar-height)) / 2);width:var(--bar-height);height:var(--bar-height);background:var(--bar-background-active);z-index:1;pointer-events:none}.range-tick-active{background:transparent}.range-pin{padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;border-radius:50%;-webkit-transform:translate3d(0,  0,  0) scale(0.01);transform:translate3d(0,  0,  0) scale(0.01);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:1.75rem;height:1.75rem;-webkit-transition:background 120ms ease, -webkit-transform 120ms ease;transition:background 120ms ease, -webkit-transform 120ms ease;transition:transform 120ms ease, background 120ms ease;transition:transform 120ms ease, background 120ms ease, -webkit-transform 120ms ease;background:var(--pin-background);color:var(--pin-color)}.range-pin::before{bottom:-1px;-webkit-margin-start:-13px;margin-inline-start:-13px;border-radius:50% 50% 50% 0;position:absolute;width:26px;height:26px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transition:background 120ms ease;transition:background 120ms ease;background:var(--pin-background);content:"";z-index:-1}.range-pin::before{inset-inline-start:50%}:host-context([dir=rtl]) .range-pin::before{left:unset}[dir=rtl] .range-pin::before{left:unset}@supports selector(:dir(rtl)){.range-pin::before:dir(rtl){left:unset}}.range-knob-pressed .range-pin,.range-knob-handle.ion-focused .range-pin{-webkit-transform:translate3d(0, calc(-100% + 4px), 0) scale(1);transform:translate3d(0, calc(-100% + 4px), 0) scale(1)}@media (any-hover: hover){.range-knob-handle:hover .range-knob:before{-webkit-transform:scale(2);transform:scale(2);opacity:0.13}}.range-knob-handle.ion-activated .range-knob:before,.range-knob-handle.ion-focused .range-knob:before,.range-knob-handle.range-knob-pressed .range-knob:before{-webkit-transform:scale(2);transform:scale(2)}.range-knob-handle.ion-focused .range-knob::before{opacity:0.13}.range-knob-handle.ion-activated .range-knob::before,.range-knob-handle.range-knob-pressed .range-knob::before{opacity:0.25}:host(:not(.range-has-pin)) .range-knob-pressed .range-knob,:host(:not(.range-has-pin)) .range-knob-handle.ion-focused .range-knob{-webkit-transform:scale(1);transform:scale(1)}:host(.range-disabled) .range-bar-active,:host(.range-disabled) .range-bar,:host(.range-disabled) .range-tick{background-color:var(--ion-color-step-250, var(--ion-background-color-step-250, #bfbfbf))}:host(.range-disabled) .range-knob{-webkit-transform:scale(0.55);transform:scale(0.55);outline:5px solid #fff;background-color:var(--ion-color-step-250, var(--ion-background-color-step-250, #bfbfbf))}:host(.range-disabled) .label-text-wrapper,:host(.range-disabled) ::slotted([slot=start]),:host(.range-disabled) ::slotted([slot=end]){opacity:0.38}',W4=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.ionChange=Ze(this,"ionChange",7),this.ionInput=Ze(this,"ionInput",7),this.ionFocus=Ze(this,"ionFocus",7),this.ionBlur=Ze(this,"ionBlur",7),this.ionKnobMoveStart=Ze(this,"ionKnobMoveStart",7),this.ionKnobMoveEnd=Ze(this,"ionKnobMoveEnd",7),this.rangeId=`ion-r-${K4++}`,this.didLoad=!1,this.noUpdate=!1,this.hasFocus=!1,this.inheritedAttributes={},this.contentEl=null,this.initialContentScrollY=!0,this.ratioA=0,this.ratioB=0,this.name=this.rangeId,this.dualKnobs=!1,this.min=0,this.max=100,this.pin=!1,this.pinFormatter=t=>Math.round(t),this.snaps=!1,this.step=1,this.ticks=!0,this.disabled=!1,this.value=0,this.compareValues=(t,i)=>typeof t=="object"&&typeof i=="object"?t.lower!==i.lower||t.upper!==i.upper:t!==i,this.clampBounds=t=>ts(this.min,t,this.max),this.ensureValueInBounds=t=>this.dualKnobs?{lower:this.clampBounds(t.lower),upper:this.clampBounds(t.upper)}:this.clampBounds(t),this.labelPlacement="start",this.setupGesture=async()=>{const t=this.rangeSlider;t&&(this.gesture=(await jn(async()=>{const{createGesture:i}=await Promise.resolve().then(()=>my);return{createGesture:i}},void 0)).createGesture({el:t,gestureName:"range",gesturePriority:100,threshold:10,onStart:()=>this.onStart(),onMove:i=>this.onMove(i),onEnd:i=>this.onEnd(i)}),this.gesture.enable(!this.disabled))},this.handleKeyboard=(t,i)=>{const{ensureValueInBounds:s}=this;let r=this.step;r=r>0?r:1,r=r/(this.max-this.min),i||(r*=-1),t==="A"?this.ratioA=ts(0,this.ratioA+r,1):this.ratioB=ts(0,this.ratioB+r,1),this.ionKnobMoveStart.emit({value:s(this.value)}),this.updateValue(),this.emitValueChange(),this.ionKnobMoveEnd.emit({value:s(this.value)})},this.onBlur=()=>{this.hasFocus&&(this.hasFocus=!1,this.ionBlur.emit())},this.onFocus=()=>{this.hasFocus||(this.hasFocus=!0,this.ionFocus.emit())},this.onKnobFocus=t=>{if(this.hasFocus||(this.hasFocus=!0,this.ionFocus.emit()),this.dualKnobs&&this.el.shadowRoot){const i=this.el.shadowRoot.querySelector(".range-knob-a"),s=this.el.shadowRoot.querySelector(".range-knob-b");i?.classList.remove("ion-focused"),s?.classList.remove("ion-focused");const r=t==="A"?i:s;r?.classList.add("ion-focused")}},this.onKnobBlur=()=>{setTimeout(()=>{var t;const i=(t=this.el.shadowRoot)===null||t===void 0?void 0:t.activeElement;if(!(i&&i.classList.contains("range-knob-handle"))&&(this.hasFocus&&(this.hasFocus=!1,this.ionBlur.emit()),this.dualKnobs&&this.el.shadowRoot)){const r=this.el.shadowRoot.querySelector(".range-knob-a"),o=this.el.shadowRoot.querySelector(".range-knob-b");r?.classList.remove("ion-focused"),o?.classList.remove("ion-focused")}},0)}}debounceChanged(){const{ionInput:e,debounce:t,originalIonInput:i}=this;this.ionInput=t===void 0?i??e:py(e,t)}minChanged(e){Eo(e)||(this.min=0),this.noUpdate||this.updateRatio()}maxChanged(e){Eo(e)||(this.max=100),this.noUpdate||this.updateRatio()}stepChanged(e){Eo(e)||(this.step=1)}activeBarStartChanged(){const{activeBarStart:e}=this;e!==void 0&&(e>this.max?(zn(`[ion-range] - The value of activeBarStart (${e}) is greater than the max (${this.max}). Valid values are greater than or equal to the min value and less than or equal to the max value.`,this.el),this.activeBarStart=this.max):e<this.min&&(zn(`[ion-range] - The value of activeBarStart (${e}) is less than the min (${this.min}). Valid values are greater than or equal to the min value and less than or equal to the max value.`,this.el),this.activeBarStart=this.min))}disabledChanged(){this.gesture&&this.gesture.enable(!this.disabled)}valueChanged(e,t){this.compareValues(e,t)&&this.ionInput.emit({value:this.value}),this.noUpdate||this.updateRatio()}componentWillLoad(){this.el.hasAttribute("id")&&(this.rangeId=this.el.getAttribute("id")),this.inheritedAttributes=zo(this.el),this.min=Eo(this.min)?this.min:0,this.max=Eo(this.max)?this.max:100,this.step=Eo(this.step)?this.step:1}componentDidLoad(){this.originalIonInput=this.ionInput,this.setupGesture(),this.updateRatio(),this.didLoad=!0}connectedCallback(){var e;this.updateRatio(),this.debounceChanged(),this.disabledChanged(),this.activeBarStartChanged(),this.didLoad&&this.setupGesture();const t=Vl(this.el);this.contentEl=(e=t?.querySelector(".ion-content-scroll-host"))!==null&&e!==void 0?e:t}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}getValue(){var e;const t=(e=this.value)!==null&&e!==void 0?e:0;return this.dualKnobs?typeof t=="object"?t:{lower:0,upper:t}:typeof t=="object"?t.upper:t}emitValueChange(){this.value=this.ensureValueInBounds(this.value),this.ionChange.emit({value:this.value})}onStart(){this.ionKnobMoveStart.emit({value:this.ensureValueInBounds(this.value)})}onMove(e){const{contentEl:t,pressedKnob:i}=this,s=e.currentX;t&&this.pressedKnob===void 0&&(this.initialContentScrollY=$f(t)),i===void 0&&this.setPressedKnob(s),this.update(s)}onEnd(e){var t;const{contentEl:i,initialContentScrollY:s}=this,r=(t=e.currentX)!==null&&t!==void 0?t:e.clientX;this.pressedKnob===void 0&&this.setPressedKnob(r),i&&this.pressedKnob!==void 0&&wy(i,s),this.update(r),this.pressedKnob=void 0,this.emitValueChange(),this.ionKnobMoveEnd.emit({value:this.ensureValueInBounds(this.value)})}update(e){const t=this.rect;let i=ts(0,(e-t.left)/t.width,1);Ll(this.el)&&(i=1-i),this.snaps&&(i=fl(u0(i,this.min,this.max,this.step),this.min,this.max)),this.pressedKnob==="A"?this.ratioA=i:this.ratioB=i,this.updateValue()}setPressedKnob(e){const t=this.rect=this.rangeSlider.getBoundingClientRect();let i=ts(0,(e-t.left)/t.width,1);Ll(this.el)&&(i=1-i),this.pressedKnob=!this.dualKnobs||Math.abs(this.ratioA-i)<Math.abs(this.ratioB-i)?"A":"B",this.setFocus(this.pressedKnob)}get valA(){return u0(this.ratioA,this.min,this.max,this.step)}get valB(){return u0(this.ratioB,this.min,this.max,this.step)}get ratioLower(){if(this.dualKnobs)return Math.min(this.ratioA,this.ratioB);const{activeBarStart:e}=this;return e==null?0:fl(e,this.min,this.max)}get ratioUpper(){return this.dualKnobs?Math.max(this.ratioA,this.ratioB):this.ratioA}updateRatio(){const e=this.getValue(),{min:t,max:i}=this;this.dualKnobs?(this.ratioA=fl(e.lower,t,i),this.ratioB=fl(e.upper,t,i)):this.ratioA=fl(e,t,i)}updateValue(){this.noUpdate=!0;const{valA:e,valB:t}=this;this.value=this.dualKnobs?{lower:Math.min(e,t),upper:Math.max(e,t)}:e,this.noUpdate=!1}setFocus(e){if(this.el.shadowRoot){const t=this.el.shadowRoot.querySelector(e==="A"?".range-knob-a":".range-knob-b");t&&t.focus()}}get hasStartSlotContent(){return this.el.querySelector('[slot="start"]')!==null}get hasEndSlotContent(){return this.el.querySelector('[slot="end"]')!==null}get hasLabel(){return this.label!==void 0||this.el.querySelector('[slot="label"]')!==null}renderRangeSlider(){var e;const{min:t,max:i,step:s,handleKeyboard:r,pressedKnob:o,disabled:l,pin:d,ratioLower:u,ratioUpper:f,pinFormatter:p,inheritedAttributes:b}=this;let v=`${u*100}%`,y=`${100-f*100}%`;const w=Ll(this.el),E=w?"right":"left",T=w?"left":"right",k=R=>({[E]:R[E]});this.dualKnobs===!1&&(this.valA<((e=this.activeBarStart)!==null&&e!==void 0?e:this.min)?(v=`${f*100}%`,y=`${100-u*100}%`):(v=`${u*100}%`,y=`${100-f*100}%`));const _={[E]:v,[T]:y},O=[];if(this.snaps&&this.ticks)for(let R=t;R<=i;R+=s){const M=fl(R,t,i),P=Math.min(u,f),N=Math.max(u,f),L={ratio:M,active:M>=P&&M<=N};L[E]=`${M*100}%`,O.push(L)}return J("div",{class:"range-slider",ref:R=>this.rangeSlider=R,onPointerUp:R=>{this.pressedKnob===void 0&&(this.onStart(),this.onEnd(R))}},O.map(R=>J("div",{style:k(R),role:"presentation",class:{"range-tick":!0,"range-tick-active":R.active},part:R.active?"tick-active":"tick"})),J("div",{class:"range-bar-container"},J("div",{class:"range-bar",role:"presentation",part:"bar"}),J("div",{class:{"range-bar":!0,"range-bar-active":!0,"has-ticks":O.length>0},role:"presentation",style:_,part:"bar-active"})),ET(w,{knob:"A",pressed:o==="A",value:this.valA,ratio:this.ratioA,pin:d,pinFormatter:p,disabled:l,handleKeyboard:r,min:t,max:i,inheritedAttributes:b,onKnobFocus:this.onKnobFocus,onKnobBlur:this.onKnobBlur}),this.dualKnobs&&ET(w,{knob:"B",pressed:o==="B",value:this.valB,ratio:this.ratioB,pin:d,pinFormatter:p,disabled:l,handleKeyboard:r,min:t,max:i,inheritedAttributes:b,onKnobFocus:this.onKnobFocus,onKnobBlur:this.onKnobBlur}))}render(){const{disabled:e,el:t,hasLabel:i,rangeId:s,pin:r,pressedKnob:o,labelPlacement:l,label:d}=this,u=_n("ion-item",t),f=i&&(l==="start"||l==="fixed")||this.hasStartSlotContent,p=u&&!f,b=i&&l==="end"||this.hasEndSlotContent,v=u&&!b,y=ut(this);return OC(!0,t,this.name,JSON.stringify(this.getValue()),e),J(Kt,{key:"ef7b01f80515bcaeb2983934ad7f10a6bd5d13ec",onFocusin:this.onFocus,onFocusout:this.onBlur,id:s,class:ss(this.color,{[y]:!0,"in-item":u,"range-disabled":e,"range-pressed":o!==void 0,"range-has-pin":r,[`range-label-placement-${l}`]:!0,"range-item-start-adjustment":p,"range-item-end-adjustment":v})},J("label",{key:"fd8aa90a9d52be9da024b907e68858dae424449d",class:"range-wrapper",id:"range-label"},J("div",{key:"2172b4f329c22017dd23475c80aac25ba6e753eb",class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!i},part:"label"},d!==void 0?J("div",{class:"label-text"},d):J("slot",{name:"label"})),J("div",{key:"3c318bf2ea0576646d4c010bf44573fd0f483186",class:"native-wrapper"},J("slot",{key:"6586fd6fc96271e73f8a86c202d1913ad1a26f96",name:"start"}),this.renderRangeSlider(),J("slot",{key:"74ac0bc2d2cb66ef708bb729f88b6ecbc1b2155d",name:"end"}))))}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],min:["minChanged"],max:["maxChanged"],step:["stepChanged"],activeBarStart:["activeBarStartChanged"],disabled:["disabledChanged"],value:["valueChanged"]}}static get style(){return{ios:V4,md:q4}}},[289,"ion-range",{color:[513],debounce:[2],name:[1],label:[1],dualKnobs:[4,"dual-knobs"],min:[2],max:[2],pin:[4],pinFormatter:[16],snaps:[4],step:[2],ticks:[4],activeBarStart:[1026,"active-bar-start"],disabled:[4],value:[1026],labelPlacement:[1,"label-placement"],ratioA:[32],ratioB:[32],pressedKnob:[32]},void 0,{debounce:["debounceChanged"],min:["minChanged"],max:["maxChanged"],step:["stepChanged"],activeBarStart:["activeBarStartChanged"],disabled:["disabledChanged"],value:["valueChanged"]}]),ET=(n,{knob:e,value:t,ratio:i,min:s,max:r,disabled:o,pressed:l,pin:d,handleKeyboard:u,pinFormatter:f,inheritedAttributes:p,onKnobFocus:b,onKnobBlur:v})=>{const y=n?"right":"left",w=()=>{const T={};return T[y]=`${i*100}%`,T},E=p["aria-label"];return J("div",{onKeyDown:T=>{const k=T.key;k==="ArrowLeft"||k==="ArrowDown"?(u(e,!1),T.preventDefault(),T.stopPropagation()):(k==="ArrowRight"||k==="ArrowUp")&&(u(e,!0),T.preventDefault(),T.stopPropagation())},onFocus:()=>b(e),onBlur:v,class:{"range-knob-handle":!0,"range-knob-a":e==="A","range-knob-b":e==="B","range-knob-pressed":l,"range-knob-min":t===s,"range-knob-max":t===r,"ion-activatable":!0,"ion-focusable":!0},style:w(),role:"slider",tabindex:o?-1:0,"aria-label":E!==void 0?E:null,"aria-labelledby":E===void 0?"range-label":null,"aria-valuemin":s,"aria-valuemax":r,"aria-disabled":o?"true":null,"aria-valuenow":t},d&&J("div",{class:"range-pin",role:"presentation",part:"pin"},f(t)),J("div",{class:"range-knob",role:"presentation",part:"knob"}))},u0=(n,e,t,i)=>{let s=(t-e)*n;i>0&&(s=Math.round(s/i)*i+e);const r=ts(e,s,t);return G4(r,e,t,i)},fl=(n,e,t)=>ts(0,(n-e)/(t-e),1);let K4=0;function Y4(){if(typeof customElements>"u")return;["ion-range"].forEach(e=>{switch(e){case"ion-range":customElements.get(e)||customElements.define(e,W4);break}})}const X4=Y4;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Q4=(n,e)=>{let t,i;const s=(l,d,u)=>{if(typeof document>"u")return;const f=document.elementFromPoint(l,d);if(!f||!e(f)||f.disabled){o();return}f!==t&&(o(),r(f,u))},r=(l,d)=>{t=l,i||(i=t);const u=t;An(()=>u.classList.add("ion-activated")),d()},o=(l=!1)=>{if(!t)return;const d=t;An(()=>d.classList.remove("ion-activated")),l&&i!==t&&t.click(),t=void 0};return Tp({el:n,gestureName:"buttonActiveDrag",threshold:0,onStart:l=>s(l.currentX,l.currentY,$M),onMove:l=>s(l.currentX,l.currentY,FM),onEnd:()=>{o(!0),jM(),i=void 0}})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Z4=n=>{const e=ht(),t=ht(),i=ht();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),i.addElement(n.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),e.addElement(n).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([t,i])},J4=n=>{const e=ht(),t=ht(),i=ht();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(n.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),e.addElement(n).easing("cubic-bezier(.36,.66,.04,1)").duration(450).addAnimation([t,i])},e6=n=>{const e=ht(),t=ht(),i=ht();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),i.addElement(n.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),e.addElement(n).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([t,i])},t6=n=>{const e=ht(),t=ht(),i=ht();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(n.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),e.addElement(n).easing("cubic-bezier(.36,.66,.04,1)").duration(450).addAnimation([t,i])},i6='.sc-ion-action-sheet-ios-h{--color:initial;--button-color-activated:var(--button-color);--button-color-focused:var(--button-color);--button-color-hover:var(--button-color);--button-color-selected:var(--button-color);--min-width:auto;--width:100%;--max-width:500px;--min-height:auto;--height:auto;--max-height:calc(100% - (var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:block;position:fixed;outline:none;font-family:var(--ion-font-family, inherit);-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-action-sheet-ios-h{display:none}.action-sheet-wrapper.sc-ion-action-sheet-ios{left:0;right:0;bottom:0;-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);display:block;position:absolute;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);z-index:10;pointer-events:none}.action-sheet-button.sc-ion-action-sheet-ios{display:block;position:relative;width:100%;border:0;outline:none;background:var(--button-background);color:var(--button-color);font-family:inherit;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-ios:disabled{color:var(--button-color-disabled);opacity:0.4}.action-sheet-button-inner.sc-ion-action-sheet-ios{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;pointer-events:none;width:100%;height:100%;z-index:1}.action-sheet-container.sc-ion-action-sheet-ios{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;-ms-flex-pack:end;justify-content:flex-end;height:100%;max-height:calc(100vh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)));max-height:calc(100dvh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)))}.action-sheet-group.sc-ion-action-sheet-ios{-ms-flex-negative:2;flex-shrink:2;overscroll-behavior-y:contain;overflow-y:auto;-webkit-overflow-scrolling:touch;pointer-events:all;background:var(--background)}@media (any-pointer: coarse){.action-sheet-group.sc-ion-action-sheet-ios::-webkit-scrollbar{display:none}}.action-sheet-group-cancel.sc-ion-action-sheet-ios{-ms-flex-negative:0;flex-shrink:0;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-ios::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.action-sheet-selected.sc-ion-action-sheet-ios{color:var(--button-color-selected)}.action-sheet-selected.sc-ion-action-sheet-ios::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-button.ion-activated.sc-ion-action-sheet-ios{color:var(--button-color-activated)}.action-sheet-button.ion-activated.sc-ion-action-sheet-ios::after{background:var(--button-background-activated);opacity:var(--button-background-activated-opacity)}.action-sheet-button.ion-focused.sc-ion-action-sheet-ios{color:var(--button-color-focused)}.action-sheet-button.ion-focused.sc-ion-action-sheet-ios::after{background:var(--button-background-focused);opacity:var(--button-background-focused-opacity)}@media (any-hover: hover){.action-sheet-button.sc-ion-action-sheet-ios:not(:disabled):hover{color:var(--button-color-hover)}.action-sheet-button.sc-ion-action-sheet-ios:not(:disabled):hover::after{background:var(--button-background-hover);opacity:var(--button-background-hover-opacity)}}.sc-ion-action-sheet-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, var(--ion-background-color-step-100, #f9f9f9)));--backdrop-opacity:var(--ion-backdrop-opacity, 0.4);--button-background:linear-gradient(0deg, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08), rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08) 50%, transparent 50%) bottom/100% 1px no-repeat transparent;--button-background-activated:var(--ion-text-color, #000);--button-background-activated-opacity:.08;--button-background-hover:currentColor;--button-background-hover-opacity:.04;--button-background-focused:currentColor;--button-background-focused-opacity:.12;--button-background-selected:var(--ion-color-step-150, var(--ion-background-color-step-150, var(--ion-background-color, #fff)));--button-background-selected-opacity:1;--button-color:var(--ion-color-primary, #0054e9);--button-color-disabled:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--color:var(--ion-color-step-400, var(--ion-text-color-step-600, #999999));text-align:center}.action-sheet-wrapper.sc-ion-action-sheet-ios{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:var(--ion-safe-area-top, 0);padding-bottom:var(--ion-safe-area-bottom, 0);-webkit-box-sizing:content-box;box-sizing:content-box}.action-sheet-container.sc-ion-action-sheet-ios{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:0;padding-bottom:0}.action-sheet-group.sc-ion-action-sheet-ios{border-radius:13px;margin-bottom:8px}.action-sheet-group.sc-ion-action-sheet-ios:first-child{margin-top:10px}.action-sheet-group.sc-ion-action-sheet-ios:last-child{margin-bottom:10px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-group.sc-ion-action-sheet-ios{background-color:transparent;-webkit-backdrop-filter:saturate(280%) blur(20px);backdrop-filter:saturate(280%) blur(20px)}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-title.sc-ion-action-sheet-ios,.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-button.sc-ion-action-sheet-ios{background-color:transparent;background-image:-webkit-gradient(linear, left bottom, left top, from(rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8)), to(rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8))), -webkit-gradient(linear, left bottom, left top, from(rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4)), color-stop(50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4)), color-stop(50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8)));background-image:linear-gradient(0deg, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8), rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8) 100%), linear-gradient(0deg, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4), rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4) 50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8) 50%);background-repeat:no-repeat;background-position:top, bottom;background-size:100% calc(100% - 1px), 100% 1px;-webkit-backdrop-filter:saturate(120%);backdrop-filter:saturate(120%)}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-button.ion-activated.sc-ion-action-sheet-ios{background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.7);background-image:none}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-cancel.sc-ion-action-sheet-ios{background:var(--button-background-selected)}}.action-sheet-title.sc-ion-action-sheet-ios{background:-webkit-gradient(linear, left bottom, left top, from(rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08)), color-stop(50%, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08)), color-stop(50%, transparent)) bottom/100% 1px no-repeat transparent;background:linear-gradient(0deg, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08), rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08) 50%, transparent 50%) bottom/100% 1px no-repeat transparent}.action-sheet-title.sc-ion-action-sheet-ios{-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:14px;padding-bottom:13px;color:var(--color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-size:max(13px, 0.8125rem);font-weight:400;text-align:center}.action-sheet-title.action-sheet-has-sub-title.sc-ion-action-sheet-ios{font-weight:600}.action-sheet-sub-title.sc-ion-action-sheet-ios{padding-left:0;padding-right:0;padding-top:6px;padding-bottom:0;font-size:max(13px, 0.8125rem);font-weight:400}.action-sheet-button.sc-ion-action-sheet-ios{-webkit-padding-start:14px;padding-inline-start:14px;-webkit-padding-end:14px;padding-inline-end:14px;padding-top:14px;padding-bottom:14px;min-height:56px;font-size:max(20px, 1.25rem);contain:content}.action-sheet-button.sc-ion-action-sheet-ios .action-sheet-icon.sc-ion-action-sheet-ios{-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:max(28px, 1.75rem);pointer-events:none}.action-sheet-button.sc-ion-action-sheet-ios:last-child{background-image:none}.action-sheet-selected.sc-ion-action-sheet-ios{font-weight:bold}.action-sheet-cancel.sc-ion-action-sheet-ios{font-weight:600}.action-sheet-cancel.sc-ion-action-sheet-ios::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-destructive.sc-ion-action-sheet-ios,.action-sheet-destructive.ion-activated.sc-ion-action-sheet-ios,.action-sheet-destructive.ion-focused.sc-ion-action-sheet-ios{color:var(--ion-color-danger, #c5000f)}@media (any-hover: hover){.action-sheet-destructive.sc-ion-action-sheet-ios:hover{color:var(--ion-color-danger, #c5000f)}}',n6='.sc-ion-action-sheet-md-h{--color:initial;--button-color-activated:var(--button-color);--button-color-focused:var(--button-color);--button-color-hover:var(--button-color);--button-color-selected:var(--button-color);--min-width:auto;--width:100%;--max-width:500px;--min-height:auto;--height:auto;--max-height:calc(100% - (var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:block;position:fixed;outline:none;font-family:var(--ion-font-family, inherit);-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-action-sheet-md-h{display:none}.action-sheet-wrapper.sc-ion-action-sheet-md{left:0;right:0;bottom:0;-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);display:block;position:absolute;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);z-index:10;pointer-events:none}.action-sheet-button.sc-ion-action-sheet-md{display:block;position:relative;width:100%;border:0;outline:none;background:var(--button-background);color:var(--button-color);font-family:inherit;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-md:disabled{color:var(--button-color-disabled);opacity:0.4}.action-sheet-button-inner.sc-ion-action-sheet-md{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;pointer-events:none;width:100%;height:100%;z-index:1}.action-sheet-container.sc-ion-action-sheet-md{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;-ms-flex-pack:end;justify-content:flex-end;height:100%;max-height:calc(100vh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)));max-height:calc(100dvh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)))}.action-sheet-group.sc-ion-action-sheet-md{-ms-flex-negative:2;flex-shrink:2;overscroll-behavior-y:contain;overflow-y:auto;-webkit-overflow-scrolling:touch;pointer-events:all;background:var(--background)}@media (any-pointer: coarse){.action-sheet-group.sc-ion-action-sheet-md::-webkit-scrollbar{display:none}}.action-sheet-group-cancel.sc-ion-action-sheet-md{-ms-flex-negative:0;flex-shrink:0;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-md::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.action-sheet-selected.sc-ion-action-sheet-md{color:var(--button-color-selected)}.action-sheet-selected.sc-ion-action-sheet-md::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-button.ion-activated.sc-ion-action-sheet-md{color:var(--button-color-activated)}.action-sheet-button.ion-activated.sc-ion-action-sheet-md::after{background:var(--button-background-activated);opacity:var(--button-background-activated-opacity)}.action-sheet-button.ion-focused.sc-ion-action-sheet-md{color:var(--button-color-focused)}.action-sheet-button.ion-focused.sc-ion-action-sheet-md::after{background:var(--button-background-focused);opacity:var(--button-background-focused-opacity)}@media (any-hover: hover){.action-sheet-button.sc-ion-action-sheet-md:not(:disabled):hover{color:var(--button-color-hover)}.action-sheet-button.sc-ion-action-sheet-md:not(:disabled):hover::after{background:var(--button-background-hover);opacity:var(--button-background-hover-opacity)}}.sc-ion-action-sheet-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);--button-background:transparent;--button-background-selected:currentColor;--button-background-selected-opacity:0;--button-background-activated:transparent;--button-background-activated-opacity:0;--button-background-hover:currentColor;--button-background-hover-opacity:.04;--button-background-focused:currentColor;--button-background-focused-opacity:.12;--button-color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--button-color-disabled:var(--button-color);--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54)}.action-sheet-wrapper.sc-ion-action-sheet-md{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:var(--ion-safe-area-top, 0);margin-bottom:0}.action-sheet-title.sc-ion-action-sheet-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:20px;padding-bottom:17px;min-height:60px;color:var(--color, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54));font-size:1rem;text-align:start}.action-sheet-sub-title.sc-ion-action-sheet-md{padding-left:0;padding-right:0;padding-top:16px;padding-bottom:0;font-size:0.875rem}.action-sheet-group.sc-ion-action-sheet-md:first-child{padding-top:0}.action-sheet-group.sc-ion-action-sheet-md:last-child{padding-bottom:var(--ion-safe-area-bottom)}.action-sheet-button.sc-ion-action-sheet-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:12px;padding-bottom:12px;position:relative;min-height:52px;font-size:1rem;text-align:start;contain:content;overflow:hidden}.action-sheet-icon.sc-ion-action-sheet-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:32px;margin-inline-end:32px;margin-top:0;margin-bottom:0;color:var(--color);font-size:1.5rem}.action-sheet-button-inner.sc-ion-action-sheet-md{-ms-flex-pack:start;justify-content:flex-start}.action-sheet-selected.sc-ion-action-sheet-md{font-weight:bold}',s6=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.didPresent=Ze(this,"ionActionSheetDidPresent",7),this.willPresent=Ze(this,"ionActionSheetWillPresent",7),this.willDismiss=Ze(this,"ionActionSheetWillDismiss",7),this.didDismiss=Ze(this,"ionActionSheetDidDismiss",7),this.didPresentShorthand=Ze(this,"didPresent",7),this.willPresentShorthand=Ze(this,"willPresent",7),this.willDismissShorthand=Ze(this,"willDismiss",7),this.didDismissShorthand=Ze(this,"didDismiss",7),this.delegateController=V3(this),this.lockController=xy(),this.triggerController=c2(),this.presented=!1,this.hasController=!1,this.keyboardClose=!0,this.buttons=[],this.backdropDismiss=!0,this.translucent=!1,this.animated=!0,this.isOpen=!1,this.onBackdropTap=()=>{this.dismiss(void 0,Sd)},this.dispatchCancelHandler=t=>{const i=t.detail.role;if(cT(i)){const s=this.getButtons().find(r=>r.role==="cancel");this.callButtonHandler(s)}}}onIsOpenChange(e,t){e===!0&&t===!1?this.present():e===!1&&t===!0&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:i}=this;e&&i.addClickListener(t,e)}async present(){const e=await this.lockController.lock();await this.delegateController.attachViewToDom(),await r2(this,"actionSheetEnter",Z4,e6),e()}async dismiss(e,t){const i=await this.lockController.lock(),s=await o2(this,e,t,"actionSheetLeave",J4,t6);return s&&this.delegateController.removeViewFromDom(),i(),s}onDidDismiss(){return Df(this.el,"ionActionSheetDidDismiss")}onWillDismiss(){return Df(this.el,"ionActionSheetWillDismiss")}async buttonClick(e){const t=e.role;return cT(t)?this.dismiss(e.data,t):await this.callButtonHandler(e)?this.dismiss(e.data,e.role):Promise.resolve()}async callButtonHandler(e){return!(e&&await H3(e.handler)===!1)}getButtons(){return this.buttons.map(e=>typeof e=="string"?{text:e}:e)}connectedCallback(){t2(this.el),this.triggerChanged()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.triggerController.removeClickListener()}componentWillLoad(){var e;!((e=this.htmlAttributes)===null||e===void 0)&&e.id||i2(this.el)}componentDidLoad(){const{groupEl:e,wrapperEl:t}=this;!this.gesture&&ut(this)==="ios"&&t&&e&&va(()=>{e.scrollHeight>e.clientHeight||(this.gesture=Q4(t,s=>s.classList.contains("action-sheet-button")),this.gesture.enable(!0))}),this.isOpen===!0&&is(()=>this.present()),this.triggerChanged()}render(){const{header:e,htmlAttributes:t,overlayIndex:i}=this,s=ut(this),r=this.getButtons(),o=r.find(u=>u.role==="cancel"),l=r.filter(u=>u.role!=="cancel"),d=`action-sheet-${i}-header`;return J(Kt,Object.assign({key:"9fef156b2a1f09ca4a6c1fe1f37c374139bde03c",role:"dialog","aria-modal":"true","aria-labelledby":e!==void 0?d:null,tabindex:"-1"},t,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign(Object.assign({[s]:!0},by(this.cssClass)),{"overlay-hidden":!0,"action-sheet-translucent":this.translucent}),onIonActionSheetWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),J("ion-backdrop",{key:"81cf3f7d19864e041813987b46d2d115b8466819",tappable:this.backdropDismiss}),J("div",{key:"791c6a976683646fc306a42c15c5078b6f06a45f",tabindex:"0","aria-hidden":"true"}),J("div",{key:"a350b489ef7852eab9dc2227ce6d92da27dd9bf9",class:"action-sheet-wrapper ion-overlay-wrapper",ref:u=>this.wrapperEl=u},J("div",{key:"69ba51ee13510c1a411d87cb4845b11b7302a36f",class:"action-sheet-container"},J("div",{key:"bded15b8306c36591e526f0f99e1eeabcbab3915",class:"action-sheet-group",ref:u=>this.groupEl=u},e!==void 0&&J("div",{key:"06b5147c0f6d9180fe8f12e75c9b4a0310226adc",id:d,class:{"action-sheet-title":!0,"action-sheet-has-sub-title":this.subHeader!==void 0}},e,this.subHeader&&J("div",{key:"54874362a75c679aba803bf4f8768f5404d2dd28",class:"action-sheet-sub-title"},this.subHeader)),l.map(u=>J("button",Object.assign({},u.htmlAttributes,{type:"button",id:u.id,class:TT(u),onClick:()=>this.buttonClick(u),disabled:u.disabled}),J("span",{class:"action-sheet-button-inner"},u.icon&&J("ion-icon",{icon:u.icon,"aria-hidden":"true",lazy:!1,class:"action-sheet-icon"}),u.text),s==="md"&&J("ion-ripple-effect",null)))),o&&J("div",{key:"67b0de298eb424f3dea846a841b7a06d70e3930d",class:"action-sheet-group action-sheet-group-cancel"},J("button",Object.assign({key:"e7e3f9a5495eea9b97dbf885ef36944f2e420eff"},o.htmlAttributes,{type:"button",class:TT(o),onClick:()=>this.buttonClick(o)}),J("span",{key:"f889d29ed6c3d14bbc1d805888351d87f5122377",class:"action-sheet-button-inner"},o.icon&&J("ion-icon",{key:"7c05cf424b38c37fd40aaeb42a494387291571fb",icon:o.icon,"aria-hidden":"true",lazy:!1,class:"action-sheet-icon"}),o.text),s==="md"&&J("ion-ripple-effect",{key:"bed927b477dc2708a5123ef560274fca9819b3d6"}))))),J("div",{key:"c5df1b11dc15a93892d57065d3dd5fbe02e43b39",tabindex:"0","aria-hidden":"true"}))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:i6,md:n6}}},[290,"ion-action-sheet",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],buttons:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],header:[1],subHeader:[1,"sub-header"],translucent:[4],animated:[4],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),TT=n=>Object.assign({"action-sheet-button":!0,"ion-activatable":!n.disabled,"ion-focusable":!n.disabled,[`action-sheet-${n.role}`]:n.role!==void 0},by(n.cssClass));function r6(){if(typeof customElements>"u")return;["ion-action-sheet","ion-backdrop","ion-icon","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-action-sheet":customElements.get(e)||customElements.define(e,s6);break;case"ion-backdrop":customElements.get(e)||m2();break;case"ion-icon":customElements.get(e)||Ap();break;case"ion-ripple-effect":customElements.get(e)||yy();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const o6=':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--detail-icon-color:initial;--detail-icon-font-size:1.25em;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color) .item-native,:host(.ion-color) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-control-needs-pointer-cursor){cursor:pointer}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-right:var(--padding-end);padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}[dir=rtl] .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}@supports selector(:dir(rtl)){.item-native:dir(rtl){padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-left:var(--inner-padding-start);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}[dir=rtl] .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}@supports selector(:dir(rtl)){.item-inner:dir(rtl){padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1;width:-webkit-min-content;width:-moz-min-content;width:min-content;max-width:100%}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host{--min-height:44px;--transition:background-color 200ms linear, opacity 200ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0px 0px 0.55px 0px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:var(--ion-text-color, #000);--background-focused:var(--ion-text-color, #000);--background-hover:currentColor;--background-activated-opacity:.12;--background-focused-opacity:.15;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));--color:var(--ion-item-color, var(--ion-text-color, #000));font-size:1rem}:host(.ion-activated){--transition:none}:host(.ion-color.ion-focused) .item-native::after{background:#000;opacity:0.15}:host(.ion-color.ion-activated) .item-native::after{background:#000;opacity:0.12}:host(.item-lines-full){--border-width:0px 0px 0.55px 0px}:host(.item-lines-inset){--inner-border-width:0px 0px 0.55px 0px}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0px}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0px}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:2px;margin-bottom:2px}::slotted(ion-icon[slot=start]),::slotted(ion-icon[slot=end]){margin-top:7px;margin-bottom:7px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}::slotted(.button-small){--padding-top:1px;--padding-bottom:1px;--padding-start:.5em;--padding-end:.5em;min-height:24px;font-size:0.8125rem}::slotted(ion-avatar){width:36px;height:36px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px}:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){-webkit-margin-start:0px;margin-inline-start:0px}::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:10px;margin-bottom:10px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:68px}',a6=':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--detail-icon-color:initial;--detail-icon-font-size:1.25em;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color) .item-native,:host(.ion-color) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-control-needs-pointer-cursor){cursor:pointer}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-right:var(--padding-end);padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}[dir=rtl] .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}@supports selector(:dir(rtl)){.item-native:dir(rtl){padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-left:var(--inner-padding-start);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}[dir=rtl] .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}@supports selector(:dir(rtl)){.item-inner:dir(rtl){padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1;width:-webkit-min-content;width:-moz-min-content;width:min-content;max-width:100%}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host{--min-height:48px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--color:var(--ion-item-color, var(--ion-text-color, #000));--transition:opacity 15ms linear, background-color 15ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0 0 1px 0;font-size:1rem;font-weight:normal;text-transform:none}:host(.ion-color.ion-activated) .item-native::after{background:transparent}:host(.item-interactive){--border-width:0 0 1px 0;--inner-border-width:0}:host(.item-lines-full){--border-width:0 0 1px 0}:host(.item-lines-inset){--inner-border-width:0 0 1px 0}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0}:host(.item-multi-line) ::slotted([slot=start]),:host(.item-multi-line) ::slotted([slot=end]){margin-top:16px;margin-bottom:16px;-ms-flex-item-align:start;align-self:flex-start}::slotted([slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted([slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:1.5em}:host(.ion-color) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted(ion-icon[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-ms-flex-item-align:start;align-self:flex-start;font-size:0.6875rem}::slotted(ion-note[slot]){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:10px;margin-bottom:10px}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0}::slotted(.button-small){--padding-top:2px;--padding-bottom:2px;--padding-start:.6em;--padding-end:.6em;min-height:25px;font-size:0.75rem}:host(.item-label-floating),:host(.item-label-stacked){--min-height:55px}:host(.ion-focused:not(.ion-color)) ::slotted(.label-stacked),:host(.ion-focused:not(.ion-color)) ::slotted(.label-floating),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-stacked),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-floating){color:var(--ion-color-primary, #0054e9)}',l6=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.labelColorStyles={},this.itemStyles=new Map,this.inheritedAriaAttributes={},this.multipleInputs=!1,this.focusable=!0,this.isInteractive=!1,this.button=!1,this.detailIcon=dT,this.disabled=!1,this.routerDirection="forward",this.type="button",this.updateInteractivityOnSlotChange=()=>{this.setIsInteractive(),this.setMultipleInputs()}}buttonChanged(){this.focusable=this.isFocusable()}labelColorChanged(e){const{color:t}=this;t===void 0&&(this.labelColorStyles=e.detail)}itemStyle(e){e.stopPropagation();const t=e.target.tagName,i=e.detail,s={},r=this.itemStyles.get(t)||{};let o=!1;Object.keys(i).forEach(l=>{if(i[l]){const d=`item-${l}`;r[d]||(o=!0),s[d]=!0}}),!o&&Object.keys(s).length!==Object.keys(r).length&&(o=!0),o&&(this.itemStyles.set(t,s),Ns(this))}connectedCallback(){this.hasStartEl()}componentWillLoad(){this.inheritedAriaAttributes=ec(this.el,["aria-label"])}componentDidLoad(){is(()=>{this.setMultipleInputs(),this.setIsInteractive(),this.focusable=this.isFocusable()})}totalNestedInputs(){const e=this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio"),t=this.el.querySelectorAll("ion-input, ion-range, ion-searchbar, ion-segment, ion-textarea, ion-toggle"),i=this.el.querySelectorAll("ion-router-link, ion-button, a, button");return{covers:e,inputs:t,clickables:i}}setMultipleInputs(){const{covers:e,inputs:t,clickables:i}=this.totalNestedInputs();this.multipleInputs=e.length+t.length>1||e.length+i.length>1||e.length>0&&this.isClickable()}setIsInteractive(){const{covers:e,inputs:t,clickables:i}=this.totalNestedInputs();this.isInteractive=e.length>0||t.length>0||i.length>0}hasCover(){return this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio").length===1&&!this.multipleInputs}isClickable(){return this.href!==void 0||this.button}canActivate(){return this.isClickable()||this.hasCover()}isFocusable(){const e=this.el.querySelector(".ion-focusable");return this.canActivate()||e!==null}hasStartEl(){this.el.querySelector('[slot="start"]')!==null&&this.el.classList.add("item-has-start-slot")}getFirstInteractive(){return this.el.querySelectorAll("ion-toggle:not([disabled]), ion-checkbox:not([disabled]), ion-radio:not([disabled]), ion-select:not([disabled]), ion-input:not([disabled]), ion-textarea:not([disabled])")[0]}render(){const{detail:e,detailIcon:t,download:i,labelColorStyles:s,lines:r,disabled:o,href:l,rel:d,target:u,routerAnimation:f,routerDirection:p,inheritedAriaAttributes:b,multipleInputs:v}=this,y={},w=ut(this),E=this.isClickable(),T=this.canActivate(),k=E?l===void 0?"button":"a":"div",_=k==="button"?{type:this.type}:{download:i,href:l,rel:d,target:u};let O={};const R=this.getFirstInteractive();(E||R!==void 0&&!v)&&(O={onClick:D=>{if(E&&vy(l,D,p,f),R!==void 0&&!v){const U=D.composedPath()[0];D.isTrusted&&this.el.shadowRoot.contains(U)&&((R.tagName==="ION-INPUT"||R.tagName==="ION-TEXTAREA")&&R.setFocus(),R.click(),D.stopImmediatePropagation())}}});const M=e!==void 0?e:w==="ios"&&E;this.itemStyles.forEach(D=>{Object.assign(y,D)});const P=o||y["item-interactive-disabled"]?"true":null,N=_n("ion-list",this.el)&&!_n("ion-radio-group",this.el),L=R!==void 0&&!["ION-INPUT","ION-TEXTAREA"].includes(R.tagName);return J(Kt,{key:"24b59935bd8db8b0b7f940582455a42b82cbf762","aria-disabled":P,class:Object.assign(Object.assign(Object.assign({},y),s),ss(this.color,{item:!0,[w]:!0,"item-lines-default":r===void 0,[`item-lines-${r}`]:r!==void 0,"item-control-needs-pointer-cursor":L,"item-disabled":o,"in-list":N,"item-multiple-inputs":this.multipleInputs,"ion-activatable":T,"ion-focusable":this.focusable,"item-rtl":document.dir==="rtl"})),role:N?"listitem":null},J(k,Object.assign({key:"fd77b6e5f3eb2e1857a0cdd45562d71eabd30255"},_,b,{class:"item-native",part:"native",disabled:o},O),J("slot",{key:"8824ac8395aafa3d63c92f2128e947cac8393ac4",name:"start",onSlotchange:this.updateInteractivityOnSlotChange}),J("div",{key:"5c9127e388a432687766d86a9db91fd1663abf03",class:"item-inner"},J("div",{key:"9dc2d2f58c4067c0143b3963334c346c3c7f77df",class:"input-wrapper"},J("slot",{key:"8377d9e56dc4b1913f1346111b706e7f14c24d30",onSlotchange:this.updateInteractivityOnSlotChange})),J("slot",{key:"bc771e106174f4a84ee12e92d14df81ad7ed177d",name:"end",onSlotchange:this.updateInteractivityOnSlotChange}),M&&J("ion-icon",{key:"45336d121a097cbf71ee8a3f6b554745ba5e0bbf",icon:t,lazy:!1,class:"item-detail-icon",part:"detail-icon","aria-hidden":"true","flip-rtl":t===dT})),T&&w==="md"&&J("ion-ripple-effect",{key:"197e244ae3bffebfa6ac9bfe7658d12e1af0ecb1"})))}get el(){return this}static get watchers(){return{button:["buttonChanged"]}}static get style(){return{ios:o6,md:a6}}},[289,"ion-item",{color:[513],button:[4],detail:[4],detailIcon:[1,"detail-icon"],disabled:[516],download:[1],href:[1],rel:[1],lines:[1],routerAnimation:[16],routerDirection:[1,"router-direction"],target:[1],type:[1],multipleInputs:[32],focusable:[32],isInteractive:[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{button:["buttonChanged"]}]);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Bf="ionKeyboardDidShow",C2="ionKeyboardDidHide",c6=150;let Uf={},Mr={},tc=!1;const d6=()=>{Uf={},Mr={},tc=!1},u6=n=>{if(y2.getEngine())h6(n);else{if(!n.visualViewport)return;Mr=_y(n.visualViewport),n.visualViewport.onresize=()=>{L2(n),I2()||R2(n)?Ey(n):ky(n)&&Ty(n)}}},h6=n=>{n.addEventListener("keyboardDidShow",e=>Ey(n,e)),n.addEventListener("keyboardDidHide",()=>Ty(n))},Ey=(n,e)=>{f6(n,e),tc=!0},Ty=n=>{p6(n),tc=!1},I2=()=>{const n=(Uf.height-Mr.height)*Mr.scale;return!tc&&Uf.width===Mr.width&&n>c6},R2=n=>tc&&!ky(n),ky=n=>tc&&Mr.height===n.innerHeight,f6=(n,e)=>{const t=e?e.keyboardHeight:n.innerHeight-Mr.height,i=new CustomEvent(Bf,{detail:{keyboardHeight:t}});n.dispatchEvent(i)},p6=n=>{const e=new CustomEvent(C2);n.dispatchEvent(e)},L2=n=>{Uf=Object.assign({},Mr),Mr=_y(n.visualViewport)},_y=n=>({width:Math.round(n.width),height:Math.round(n.height),offsetTop:n.offsetTop,offsetLeft:n.offsetLeft,pageTop:n.pageTop,pageLeft:n.pageLeft,scale:n.scale}),m6=Object.freeze(Object.defineProperty({__proto__:null,KEYBOARD_DID_CLOSE:C2,KEYBOARD_DID_OPEN:Bf,copyVisualViewport:_y,keyboardDidClose:ky,keyboardDidOpen:I2,keyboardDidResize:R2,resetKeyboardAssist:d6,setKeyboardClose:Ty,setKeyboardOpen:Ey,startKeyboardAssist:u6,trackViewportChanges:L2},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var ql;(function(n){n.Dark="DARK",n.Light="LIGHT",n.Default="DEFAULT"})(ql||(ql={}));const Ay={getEngine(){const n=Pf();if(n?.isPluginAvailable("StatusBar"))return n.Plugins.StatusBar},setStyle(n){const e=this.getEngine();e&&e.setStyle(n)},getStyle:async function(){const n=this.getEngine();if(!n)return ql.Default;const{style:e}=await n.getInfo();return e}},lv=(n,e)=>{if(e===1)return 0;const t=1/(1-e),i=-(e*t);return n*t+i},D2=()=>{!ci||ci.innerWidth>=768||Ay.setStyle({style:ql.Dark})},cv=(n=ql.Default)=>{!ci||ci.innerWidth>=768||Ay.setStyle({style:n})},O2=async(n,e)=>{typeof n.canDismiss!="function"||!await n.canDismiss(void 0,cd)||(e.isRunning()?e.onFinish(()=>{n.dismiss(void 0,"handler")},{oneTimeCallback:!0}):n.dismiss(void 0,"handler"))},dv=n=>.00255275*2.71828**(-14.9619*n)-1.00255*2.71828**(-.0380968*n)+1,jr={MIN_PRESENTING_SCALE:.915},g6=(n,e,t,i)=>{const r=n.offsetHeight;let o=!1,l=!1,d=null,u=null;const f=.2;let p=!0,b=0;const v=()=>d&&er(d)?d.scrollY:!0,k=Tp({el:n,gestureName:"modalSwipeToClose",gesturePriority:G3,direction:"y",threshold:10,canStart:_=>{const O=_.event.target;return O===null||!O.closest?!0:(d=Vl(O),d?(er(d)?u=xn(d).querySelector(".inner-scroll"):u=d,!!!d.querySelector("ion-refresher")&&u.scrollTop===0):O.closest("ion-footer")===null)},onStart:_=>{const{deltaY:O}=_;p=v(),l=n.canDismiss!==void 0&&n.canDismiss!==!0,O>0&&d&&$f(d),e.progressStart(!0,o?1:0)},onMove:_=>{const{deltaY:O}=_;O>0&&d&&$f(d);const R=_.deltaY/r,M=R>=0&&l,P=M?f:.9999,N=M?dv(R/P):R,L=ts(1e-4,N,P);e.progressStep(L),L>=.5&&b<.5?cv(t):L<.5&&b>=.5&&D2(),b=L},onEnd:_=>{const O=_.velocityY,R=_.deltaY/r,M=R>=0&&l,P=M?f:.9999,N=M?dv(R/P):R,L=ts(1e-4,N,P),D=(_.deltaY+O*1e3)/r,$=!M&&D>=.5;let U=$?-.001:.001;$?(e.easing("cubic-bezier(0.32, 0.72, 0, 1)"),U+=Gl([0,0],[.32,.72],[0,1],[1,1],L)[0]):(e.easing("cubic-bezier(1, 0, 0.68, 0.28)"),U+=Gl([0,0],[1,0],[.68,.28],[1,1],L)[0]);const G=kT($?R*r:(1-L)*r,O);o=$,k.enable(!1),d&&wy(d,p),e.onFinish(()=>{$||k.enable(!0)}).progressEnd($?1:0,U,G),M&&L>P/4?O2(n,e):$&&i()}});return k},kT=(n,e)=>ts(400,n/Math.abs(e*1.1),500),N2=n=>{const{currentBreakpoint:e,backdropBreakpoint:t,expandToScroll:i}=n,s=t===void 0||t<e,r=s?`calc(var(--backdrop-opacity) * ${e})`:"0",o=ht("backdropAnimation").fromTo("opacity",0,r);s&&o.beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]);const l=ht("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(100%)"},{offset:1,opacity:1,transform:`translateY(${100-e*100}%)`}]),d=i?void 0:ht("contentAnimation").keyframes([{offset:0,opacity:1,maxHeight:`${(1-e)*100}%`},{offset:1,opacity:1,maxHeight:`${e*100}%`}]);return{wrapperAnimation:l,backdropAnimation:o,contentAnimation:d}},P2=n=>{const{currentBreakpoint:e,backdropBreakpoint:t}=n,i=`calc(var(--backdrop-opacity) * ${lv(e,t)})`,s=[{offset:0,opacity:i},{offset:1,opacity:0}],r=[{offset:0,opacity:i},{offset:t,opacity:0},{offset:1,opacity:0}],o=ht("backdropAnimation").keyframes(t!==0?r:s);return{wrapperAnimation:ht("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:`translateY(${100-e*100}%)`},{offset:1,opacity:1,transform:"translateY(100%)"}]),backdropAnimation:o}},b6=()=>{const n=ht().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),e=ht().fromTo("transform","translateY(100vh)","translateY(0vh)");return{backdropAnimation:n,wrapperAnimation:e,contentAnimation:void 0}},_T=(n,e)=>{const{presentingEl:t,currentBreakpoint:i,expandToScroll:s}=e,r=xn(n),{wrapperAnimation:o,backdropAnimation:l,contentAnimation:d}=i!==void 0?N2(e):b6();l.addElement(r.querySelector("ion-backdrop")),o.addElement(r.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1}),!s&&d?.addElement(n.querySelector(".ion-page"));const u=ht("entering-base").addElement(n).easing("cubic-bezier(0.32,0.72,0,1)").duration(500).addAnimation([o]);if(d&&u.addAnimation(d),t){const f=window.innerWidth<768,p=t.tagName==="ION-MODAL"&&t.presentingElement!==void 0,b=xn(t),v=ht().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"}),y=document.body;if(f){const w=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",E=p?"-10px":w,T=jr.MIN_PRESENTING_SCALE,k=`translateY(${E}) scale(${T})`;v.afterStyles({transform:k}).beforeAddWrite(()=>y.style.setProperty("background-color","black")).addElement(t).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"},{offset:1,filter:"contrast(0.85)",transform:k,borderRadius:"10px 10px 0 0"}]),u.addAnimation(v)}else if(u.addAnimation(l),!p)o.fromTo("opacity","0","1");else{const E=`translateY(-10px) scale(${p?jr.MIN_PRESENTING_SCALE:1})`;v.afterStyles({transform:E}).addElement(b.querySelector(".modal-wrapper")).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0) scale(1)"},{offset:1,filter:"contrast(0.85)",transform:E}]);const T=ht().afterStyles({transform:E}).addElement(b.querySelector(".modal-shadow")).keyframes([{offset:0,opacity:"1",transform:"translateY(0) scale(1)"},{offset:1,opacity:"0",transform:E}]);u.addAnimation([v,T])}}else u.addAnimation(l);return u},v6=()=>{const n=ht().fromTo("opacity","var(--backdrop-opacity)",0),e=ht().fromTo("transform","translateY(0vh)","translateY(100vh)");return{backdropAnimation:n,wrapperAnimation:e}},AT=(n,e,t=500)=>{const{presentingEl:i,currentBreakpoint:s}=e,r=xn(n),{wrapperAnimation:o,backdropAnimation:l}=s!==void 0?P2(e):v6();l.addElement(r.querySelector("ion-backdrop")),o.addElement(r.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const d=ht("leaving-base").addElement(n).easing("cubic-bezier(0.32,0.72,0,1)").duration(t).addAnimation(o);if(i){const u=window.innerWidth<768,f=i.tagName==="ION-MODAL"&&i.presentingElement!==void 0,p=xn(i),b=ht().beforeClearStyles(["transform"]).afterClearStyles(["transform"]).onFinish(y=>{if(y!==1)return;i.style.setProperty("overflow",""),Array.from(v.querySelectorAll("ion-modal:not(.overlay-hidden)")).filter(E=>E.presentingElement!==void 0).length<=1&&v.style.setProperty("background-color","")}),v=document.body;if(u){const y=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",w=f?"-10px":y,E=jr.MIN_PRESENTING_SCALE,T=`translateY(${w}) scale(${E})`;b.addElement(i).keyframes([{offset:0,filter:"contrast(0.85)",transform:T,borderRadius:"10px 10px 0 0"},{offset:1,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"}]),d.addAnimation(b)}else if(d.addAnimation(l),!f)o.fromTo("opacity","1","0");else{const w=`translateY(-10px) scale(${f?jr.MIN_PRESENTING_SCALE:1})`;b.addElement(p.querySelector(".modal-wrapper")).afterStyles({transform:"translate3d(0, 0, 0)"}).keyframes([{offset:0,filter:"contrast(0.85)",transform:w},{offset:1,filter:"contrast(1)",transform:"translateY(0) scale(1)"}]);const E=ht().addElement(p.querySelector(".modal-shadow")).afterStyles({transform:"translateY(0) scale(1)"}).keyframes([{offset:0,opacity:"0",transform:w},{offset:1,opacity:"1",transform:"translateY(0) scale(1)"}]);d.addAnimation([b,E])}}else d.addAnimation(l);return d},y6=(n,e,t=300)=>{const{presentingEl:i}=e;if(!i)return ht("portrait-to-landscape-transition");const s=i.tagName==="ION-MODAL"&&i.presentingElement!==void 0,r=xn(i),o=document.body,l=ht("portrait-to-landscape-transition").addElement(n).easing("cubic-bezier(0.32,0.72,0,1)").duration(t),d=ht().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"});if(s){const f=`translateY(-10px) scale(${jr.MIN_PRESENTING_SCALE})`,p="translateY(0px) scale(1)";d.addElement(i).afterStyles({transform:p}).fromTo("transform",f,p).fromTo("filter","contrast(0.85)","contrast(1)");const b=ht().addElement(r.querySelector(".modal-shadow")).afterStyles({transform:p,opacity:"0"}).fromTo("transform",f,p);l.addAnimation([d,b])}else{const u=xn(n),f=ht().addElement(u.querySelectorAll(".modal-wrapper, .modal-shadow")).fromTo("opacity","1","1"),p=ht().addElement(u.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)","var(--backdrop-opacity)"),b=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",v=jr.MIN_PRESENTING_SCALE,y=`translateY(${b}) scale(${v})`;d.addElement(i).afterStyles({transform:"translateY(0px) scale(1)","border-radius":"0px"}).beforeAddWrite(()=>o.style.setProperty("background-color","")).fromTo("transform",y,"translateY(0px) scale(1)").fromTo("filter","contrast(0.85)","contrast(1)").fromTo("border-radius","10px 10px 0 0","0px"),l.addAnimation([d,f,p])}return l},x6=(n,e,t=300)=>{const{presentingEl:i}=e;if(!i)return ht("landscape-to-portrait-transition");const s=i.tagName==="ION-MODAL"&&i.presentingElement!==void 0,r=xn(i),o=document.body,l=ht("landscape-to-portrait-transition").addElement(n).easing("cubic-bezier(0.32,0.72,0,1)").duration(t),d=ht().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"});if(s){const f=`translateY(-10px) scale(${jr.MIN_PRESENTING_SCALE})`,p="translateY(0) scale(1)";d.addElement(i).afterStyles({transform:p}).fromTo("transform",f,p);const b=ht().addElement(r.querySelector(".modal-shadow")).afterStyles({transform:p,opacity:"0"}).fromTo("transform",f,p);l.addAnimation([d,b])}else{const u=xn(n),f=ht().addElement(u.querySelectorAll(".modal-wrapper, .modal-shadow")).fromTo("opacity","1","1"),p=ht().addElement(u.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)","var(--backdrop-opacity)"),b=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",v=jr.MIN_PRESENTING_SCALE,y=`translateY(${b}) scale(${v})`;d.addElement(i).afterStyles({transform:y}).beforeAddWrite(()=>o.style.setProperty("background-color","black")).keyframes([{offset:0,transform:"translateY(0px) scale(1)",filter:"contrast(1)",borderRadius:"0px"},{offset:.2,transform:"translateY(0px) scale(1)",filter:"contrast(1)",borderRadius:"10px 10px 0 0"},{offset:1,transform:y,filter:"contrast(0.85)",borderRadius:"10px 10px 0 0"}]),l.addAnimation([d,f,p])}return l},w6=()=>{const n=ht().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),e=ht().keyframes([{offset:0,opacity:.01,transform:"translateY(40px)"},{offset:1,opacity:1,transform:"translateY(0px)"}]);return{backdropAnimation:n,wrapperAnimation:e,contentAnimation:void 0}},S6=(n,e)=>{const{currentBreakpoint:t,expandToScroll:i}=e,s=xn(n),{wrapperAnimation:r,backdropAnimation:o,contentAnimation:l}=t!==void 0?N2(e):w6();o.addElement(s.querySelector("ion-backdrop")),r.addElement(s.querySelector(".modal-wrapper")),!i&&l?.addElement(n.querySelector(".ion-page"));const d=ht().addElement(n).easing("cubic-bezier(0.36,0.66,0.04,1)").duration(280).addAnimation([o,r]);return l&&d.addAnimation(l),d},E6=()=>{const n=ht().fromTo("opacity","var(--backdrop-opacity)",0),e=ht().keyframes([{offset:0,opacity:.99,transform:"translateY(0px)"},{offset:1,opacity:0,transform:"translateY(40px)"}]);return{backdropAnimation:n,wrapperAnimation:e}},T6=(n,e)=>{const{currentBreakpoint:t}=e,i=xn(n),{wrapperAnimation:s,backdropAnimation:r}=t!==void 0?P2(e):E6();return r.addElement(i.querySelector("ion-backdrop")),s.addElement(i.querySelector(".modal-wrapper")),ht().easing("cubic-bezier(0.47,0,0.745,0.715)").duration(200).addAnimation([r,s])},k6=(n,e,t,i,s,r,o=[],l,d,u,f)=>{const p=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1,opacity:.01}],b=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1-s,opacity:0},{offset:1,opacity:0}],v={WRAPPER_KEYFRAMES:[{offset:0,transform:"translateY(0%)"},{offset:1,transform:"translateY(100%)"}],BACKDROP_KEYFRAMES:s!==0?b:p,CONTENT_KEYFRAMES:[{offset:0,maxHeight:"100%"},{offset:1,maxHeight:"0%"}]},y=n.querySelector("ion-content"),w=t.clientHeight;let E=i,T=0,k=!1,_=null,O=null,R=null,M=null;const P=.95,N=o[o.length-1],L=o[0],D=r.childAnimations.find(H=>H.id==="wrapperAnimation"),$=r.childAnimations.find(H=>H.id==="backdropAnimation"),U=r.childAnimations.find(H=>H.id==="contentAnimation"),G=()=>{const H=n;H.focusTrap===!1||H.showBackdrop===!1||(n.style.setProperty("pointer-events","auto"),e.style.setProperty("pointer-events","auto"),n.classList.remove(Of))},Z=()=>{n.style.setProperty("pointer-events","none"),e.style.setProperty("pointer-events","none"),n.classList.add(Of)},se=H=>{if(!O&&(O=Array.from(n.querySelectorAll("ion-footer")),!O.length))return;const K=n.querySelector(".ion-page");if(M=H,H==="stationary")O.forEach(X=>{X.classList.remove("modal-footer-moving"),X.style.removeProperty("position"),X.style.removeProperty("width"),X.style.removeProperty("height"),X.style.removeProperty("top"),X.style.removeProperty("left"),K?.style.removeProperty("padding-bottom"),K?.appendChild(X)});else{let X=0;O.forEach((ae,re)=>{const ge=ae.getBoundingClientRect(),Se=document.body.getBoundingClientRect();X+=ae.clientHeight;const De=ge.top-Se.top,ze=ge.left-Se.left;if(ae.style.setProperty("--pinned-width",`${ae.clientWidth}px`),ae.style.setProperty("--pinned-height",`${ae.clientHeight}px`),ae.style.setProperty("--pinned-top",`${De}px`),ae.style.setProperty("--pinned-left",`${ze}px`),re===0){R=De;const Qe=n.querySelector("ion-header");Qe&&(R-=Qe.clientHeight)}}),O.forEach(ae=>{K?.style.setProperty("padding-bottom",`${X}px`),ae.classList.add("modal-footer-moving"),ae.style.setProperty("position","absolute"),ae.style.setProperty("width","var(--pinned-width)"),ae.style.setProperty("height","var(--pinned-height)"),ae.style.setProperty("top","var(--pinned-top)"),ae.style.setProperty("left","var(--pinned-left)"),document.body.appendChild(ae)})}};D&&$&&(D.keyframes([...v.WRAPPER_KEYFRAMES]),$.keyframes([...v.BACKDROP_KEYFRAMES]),U?.keyframes([...v.CONTENT_KEYFRAMES]),r.progressStart(!0,1-E),E>s&&n.focusTrap!==!1&&n.showBackdrop!==!1?G():Z()),y&&E!==N&&l&&(y.scrollY=!1);const z=H=>{const K=Vl(H.event.target);if(E=d(),!l&&K)return(er(K)?xn(K).querySelector(".inner-scroll"):K).scrollTop===0;if(E===1&&K){const X=er(K)?xn(K).querySelector(".inner-scroll"):K;return!!!K.querySelector("ion-refresher")&&X.scrollTop===0}return!0},Y=H=>{if(k=n.canDismiss!==void 0&&n.canDismiss!==!0&&L===0,!l){const K=Vl(H.event.target);_=K&&er(K)?xn(K).querySelector(".inner-scroll"):K}l||se("moving"),H.deltaY>0&&y&&(y.scrollY=!1),is(()=>{n.focus()}),r.progressStart(!0,1-E)},V=H=>{if(!l&&R!==null&&M!==null&&(H.currentY>=R&&M==="moving"?se("stationary"):H.currentY<R&&M==="stationary"&&se("moving")),!l&&H.deltaY<=0&&_)return;H.deltaY>0&&y&&(y.scrollY=!1);const K=1-E,X=o.length>1?1-o[1]:void 0,ae=K+H.deltaY/w,re=X!==void 0&&ae>=X&&k,ge=re?P:.9999,Se=re&&X!==void 0?X+dv((ae-X)/(ge-X)):ae;T=ts(1e-4,Se,ge),r.progressStep(T)},q=H=>{if(!l&&H.deltaY<=0&&_&&_.scrollTop>0){se("stationary");return}const K=H.velocityY,X=(H.deltaY+K*350)/w,ae=E-X,re=o.reduce((ge,Se)=>Math.abs(Se-ae)<Math.abs(ge-ae)?Se:ge);ie({breakpoint:re,breakpointOffset:T,canDismiss:k,animated:!0})},ie=H=>{const{breakpoint:K,canDismiss:X,breakpointOffset:ae,animated:re}=H,ge=X&&K===0,Se=ge?E:K,De=Se!==0;return E=0,D&&$&&(D.keyframes([{offset:0,transform:`translateY(${ae*100}%)`},{offset:1,transform:`translateY(${(1-Se)*100}%)`}]),$.keyframes([{offset:0,opacity:`calc(var(--backdrop-opacity) * ${lv(1-ae,s)})`},{offset:1,opacity:`calc(var(--backdrop-opacity) * ${lv(Se,s)})`}]),U&&U.keyframes([{offset:0,maxHeight:`${(1-ae)*100}%`},{offset:1,maxHeight:`${Se*100}%`}]),r.progressStep(0)),j.enable(!1),ge?O2(n,r):De||u(),y&&(Se===o[o.length-1]||!l)&&(y.scrollY=!0),!l&&Se===0&&se("stationary"),new Promise(ze=>{r.onFinish(()=>{De?(l||se("stationary"),D&&$?is(()=>{D.keyframes([...v.WRAPPER_KEYFRAMES]),$.keyframes([...v.BACKDROP_KEYFRAMES]),U?.keyframes([...v.CONTENT_KEYFRAMES]),r.progressStart(!0,1-Se),E=Se,f(E),E>s&&n.focusTrap!==!1&&n.showBackdrop!==!1?G():Z(),j.enable(!0),ze()}):(j.enable(!0),ze())):ze()},{oneTimeCallback:!0}).progressEnd(1,0,re?500:0)})},j=Tp({el:t,gestureName:"modalSheet",gesturePriority:40,direction:"y",threshold:10,canStart:z,onStart:Y,onMove:V,onEnd:q});return{gesture:j,moveSheetToBreakpoint:ie}},_6=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, var(--ion-background-color-step-350, #c0c0be));cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host(.modal-sheet.modal-no-expand-scroll) ion-footer{position:absolute;bottom:0;width:var(--width)}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0;border-end-start-radius:0}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0;border-end-start-radius:0}',A6=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, var(--ion-background-color-step-350, #c0c0be));cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host(.modal-sheet.modal-no-expand-scroll) ion-footer{position:absolute;bottom:0;width:var(--width)}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}',C6=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.didPresent=Ze(this,"ionModalDidPresent",7),this.willPresent=Ze(this,"ionModalWillPresent",7),this.willDismiss=Ze(this,"ionModalWillDismiss",7),this.didDismiss=Ze(this,"ionModalDidDismiss",7),this.ionBreakpointDidChange=Ze(this,"ionBreakpointDidChange",7),this.didPresentShorthand=Ze(this,"didPresent",7),this.willPresentShorthand=Ze(this,"willPresent",7),this.willDismissShorthand=Ze(this,"willDismiss",7),this.didDismissShorthand=Ze(this,"didDismiss",7),this.ionMount=Ze(this,"ionMount",7),this.lockController=xy(),this.triggerController=c2(),this.coreDelegate=JC(),this.isSheetModal=!1,this.inheritedAttributes={},this.inline=!1,this.gestureAnimationDismissing=!1,this.presented=!1,this.hasController=!1,this.keyboardClose=!0,this.expandToScroll=!0,this.backdropBreakpoint=0,this.handleBehavior="none",this.backdropDismiss=!0,this.showBackdrop=!0,this.animated=!0,this.isOpen=!1,this.keepContentsMounted=!1,this.focusTrap=!0,this.canDismiss=!0,this.onHandleClick=()=>{const{sheetTransition:t,handleBehavior:i}=this;i!=="cycle"||t!==void 0||this.moveToNextBreakpoint()},this.onBackdropTap=()=>{const{sheetTransition:t}=this;t===void 0&&this.dismiss(void 0,Sd)},this.onLifecycle=t=>{const i=this.usersElement,s=I6[t.type];if(i&&s){const r=new CustomEvent(s,{bubbles:!1,cancelable:!1,detail:t.detail});i.dispatchEvent(r)}},this.onModalFocus=t=>{const{dragHandleEl:i,el:s}=this;t.target===s&&i&&i.tabIndex!==-1&&i.focus()},this.onSlotChange=({target:t})=>{t.assignedElements().forEach(s=>{s.querySelectorAll("ion-modal").forEach(r=>{r.getAttribute("data-parent-ion-modal")===null&&r.setAttribute("data-parent-ion-modal",this.el.id)})})}}onIsOpenChange(e,t){e===!0&&t===!1?this.present():e===!1&&t===!0&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:i}=this;e&&i.addClickListener(t,e)}onWindowResize(){ut(this)!=="ios"||!this.presentingElement||this.enterAnimation||this.leaveAnimation||(clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.handleViewTransition()},50))}breakpointsChanged(e){e!==void 0&&(this.sortedBreakpoints=e.sort((t,i)=>t-i))}connectedCallback(){const{el:e}=this;t2(e),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener(),this.cleanupViewTransitionListener(),this.cleanupParentRemovalObserver()}componentWillLoad(){var e;const{breakpoints:t,initialBreakpoint:i,el:s,htmlAttributes:r}=this,o=this.isSheetModal=t!==void 0&&i!==void 0,l=["aria-label","role"];this.inheritedAttributes=ec(s,l),s.parentNode&&(this.cachedOriginalParent=s.parentNode),r!==void 0&&l.forEach(d=>{r[d]&&(this.inheritedAttributes=Object.assign(Object.assign({},this.inheritedAttributes),{[d]:r[d]}),delete r[d])}),o&&(this.currentBreakpoint=this.initialBreakpoint),t!==void 0&&i!==void 0&&!t.includes(i)&&zn("[ion-modal] - Your breakpoints array must include the initialBreakpoint value."),!((e=this.htmlAttributes)===null||e===void 0)&&e.id||i2(this.el)}componentDidLoad(){this.isOpen===!0&&is(()=>this.present()),this.breakpointsChanged(this.breakpoints),this.triggerChanged()}getDelegate(e=!1){if(this.workingDelegate&&!e)return{delegate:this.workingDelegate,inline:this.inline};const t=this.el.parentNode,i=this.inline=t!==null&&!this.hasController,s=this.workingDelegate=i?this.delegate||this.coreDelegate:this.delegate;return{inline:i,delegate:s}}async checkCanDismiss(e,t){const{canDismiss:i}=this;return typeof i=="function"?i(e,t):i}async present(){const e=await this.lockController.lock();if(this.presented){e();return}const{presentingElement:t,el:i}=this;this.currentBreakpoint=this.initialBreakpoint;const{inline:s,delegate:r}=this.getDelegate(!0);this.ionMount.emit(),this.usersElement=await _p(r,i,this.component,["ion-page"],this.componentProps,s),Cf(i)?await If(this.usersElement):this.keepContentsMounted||await XP(),An(()=>this.el.classList.add("show-modal"));const o=t!==void 0;o&&ut(this)==="ios"&&(this.statusBarStyle=await Ay.getStyle(),D2()),await r2(this,"modalEnter",_T,S6,{presentingEl:t,currentBreakpoint:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint,expandToScroll:this.expandToScroll}),typeof window<"u"&&(this.keyboardOpenCallback=()=>{this.gesture&&(this.gesture.enable(!1),is(()=>{this.gesture&&this.gesture.enable(!0)}))},window.addEventListener(Bf,this.keyboardOpenCallback)),this.isSheetModal?this.initSheetGesture():o&&this.initSwipeToClose(),this.initViewTransitionListener(),this.initParentRemovalObserver(),e()}initSwipeToClose(){var e;if(ut(this)!=="ios")return;const{el:t}=this,i=this.leaveAnimation||bt.get("modalLeave",AT),s=this.animation=i(t,{presentingEl:this.presentingElement,expandToScroll:this.expandToScroll});if(!nv(t)){Mf(t);return}const o=(e=this.statusBarStyle)!==null&&e!==void 0?e:ql.Default;this.gesture=g6(t,s,o,()=>{this.gestureAnimationDismissing=!0,cv(this.statusBarStyle),this.animation.onFinish(async()=>{await this.dismiss(void 0,cd),this.gestureAnimationDismissing=!1})}),this.gesture.enable(!0)}initSheetGesture(){const{wrapperEl:e,initialBreakpoint:t,backdropBreakpoint:i}=this;if(!e||t===void 0)return;const s=this.enterAnimation||bt.get("modalEnter",_T),r=this.animation=s(this.el,{presentingEl:this.presentingElement,currentBreakpoint:t,backdropBreakpoint:i,expandToScroll:this.expandToScroll});r.progressStart(!0,1);const{gesture:o,moveSheetToBreakpoint:l}=k6(this.el,this.backdropEl,e,t,i,r,this.sortedBreakpoints,this.expandToScroll,()=>{var d;return(d=this.currentBreakpoint)!==null&&d!==void 0?d:0},()=>this.sheetOnDismiss(),d=>{this.currentBreakpoint!==d&&(this.currentBreakpoint=d,this.ionBreakpointDidChange.emit({breakpoint:d}))});this.gesture=o,this.moveSheetToBreakpoint=l,this.gesture.enable(!0)}sheetOnDismiss(){this.gestureAnimationDismissing=!0,this.animation.onFinish(async()=>{this.currentBreakpoint=0,this.ionBreakpointDidChange.emit({breakpoint:this.currentBreakpoint}),await this.dismiss(void 0,cd),this.gestureAnimationDismissing=!1})}async dismiss(e,t){var i;if(this.gestureAnimationDismissing&&t!==cd)return!1;const s=await this.lockController.lock();if(await this.dismissNestedModals(),t!=="handler"&&!await this.checkCanDismiss(e,t))return s(),!1;const{presentingElement:r}=this;r!==void 0&&ut(this)==="ios"&&cv(this.statusBarStyle),typeof window<"u"&&this.keyboardOpenCallback&&(window.removeEventListener(Bf,this.keyboardOpenCallback),this.keyboardOpenCallback=void 0);const l=await o2(this,e,t,"modalLeave",AT,T6,{presentingEl:r,currentBreakpoint:(i=this.currentBreakpoint)!==null&&i!==void 0?i:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint,expandToScroll:this.expandToScroll});if(l){const{delegate:d}=this.getDelegate();await ZC(d,this.usersElement),An(()=>this.el.classList.remove("show-modal")),this.animation&&this.animation.destroy(),this.gesture&&this.gesture.destroy(),this.cleanupViewTransitionListener(),this.cleanupParentRemovalObserver()}return this.currentBreakpoint=void 0,this.animation=void 0,s(),l}onDidDismiss(){return Df(this.el,"ionModalDidDismiss")}onWillDismiss(){return Df(this.el,"ionModalWillDismiss")}async setCurrentBreakpoint(e){if(!this.isSheetModal){zn("[ion-modal] - setCurrentBreakpoint is only supported on sheet modals.");return}if(!this.breakpoints.includes(e)){zn(`[ion-modal] - Attempted to set invalid breakpoint value ${e}. Please double check that the breakpoint value is part of your defined breakpoints.`);return}const{currentBreakpoint:t,moveSheetToBreakpoint:i,canDismiss:s,breakpoints:r,animated:o}=this;t!==e&&i&&(this.sheetTransition=i({breakpoint:e,breakpointOffset:1-t,canDismiss:s!==void 0&&s!==!0&&r[0]===0,animated:o}),await this.sheetTransition,this.sheetTransition=void 0)}async getCurrentBreakpoint(){return this.currentBreakpoint}async moveToNextBreakpoint(){const{breakpoints:e,currentBreakpoint:t}=this;if(!e||t==null)return!1;const i=e.filter(l=>l!==0),r=(i.indexOf(t)+1)%i.length,o=i[r];return await this.setCurrentBreakpoint(o),!0}initViewTransitionListener(){ut(this)!=="ios"||!this.presentingElement||this.enterAnimation||this.leaveAnimation||(this.currentViewIsPortrait=window.innerWidth<768)}handleViewTransition(){const e=window.innerWidth<768;if(this.currentViewIsPortrait===e)return;this.viewTransitionAnimation&&(this.viewTransitionAnimation.destroy(),this.viewTransitionAnimation=void 0);const{presentingElement:t}=this;if(!t)return;let i;this.currentViewIsPortrait&&!e?i=y6(this.el,{presentingEl:t}):i=x6(this.el,{presentingEl:t}),this.currentViewIsPortrait=e,this.viewTransitionAnimation=i,i.play().then(()=>{this.viewTransitionAnimation=void 0,this.reinitSwipeToClose()})}cleanupViewTransitionListener(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=void 0),this.viewTransitionAnimation&&(this.viewTransitionAnimation.destroy(),this.viewTransitionAnimation=void 0)}reinitSwipeToClose(){ut(this)!=="ios"||!this.presentingElement||(this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.animation&&(this.animation.progressEnd(0,0,0),this.animation.destroy(),this.animation=void 0),is(()=>{this.ensureCorrectModalPosition(),this.initSwipeToClose()}))}ensureCorrectModalPosition(){const{el:e,presentingElement:t}=this,s=xn(e).querySelector(".modal-wrapper");if(s&&(s.style.transform="translateY(0vh)",s.style.opacity="1"),t?.tagName==="ION-MODAL")if(window.innerWidth<768){const o=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",l=jr.MIN_PRESENTING_SCALE;t.style.transform=`translateY(${o}) scale(${l})`}else t.style.transform="translateY(0px) scale(1)"}async dismissNestedModals(){const e=document.querySelectorAll(`ion-modal[data-parent-ion-modal="${this.el.id}"]`);e?.forEach(async t=>{await t.dismiss(void 0,"parent-dismissed")})}initParentRemovalObserver(){typeof MutationObserver>"u"||typeof window>"u"||!this.cachedOriginalParent||this.cachedOriginalParent.nodeType===Node.DOCUMENT_NODE||this.cachedOriginalParent.nodeType===Node.DOCUMENT_FRAGMENT_NODE||(this.parentRemovalObserver=new MutationObserver(e=>{e.forEach(t=>{if(t.type==="childList"&&t.removedNodes.length>0){const i=Array.from(t.removedNodes).some(r=>{var o,l;const d=r===this.cachedOriginalParent,u=this.cachedOriginalParent?(l=(o=r).contains)===null||l===void 0?void 0:l.call(o,this.cachedOriginalParent):!1;return d||u}),s=this.cachedOriginalParent&&!this.cachedOriginalParent.isConnected;(i||s)&&(this.dismiss(void 0,"parent-removed"),this.cachedOriginalParent=void 0)}})}),this.parentRemovalObserver.observe(document.body,{childList:!0,subtree:!0}))}cleanupParentRemovalObserver(){var e;(e=this.parentRemovalObserver)===null||e===void 0||e.disconnect(),this.parentRemovalObserver=void 0}render(){const{handle:e,isSheetModal:t,presentingElement:i,htmlAttributes:s,handleBehavior:r,inheritedAttributes:o,focusTrap:l,expandToScroll:d}=this,u=e!==!1&&t,f=ut(this),p=i!==void 0&&f==="ios",b=r==="cycle";return J(Kt,Object.assign({key:"9e9a7bd591eb17a225a00b4fa2e379e94601d17f","no-router":!0,tabIndex:b&&(t&&u)?0:-1},s,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign({[f]:!0,"modal-default":!p&&!t,"modal-card":p,"modal-sheet":t,"modal-no-expand-scroll":t&&!d,"overlay-hidden":!0,[Of]:l===!1},by(this.cssClass)),onIonBackdropTap:this.onBackdropTap,onIonModalDidPresent:this.onLifecycle,onIonModalWillPresent:this.onLifecycle,onIonModalWillDismiss:this.onLifecycle,onIonModalDidDismiss:this.onLifecycle,onFocus:this.onModalFocus}),J("ion-backdrop",{key:"e5eae2c14f830f75e308fcd7f4c10c86fac5b962",ref:y=>this.backdropEl=y,visible:this.showBackdrop,tappable:this.backdropDismiss,part:"backdrop"}),f==="ios"&&J("div",{key:"e268f9cd310c3cf4e051b5b92524ce4fb70d005e",class:"modal-shadow"}),J("div",Object.assign({key:"9c380f36c18144c153077b15744d1c3346bce63e",role:"dialog"},o,{"aria-modal":"true",class:"modal-wrapper ion-overlay-wrapper",part:"content",ref:y=>this.wrapperEl=y}),u&&J("button",{key:"2d5ee6d5959d97309c306e8ce72eb0f2c19be144",class:"modal-handle",tabIndex:b?0:-1,"aria-label":"Activate to adjust the size of the dialog overlaying the screen",onClick:b?this.onHandleClick:void 0,part:"handle",ref:y=>this.dragHandleEl=y}),J("slot",{key:"5590434c35ea04c42fc006498bc189038e15a298",onSlotchange:this.onSlotChange})))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:_6,md:A6}}},[289,"ion-modal",{hasController:[4,"has-controller"],overlayIndex:[2,"overlay-index"],delegate:[16],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],breakpoints:[16],expandToScroll:[4,"expand-to-scroll"],initialBreakpoint:[2,"initial-breakpoint"],backdropBreakpoint:[2,"backdrop-breakpoint"],handle:[4],handleBehavior:[1,"handle-behavior"],component:[1],componentProps:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],showBackdrop:[4,"show-backdrop"],animated:[4],presentingElement:[16],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],keepContentsMounted:[4,"keep-contents-mounted"],focusTrap:[4,"focus-trap"],canDismiss:[4,"can-dismiss"],presented:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64],setCurrentBreakpoint:[64],getCurrentBreakpoint:[64]},[[9,"resize","onWindowResize"]],{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),I6={ionModalDidPresent:"ionViewDidEnter",ionModalWillPresent:"ionViewWillEnter",ionModalWillDismiss:"ionViewWillLeave",ionModalDidDismiss:"ionViewDidLeave"};function R6(){if(typeof customElements>"u")return;["ion-modal","ion-backdrop"].forEach(e=>{switch(e){case"ion-modal":customElements.get(e)||customElements.define(e,C6);break;case"ion-backdrop":customElements.get(e)||m2();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const L6=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:min(1.0625rem, 20.4px);font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host{inset-inline-start:0}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:min(0.8125rem, 23.4px);font-weight:normal}:host(.title-large){-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:2px;padding-bottom:4px;-webkit-transform-origin:left center;transform-origin:left center;position:static;-ms-flex-align:end;align-items:flex-end;min-width:100%;font-size:min(2.125rem, 61.2px);font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000);font-family:var(--ion-font-family)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit;width:auto}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}@supports selector(:dir(rtl)){:host(.title-large:dir(rtl)) .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}}",D6=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:1.25rem;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:0.9375rem;font-weight:normal}",O6=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.ionStyle=Ze(this,"ionStyle",7)}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const e=this.getSize();this.ionStyle.emit({[`title-${e}`]:!0})}getSize(){return this.size!==void 0?this.size:"default"}render(){const e=ut(this),t=this.getSize();return J(Kt,{key:"e599c0bf1b0817df3fa8360bdcd6d787f751c371",class:ss(this.color,{[e]:!0,[`title-${t}`]:!0,"title-rtl":document.dir==="rtl"})},J("div",{key:"6e7eee9047d6759876bb31d7305b76efc7c4338c",class:"toolbar-title"},J("slot",{key:"bf790eb4c83dd0af4f2fd1f85ab4af5819f46ff4"})))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:L6,md:D6}}},[289,"ion-title",{color:[513],size:[1]},void 0,{size:["sizeChanged"]}]);function N6(){if(typeof customElements>"u")return;["ion-title"].forEach(e=>{switch(e){case"ion-title":customElements.get(e)||customElements.define(e,O6);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const P6=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;width:100%;padding-right:var(--ion-safe-area-right);padding-left:var(--ion-safe-area-left);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, var(--ion-background-color-step-50, #f7f7f7)));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.2)))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",M6=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;width:100%;padding-right:var(--ion-safe-area-right);padding-left:var(--ion-safe-area-left);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, #c1c4cd))));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}",$6=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map}componentWillLoad(){const e=Array.from(this.el.querySelectorAll("ion-buttons")),t=e.find(r=>r.slot==="start");t&&t.classList.add("buttons-first-slot");const i=e.reverse(),s=i.find(r=>r.slot==="end")||i.find(r=>r.slot==="primary")||i.find(r=>r.slot==="secondary");s&&s.classList.add("buttons-last-slot")}childrenStyle(e){e.stopPropagation();const t=e.target.tagName,i=e.detail,s={},r=this.childrenStyles.get(t)||{};let o=!1;Object.keys(i).forEach(l=>{const d=`toolbar-${l}`,u=i[l];u!==r[d]&&(o=!0),u&&(s[d]=!0)}),o&&(this.childrenStyles.set(t,s),Ns(this))}render(){const e=ut(this),t={};return this.childrenStyles.forEach(i=>{Object.assign(t,i)}),J(Kt,{key:"f6c4f669a6a61c5eac4cbb5ea0aa97c48ae5bd46",class:Object.assign(Object.assign({},t),ss(this.color,{[e]:!0,"in-toolbar":_n("ion-toolbar",this.el)}))},J("div",{key:"9c81742ffa02de9ba7417025b077d05e67305074",class:"toolbar-background",part:"background"}),J("div",{key:"5fc96d166fa47894a062e41541a9beee38078a36",class:"toolbar-container",part:"container"},J("slot",{key:"b62c0d9d59a70176bdbf769aec6090d7a166853b",name:"start"}),J("slot",{key:"d01d3cc2c50e5aaa49c345b209fe8dbdf3d48131",name:"secondary"}),J("div",{key:"3aaa3a2810aedd38c37eb616158ec7b9638528fc",class:"toolbar-content",part:"content"},J("slot",{key:"357246690f8d5e1cc3ca369611d4845a79edf610"})),J("slot",{key:"06ed3cca4f7ebff4a54cd877dad3cc925ccf9f75",name:"primary"}),J("slot",{key:"e453d43d14a26b0d72f41e1b81a554bab8ece811",name:"end"})))}get el(){return this}static get style(){return{ios:P6,md:M6}}},[289,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]);function F6(){if(typeof customElements>"u")return;["ion-toolbar"].forEach(e=>{switch(e){case"ion-toolbar":customElements.get(e)||customElements.define(e,$6);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const j6=S2;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const B6=":host(.tab-hidden){display:none !important}",U6=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.loaded=!1,this.active=!1}async componentWillLoad(){this.active&&await this.setActive()}async setActive(){await this.prepareLazyLoaded(),this.active=!0}changeActive(e){e&&this.prepareLazyLoaded()}prepareLazyLoaded(){if(!this.loaded&&this.component!=null){this.loaded=!0;try{return _p(this.delegate,this.el,this.component,["ion-page"])}catch(e){Hr("[ion-tab] - Exception in prepareLazyLoaded:",e)}}return Promise.resolve(void 0)}render(){const{tab:e,active:t,component:i}=this;return J(Kt,{key:"dbad8fe9f1566277d14647626308eaf1601ab01f",role:"tabpanel","aria-hidden":t?null:"true","aria-labelledby":`tab-button-${e}`,class:{"ion-page":i===void 0,"tab-hidden":!t}},J("slot",{key:"3be64f4e7161f6769aaf8e4dcb5293fcaa09af45"}))}get el(){return this}static get watchers(){return{active:["changeActive"]}}static get style(){return B6}},[257,"ion-tab",{active:[1028],delegate:[16],tab:[1],component:[1],setActive:[64]},void 0,{active:["changeActive"]}]);function z6(){if(typeof customElements>"u")return;["ion-tab"].forEach(e=>{switch(e){case"ion-tab":customElements.get(e)||customElements.define(e,U6);break}})}const H6=z6;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const G6='.sc-ion-textarea-ios-h{--background:initial;--color:initial;--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0;--padding-end:0;--padding-bottom:8px;--padding-start:0;--border-radius:0;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}.textarea-label-placement-floating.sc-ion-textarea-ios-h,.textarea-label-placement-stacked.sc-ion-textarea-ios-h{--padding-top:0px;min-height:56px}[cols].sc-ion-textarea-ios-h:not([auto-grow]){width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.ion-color.sc-ion-textarea-ios-h{--highlight-color-focused:var(--ion-color-base);background:initial}ion-item.sc-ion-textarea-ios-h,ion-item .sc-ion-textarea-ios-h{-ms-flex-item-align:baseline;align-self:baseline}ion-item[slot=start].sc-ion-textarea-ios-h,ion-item [slot=start].sc-ion-textarea-ios-h,ion-item[slot=end].sc-ion-textarea-ios-h,ion-item [slot=end].sc-ion-textarea-ios-h{width:auto}.native-textarea.sc-ion-textarea-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;white-space:pre-wrap;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box;resize:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.native-textarea.sc-ion-textarea-ios::-webkit-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::-moz-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios:-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios{color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.cloned-input.sc-ion-textarea-ios{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-textarea-ios{inset-inline-start:0}.cloned-input.sc-ion-textarea-ios:disabled{opacity:1}[auto-grow].sc-ion-textarea-ios-h .cloned-input.sc-ion-textarea-ios{height:100%}[auto-grow].sc-ion-textarea-ios-h .native-textarea.sc-ion-textarea-ios{overflow:hidden}.textarea-wrapper.sc-ion-textarea-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:0px;padding-bottom:0px;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:start;align-items:flex-start;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-textarea-ios{position:relative;width:100%;height:100%}.has-focus.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios{caret-color:var(--highlight-color)}.native-wrapper.sc-ion-textarea-ios textarea.sc-ion-textarea-ios{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom)}.native-wrapper.sc-ion-textarea-ios{display:grid;min-width:inherit;max-width:inherit;min-height:inherit;max-height:inherit;grid-auto-rows:100%}.native-wrapper.sc-ion-textarea-ios::after{white-space:pre-wrap;content:attr(data-replicated-value) " ";visibility:hidden}.native-wrapper.sc-ion-textarea-ios::after{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:var(--border-radius);color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.textarea-wrapper-inner.sc-ion-textarea-ios{display:-ms-flexbox;display:flex;width:100%;min-height:inherit}.ion-touched.ion-invalid.sc-ion-textarea-ios-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-textarea-ios-h{--highlight-color:var(--highlight-color-valid)}.textarea-bottom.sc-ion-textarea-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem;white-space:normal}.has-focus.ion-valid.sc-ion-textarea-ios-h,.ion-touched.ion-invalid.sc-ion-textarea-ios-h{--border-color:var(--highlight-color)}.textarea-bottom.sc-ion-textarea-ios .error-text.sc-ion-textarea-ios{display:none;color:var(--highlight-color-invalid)}.textarea-bottom.sc-ion-textarea-ios .helper-text.sc-ion-textarea-ios{display:block;color:var(--ion-color-step-700, var(--ion-text-color-step-300, #4d4d4d))}.ion-touched.ion-invalid.sc-ion-textarea-ios-h .textarea-bottom.sc-ion-textarea-ios .error-text.sc-ion-textarea-ios{display:block}.ion-touched.ion-invalid.sc-ion-textarea-ios-h .textarea-bottom.sc-ion-textarea-ios .helper-text.sc-ion-textarea-ios{display:none}.textarea-bottom.sc-ion-textarea-ios .counter.sc-ion-textarea-ios{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-700, var(--ion-text-color-step-300, #4d4d4d));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.label-text-wrapper.sc-ion-textarea-ios{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-textarea-ios,.sc-ion-textarea-ios-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-textarea-ios,.textarea-outline-notch-hidden.sc-ion-textarea-ios{display:none}.textarea-wrapper.sc-ion-textarea-ios textarea.sc-ion-textarea-ios{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.textarea-label-placement-start.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios{-ms-flex-direction:row;flex-direction:row}.textarea-label-placement-start.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-end.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.textarea-label-placement-end.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-ios-h .label-text.sc-ion-textarea-ios{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.textarea-label-placement-stacked.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform-origin:left top;transform-origin:left top;-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:0px;padding-bottom:0px;max-width:100%;z-index:2}[dir=rtl].sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl].textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl].sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl].textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.textarea-label-placement-stacked.sc-ion-textarea-ios-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform-origin:right top;transform-origin:right top}}.textarea-label-placement-stacked.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios,.textarea-label-placement-stacked[auto-grow].sc-ion-textarea-ios-h .native-wrapper.sc-ion-textarea-ios::after,.textarea-label-placement-floating[auto-grow].sc-ion-textarea-ios-h .native-wrapper.sc-ion-textarea-ios::after{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:8px;margin-bottom:0px}.sc-ion-textarea-ios-h.textarea-label-placement-stacked.sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-stacked .sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-stacked.sc-ion-textarea-ios-s>[slot=end],.sc-ion-textarea-ios-h.textarea-label-placement-stacked .sc-ion-textarea-ios-s>[slot=end],.sc-ion-textarea-ios-h.textarea-label-placement-floating.sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-floating .sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-floating.sc-ion-textarea-ios-s>[slot=end],.sc-ion-textarea-ios-h.textarea-label-placement-floating .sc-ion-textarea-ios-s>[slot=end]{margin-top:8px}.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios{opacity:0}.has-focus.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios,.has-value.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios{opacity:1}.label-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.start-slot-wrapper.sc-ion-textarea-ios,.end-slot-wrapper.sc-ion-textarea-ios{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-item-align:start;align-self:start}.sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-s>[slot=end]{margin-top:0}.sc-ion-textarea-ios-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-textarea-ios-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.sc-ion-textarea-ios-h{--border-width:0.55px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));--padding-top:10px;--padding-end:0px;--padding-bottom:8px;--padding-start:0px;--highlight-height:0px;font-size:inherit}.textarea-disabled.sc-ion-textarea-ios-h{opacity:0.3}.sc-ion-textarea-ios-s>ion-button[slot=start].button-has-icon-only,.sc-ion-textarea-ios-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;aspect-ratio:1}',V6=`.sc-ion-textarea-md-h{--background:initial;--color:initial;--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0;--padding-end:0;--padding-bottom:8px;--padding-start:0;--border-radius:0;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}.textarea-label-placement-floating.sc-ion-textarea-md-h,.textarea-label-placement-stacked.sc-ion-textarea-md-h{--padding-top:0px;min-height:56px}[cols].sc-ion-textarea-md-h:not([auto-grow]){width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.ion-color.sc-ion-textarea-md-h{--highlight-color-focused:var(--ion-color-base);background:initial}ion-item.sc-ion-textarea-md-h,ion-item .sc-ion-textarea-md-h{-ms-flex-item-align:baseline;align-self:baseline}ion-item[slot=start].sc-ion-textarea-md-h,ion-item [slot=start].sc-ion-textarea-md-h,ion-item[slot=end].sc-ion-textarea-md-h,ion-item [slot=end].sc-ion-textarea-md-h{width:auto}.native-textarea.sc-ion-textarea-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;white-space:pre-wrap;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box;resize:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.native-textarea.sc-ion-textarea-md::-webkit-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md::-moz-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md:-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md::-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md::placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md{color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.cloned-input.sc-ion-textarea-md{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-textarea-md{inset-inline-start:0}.cloned-input.sc-ion-textarea-md:disabled{opacity:1}[auto-grow].sc-ion-textarea-md-h .cloned-input.sc-ion-textarea-md{height:100%}[auto-grow].sc-ion-textarea-md-h .native-textarea.sc-ion-textarea-md{overflow:hidden}.textarea-wrapper.sc-ion-textarea-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:0px;padding-bottom:0px;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:start;align-items:flex-start;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-textarea-md{position:relative;width:100%;height:100%}.has-focus.sc-ion-textarea-md-h textarea.sc-ion-textarea-md{caret-color:var(--highlight-color)}.native-wrapper.sc-ion-textarea-md textarea.sc-ion-textarea-md{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom)}.native-wrapper.sc-ion-textarea-md{display:grid;min-width:inherit;max-width:inherit;min-height:inherit;max-height:inherit;grid-auto-rows:100%}.native-wrapper.sc-ion-textarea-md::after{white-space:pre-wrap;content:attr(data-replicated-value) " ";visibility:hidden}.native-wrapper.sc-ion-textarea-md::after{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:var(--border-radius);color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.textarea-wrapper-inner.sc-ion-textarea-md{display:-ms-flexbox;display:flex;width:100%;min-height:inherit}.ion-touched.ion-invalid.sc-ion-textarea-md-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-textarea-md-h{--highlight-color:var(--highlight-color-valid)}.textarea-bottom.sc-ion-textarea-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem;white-space:normal}.has-focus.ion-valid.sc-ion-textarea-md-h,.ion-touched.ion-invalid.sc-ion-textarea-md-h{--border-color:var(--highlight-color)}.textarea-bottom.sc-ion-textarea-md .error-text.sc-ion-textarea-md{display:none;color:var(--highlight-color-invalid)}.textarea-bottom.sc-ion-textarea-md .helper-text.sc-ion-textarea-md{display:block;color:var(--ion-color-step-700, var(--ion-text-color-step-300, #4d4d4d))}.ion-touched.ion-invalid.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md .error-text.sc-ion-textarea-md{display:block}.ion-touched.ion-invalid.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md .helper-text.sc-ion-textarea-md{display:none}.textarea-bottom.sc-ion-textarea-md .counter.sc-ion-textarea-md{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-700, var(--ion-text-color-step-300, #4d4d4d));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.label-text-wrapper.sc-ion-textarea-md{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-textarea-md,.sc-ion-textarea-md-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-textarea-md,.textarea-outline-notch-hidden.sc-ion-textarea-md{display:none}.textarea-wrapper.sc-ion-textarea-md textarea.sc-ion-textarea-md{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.textarea-label-placement-start.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{-ms-flex-direction:row;flex-direction:row}.textarea-label-placement-start.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-end.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.textarea-label-placement-end.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-md-h .label-text.sc-ion-textarea-md{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.textarea-label-placement-stacked.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:left top;transform-origin:left top;-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:0px;padding-bottom:0px;max-width:100%;z-index:2}[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.textarea-label-placement-stacked.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}}.textarea-label-placement-stacked.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-label-placement-stacked[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after,.textarea-label-placement-floating[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:8px;margin-bottom:0px}.sc-ion-textarea-md-h.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=end]{margin-top:8px}.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md{opacity:0}.has-focus.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.has-value.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md{opacity:1}.label-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.start-slot-wrapper.sc-ion-textarea-md,.end-slot-wrapper.sc-ion-textarea-md{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-item-align:start;align-self:start}.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-s>[slot=end]{margin-top:0}.sc-ion-textarea-md-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-textarea-md-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.textarea-fill-solid.sc-ion-textarea-md-h{--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-color:var(--ion-color-step-500, var(--ion-background-color-step-500, gray));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.textarea-fill-solid.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{border-bottom:var(--border-width) var(--border-style) var(--border-color)}.has-focus.textarea-fill-solid.ion-valid.sc-ion-textarea-md-h,.textarea-fill-solid.ion-touched.ion-invalid.sc-ion-textarea-md-h{--border-color:var(--highlight-color)}.textarea-fill-solid.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md{border-top:none}@media (any-hover: hover){.textarea-fill-solid.sc-ion-textarea-md-h:hover{--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.textarea-fill-solid.has-focus.sc-ion-textarea-md-h{--background:var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}.textarea-fill-solid.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0px;border-end-start-radius:0px}.label-floating.textarea-fill-solid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{max-width:calc(100% / 0.75)}.textarea-fill-outline.sc-ion-textarea-md-h{--border-color:var(--ion-color-step-300, var(--ion-background-color-step-300, #b3b3b3));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.textarea-fill-outline.textarea-shape-round.sc-ion-textarea-md-h{--border-radius:28px;--padding-start:32px;--padding-end:32px}.has-focus.textarea-fill-outline.ion-valid.sc-ion-textarea-md-h,.textarea-fill-outline.ion-touched.ion-invalid.sc-ion-textarea-md-h{--border-color:var(--highlight-color)}@media (any-hover: hover){.textarea-fill-outline.sc-ion-textarea-md-h:hover{--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.textarea-fill-outline.has-focus.sc-ion-textarea-md-h{--border-width:var(--highlight-height);--border-color:var(--highlight-color)}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md{border-top:none}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{border-bottom:none}.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:left top;transform-origin:left top;position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}}.textarea-fill-outline.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{position:relative}.label-floating.textarea-fill-outline.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc(
    (100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75
  )}.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-stacked[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after,.textarea-fill-outline.textarea-label-placement-floating[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:12px;margin-bottom:0px}.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=end]{margin-top:12px}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-container.sc-ion-textarea-md{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-start.sc-ion-textarea-md,.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-end.sc-ion-textarea-md{pointer-events:none}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-start.sc-ion-textarea-md,.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-notch.sc-ion-textarea-md,.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-end.sc-ion-textarea-md{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color)}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-notch.sc-ion-textarea-md{max-width:calc(100% - var(--padding-start) - var(--padding-end))}.textarea-fill-outline.sc-ion-textarea-md-h .notch-spacer.sc-ion-textarea-md{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none;-webkit-box-sizing:content-box;box-sizing:content-box}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-start.sc-ion-textarea-md{border-start-start-radius:var(--border-radius);border-start-end-radius:0px;border-end-end-radius:0px;border-end-start-radius:var(--border-radius);-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color);width:calc(var(--padding-start) - 4px)}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-end.sc-ion-textarea-md{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color);border-start-start-radius:0px;border-start-end-radius:var(--border-radius);border-end-end-radius:var(--border-radius);border-end-start-radius:0px;-ms-flex-positive:1;flex-grow:1}.label-floating.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-notch.sc-ion-textarea-md{border-top:none}.sc-ion-textarea-md-h{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--padding-top:18px;--padding-end:0px;--padding-bottom:8px;--padding-start:0px;--highlight-height:2px;font-size:inherit}.textarea-bottom.sc-ion-textarea-md .counter.sc-ion-textarea-md{letter-spacing:0.0333333333em}.textarea-label-placement-floating.has-focus.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-stacked.has-focus.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{color:var(--highlight-color)}.has-focus.textarea-label-placement-floating.ion-valid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.ion-touched.ion-invalid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.has-focus.textarea-label-placement-stacked.ion-valid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-stacked.ion-touched.ion-invalid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{color:var(--highlight-color)}.textarea-disabled.sc-ion-textarea-md-h{opacity:0.38}.textarea-highlight.sc-ion-textarea-md{bottom:-1px;position:absolute;width:100%;height:var(--highlight-height);-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}.textarea-highlight.sc-ion-textarea-md{inset-inline-start:0}.has-focus.sc-ion-textarea-md-h .textarea-highlight.sc-ion-textarea-md{-webkit-transform:scale(1);transform:scale(1)}.in-item.sc-ion-textarea-md-h .textarea-highlight.sc-ion-textarea-md{bottom:0}.in-item.sc-ion-textarea-md-h .textarea-highlight.sc-ion-textarea-md{inset-inline-start:0}.textarea-shape-round.sc-ion-textarea-md-h{--border-radius:16px}.sc-ion-textarea-md-s>ion-button[slot=start].button-has-icon-only,.sc-ion-textarea-md-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:8px;--padding-end:8px;--padding-top:8px;--padding-bottom:8px;aspect-ratio:1;min-height:40px}`,q6=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.ionChange=Ze(this,"ionChange",7),this.ionInput=Ze(this,"ionInput",7),this.ionBlur=Ze(this,"ionBlur",7),this.ionFocus=Ze(this,"ionFocus",7),this.inputId=`ion-textarea-${W6++}`,this.helperTextId=`${this.inputId}-helper-text`,this.errorTextId=`${this.inputId}-error-text`,this.didTextareaClearOnEdit=!1,this.inheritedAttributes={},this.hasFocus=!1,this.isInvalid=!1,this.autocapitalize="none",this.autofocus=!1,this.clearOnEdit=!1,this.disabled=!1,this.name=this.inputId,this.readonly=!1,this.required=!1,this.spellcheck=!1,this.autoGrow=!1,this.value="",this.counter=!1,this.labelPlacement="start",this.onInput=t=>{const i=t.target;i&&(this.value=i.value||""),this.emitInputChange(t)},this.onChange=t=>{this.emitValueChange(t)},this.onFocus=t=>{this.hasFocus=!0,this.focusedValue=this.value,this.ionFocus.emit(t)},this.onBlur=t=>{this.hasFocus=!1,this.focusedValue!==this.value&&this.emitValueChange(t),this.didTextareaClearOnEdit=!1,this.ionBlur.emit(t)},this.onKeyDown=t=>{this.checkClearOnEdit(t)},this.onLabelClick=t=>{t.target===t.currentTarget&&t.stopPropagation()}}debounceChanged(){const{ionInput:e,debounce:t,originalIonInput:i}=this;this.ionInput=t===void 0?i??e:py(e,t)}valueChanged(){const e=this.nativeInput,t=this.getValue();e&&e.value!==t&&(e.value=t),this.runAutoGrow()}onDirChanged(e){this.inheritedAttributes=Object.assign(Object.assign({},this.inheritedAttributes),{dir:e}),Ns(this)}onClickCapture(e){const t=this.nativeInput;t&&e.target===t&&(e.stopPropagation(),this.el.click())}connectedCallback(){const{el:e}=this;this.slotMutationController=T2(e,["label","start","end"],()=>Ns(this)),this.notchController=E2(e,()=>this.notchSpacerEl,()=>this.labelSlot),typeof MutationObserver<"u"&&(this.validationObserver=new MutationObserver(()=>{const t=Ff(this.el);this.isInvalid!==t&&(this.isInvalid=t,Ns(this))}),this.validationObserver.observe(e,{attributes:!0,attributeFilter:["class"]})),this.isInvalid=Ff(this.el),this.debounceChanged(),document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:e}))}disconnectedCallback(){document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el})),this.slotMutationController&&(this.slotMutationController.destroy(),this.slotMutationController=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0),this.validationObserver&&(this.validationObserver.disconnect(),this.validationObserver=void 0)}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},zo(this.el)),ec(this.el,["data-form-type","title","tabindex","dir"]))}componentDidLoad(){this.originalIonInput=this.ionInput,this.runAutoGrow()}componentDidRender(){var e;(e=this.notchController)===null||e===void 0||e.calculateNotchWidth()}async setFocus(){this.nativeInput&&this.nativeInput.focus()}async getInputElement(){return this.nativeInput||await new Promise(e=>Fo(this.el,e)),Promise.resolve(this.nativeInput)}emitValueChange(e){const{value:t}=this,i=t==null?t:t.toString();this.focusedValue=i,this.ionChange.emit({value:i,event:e})}emitInputChange(e){const{value:t}=this;this.ionInput.emit({value:t,event:e})}runAutoGrow(){this.nativeInput&&this.autoGrow&&An(()=>{var e;this.textareaWrapper&&(this.textareaWrapper.dataset.replicatedValue=(e=this.value)!==null&&e!==void 0?e:"")})}checkClearOnEdit(e){if(!this.clearOnEdit)return;const i=["Tab","Shift","Meta","Alt","Control"].includes(e.key);!this.didTextareaClearOnEdit&&this.hasValue()&&!i&&(this.value="",this.emitInputChange(e)),i||(this.didTextareaClearOnEdit=!0)}hasValue(){return this.getValue()!==""}getValue(){return this.value||""}renderLabel(){const{label:e}=this;return J("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},e===void 0?J("slot",{name:"label"}):J("div",{class:"label-text"},e))}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return this.label!==void 0||this.labelSlot!==null}renderLabelContainer(){return ut(this)==="md"&&this.fill==="outline"?[J("div",{class:"textarea-outline-container"},J("div",{class:"textarea-outline-start"}),J("div",{class:{"textarea-outline-notch":!0,"textarea-outline-notch-hidden":!this.hasLabel}},J("div",{class:"notch-spacer","aria-hidden":"true",ref:i=>this.notchSpacerEl=i},this.label)),J("div",{class:"textarea-outline-end"})),this.renderLabel()]:this.renderLabel()}renderHintText(){const{helperText:e,errorText:t,helperTextId:i,errorTextId:s,isInvalid:r}=this;return[J("div",{id:i,class:"helper-text","aria-live":"polite"},r?null:e),J("div",{id:s,class:"error-text",role:"alert"},r?t:null)]}getHintTextID(){const{isInvalid:e,helperText:t,errorText:i,helperTextId:s,errorTextId:r}=this;if(e&&i)return r;if(t)return s}renderCounter(){const{counter:e,maxlength:t,counterFormatter:i,value:s}=this;if(!(e!==!0||t===void 0))return J("div",{class:"counter"},k2(s,t,i))}renderBottomContent(){const{counter:e,helperText:t,errorText:i,maxlength:s}=this;if(!(!(t||i)&&!(e===!0&&s!==void 0)))return J("div",{class:"textarea-bottom"},this.renderHintText(),this.renderCounter())}render(){const{inputId:e,disabled:t,fill:i,shape:s,labelPlacement:r,el:o,hasFocus:l}=this,d=ut(this),u=this.getValue(),f=_n("ion-item",this.el),p=d==="md"&&i!=="outline"&&!f,b=this.hasValue(),v=o.querySelector('[slot="start"], [slot="end"]')!==null,y=r==="stacked"||r==="floating"&&(b||l||v);return J(Kt,{key:"a70a62d7aae3831a50acd74f60b930925ada1326",class:ss(this.color,{[d]:!0,"has-value":b,"has-focus":l,"label-floating":y,[`textarea-fill-${i}`]:i!==void 0,[`textarea-shape-${s}`]:s!==void 0,[`textarea-label-placement-${r}`]:!0,"textarea-disabled":t})},J("label",{key:"8a2dd59a60f7469df84018eb0ede3a9ec3862703",class:"textarea-wrapper",htmlFor:e,onClick:this.onLabelClick},this.renderLabelContainer(),J("div",{key:"1bfc368236e3da7a225a45118c27fbfc1fe5fa46",class:"textarea-wrapper-inner"},J("div",{key:"215cbb2635ff52e31a8973376989b85e7245d40f",class:"start-slot-wrapper"},J("slot",{key:"9f6b461cdee9d629deb695d2bea054ece2f32305",name:"start"})),J("div",{key:"c1af35a2d5bc452bebe0b22a26d15ff52b4e9fc8",class:"native-wrapper",ref:w=>this.textareaWrapper=w},J("textarea",Object.assign({key:"69a69b3cf0932baafbe37e6e846f1a571608d3f2",class:"native-textarea",ref:w=>this.nativeInput=w,id:e,disabled:t,autoCapitalize:this.autocapitalize,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,minLength:this.minlength,maxLength:this.maxlength,name:this.name,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,spellcheck:this.spellcheck,cols:this.cols,rows:this.rows,wrap:this.wrap,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeyDown,"aria-describedby":this.getHintTextID(),"aria-invalid":this.isInvalid?"true":void 0},this.inheritedAttributes),u)),J("div",{key:"c053ea8b865d0e29763aed2e4939cc9c9e374c15",class:"end-slot-wrapper"},J("slot",{key:"930aa641833b0df54b9ea10368fc2f46d5f491f6",name:"end"}))),p&&J("div",{key:"8d12597d15f5f429d80e8272ea99e64ed924e482",class:"textarea-highlight"})),this.renderBottomContent())}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],value:["valueChanged"],dir:["onDirChanged"]}}static get style(){return{ios:G6,md:V6}}},[294,"ion-textarea",{color:[513],autocapitalize:[1],autofocus:[4],clearOnEdit:[4,"clear-on-edit"],debounce:[2],disabled:[4],fill:[1],inputmode:[1],enterkeyhint:[1],maxlength:[2],minlength:[2],name:[1],placeholder:[1],readonly:[4],required:[4],spellcheck:[4],cols:[514],rows:[2],wrap:[1],autoGrow:[516,"auto-grow"],value:[1025],counter:[4],counterFormatter:[16],errorText:[1,"error-text"],helperText:[1,"helper-text"],label:[1],labelPlacement:[1,"label-placement"],shape:[1],hasFocus:[32],isInvalid:[32],setFocus:[64],getInputElement:[64]},[[2,"click","onClickCapture"]],{debounce:["debounceChanged"],value:["valueChanged"],dir:["onDirChanged"]}]);let W6=0;function K6(){if(typeof customElements>"u")return;["ion-textarea"].forEach(e=>{switch(e){case"ion-textarea":customElements.get(e)||customElements.define(e,q6);break}})}const Y6=K6;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const X6=N6,Q6=":host{-webkit-box-sizing:content-box !important;box-sizing:content-box !important;display:inline-block;position:relative;max-width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}:host(.ion-focused) input{border:2px solid #5e9ed6}:host(.toggle-disabled){pointer-events:none}input{display:none}.toggle-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.toggle-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.toggle-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.toggle-bottom{padding-top:4px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;font-size:0.75rem;white-space:normal}:host(.toggle-label-placement-stacked) .toggle-bottom{font-size:1rem}.toggle-bottom .error-text{display:none;color:var(--ion-color-danger, #c5000f)}.toggle-bottom .helper-text{display:block;color:var(--ion-color-step-700, var(--ion-text-color-step-300, #4d4d4d))}:host(.ion-touched.ion-invalid) .toggle-bottom .error-text{display:block}:host(.ion-touched.ion-invalid) .toggle-bottom .helper-text{display:none}:host(.toggle-label-placement-start) .toggle-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.toggle-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.toggle-label-placement-end) .toggle-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse;-ms-flex-pack:start;justify-content:start}:host(.toggle-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.toggle-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.toggle-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.toggle-label-placement-stacked) .toggle-wrapper{-ms-flex-direction:column;flex-direction:column;text-align:center}:host(.toggle-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.toggle-label-placement-stacked.toggle-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.toggle-label-placement-stacked.toggle-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).toggle-label-placement-stacked.toggle-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.toggle-label-placement-stacked.toggle-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.toggle-label-placement-stacked.toggle-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.toggle-label-placement-stacked.toggle-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).toggle-label-placement-stacked.toggle-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.toggle-label-placement-stacked.toggle-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host(.toggle-justify-space-between) .toggle-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.toggle-justify-start) .toggle-wrapper{-ms-flex-pack:start;justify-content:start}:host(.toggle-justify-end) .toggle-wrapper{-ms-flex-pack:end;justify-content:end}:host(.toggle-alignment-start) .toggle-wrapper{-ms-flex-align:start;align-items:start}:host(.toggle-alignment-center) .toggle-wrapper{-ms-flex-align:center;align-items:center}:host(.toggle-justify-space-between),:host(.toggle-justify-start),:host(.toggle-justify-end),:host(.toggle-alignment-start),:host(.toggle-alignment-center){display:block}.toggle-icon-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;-webkit-transition:var(--handle-transition);transition:var(--handle-transition);will-change:transform}.toggle-icon{border-radius:var(--border-radius);display:block;position:relative;width:100%;height:100%;background:var(--track-background);overflow:inherit}:host(.toggle-checked) .toggle-icon{background:var(--track-background-checked)}.toggle-inner{border-radius:var(--handle-border-radius);position:absolute;left:var(--handle-spacing);width:var(--handle-width);height:var(--handle-height);max-height:var(--handle-max-height);-webkit-transition:var(--handle-transition);transition:var(--handle-transition);background:var(--handle-background);-webkit-box-shadow:var(--handle-box-shadow);box-shadow:var(--handle-box-shadow);contain:strict}:host(.toggle-ltr) .toggle-inner{left:var(--handle-spacing)}:host(.toggle-rtl) .toggle-inner{right:var(--handle-spacing)}:host(.toggle-ltr.toggle-checked) .toggle-icon-wrapper{-webkit-transform:translate3d(calc(100% - var(--handle-width)), 0, 0);transform:translate3d(calc(100% - var(--handle-width)), 0, 0)}:host(.toggle-rtl.toggle-checked) .toggle-icon-wrapper{-webkit-transform:translate3d(calc(-100% + var(--handle-width)), 0, 0);transform:translate3d(calc(-100% + var(--handle-width)), 0, 0)}:host(.toggle-checked) .toggle-inner{background:var(--handle-background-checked)}:host(.toggle-ltr.toggle-checked) .toggle-inner{-webkit-transform:translate3d(calc(var(--handle-spacing) * -2), 0, 0);transform:translate3d(calc(var(--handle-spacing) * -2), 0, 0)}:host(.toggle-rtl.toggle-checked) .toggle-inner{-webkit-transform:translate3d(calc(var(--handle-spacing) * 2), 0, 0);transform:translate3d(calc(var(--handle-spacing) * 2), 0, 0)}:host{--track-background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.088);--track-background-checked:var(--ion-color-primary, #0054e9);--border-radius:15.5px;--handle-background:#ffffff;--handle-background-checked:#ffffff;--handle-border-radius:25.5px;--handle-box-shadow:0 3px 4px rgba(0, 0, 0, 0.06), 0 3px 8px rgba(0, 0, 0, 0.06);--handle-height:calc(31px - (2px * 2));--handle-max-height:calc(100% - var(--handle-spacing) * 2);--handle-width:calc(31px - (2px * 2));--handle-spacing:2px;--handle-transition:transform 300ms, width 120ms ease-in-out 80ms, left 110ms ease-in-out 80ms, right 110ms ease-in-out 80ms}.native-wrapper .toggle-icon{width:51px;height:31px;overflow:hidden}:host(.ion-color.toggle-checked) .toggle-icon{background:var(--ion-color-base)}:host(.toggle-activated) .toggle-switch-icon{opacity:0}.toggle-icon{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);-webkit-transition:background-color 300ms;transition:background-color 300ms}.toggle-inner{will-change:transform}.toggle-switch-icon{position:absolute;top:50%;width:11px;height:11px;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-transition:opacity 300ms, color 300ms;transition:opacity 300ms, color 300ms}.toggle-switch-icon{position:absolute;color:var(--ion-color-dark, #222428)}:host(.toggle-ltr) .toggle-switch-icon{right:6px}:host(.toggle-rtl) .toggle-switch-icon{right:initial;left:6px;}:host(.toggle-checked) .toggle-switch-icon.toggle-switch-icon-checked{color:var(--ion-color-contrast, #fff)}:host(.toggle-checked) .toggle-switch-icon:not(.toggle-switch-icon-checked){opacity:0}.toggle-switch-icon-checked{position:absolute;width:15px;height:15px;-webkit-transform:translateY(-50%) rotate(90deg);transform:translateY(-50%) rotate(90deg)}:host(.toggle-ltr) .toggle-switch-icon-checked{right:initial;left:4px;}:host(.toggle-rtl) .toggle-switch-icon-checked{right:4px}:host(.toggle-activated) .toggle-icon::before,:host(.toggle-checked) .toggle-icon::before{-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0)}:host(.toggle-activated.toggle-checked) .toggle-inner::before{-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0)}:host(.toggle-activated) .toggle-inner{width:calc(var(--handle-width) + 6px)}:host(.toggle-ltr.toggle-activated.toggle-checked) .toggle-icon-wrapper{-webkit-transform:translate3d(calc(100% - var(--handle-width) - 6px), 0, 0);transform:translate3d(calc(100% - var(--handle-width) - 6px), 0, 0)}:host(.toggle-rtl.toggle-activated.toggle-checked) .toggle-icon-wrapper{-webkit-transform:translate3d(calc(-100% + var(--handle-width) + 6px), 0, 0);transform:translate3d(calc(-100% + var(--handle-width) + 6px), 0, 0)}:host(.toggle-disabled){opacity:0.3}",Z6=":host{-webkit-box-sizing:content-box !important;box-sizing:content-box !important;display:inline-block;position:relative;max-width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}:host(.ion-focused) input{border:2px solid #5e9ed6}:host(.toggle-disabled){pointer-events:none}input{display:none}.toggle-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.toggle-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.toggle-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.toggle-bottom{padding-top:4px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;font-size:0.75rem;white-space:normal}:host(.toggle-label-placement-stacked) .toggle-bottom{font-size:1rem}.toggle-bottom .error-text{display:none;color:var(--ion-color-danger, #c5000f)}.toggle-bottom .helper-text{display:block;color:var(--ion-color-step-700, var(--ion-text-color-step-300, #4d4d4d))}:host(.ion-touched.ion-invalid) .toggle-bottom .error-text{display:block}:host(.ion-touched.ion-invalid) .toggle-bottom .helper-text{display:none}:host(.toggle-label-placement-start) .toggle-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.toggle-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.toggle-label-placement-end) .toggle-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse;-ms-flex-pack:start;justify-content:start}:host(.toggle-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.toggle-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.toggle-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.toggle-label-placement-stacked) .toggle-wrapper{-ms-flex-direction:column;flex-direction:column;text-align:center}:host(.toggle-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.toggle-label-placement-stacked.toggle-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.toggle-label-placement-stacked.toggle-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).toggle-label-placement-stacked.toggle-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.toggle-label-placement-stacked.toggle-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.toggle-label-placement-stacked.toggle-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.toggle-label-placement-stacked.toggle-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).toggle-label-placement-stacked.toggle-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.toggle-label-placement-stacked.toggle-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host(.toggle-justify-space-between) .toggle-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.toggle-justify-start) .toggle-wrapper{-ms-flex-pack:start;justify-content:start}:host(.toggle-justify-end) .toggle-wrapper{-ms-flex-pack:end;justify-content:end}:host(.toggle-alignment-start) .toggle-wrapper{-ms-flex-align:start;align-items:start}:host(.toggle-alignment-center) .toggle-wrapper{-ms-flex-align:center;align-items:center}:host(.toggle-justify-space-between),:host(.toggle-justify-start),:host(.toggle-justify-end),:host(.toggle-alignment-start),:host(.toggle-alignment-center){display:block}.toggle-icon-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;-webkit-transition:var(--handle-transition);transition:var(--handle-transition);will-change:transform}.toggle-icon{border-radius:var(--border-radius);display:block;position:relative;width:100%;height:100%;background:var(--track-background);overflow:inherit}:host(.toggle-checked) .toggle-icon{background:var(--track-background-checked)}.toggle-inner{border-radius:var(--handle-border-radius);position:absolute;left:var(--handle-spacing);width:var(--handle-width);height:var(--handle-height);max-height:var(--handle-max-height);-webkit-transition:var(--handle-transition);transition:var(--handle-transition);background:var(--handle-background);-webkit-box-shadow:var(--handle-box-shadow);box-shadow:var(--handle-box-shadow);contain:strict}:host(.toggle-ltr) .toggle-inner{left:var(--handle-spacing)}:host(.toggle-rtl) .toggle-inner{right:var(--handle-spacing)}:host(.toggle-ltr.toggle-checked) .toggle-icon-wrapper{-webkit-transform:translate3d(calc(100% - var(--handle-width)), 0, 0);transform:translate3d(calc(100% - var(--handle-width)), 0, 0)}:host(.toggle-rtl.toggle-checked) .toggle-icon-wrapper{-webkit-transform:translate3d(calc(-100% + var(--handle-width)), 0, 0);transform:translate3d(calc(-100% + var(--handle-width)), 0, 0)}:host(.toggle-checked) .toggle-inner{background:var(--handle-background-checked)}:host(.toggle-ltr.toggle-checked) .toggle-inner{-webkit-transform:translate3d(calc(var(--handle-spacing) * -2), 0, 0);transform:translate3d(calc(var(--handle-spacing) * -2), 0, 0)}:host(.toggle-rtl.toggle-checked) .toggle-inner{-webkit-transform:translate3d(calc(var(--handle-spacing) * 2), 0, 0);transform:translate3d(calc(var(--handle-spacing) * 2), 0, 0)}:host{--track-background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.39);--track-background-checked:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.5);--border-radius:14px;--handle-background:#ffffff;--handle-background-checked:var(--ion-color-primary, #0054e9);--handle-border-radius:50%;--handle-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);--handle-width:20px;--handle-height:20px;--handle-max-height:calc(100% + 6px);--handle-spacing:0;--handle-transition:transform 160ms cubic-bezier(0.4, 0, 0.2, 1), background-color 160ms cubic-bezier(0.4, 0, 0.2, 1)}.native-wrapper .toggle-icon{width:36px;height:14px}:host(.ion-color.toggle-checked) .toggle-icon{background:rgba(var(--ion-color-base-rgb), 0.5)}:host(.ion-color.toggle-checked) .toggle-inner{background:var(--ion-color-base)}:host(.toggle-checked) .toggle-inner{color:var(--ion-color-contrast, #fff)}.toggle-icon{-webkit-transition:background-color 160ms;transition:background-color 160ms}.toggle-inner{will-change:background-color, transform;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;color:#000}.toggle-inner .toggle-switch-icon{-webkit-padding-start:1px;padding-inline-start:1px;-webkit-padding-end:1px;padding-inline-end:1px;padding-top:1px;padding-bottom:1px;width:100%;height:100%}:host(.toggle-disabled){opacity:0.38}",J6=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.ionChange=Ze(this,"ionChange",7),this.ionFocus=Ze(this,"ionFocus",7),this.ionBlur=Ze(this,"ionBlur",7),this.inputId=`ion-tg-${t$++}`,this.inputLabelId=`${this.inputId}-lbl`,this.helperTextId=`${this.inputId}-helper-text`,this.errorTextId=`${this.inputId}-error-text`,this.lastDrag=0,this.inheritedAttributes={},this.didLoad=!1,this.activated=!1,this.name=this.inputId,this.checked=!1,this.disabled=!1,this.value="on",this.enableOnOffLabels=bt.get("toggleOnOffLabels"),this.labelPlacement="start",this.required=!1,this.setupGesture=async()=>{const{toggleTrack:t}=this;t&&(this.gesture=(await jn(async()=>{const{createGesture:i}=await Promise.resolve().then(()=>my);return{createGesture:i}},void 0)).createGesture({el:t,gestureName:"toggle",gesturePriority:100,threshold:5,passive:!1,onStart:()=>this.onStart(),onMove:i=>this.onMove(i),onEnd:i=>this.onEnd(i)}),this.disabledChanged())},this.onKeyDown=t=>{t.key===" "&&(t.preventDefault(),this.disabled||this.toggleChecked())},this.onClick=t=>{const i=Dr("ios");this.disabled||(t.preventDefault(),this.lastDrag+300<Date.now()&&(this.toggleChecked(),i&&fT()))},this.onDivLabelClick=t=>{t.stopPropagation()},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.getSwitchLabelIcon=(t,i)=>t==="md"?i?K3:uT:i?uT:Z3}disabledChanged(){this.gesture&&this.gesture.enable(!this.disabled)}toggleChecked(){const{checked:e,value:t}=this,i=!e;this.checked=i,this.ionChange.emit({checked:i,value:t})}async connectedCallback(){this.didLoad&&this.setupGesture()}componentDidLoad(){this.setupGesture(),this.didLoad=!0}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}componentWillLoad(){this.inheritedAttributes=Object.assign({},zo(this.el))}onStart(){this.activated=!0,this.setFocus()}onMove(e){e$(Ll(this.el),this.checked,e.deltaX,-10)&&(this.toggleChecked(),fT())}onEnd(e){this.activated=!1,this.lastDrag=Date.now(),e.event.preventDefault(),e.event.stopImmediatePropagation()}getValue(){return this.value||""}setFocus(){this.el.focus()}renderOnOffSwitchLabels(e,t){const i=this.getSwitchLabelIcon(e,t);return J("ion-icon",{class:{"toggle-switch-icon":!0,"toggle-switch-icon-checked":t},icon:i,"aria-hidden":"true"})}renderToggleControl(){const e=ut(this),{enableOnOffLabels:t,checked:i}=this;return J("div",{class:"toggle-icon",part:"track",ref:s=>this.toggleTrack=s},t&&e==="ios"&&[this.renderOnOffSwitchLabels(e,!0),this.renderOnOffSwitchLabels(e,!1)],J("div",{class:"toggle-icon-wrapper"},J("div",{class:"toggle-inner",part:"handle"},t&&e==="md"&&this.renderOnOffSwitchLabels(e,i))))}get hasLabel(){return this.el.textContent!==""}getHintTextID(){const{el:e,helperText:t,errorText:i,helperTextId:s,errorTextId:r}=this;if(e.classList.contains("ion-touched")&&e.classList.contains("ion-invalid")&&i)return r;if(t)return s}renderHintText(){const{helperText:e,errorText:t,helperTextId:i,errorTextId:s}=this;if(e||t)return J("div",{class:"toggle-bottom"},J("div",{id:i,class:"helper-text",part:"supporting-text helper-text"},e),J("div",{id:s,class:"error-text",part:"supporting-text error-text"},t))}render(){const{activated:e,alignment:t,checked:i,color:s,disabled:r,el:o,errorTextId:l,hasLabel:d,inheritedAttributes:u,inputId:f,inputLabelId:p,justify:b,labelPlacement:v,name:y,required:w}=this,E=ut(this),T=this.getValue(),k=Ll(o)?"rtl":"ltr";return OC(!0,o,y,i?T:"",r),J(Kt,{key:"17bbbc8d229868e5c872b2bc5a3faf579780c5e0",role:"switch","aria-checked":`${i}`,"aria-describedby":this.getHintTextID(),"aria-invalid":this.getHintTextID()===l,onClick:this.onClick,"aria-labelledby":d?p:null,"aria-label":u["aria-label"]||null,"aria-disabled":r?"true":null,tabindex:r?void 0:0,onKeyDown:this.onKeyDown,onFocus:this.onFocus,onBlur:this.onBlur,class:ss(s,{[E]:!0,"in-item":_n("ion-item",o),"toggle-activated":e,"toggle-checked":i,"toggle-disabled":r,[`toggle-justify-${b}`]:b!==void 0,[`toggle-alignment-${t}`]:t!==void 0,[`toggle-label-placement-${v}`]:!0,[`toggle-${k}`]:!0})},J("label",{key:"673625b62a2c909e95dccb642c91312967a6cd1c",class:"toggle-wrapper",htmlFor:f},J("input",Object.assign({key:"7dc3f357b4708116663970047765da9f8f845bf0",type:"checkbox",role:"switch","aria-checked":`${i}`,checked:i,disabled:r,id:f,required:w},u)),J("div",{key:"8f1c6a182031e8cbc6727e5f4ac0e00ad4247447",class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!d},part:"label",id:p,onClick:this.onDivLabelClick},J("slot",{key:"8322b9d54dc7edeb4e16fefcde9f7ebca8d5c3e1"}),this.renderHintText()),J("div",{key:"fe6984143db817a7b3020a3f57cf5418fc3dcc0e",class:"native-wrapper"},this.renderToggleControl())))}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return{ios:Q6,md:Z6}}},[289,"ion-toggle",{color:[513],name:[1],checked:[1028],disabled:[4],errorText:[1,"error-text"],helperText:[1,"helper-text"],value:[1],enableOnOffLabels:[4,"enable-on-off-labels"],labelPlacement:[1,"label-placement"],justify:[1],alignment:[1],required:[4],activated:[32]},void 0,{disabled:["disabledChanged"]}]),e$=(n,e,t,i)=>e?!n&&i>t||n&&10<t:!n&&10<t||n&&i>t;let t$=0;function i$(){if(typeof customElements>"u")return;["ion-toggle","ion-icon"].forEach(e=>{switch(e){case"ion-toggle":customElements.get(e)||customElements.define(e,J6);break;case"ion-icon":customElements.get(e)||Ap();break}})}const n$=i$;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const s$=F6;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const r$=MM;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const o$=":host{--background:var(--ion-color-primary, #0054e9);--color:var(--ion-color-primary-contrast, #fff);background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}.button-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-webkit-padding-start:0.7em;padding-inline-start:0.7em;-webkit-padding-end:0.7em;padding-inline-end:0.7em;padding-top:0;padding-bottom:0;display:inline-block;position:relative;width:100%;height:100%;border:0;outline:none;background:transparent;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box}.button-inner{display:-ms-flexbox;display:flex;-ms-flex-flow:column nowrap;flex-flow:column nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}.horizontal-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%}::slotted(*){-ms-flex-negative:0;flex-shrink:0}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:5px;margin-inline-end:5px;margin-top:0;margin-bottom:0}::slotted([slot=end]){-webkit-margin-start:5px;margin-inline-start:5px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}::slotted([slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px;margin-top:0;margin-bottom:0;min-width:0.9em;font-size:1.8em}:host(.item-option-expandable){-ms-flex-negative:0;flex-shrink:0;-webkit-transition-duration:0;transition-duration:0;-webkit-transition-property:none;transition-property:none;-webkit-transition-timing-function:cubic-bezier(0.65, 0.05, 0.36, 1);transition-timing-function:cubic-bezier(0.65, 0.05, 0.36, 1)}:host(.item-option-disabled){pointer-events:none}:host(.item-option-disabled) .button-native{cursor:default;opacity:0.5;pointer-events:none}:host{font-size:clamp(16px, 1rem, 35.2px)}:host(.ion-activated){background:var(--ion-color-primary-shade, #004acd)}:host(.ion-color.ion-activated){background:var(--ion-color-shade)}",a$=":host{--background:var(--ion-color-primary, #0054e9);--color:var(--ion-color-primary-contrast, #fff);background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}.button-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-webkit-padding-start:0.7em;padding-inline-start:0.7em;-webkit-padding-end:0.7em;padding-inline-end:0.7em;padding-top:0;padding-bottom:0;display:inline-block;position:relative;width:100%;height:100%;border:0;outline:none;background:transparent;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box}.button-inner{display:-ms-flexbox;display:flex;-ms-flex-flow:column nowrap;flex-flow:column nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}.horizontal-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%}::slotted(*){-ms-flex-negative:0;flex-shrink:0}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:5px;margin-inline-end:5px;margin-top:0;margin-bottom:0}::slotted([slot=end]){-webkit-margin-start:5px;margin-inline-start:5px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}::slotted([slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px;margin-top:0;margin-bottom:0;min-width:0.9em;font-size:1.8em}:host(.item-option-expandable){-ms-flex-negative:0;flex-shrink:0;-webkit-transition-duration:0;transition-duration:0;-webkit-transition-property:none;transition-property:none;-webkit-transition-timing-function:cubic-bezier(0.65, 0.05, 0.36, 1);transition-timing-function:cubic-bezier(0.65, 0.05, 0.36, 1)}:host(.item-option-disabled){pointer-events:none}:host(.item-option-disabled) .button-native{cursor:default;opacity:0.5;pointer-events:none}:host{font-size:0.875rem;font-weight:500;text-transform:uppercase}",l$=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.disabled=!1,this.expandable=!1,this.type="button",this.onClick=t=>{t.target.closest("ion-item-option")&&t.preventDefault()}}render(){const{disabled:e,expandable:t,href:i}=this,s=i===void 0?"button":"a",r=ut(this),o=s==="button"?{type:this.type}:{download:this.download,href:this.href,target:this.target};return J(Kt,{key:"189a0040b97163b2336bf216baa71d584c5923a8",onClick:this.onClick,class:ss(this.color,{[r]:!0,"item-option-disabled":e,"item-option-expandable":t,"ion-activatable":!0})},J(s,Object.assign({key:"5a7140eb99da5ec82fe2ea3ea134513130763399"},o,{class:"button-native",part:"native",disabled:e}),J("span",{key:"9b8577e612706b43e575c9a20f2f9d35c0d1bcb1",class:"button-inner"},J("slot",{key:"9acb82f04e4822bfaa363cc2c4d29d5c0fec0ad6",name:"top"}),J("div",{key:"66f5fb4fdd0c39f205574c602c793dcf109c7a17",class:"horizontal-wrapper"},J("slot",{key:"3761a32bca7c6c41b7eb394045497cfde181a62a",name:"start"}),J("slot",{key:"a96a568955cf6962883dc6771726d3d07462da00",name:"icon-only"}),J("slot",{key:"af5dfe5eb41456b9359bafe3615b576617ed7b57"}),J("slot",{key:"00426958066ab7b949ff966fabad5cf8a0b54079",name:"end"})),J("slot",{key:"ae66c8bd536a9f27865f49240980d7b4b831b229",name:"bottom"})),r==="md"&&J("ion-ripple-effect",{key:"30df6c935ef8a3f28a6bc1f3bb162ca4f80aaf26"})))}get el(){return this}static get style(){return{ios:o$,md:a$}}},[289,"ion-item-option",{color:[513],disabled:[4],download:[1],expandable:[4],href:[1],rel:[1],target:[1],type:[1]}]),c$=l$;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const d$=l6;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const u$=r6;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const h$=R6,f$="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}",p$=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost()}componentDidLoad(){g$(async()=>{const e=Dr(window,"hybrid");if(bt.getBoolean("_testing")||jn(()=>import("./index7-BkA-Pm1X.js"),[]).then(s=>s.startTapClick(bt)),bt.getBoolean("statusTap",e)&&jn(()=>import("./status-tap-Bn3rhodO.js"),[]).then(s=>s.startStatusTap()),bt.getBoolean("inputShims",m$())){const s=Dr(window,"ios")?"ios":"android";jn(()=>import("./input-shims-DQDPYYaZ.js"),[]).then(r=>r.startInputShims(bt,s))}const t=await jn(()=>Promise.resolve().then(()=>N3),void 0),i=e||wd();bt.getBoolean("hardwareBackButton",i)?t.startHardwareBackButton():(wd()&&zn("[ion-app] - experimentalCloseWatcher was set to `true`, but hardwareBackButton was set to `false`. Both config options must be `true` for the Close Watcher API to be used."),t.blockHardwareBackButton()),typeof window<"u"&&jn(()=>Promise.resolve().then(()=>m6),void 0).then(s=>s.startKeyboardAssist(window)),jn(()=>import("./focus-visible-supuXXMI.js"),[]).then(s=>this.focusVisible=s.startFocusVisible())})}async setFocus(e){this.focusVisible&&this.focusVisible.setFocus(e)}render(){const e=ut(this);return J(Kt,{key:"9be440c65819e4fa67c2c3c6477ab40b3ad3eed3",class:{[e]:!0,"ion-page":!0,"force-statusbar-padding":bt.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return f$}},[256,"ion-app",{setFocus:[64]}]),m$=()=>!!(Dr(window,"ios")&&Dr(window,"mobile")||Dr(window,"android")&&Dr(window,"mobileweb")),g$=n=>{"requestIdleCallback"in window?window.requestIdleCallback(n):setTimeout(n,32)};function b$(){if(typeof customElements>"u")return;["ion-app"].forEach(e=>{switch(e){case"ion-app":customElements.get(e)||customElements.define(e,p$);break}})}const v$=b$;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const y$=':host{--background:transparent;--color-focused:currentColor;--color-hover:currentColor;--icon-margin-top:0;--icon-margin-bottom:0;--icon-padding-top:0;--icon-padding-end:0;--icon-padding-bottom:0;--icon-padding-start:0;--margin-top:0;--margin-end:0;--margin-bottom:0;--margin-start:0;--min-width:auto;--min-height:auto;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--opacity:1;--ripple-color:currentColor;--transition:background-color, opacity 100ms linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-kerning:none;font-kerning:none}ion-ripple-effect{color:var(--ripple-color)}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.show-back-button){display:block}:host(.back-button-disabled){cursor:default;opacity:0.5;pointer-events:none}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;opacity:var(--opacity);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{-webkit-padding-start:var(--icon-padding-start);padding-inline-start:var(--icon-padding-start);-webkit-padding-end:var(--icon-padding-end);padding-inline-end:var(--icon-padding-end);padding-top:var(--icon-padding-top);padding-bottom:var(--icon-padding-bottom);-webkit-margin-start:var(--icon-margin-start);margin-inline-start:var(--icon-margin-start);-webkit-margin-end:var(--icon-margin-end);margin-inline-end:var(--icon-margin-end);margin-top:var(--icon-margin-top);margin-bottom:var(--icon-margin-bottom);display:inherit;font-size:var(--icon-font-size);font-weight:var(--icon-font-weight);pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--background-hover:transparent;--background-hover-opacity:1;--background-focused:currentColor;--background-focused-opacity:.1;--border-radius:4px;--color:var(--ion-color-primary, #0054e9);--icon-margin-end:1px;--icon-margin-start:-4px;--icon-font-size:1.6em;--min-height:32px;font-size:clamp(17px, 1.0625rem, 21.998px)}.button-native{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:visible;z-index:99}:host(.ion-activated) .button-native{opacity:0.4}@media (any-hover: hover){:host(:hover){opacity:0.6}}',x$=':host{--background:transparent;--color-focused:currentColor;--color-hover:currentColor;--icon-margin-top:0;--icon-margin-bottom:0;--icon-padding-top:0;--icon-padding-end:0;--icon-padding-bottom:0;--icon-padding-start:0;--margin-top:0;--margin-end:0;--margin-bottom:0;--margin-start:0;--min-width:auto;--min-height:auto;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--opacity:1;--ripple-color:currentColor;--transition:background-color, opacity 100ms linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-kerning:none;font-kerning:none}ion-ripple-effect{color:var(--ripple-color)}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.show-back-button){display:block}:host(.back-button-disabled){cursor:default;opacity:0.5;pointer-events:none}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;opacity:var(--opacity);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{-webkit-padding-start:var(--icon-padding-start);padding-inline-start:var(--icon-padding-start);-webkit-padding-end:var(--icon-padding-end);padding-inline-end:var(--icon-padding-end);padding-top:var(--icon-padding-top);padding-bottom:var(--icon-padding-bottom);-webkit-margin-start:var(--icon-margin-start);margin-inline-start:var(--icon-margin-start);-webkit-margin-end:var(--icon-margin-end);margin-inline-end:var(--icon-margin-end);margin-top:var(--icon-margin-top);margin-bottom:var(--icon-margin-bottom);display:inherit;font-size:var(--icon-font-size);font-weight:var(--icon-font-weight);pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--border-radius:4px;--background-focused:currentColor;--background-focused-opacity:.12;--background-hover:currentColor;--background-hover-opacity:0.04;--color:currentColor;--icon-margin-end:0;--icon-margin-start:0;--icon-font-size:1.5rem;--icon-font-weight:normal;--min-height:32px;--min-width:44px;--padding-start:12px;--padding-end:12px;font-size:0.875rem;font-weight:500;text-transform:uppercase}:host(.back-button-has-icon-only){--border-radius:50%;min-width:48px;min-height:48px;aspect-ratio:1/1}.button-native{-webkit-box-shadow:none;box-shadow:none}.button-text{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:0;padding-bottom:0}ion-icon{line-height:0.67;text-align:start}@media (any-hover: hover){:host(.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}',w$=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.inheritedAttributes={},this.disabled=!1,this.type="button",this.onClick=async t=>{const i=this.el.closest("ion-nav");return t.preventDefault(),i&&await i.canGoBack()?i.pop({animationBuilder:this.routerAnimation,skipIfBusy:!0}):vy(this.defaultHref,t,"back",this.routerAnimation)}}componentWillLoad(){this.inheritedAttributes=zo(this.el),this.defaultHref===void 0&&(this.defaultHref=bt.get("backButtonDefaultHref"))}get backButtonIcon(){const e=this.icon;return e??(ut(this)==="ios"?bt.get("backButtonIcon",Y3):bt.get("backButtonIcon",W3))}get backButtonText(){const e=ut(this)==="ios"?"Back":null;return this.text!=null?this.text:bt.get("backButtonText",e)}get hasIconOnly(){return this.backButtonIcon&&!this.backButtonText}get rippleType(){return this.hasIconOnly?"unbounded":"bounded"}render(){const{color:e,defaultHref:t,disabled:i,type:s,hasIconOnly:r,backButtonIcon:o,backButtonText:l,icon:d,inheritedAttributes:u}=this,f=t!==void 0,p=ut(this),b=u["aria-label"]||l||"back";return J(Kt,{key:"5466624a10f1ab56f5469e6dc07080303880f2fe",onClick:this.onClick,class:ss(e,{[p]:!0,button:!0,"back-button-disabled":i,"back-button-has-icon-only":r,"in-toolbar":_n("ion-toolbar",this.el),"in-toolbar-color":_n("ion-toolbar[color]",this.el),"ion-activatable":!0,"ion-focusable":!0,"show-back-button":f})},J("button",{key:"63bc75ef0ad7cc9fb79e58217a3314b20acd73e3",type:s,disabled:i,class:"button-native",part:"native","aria-label":b},J("span",{key:"5d3eacbd11af2245c6e1151cab446a0d96559ad8",class:"button-inner"},o&&J("ion-icon",{key:"6439af0ae463764174e7d3207f02267811df666d",part:"icon",icon:o,"aria-hidden":"true",lazy:!1,"flip-rtl":d===void 0}),l&&J("span",{key:"8ee89fb18dfdb5b75948a8b197ff4cdbc008742f",part:"text","aria-hidden":"true",class:"button-text"},l)),p==="md"&&J("ion-ripple-effect",{key:"63803a884998bc73bea5afe0b2a0a14e3fa4d6bf",type:this.rippleType})))}get el(){return this}static get style(){return{ios:y$,md:x$}}},[289,"ion-back-button",{color:[513],defaultHref:[1025,"default-href"],disabled:[516],icon:[1],text:[1],type:[1],routerAnimation:[16]}]);function S$(){if(typeof customElements>"u")return;["ion-back-button","ion-icon","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-back-button":customElements.get(e)||customElements.define(e,w$);break;case"ion-icon":customElements.get(e)||Ap();break;case"ion-ripple-effect":customElements.get(e)||yy();break}})}const E$=S$,T$=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}",k$=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Ze(this,"ionNavWillLoad",7),this.ionNavWillChange=Ze(this,"ionNavWillChange",3),this.ionNavDidChange=Ze(this,"ionNavDidChange",3),this.lockController=xy(),this.gestureOrAnimationInProgress=!1,this.mode=ut(this),this.animated=!0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(this.swipeHandler!==void 0)}async connectedCallback(){const e=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await jn(async()=>{const{createSwipeBackGesture:t}=await import("./swipe-back-Cy8UdeB3.js");return{createSwipeBackGesture:t}},[])).createSwipeBackGesture(this.el,()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart(),()=>e(),t=>{var i;return(i=this.ani)===null||i===void 0?void 0:i.progressStep(t)},(t,i,s)=>{if(this.ani){this.ani.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(t)},{oneTimeCallback:!0});let r=t?-.001:.001;t?r+=Gl([0,0],[.32,.72],[0,1],[1,1],i)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),r+=Gl([0,0],[1,0],[.68,.28],[1,1],i)[0]),this.ani.progressEnd(t?1:0,r,s)}else this.gestureOrAnimationInProgress=!1}),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(e,t,i){const s=await this.lockController.lock();let r=!1;try{r=await this.transition(e,t,i)}catch(o){Hr("[ion-router-outlet] - Exception in commit:",o)}return s(),r}async setRouteId(e,t,i,s){return{changed:await this.setRoot(e,t,{duration:i==="root"?0:void 0,direction:i==="back"?"back":"forward",animationBuilder:s}),element:this.activeEl}}async getRouteId(){const e=this.activeEl;return e?{id:e.tagName,element:e,params:this.activeParams}:void 0}async setRoot(e,t,i){if(this.activeComponent===e&&NC(t,this.activeParams))return!1;const s=this.activeEl,r=await _p(this.delegate,this.el,e,["ion-page","ion-page-invisible"],t);return this.activeComponent=e,this.activeEl=r,this.activeParams=t,await this.commit(r,s,i),await ZC(this.delegate,s),!0}async transition(e,t,i={}){if(t===e)return!1;this.ionNavWillChange.emit();const{el:s,mode:r}=this,o=this.animated&&bt.getBoolean("animated",!0),l=i.animationBuilder||this.animation||bt.get("navAnimation");return await FC(Object.assign(Object.assign({mode:r,animated:o,enteringEl:e,leavingEl:t,baseEl:s,deepWait:Cf(s),progressCallback:i.progressAnimation?d=>{d!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,d.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),d.progressEnd(0,0,0)):this.ani=d}:void 0},i),{animationBuilder:l})),this.ionNavDidChange.emit(),!0}render(){return J("slot",{key:"84b50f1155b0d780dff802ee13223287259fd525"})}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return T$}},[257,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]},void 0,{swipeHandler:["swipeHandlerChanged"]}]);function _$(){if(typeof customElements>"u")return;["ion-router-outlet"].forEach(e=>{switch(e){case"ion-router-outlet":customElements.get(e)||customElements.define(e,k$);break}})}const A$=_$;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const C$=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, var(--ion-background-color-step-50, #f7f7f7)));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.2)))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, var(--ion-text-color-step-400, #666666)));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #0054e9));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",I$=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.07)))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, var(--ion-text-color-step-350, #595959)));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #0054e9));height:56px}",R$=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=Ze(this,"ionTabBarChanged",7),this.ionTabBarLoaded=Ze(this,"ionTabBarLoaded",7),this.keyboardCtrl=null,this.didLoad=!1,this.keyboardVisible=!1,this.translucent=!1}selectedTabChanged(){this.didLoad&&this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentDidLoad(){this.ionTabBarLoaded.emit(),this.didLoad=!0,this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}async connectedCallback(){this.keyboardCtrl=await UM(async(e,t)=>{e===!1&&t!==void 0&&await t,this.keyboardVisible=e})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}render(){const{color:e,translucent:t,keyboardVisible:i}=this,s=ut(this),r=i&&this.el.getAttribute("slot")!=="top";return J(Kt,{key:"388ec37ce308035bab78d6c9a016bb616e9517a9",role:"tablist","aria-hidden":r?"true":null,class:ss(e,{[s]:!0,"tab-bar-translucent":t,"tab-bar-hidden":r})},J("slot",{key:"ce10ade2b86725e24f3254516483eeedd8ecb16a"}))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:C$,md:I$}}},[289,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]},void 0,{selectedTab:["selectedTabChanged"]}]);function L$(){if(typeof customElements>"u")return;["ion-tab-bar"].forEach(e=>{switch(e){case"ion-tab-bar":customElements.get(e)||customElements.define(e,R$);break}})}const D$=L$;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const O$=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:24px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){font-size:30px}',N$=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}',P$=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=Ze(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.disabled=!1,this.selected=!1,this.onKeyUp=t=>{(t.key==="Enter"||t.key===" ")&&this.selectTab(t)},this.onClick=t=>{this.selectTab(t)}}onTabBarChanged(e){const t=e.target,i=this.el.parentElement;(e.composedPath().includes(i)||t?.contains(this.el))&&(this.selected=this.tab===e.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},ec(this.el,["aria-label"])),this.layout===void 0&&(this.layout=bt.get("tabButtonLayout","icon-top"))}selectTab(e){this.tab!==void 0&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:e,hasIcon:t,hasLabel:i,href:s,rel:r,target:o,layout:l,selected:d,tab:u,inheritedAttributes:f}=this,p=ut(this),b={download:this.download,href:s,rel:r,target:o};return J(Kt,{key:"ce9d29ced0c781d6b2fa62cd5feb801c11fc42e8",onClick:this.onClick,onKeyup:this.onKeyUp,id:u!==void 0?`tab-button-${u}`:null,class:{[p]:!0,"tab-selected":d,"tab-disabled":e,"tab-has-label":i,"tab-has-icon":t,"tab-has-label-only":i&&!t,"tab-has-icon-only":t&&!i,[`tab-layout-${l}`]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},J("a",Object.assign({key:"01cb0ed2e77c5c1a8abd48da1bb07ac1b305d0b6"},b,{class:"button-native",part:"native",role:"tab","aria-selected":d?"true":null,"aria-disabled":e?"true":null,tabindex:e?"-1":void 0},f),J("span",{key:"d0240c05f42217cfb186b86ff8a0c9cd70b9c8df",class:"button-inner"},J("slot",{key:"0a20b84925037dbaa8bb4a495b813d3f7c2e58ac"})),p==="md"&&J("ion-ripple-effect",{key:"4c92c27178cdac89d69cffef8d2c39c3644914e8",type:"unbounded"})))}get el(){return this}static get style(){return{ios:O$,md:N$}}},[289,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);function M$(){if(typeof customElements>"u")return;["ion-tab-button","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,P$);break;case"ion-ripple-effect":customElements.get(e)||yy();break}})}const $$=M$;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const F$=":host{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;contain:layout size style;z-index:0}.tabs-inner{position:relative;-ms-flex:1;flex:1;contain:layout size style}",j$=Gt(class extends Ht{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Ze(this,"ionNavWillLoad",7),this.ionTabsWillChange=Ze(this,"ionTabsWillChange",3),this.ionTabsDidChange=Ze(this,"ionTabsDidChange",3),this.transitioning=!1,this.useRouter=!1,this.onTabClicked=t=>{const{href:i,tab:s}=t.detail;if(this.useRouter&&i!==void 0){const r=document.querySelector("ion-router");r&&r.push(i)}else this.select(s)}}async componentWillLoad(){if(this.useRouter||(this.useRouter=(!!this.el.querySelector("ion-router-outlet")||!!document.querySelector("ion-router"))&&!this.el.closest("[no-router]")),!this.useRouter){const e=this.tabs;e.length>0&&await this.select(e[0])}this.ionNavWillLoad.emit()}componentDidLoad(){this.updateTabBar()}componentDidUpdate(){this.updateTabBar()}updateTabBar(){const e=this.el.querySelector("ion-tab-bar");if(!e)return;const t=this.selectedTab?this.selectedTab.tab:void 0;t!==void 0&&e.selectedTab!==t&&(e.selectedTab=t)}async select(e){const t=h0(this.tabs,e);return this.shouldSwitch(t)?(await this.setActive(t),await this.notifyRouter(),this.tabSwitch(),!0):!1}async getTab(e){return h0(this.tabs,e)}getSelected(){return Promise.resolve(this.selectedTab?this.selectedTab.tab:void 0)}async setRouteId(e){const t=h0(this.tabs,e);return this.shouldSwitch(t)?(await this.setActive(t),{changed:!0,element:this.selectedTab,markVisible:()=>this.tabSwitch()}):{changed:!1,element:this.selectedTab}}async getRouteId(){var e;const t=(e=this.selectedTab)===null||e===void 0?void 0:e.tab;return t!==void 0?{id:t,element:this.selectedTab}:void 0}setActive(e){return this.transitioning?Promise.reject("transitioning already happening"):(this.transitioning=!0,this.leavingTab=this.selectedTab,this.selectedTab=e,this.ionTabsWillChange.emit({tab:e.tab}),e.active=!0,this.updateTabBar(),Promise.resolve())}tabSwitch(){const e=this.selectedTab,t=this.leavingTab;this.leavingTab=void 0,this.transitioning=!1,e&&t!==e&&(t&&(t.active=!1),this.ionTabsDidChange.emit({tab:e.tab}))}notifyRouter(){if(this.useRouter){const e=document.querySelector("ion-router");if(e)return e.navChanged("forward")}return Promise.resolve(!1)}shouldSwitch(e){const t=this.selectedTab;return e!==void 0&&e!==t&&!this.transitioning}get tabs(){return Array.from(this.el.querySelectorAll("ion-tab"))}render(){return J(Kt,{key:"7b4b302f2942d8d131f6fc24e817989a8be08867",onIonTabButtonClick:this.onTabClicked},J("slot",{key:"2c51cf14c0f17a8ddf2d879858c984cdf8fd3147",name:"top"}),J("div",{key:"7e9d6055092d41bd9bc80ae15965f77e216feb84",class:"tabs-inner"},J("slot",{key:"c308a787e37ff7f6653531d70deca597a7602d26"})),J("slot",{key:"d5f5e693710c853570811602f859cf3e88272684",name:"bottom"}))}get el(){return this}static get style(){return F$}},[257,"ion-tabs",{useRouter:[1028,"use-router"],selectedTab:[32],select:[64],getTab:[64],getSelected:[64],setRouteId:[64],getRouteId:[64]}]),h0=(n,e)=>{const t=typeof e=="string"?n.find(i=>i.tab===e):e;return t||Hr(`[ion-tabs] - Tab with id: "${t}" does not exist`),t};function B$(){if(typeof customElements>"u")return;["ion-tabs"].forEach(e=>{switch(e){case"ion-tabs":customElements.get(e)||customElements.define(e,j$);break}})}const U$=B$,z$="ionicons",Ip={hydratedSelectorName:"hydrated",lazyLoad:!1,updatable:!0};var H$=Object.defineProperty,G$=(n,e)=>{for(var t in e)H$(n,t,{get:e[t],enumerable:!0})},wa=n=>{if(n.__stencil__getHostRef)return n.__stencil__getHostRef()},V$=(n,e)=>{const t={$flags$:0,$hostElement$:n,$cmpMeta$:e,$instanceValues$:new Map};t.$onReadyPromise$=new Promise(s=>t.$onReadyResolve$=s),n["s-p"]=[],n["s-rc"]=[];const i=t;return n.__stencil__getHostRef=()=>i,i},CT=(n,e)=>e in n,Rp=(n,e)=>(0,console.error)(n,e),zf=new Map,q$="slot-fb{display:contents}slot-fb[hidden]{display:none}",IT="http://www.w3.org/1999/xlink",Ds=typeof window<"u"?window:{},W$=Ds.HTMLElement||class{},jo={$flags$:0,$resourcesUrl$:"",jmp:n=>n(),raf:n=>requestAnimationFrame(n),ael:(n,e,t,i)=>n.addEventListener(e,t,i),rel:(n,e,t,i)=>n.removeEventListener(e,t,i),ce:(n,e)=>new CustomEvent(n,e)},K$=n=>Promise.resolve(n),M2=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),uv=!1,RT=[],$2=[],Y$=(n,e)=>t=>{n.push(t),uv||(uv=!0,jo.raf(F2))},LT=n=>{for(let e=0;e<n.length;e++)try{n[e](performance.now())}catch(t){Rp(t)}n.length=0},F2=()=>{LT(RT),LT($2),(uv=RT.length>0)&&jo.raf(F2)},Cy=n=>K$().then(n),X$=Y$($2),Q$=n=>{const e=new URL(n,jo.$resourcesUrl$);return e.origin!==Ds.location.origin?e.href:e.pathname},Iy=n=>(n=typeof n,n==="object"||n==="function");function Z$(n){var e,t,i;return(i=(t=(e=n.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:t.getAttribute("content"))!=null?i:void 0}var J$=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),e8={};G$(e8,{err:()=>j2,map:()=>t8,ok:()=>hv,unwrap:()=>i8,unwrapErr:()=>n8});var hv=n=>({isOk:!0,isErr:!1,value:n}),j2=n=>({isOk:!1,isErr:!0,value:n});function t8(n,e){if(n.isOk){const t=e(n.value);return t instanceof Promise?t.then(i=>hv(i)):hv(t)}if(n.isErr){const t=n.value;return j2(t)}throw"should never get here"}var i8=n=>{if(n.isOk)return n.value;throw n.value},n8=n=>{if(n.isErr)return n.value;throw n.value};var wh;function s8(n){var e;const t=this.attachShadow({mode:"open"});wh===void 0&&(wh=(e=void 0)!=null?e:null),wh&&t.adoptedStyleSheets.push(wh)}var Sa=(n,e="")=>()=>{},_l=new WeakMap,r8=(n,e,t)=>{let i=zf.get(n);M2&&t?(i=i||new CSSStyleSheet,typeof i=="string"?i=e:i.replaceSync(e)):i=e,zf.set(n,i)},o8=(n,e,t)=>{var i;const s=B2(e),r=zf.get(s);if(!Ds.document)return s;if(n=n.nodeType===11?n:Ds.document,r)if(typeof r=="string"){n=n.head||n;let o=_l.get(n),l;if(o||_l.set(n,o=new Set),!o.has(s)){{l=Ds.document.createElement("style"),l.innerHTML=r;const d=(i=jo.$nonce$)!=null?i:Z$(Ds.document);if(d!=null&&l.setAttribute("nonce",d),!(e.$flags$&1))if(n.nodeName==="HEAD"){const u=n.querySelectorAll("link[rel=preconnect]"),f=u.length>0?u[u.length-1].nextSibling:n.querySelector("style");n.insertBefore(l,f?.parentNode===n?f:null)}else if("host"in n)if(M2){const u=new CSSStyleSheet;u.replaceSync(r),n.adoptedStyleSheets.unshift(u)}else{const u=n.querySelector("style");u?u.innerHTML=r+u.innerHTML:n.prepend(l)}else n.append(l);e.$flags$&1&&n.insertBefore(l,null)}e.$flags$&4&&(l.innerHTML+=q$),o&&o.add(s)}}else n.adoptedStyleSheets.includes(r)||n.adoptedStyleSheets.push(r);return s},a8=n=>{const e=n.$cmpMeta$,t=n.$hostElement$,i=e.$flags$,s=Sa("attachStyles",e.$tagName$),r=o8(t.shadowRoot?t.shadowRoot:t.getRootNode(),e);i&10&&(t["s-sc"]=r,t.classList.add(r+"-h")),s()},B2=(n,e)=>"sc-"+n.$tagName$,rf=(n,e,...t)=>{let i=null,s=null,r=!1,o=!1;const l=[],d=f=>{for(let p=0;p<f.length;p++)i=f[p],Array.isArray(i)?d(i):i!=null&&typeof i!="boolean"&&((r=typeof n!="function"&&!Iy(i))&&(i=String(i)),r&&o?l[l.length-1].$text$+=i:l.push(r?fv(null,i):i),o=r)};if(d(t),e){e.key&&(s=e.key);{const f=e.className||e.class;f&&(e.class=typeof f!="object"?f:Object.keys(f).filter(p=>f[p]).join(" "))}}const u=fv(n,null);return u.$attrs$=e,l.length>0&&(u.$children$=l),u.$key$=s,u},fv=(n,e)=>{const t={$flags$:0,$tag$:n,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t.$key$=null,t},U2={},l8=n=>n&&n.$tag$===U2,Ry=n=>{const e=J$(n);return new RegExp(`(^|[^@]|@(?!supports\\s+selector\\s*\\([^{]*?${e}))(${e}\\b)`,"g")};Ry("::slotted");Ry(":host");Ry(":host-context");var z2=(n,e,t)=>n!=null&&!Iy(n)?e&4?n==="false"?!1:n===""||!!n:e&1?String(n):n:n,c8=(n,e,t)=>{const i=jo.ce(e,t);return n.dispatchEvent(i),i},DT=(n,e,t,i,s,r,o)=>{if(t===i)return;let l=CT(n,e),d=e.toLowerCase();if(e==="class"){const u=n.classList,f=OT(t);let p=OT(i);u.remove(...f.filter(b=>b&&!p.includes(b))),u.add(...p.filter(b=>b&&!f.includes(b)))}else if(e==="style"){for(const u in t)(!i||i[u]==null)&&(u.includes("-")?n.style.removeProperty(u):n.style[u]="");for(const u in i)(!t||i[u]!==t[u])&&(u.includes("-")?n.style.setProperty(u,i[u]):n.style[u]=i[u])}else if(e!=="key")if(e==="ref")i&&i(n);else if(!n.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):CT(Ds,d)?e=d.slice(2):e=d[2]+e.slice(3),t||i){const u=e.endsWith(H2);e=e.replace(u8,""),t&&jo.rel(n,e,t,u),i&&jo.ael(n,e,i,u)}}else{const u=Iy(i);if(l||u&&i!==null)try{if(n.tagName.includes("-"))n[e]!==i&&(n[e]=i);else{const p=i??"";e==="list"?l=!1:(t==null||n[e]!=p)&&(typeof n.__lookupSetter__(e)=="function"?n[e]=p:n.setAttribute(e,p))}}catch{}let f=!1;d!==(d=d.replace(/^xlink\:?/,""))&&(e=d,f=!0),i==null||i===!1?(i!==!1||n.getAttribute(e)==="")&&(f?n.removeAttributeNS(IT,e):n.removeAttribute(e)):(!l||r&4||s)&&!u&&n.nodeType===1&&(i=i===!0?"":i,f?n.setAttributeNS(IT,e,i):n.setAttribute(e,i))}},d8=/\s/,OT=n=>(typeof n=="object"&&n&&"baseVal"in n&&(n=n.baseVal),!n||typeof n!="string"?[]:n.split(d8)),H2="Capture",u8=new RegExp(H2+"$"),G2=(n,e,t,i)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,r=n&&n.$attrs$||{},o=e.$attrs$||{};for(const l of NT(Object.keys(r)))l in o||DT(s,l,r[l],void 0,t,e.$flags$);for(const l of NT(Object.keys(o)))DT(s,l,r[l],o[l],t,e.$flags$)};function NT(n){return n.includes("ref")?[...n.filter(e=>e!=="ref"),"ref"]:n}var Ly,V2=!1,Hf=(n,e,t)=>{const i=e.$children$[t];let s=0,r,o;if(i.$text$!==null)r=i.$elm$=Ds.document.createTextNode(i.$text$);else{if(!Ds.document)throw new Error("You are trying to render a Stencil component in an environment that doesn't support the DOM. Make sure to populate the [`window`](https://developer.mozilla.org/en-US/docs/Web/API/Window/window) object before rendering a component.");if(r=i.$elm$=Ds.document.createElement(i.$tag$),G2(null,i,V2),i.$children$)for(s=0;s<i.$children$.length;++s)o=Hf(n,i,s),o&&r.appendChild(o)}return r["s-hn"]=Ly,r},q2=(n,e,t,i,s,r)=>{let o=n,l;for(o.shadowRoot&&o.tagName===Ly&&(o=o.shadowRoot);s<=r;++s)i[s]&&(l=Hf(null,t,s),l&&(i[s].$elm$=l,of(o,l,e)))},W2=(n,e,t)=>{for(let i=e;i<=t;++i){const s=n[i];if(s){const r=s.$elm$;K2(s),r&&r.remove()}}},h8=(n,e,t,i,s=!1)=>{let r=0,o=0,l=0,d=0,u=e.length-1,f=e[0],p=e[u],b=i.length-1,v=i[0],y=i[b],w,E;for(;r<=u&&o<=b;)if(f==null)f=e[++r];else if(p==null)p=e[--u];else if(v==null)v=i[++o];else if(y==null)y=i[--b];else if(Sh(f,v,s))El(f,v,s),f=e[++r],v=i[++o];else if(Sh(p,y,s))El(p,y,s),p=e[--u],y=i[--b];else if(Sh(f,y,s))El(f,y,s),of(n,f.$elm$,p.$elm$.nextSibling),f=e[++r],y=i[--b];else if(Sh(p,v,s))El(p,v,s),of(n,p.$elm$,f.$elm$),p=e[--u],v=i[++o];else{for(l=-1,d=r;d<=u;++d)if(e[d]&&e[d].$key$!==null&&e[d].$key$===v.$key$){l=d;break}l>=0?(E=e[l],E.$tag$!==v.$tag$?w=Hf(e&&e[o],t,l):(El(E,v,s),e[l]=void 0,w=E.$elm$),v=i[++o]):(w=Hf(e&&e[o],t,o),v=i[++o]),w&&of(f.$elm$.parentNode,w,f.$elm$)}r>u?q2(n,i[b+1]==null?null:i[b+1].$elm$,t,i,o,b):o>b&&W2(e,r,u)},Sh=(n,e,t=!1)=>n.$tag$===e.$tag$?t?(t&&!n.$key$&&e.$key$&&(n.$key$=e.$key$),!0):n.$key$===e.$key$:!1,El=(n,e,t=!1)=>{const i=e.$elm$=n.$elm$,s=n.$children$,r=e.$children$,o=e.$text$;o===null?(G2(n,e,V2),s!==null&&r!==null?h8(i,s,e,r,t):r!==null?(n.$text$!==null&&(i.textContent=""),q2(i,null,e,r,0,r.length-1)):!t&&Ip.updatable&&s!==null&&W2(s,0,s.length-1)):n.$text$!==o&&(i.data=o)},K2=n=>{n.$attrs$&&n.$attrs$.ref&&n.$attrs$.ref(null),n.$children$&&n.$children$.map(K2)},of=(n,e,t)=>n?.insertBefore(e,t),f8=(n,e,t=!1)=>{const i=n.$hostElement$,s=n.$cmpMeta$,r=n.$vnode$||fv(null,null),l=l8(e)?e:rf(null,null,e);if(Ly=i.tagName,s.$attrsToReflect$&&(l.$attrs$=l.$attrs$||{},s.$attrsToReflect$.map(([d,u])=>l.$attrs$[u]=i[d])),t&&l.$attrs$)for(const d of Object.keys(l.$attrs$))i.hasAttribute(d)&&!["key","ref","style","class"].includes(d)&&(l.$attrs$[d]=i[d]);l.$tag$=null,l.$flags$|=4,n.$vnode$=l,l.$elm$=r.$elm$=i.shadowRoot||i,El(r,l,t)},Y2=(n,e)=>{if(e&&!n.$onRenderResolve$&&e["s-p"]){const t=e["s-p"].push(new Promise(i=>n.$onRenderResolve$=()=>{e["s-p"].splice(t-1,1),i()}))}},Dy=(n,e)=>{if(n.$flags$|=16,n.$flags$&4){n.$flags$|=512;return}return Y2(n,n.$ancestorComponent$),X$(()=>p8(n,e))},p8=(n,e)=>{const t=n.$hostElement$,i=Sa("scheduleUpdate",n.$cmpMeta$.$tagName$),s=t;if(!s)throw new Error(`Can't render component <${t.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let r;return e?r=Dl(s,"componentWillLoad",void 0,t):r=Dl(s,"componentWillUpdate",void 0,t),r=PT(r,()=>Dl(s,"componentWillRender",void 0,t)),i(),PT(r,()=>g8(n,s,e))},PT=(n,e)=>m8(n)?n.then(e).catch(t=>{console.error(t),e()}):e(),m8=n=>n instanceof Promise||n&&n.then&&typeof n.then=="function",g8=async(n,e,t)=>{var i;const s=n.$hostElement$,r=Sa("update",n.$cmpMeta$.$tagName$),o=s["s-rc"];t&&a8(n);const l=Sa("render",n.$cmpMeta$.$tagName$);b8(n,e,s,t),o&&(o.map(d=>d()),s["s-rc"]=void 0),l(),r();{const d=(i=s["s-p"])!=null?i:[],u=()=>v8(n);d.length===0?u():(Promise.all(d).then(u),n.$flags$|=4,d.length=0)}},b8=(n,e,t,i)=>{try{e=e.render(),n.$flags$&=-17,n.$flags$|=2,f8(n,e,i)}catch(s){Rp(s,n.$hostElement$)}return null},v8=n=>{const e=n.$cmpMeta$.$tagName$,t=n.$hostElement$,i=Sa("postUpdate",e),s=t,r=n.$ancestorComponent$;Dl(s,"componentDidRender",void 0,t),n.$flags$&64?(Dl(s,"componentDidUpdate",void 0,t),i()):(n.$flags$|=64,x8(t),Dl(s,"componentDidLoad",void 0,t),i(),n.$onReadyResolve$(t),r||y8()),n.$onRenderResolve$&&(n.$onRenderResolve$(),n.$onRenderResolve$=void 0),n.$flags$&512&&Cy(()=>Dy(n,!1)),n.$flags$&=-517},y8=n=>{Cy(()=>c8(Ds,"appload",{detail:{namespace:z$}}))},Dl=(n,e,t,i)=>{if(n&&n[e])try{return n[e](t)}catch(s){Rp(s,i)}},x8=n=>{var e;return n.classList.add((e=Ip.hydratedSelectorName)!=null?e:"hydrated")},w8=(n,e)=>wa(n).$instanceValues$.get(e),MT=(n,e,t,i)=>{const s=wa(n),r=n,o=s.$instanceValues$.get(e),l=s.$flags$,d=r;t=z2(t,i.$members$[e][0]);const u=Number.isNaN(o)&&Number.isNaN(t);if(t!==o&&!u){s.$instanceValues$.set(e,t);{if(i.$watchers$&&l&128){const p=i.$watchers$[e];p&&p.map(b=>{try{d[b](t,o,e)}catch(v){Rp(v,r)}})}if((l&18)===2){if(d.componentShouldUpdate&&d.componentShouldUpdate(t,o,e)===!1)return;Dy(s,!1)}}}},S8=(n,e,t)=>{var i,s;const r=n.prototype;if(e.$members$||e.$watchers$||n.watchers){n.watchers&&!e.$watchers$&&(e.$watchers$=n.watchers);const o=Object.entries((i=e.$members$)!=null?i:{});o.map(([l,[d]])=>{if(d&31||d&32){const{get:u,set:f}=Object.getOwnPropertyDescriptor(r,l)||{};u&&(e.$members$[l][0]|=2048),f&&(e.$members$[l][0]|=4096),Object.defineProperty(r,l,{get(){return u?u.apply(this):w8(this,l)},configurable:!0,enumerable:!0}),Object.defineProperty(r,l,{set(p){const b=wa(this);if(f){const v=d&32?this[l]:b.$hostElement$[l];typeof v>"u"&&b.$instanceValues$.get(l)?p=b.$instanceValues$.get(l):!b.$instanceValues$.get(l)&&v&&b.$instanceValues$.set(l,v),f.apply(this,[z2(p,d)]),p=d&32?this[l]:b.$hostElement$[l],MT(this,l,p,e);return}{MT(this,l,p,e);return}}})}});{const l=new Map;r.attributeChangedCallback=function(d,u,f){jo.jmp(()=>{var p;const b=l.get(d);if(!(this.hasOwnProperty(b)&&Ip.lazyLoad)){if(r.hasOwnProperty(b)&&typeof this[b]=="number"&&this[b]==f)return;if(b==null){const y=wa(this),w=y?.$flags$;if(w&&!(w&8)&&w&128&&f!==u){const T=this,k=(p=e.$watchers$)==null?void 0:p[d];k?.forEach(_=>{T[_]!=null&&T[_].call(T,f,u,d)})}return}}const v=Object.getOwnPropertyDescriptor(r,b);f=f===null&&typeof this[b]=="boolean"?!1:f,f!==this[b]&&(!v.get||v.set)&&(this[b]=f)})},n.observedAttributes=Array.from(new Set([...Object.keys((s=e.$watchers$)!=null?s:{}),...o.filter(([d,u])=>u[0]&15).map(([d,u])=>{var f;const p=u[1]||d;return l.set(p,d),u[0]&512&&((f=e.$attrsToReflect$)==null||f.push([d,p])),p})]))}}return n},$T=async(n,e,t,i)=>{let s;if((e.$flags$&32)===0){e.$flags$|=32;{s=n.constructor;const l=n.localName;customElements.whenDefined(l).then(()=>e.$flags$|=128)}if(s&&s.style){let l;typeof s.style=="string"&&(l=s.style);const d=B2(t);if(!zf.has(d)){const u=Sa("registerStyles",t.$tagName$);r8(d,l,!!(t.$flags$&1)),u()}}}const r=e.$ancestorComponent$,o=()=>Dy(e,!0);r&&r["s-rc"]?r["s-rc"].push(o):o()},E8=(n,e)=>{},T8=n=>{{const e=wa(n),t=e.$cmpMeta$,i=Sa("connectedCallback",t.$tagName$);if(e.$flags$&1)e?.$lazyInstance$||e?.$onReadyPromise$&&e.$onReadyPromise$.then(()=>E8());else{e.$flags$|=1;{let s=n;for(;s=s.parentNode||s.host;)if(s["s-p"]){Y2(e,e.$ancestorComponent$=s);break}}t.$members$&&Object.entries(t.$members$).map(([s,[r]])=>{if(r&31&&n.hasOwnProperty(s)){const o=n[s];delete n[s],n[s]=o}}),Ip.initializeNextTick?Cy(()=>$T(n,e,t)):$T(n,e,t)}i()}},k8=async n=>{wa(n),_l.has(n)&&_l.delete(n),n.shadowRoot&&_l.has(n.shadowRoot)&&_l.delete(n.shadowRoot)},_8=(n,e)=>{const t={$flags$:e[0],$tagName$:e[1]};t.$members$=e[2],t.$watchers$=n.$watchers$,t.$attrsToReflect$=[];const i=n.prototype.connectedCallback,s=n.prototype.disconnectedCallback;return Object.assign(n.prototype,{__hasHostListenerAttached:!1,__registerHost(){V$(this,t)},connectedCallback(){this.__hasHostListenerAttached||(wa(this),this.__hasHostListenerAttached=!0),T8(this),i&&i.call(this)},disconnectedCallback(){k8(this),s&&s.call(this)},__attachShadow(){if(!this.shadowRoot)s8.call(this,t);else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${t.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),n.is=t.$tagName$,S8(n,t)};let f0;const A8=()=>{if(typeof window>"u")return new Map;if(!f0){const n=window;n.Ionicons=n.Ionicons||{},f0=n.Ionicons.map=n.Ionicons.map||new Map}return f0},C8=n=>{let e=p0(n.src);return e||(e=X2(n.name,n.icon,n.mode,n.ios,n.md),e?I8(e,n):n.icon&&(e=p0(n.icon),e||(e=p0(n.icon[n.mode]),e))?e:null)},I8=(n,e)=>{const t=A8().get(n);if(t)return t;try{return Q$(`svg/${n}.svg`)}catch(i){console.log("e",i),console.warn(`[Ionicons Warning]: Could not load icon with name "${n}". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.`,e)}},X2=(n,e,t,i,s)=>(t=(t&&Eh(t))==="ios"?"ios":"md",i&&t==="ios"?n=Eh(i):s&&t==="md"?n=Eh(s):(!n&&e&&!Q2(e)&&(n=e),Gf(n)&&(n=Eh(n))),!Gf(n)||n.trim()===""||n.replace(/[a-z]|-|\d/gi,"")!==""?null:n),p0=n=>Gf(n)&&(n=n.trim(),Q2(n))?n:null,Q2=n=>n.length>0&&/(\/|\.)/.test(n),Gf=n=>typeof n=="string",Eh=n=>n.toLowerCase(),R8=(n,e=[])=>{const t={};return e.forEach(i=>{n.hasAttribute(i)&&(n.getAttribute(i)!==null&&(t[i]=n.getAttribute(i)),n.removeAttribute(i))}),t},L8=n=>n&&n.dir!==""?n.dir.toLowerCase()==="rtl":document?.dir.toLowerCase()==="rtl",D8=n=>{const e=document.createElement("div");e.innerHTML=n;for(let i=e.childNodes.length-1;i>=0;i--)e.childNodes[i].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[i]);const t=e.firstElementChild;if(t&&t.nodeName.toLowerCase()==="svg"){const i=t.getAttribute("class")||"";if(t.setAttribute("class",(i+" s-ion-icon").trim()),Z2(t))return e.innerHTML}return""},Z2=n=>{if(n.nodeType===1){if(n.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e].name;if(Gf(t)&&t.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<n.childNodes.length;e++)if(!Z2(n.childNodes[e]))return!1}return!0},O8=n=>n.startsWith("data:image/svg+xml"),N8=n=>n.indexOf(";utf8,")!==-1,Ol=new Map,J2=new Map;let m0;function pv(n){return Ol.set(n,""),""}const P8=(n,e)=>{const t=J2.get(n);return t||(typeof fetch<"u"&&typeof document<"u"?O8(n)&&N8(n)?Promise.resolve(M8(n)):$8(n,e):Promise.resolve(pv(n)))};function M8(n){m0||(m0=new DOMParser);const t=m0.parseFromString(n,"text/html").querySelector("svg");if(t)return Ol.set(n,t.outerHTML),t.outerHTML;throw new Error(`Could not parse svg from ${n}`)}function $8(n,e){const t=fetch(n).then(i=>i.text().then(s=>{s&&e!==!1&&(s=D8(s));const r=s||"";return Ol.set(n,r),r}).catch(()=>pv(n))).catch(()=>pv(n));return J2.set(n,t),t}const F8=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",j8=_8(class extends W${constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.isVisible=!1,this.mode=B8(),this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=R8(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,i){if(!!!(this.lazy&&typeof window<"u"&&window.IntersectionObserver))return i();const r=this.io=new window.IntersectionObserver(o=>{o[0].isIntersecting&&(r.disconnect(),this.io=void 0,i())},{rootMargin:t});r.observe(e)}loadIcon(){if(this.isVisible){const e=C8(this);e&&(Ol.has(e)?this.svgContent=Ol.get(e):P8(e,this.sanitize).then(()=>this.svgContent=Ol.get(e)),this.didLoadIcon=!0)}this.iconName=X2(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:t,inheritedAttributes:i,el:s}=this,r=this.mode||"md",o=t?(t.includes("arrow")||t.includes("chevron"))&&e!==!1:!1,l=e||o;return rf(U2,Object.assign({key:"0578c899781ca145dd8205acd9670af39b57cf2e",role:"img",class:Object.assign(Object.assign({[r]:!0},U8(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":l,"icon-rtl":l&&L8(s)})},i),this.svgContent?rf("div",{class:"icon-inner",innerHTML:this.svgContent}):rf("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return F8}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]},void 0,{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}]),B8=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",U8=n=>n?{"ion-color":!0,[`ion-color-${n}`]:!0}:null;function z8(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,j8);break}})}const H8=z8,Oy=Pe.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{},cleanupIonViewWillEnter:()=>{},cleanupIonViewDidEnter:()=>{},cleanupIonViewWillLeave:()=>{},cleanupIonViewDidLeave:()=>{}}),G8=class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[],this.ionViewWillEnterDestructorCallbacks=[],this.ionViewDidEnterDestructorCallbacks=[],this.ionViewWillLeaveDestructorCallbacks=[],this.ionViewDidLeaveDestructorCallbacks=[]}onIonViewWillEnter(n){if(n.id){const e=this.ionViewWillEnterCallbacks.findIndex(t=>t.id===n.id);e>-1?this.ionViewWillEnterCallbacks[e]=n:this.ionViewWillEnterCallbacks.push(n)}else this.ionViewWillEnterCallbacks.push(n)}teardownCallback(n,e){const t=e.filter(i=>i.id===n.id);t.length!==0&&(t.forEach(i=>{i&&typeof i.destructor=="function"&&i.destructor()}),e=e.filter(i=>i.id!==n.id))}cleanupIonViewWillEnter(n){this.teardownCallback(n,this.ionViewWillEnterDestructorCallbacks)}cleanupIonViewDidEnter(n){this.teardownCallback(n,this.ionViewDidEnterDestructorCallbacks)}cleanupIonViewWillLeave(n){this.teardownCallback(n,this.ionViewWillLeaveDestructorCallbacks)}cleanupIonViewDidLeave(n){this.teardownCallback(n,this.ionViewDidLeaveDestructorCallbacks)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach(n=>{const e=n();n.id&&this.ionViewWillEnterDestructorCallbacks.push({id:n.id,destructor:e})})}onIonViewDidEnter(n){if(n.id){const e=this.ionViewDidEnterCallbacks.findIndex(t=>t.id===n.id);e>-1?this.ionViewDidEnterCallbacks[e]=n:this.ionViewDidEnterCallbacks.push(n)}else this.ionViewDidEnterCallbacks.push(n)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach(n=>{const e=n();n.id&&this.ionViewDidEnterDestructorCallbacks.push({id:n.id,destructor:e})})}onIonViewWillLeave(n){if(n.id){const e=this.ionViewWillLeaveCallbacks.findIndex(t=>t.id===n.id);e>-1?this.ionViewWillLeaveCallbacks[e]=n:this.ionViewWillLeaveCallbacks.push(n)}else this.ionViewWillLeaveCallbacks.push(n)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach(n=>{const e=n();n.id&&this.ionViewWillLeaveDestructorCallbacks.push({id:n.id,destructor:e})})}onIonViewDidLeave(n){if(n.id){const e=this.ionViewDidLeaveCallbacks.findIndex(t=>t.id===n.id);e>-1?this.ionViewDidLeaveCallbacks[e]=n:this.ionViewDidLeaveCallbacks.push(n)}else this.ionViewDidLeaveCallbacks.push(n)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach(n=>{const e=n();n.id&&this.ionViewDidLeaveDestructorCallbacks.push({id:n.id,destructor:e})}),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(n){this.componentCanBeDestroyedCallback=n}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},Fs=Pe.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:n=>{typeof window<"u"&&(typeof n=="string"?window.location.pathname=n:window.history.back())},navigate:n=>{typeof window<"u"&&(window.location.pathname=n)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(n,e)=>{typeof window<"u"&&(window.location.pathname=e)},resetTab:(n,e)=>{typeof window<"u"&&(window.location.pathname=e)}}),Ny=n=>n.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),Lp=n=>n.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`),Py=(n,e,t={})=>{if(n instanceof Element){const i=V8(n.classList,e,t);i!==""&&(n.className=i),Object.keys(e).forEach(s=>{if(!(s==="children"||s==="style"||s==="ref"||s==="class"||s==="className"||s==="forwardedRef"))if(s.indexOf("on")===0&&s[2]===s[2].toUpperCase()){const r=s.substring(2),o=r[0].toLowerCase()+r.substring(1);Gd(o)||W8(n,o,e[s])}else n[s]=e[s],typeof e[s]==="string"&&n.setAttribute(Lp(s),e[s])})}},V8=(n,e,t)=>{const i=e.className||e.class,s=t.className||t.class,r=g0(n),o=g0(i?i.split(" "):[]),l=g0(s?s.split(" "):[]),d=[];return r.forEach(u=>{o.has(u)?(d.push(u),o.delete(u)):l.has(u)||d.push(u)}),o.forEach(u=>d.push(u)),d.join(" ")},q8=n=>{switch(n){case"doubleclick":return"dblclick"}return n};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const Gd=n=>{if(typeof document>"u")return!0;{const e="on"+q8(n);let t=e in document;if(!t){const i=document.createElement("div");i.setAttribute(e,"return;"),t=typeof i[e]=="function"}return t}},W8=(n,e,t)=>{const i=n.__events||(n.__events={}),s=i[e];s&&n.removeEventListener(e,s),n.addEventListener(e,i[e]=function(o){t&&t.call(this,o)})},g0=n=>{const e=new Map;return n.forEach(t=>e.set(t,t)),e},K8=(n,e)=>{typeof n=="function"?n(e):n!=null&&(n.current=e)},Dp=(...n)=>e=>{n.forEach(t=>{K8(t,e)})},Y8=(n,e)=>{const t=(i,s)=>m.jsx(n,{...i,forwardedRef:s});return t.displayName=e,Pe.forwardRef(t)},X8=(n,e)=>{e!==void 0&&typeof customElements<"u"&&!customElements.get(n)&&customElements.define(n,e)},yi=(n,e,t,i)=>{i!==void 0&&i();const s=Ny(n),r=class extends Pe.Component{constructor(o){super(o),this.setComponentElRef=l=>{this.componentEl=l}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(o){Py(this.componentEl,this.props,o)}render(){const{children:o,forwardedRef:l,style:d,className:u,ref:f,...p}=this.props,v={...Object.keys(p).reduce((y,w)=>{const E=p[w];if(w.indexOf("on")===0&&w[2]===w[2].toUpperCase()){const T=w.substring(2).toLowerCase();typeof document<"u"&&Gd(T)&&(y[w]=E)}else{const T=typeof E;(T==="string"||T==="boolean"||T==="number")&&(y[Lp(w)]=E)}return y},{}),ref:Dp(l,this.setComponentElRef),style:d};return C.createElement(n,v,o)}static get displayName(){return s}};return Y8(r,s)},My=yi("ion-buttons",void 0,void 0,wM),Wt=yi("ion-content",void 0,void 0,OM),Ca=yi("ion-header",void 0,void 0,ZM),Q8=yi("ion-infinite-scroll",void 0,void 0,i4),Z8=yi("ion-infinite-scroll-content",void 0,void 0,h4),FT=yi("ion-input",void 0,void 0,y4),J8=yi("ion-item-options",void 0,void 0,T4),eF=yi("ion-item-sliding",void 0,void 0,D4),$y=yi("ion-list",void 0,void 0,$4),jT=yi("ion-range",void 0,void 0,X4),Wi=yi("ion-spinner",void 0,void 0,j6),tF=yi("ion-tab",void 0,void 0,H6),iF=yi("ion-textarea",void 0,void 0,Y6),Ia=yi("ion-title",void 0,void 0,X6),nF=yi("ion-toggle",void 0,void 0,n$),Ra=yi("ion-toolbar",void 0,void 0,s$),La=(n,e)=>{const t=(i,s)=>m.jsx(n,{...i,forwardedRef:s});return t.displayName=e,Pe.forwardRef(t)},sF=()=>{if(typeof window<"u"){const n=window.Ionic;if(n&&n.config)return n.config}return null},Fy=(n,e)=>{X8(n,e);const t=Ny(n),i=class extends Pe.Component{constructor(s){super(s),this.handleClick=r=>{const{routerLink:o,routerDirection:l,routerOptions:d,routerAnimation:u}=this.props;o!==void 0&&(r.preventDefault(),this.context.navigate(o,l,void 0,u,d))},this.ref=Pe.createRef(),this.stableMergedRefs=Dp(this.ref,this.props.forwardedRef)}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(s){const r=this.ref.current;Py(r,this.props,s)}render(){const{children:s,forwardedRef:r,style:o,className:l,ref:d,...u}=this.props,p={...Object.keys(u).reduce((b,v)=>{if(v.indexOf("on")===0&&v[2]===v[2].toUpperCase()){const y=v.substring(2).toLowerCase();Gd(y)&&(b[v]=u[v])}else["string","boolean","number"].includes(typeof u[v])&&(b[Lp(v)]=u[v]);return b},{}),ref:this.stableMergedRefs,style:o};if(this.props.routerLink&&!this.props.href&&(p.href=this.props.routerLink),p.onClick){const b=p.onClick;p.onClick=v=>{b(v),v.defaultPrevented||this.handleClick(v)}}else p.onClick=this.handleClick;return C.createElement(n,p,s)}static get displayName(){return t}static get contextType(){return Fs}};return La(i,t)},jy=Fy("ion-button",r$),Vf=Fy("ion-item",d$),rF=Fy("ion-item-option",c$),oF=(n,e)=>{n instanceof Element&&Object.keys(e).forEach(t=>{if(t.indexOf("on")===0&&t[2]===t[2].toUpperCase()){const i=t.substring(2),s=i[0].toLowerCase()+i.substring(1);Gd(s)||aF(n,s)}})},aF=(n,e)=>{const t=n.__events||(n.__events={}),i=t[e];i&&(n.removeEventListener(e,i),t[e]=void 0)},eI=(n,e,t)=>{e&&e();const i=Ny(n),s=class extends Pe.Component{constructor(r){super(r),this.handleIonMount=()=>{this.setState({isOpen:!0})},this.handleWillPresent=o=>{this.setState({isOpen:!0}),this.props.onWillPresent&&this.props.onWillPresent(o)},this.handleDidDismiss=o=>{const l=this.wrapperRef.current,d=this.ref.current;l&&d&&(d.append(l),this.setState({isOpen:!1})),this.props.onDidDismiss&&this.props.onDidDismiss(o)},this.ref=Pe.createRef(),this.stableMergedRefs=Dp(this.ref,this.props.forwardedRef),this.state={isOpen:!1},this.wrapperRef=Pe.createRef()}componentDidMount(){this.componentDidUpdate(this.props),this.ref.current?.addEventListener("ionMount",this.handleIonMount),this.ref.current?.addEventListener("willPresent",this.handleWillPresent),this.ref.current?.addEventListener("didDismiss",this.handleDidDismiss)}componentDidUpdate(r){const o=this.ref.current,{onDidDismiss:l,onWillPresent:d,...u}=this.props;Py(o,u,r)}componentWillUnmount(){const r=this.ref.current;r&&this.state.isOpen&&(r.removeEventListener("didDismiss",this.handleDidDismiss),r.remove(),oF(r,this.props))}render(){const{children:r,forwardedRef:o,style:l,className:d,ref:u,...f}=this.props,b={...Object.keys(f).reduce((y,w)=>{if(w.indexOf("on")===0&&w[2]===w[2].toUpperCase()){const E=w.substring(2).toLowerCase();Gd(E)&&(y[w]=f[w])}else["string","boolean","number"].includes(typeof f[w])&&(y[Lp(w)]=f[w]);return y},{}),ref:this.stableMergedRefs,style:l},v=()=>t?`${BT} ion-page`:BT;return C.createElement("template",{},C.createElement(n,b,this.state.isOpen||this.props.keepContentsMounted?C.createElement("div",{ref:this.wrapperRef,className:v()},r):null))}static get displayName(){return i}};return La(s,i)},BT="ion-delegate-host",Bn=eI("ion-action-sheet",u$),ms=eI("ion-modal",h$,!0),lF=Pe.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),cF=({onAddOverlay:n,onRemoveOverlay:e})=>{const[t,i]=C.useState({}),s=C.useRef({});C.useEffect(()=>{n(r),e(o)},[]);const r=(d,u,f)=>{const p={...s.current};p[d]={component:u,containerElement:f},s.current=p,i(p)},o=d=>{const u={...s.current};delete u[d],s.current=u,i(u)},l=Object.keys(t);return m.jsx(m.Fragment,{children:l.map(d=>{const u=t[d];return q3.createPortal(u.component,u.containerElement,`overlay-${d}`)})})},dF=yi("ion-tab-button",void 0,void 0,$$),uF=yi("ion-tab-bar",void 0,void 0,D$),UT=yi("ion-tabs",void 0,void 0,U$),hF=yi("ion-back-button",void 0,void 0,E$),mv=yi("ion-router-outlet",void 0,void 0,A$),fF=yi("ion-app",void 0,void 0,v$),pF=yi("ion-icon",void 0,void 0,H8);class tI extends Pe.Component{constructor(e){super(e),this.ionContext={addOverlay:(t,i,s)=>{this.addOverlayCallback&&this.addOverlayCallback(t,i,s)},removeOverlay:t=>{this.removeOverlayCallback&&this.removeOverlayCallback(t)}}}render(){return m.jsxs(lF.Provider,{value:this.ionContext,children:[m.jsx(fF,{...this.props,children:this.props.children}),m.jsx(cF,{onAddOverlay:e=>{this.addOverlayCallback=e},onRemoveOverlay:e=>{this.removeOverlayCallback=e}})]})}}tI.displayName="IonApp";const iI=Pe.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class By extends Pe.PureComponent{constructor(e){super(e),this.ionPageElementRef=Pe.createRef(),this.stableMergedRefs=Dp(this.ionPageElementRef,this.props.forwardedRef),this.ionViewWillEnterHandler=this.ionViewWillEnterHandler.bind(this),this.ionViewDidEnterHandler=this.ionViewDidEnterHandler.bind(this),this.ionViewWillLeaveHandler=this.ionViewWillLeaveHandler.bind(this),this.ionViewDidLeaveHandler=this.ionViewDidLeaveHandler.bind(this)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const{className:e,children:t,routeInfo:i,forwardedRef:s,...r}=this.props;return m.jsx(Oy.Consumer,{children:o=>(this.ionLifeCycleContext=o,m.jsx("div",{className:e?`${e} ion-page`:"ion-page",ref:this.stableMergedRefs,...r,children:t}))})}static get contextType(){return iI}}class mF extends Pe.Component{constructor(e){super(e)}render(){const{className:e,children:t,forwardedRef:i,...s}=this.props;return this.context.hasIonicRouter()?m.jsx(By,{className:e?`${e}`:"",routeInfo:this.context.routeInfo,forwardedRef:i,...s,children:t}):m.jsx("div",{className:e?`ion-page ${e}`:"ion-page",ref:i,...s,children:t})}static get displayName(){return"IonPage"}static get contextType(){return Fs}}const $i=La(mF,"IonPage"),zT={main:0},gF=(n="main")=>{const e=(zT[n]??0)+1;return zT[n]=e,e.toString()},bF=(n,e)=>{const t=new WeakMap,i=`react-delegate-${gF()}`;let s=0;return{attachViewToDom:async(l,d,u,f)=>{const p=document.createElement("div");f&&p.classList.add(...f),l.appendChild(p);const b=d(u),v=`${i}-${s++}`,y=d2.createPortal(b,p,v);return t.set(p,y),n(y),Promise.resolve(p)},removeViewFromDom:(l,d)=>{const u=t.get(d);return u&&e(u),d.remove(),Promise.resolve()}}},vF=yi("ion-nav",void 0,void 0,z4),yF=({children:n,forwardedRef:e,...t})=>{const[i,s]=C.useState([]),r=d=>s(u=>[...u,d]),o=d=>s(u=>u.filter(f=>f!==d)),l=C.useMemo(()=>bF(r,o),[]);return m.jsx(vF,{delegate:l,ref:e,...t,children:i})};La(yF,"IonNav");const nI=Pe.createContext({activeTab:void 0,selectTab:()=>!1,hasRouterOutlet:!1,tabBarProps:{ref:Pe.createRef()}}),xF=typeof HTMLElement<"u"?HTMLElement:class{};class wF extends Pe.Component{constructor(e){super(e),this.outletIsReady=!1,this.ionViewWillEnterHandler=this.ionViewWillEnterHandler.bind(this),this.ionViewDidEnterHandler=this.ionViewDidEnterHandler.bind(this),this.ionViewWillLeaveHandler=this.ionViewWillLeaveHandler.bind(this),this.ionViewDidLeaveHandler=this.ionViewDidLeaveHandler.bind(this)}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||Fo(this.ionRouterOutlet,()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)}),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const{StackManager:e,children:t,routeInfo:i,...s}=this.props;return m.jsx(Oy.Consumer,{children:r=>(this.ionLifeCycleContext=r,m.jsx(e,{routeInfo:i,children:m.jsx(mv,{setRef:o=>this.ionRouterOutlet=o,...s,children:t})}))})}static get contextType(){return iI}}class SF extends Pe.Component{constructor(e){super(e)}render(){const e=this.context.getStackManager(),{children:t,forwardedRef:i,...s}=this.props;return this.context.hasIonicRouter()?s.ionPage?m.jsx(wF,{StackManager:e,routeInfo:this.context.routeInfo,...s,children:t}):m.jsx(e,{routeInfo:this.context.routeInfo,children:m.jsx(mv,{...s,forwardedRef:i,children:t})}):m.jsx(mv,{ref:i,...this.props,children:this.props.children})}static get contextType(){return Fs}}const Th=La(SF,"IonRouterOutlet");class EF extends xF{constructor(){super()}}typeof window<"u"&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",EF));class zJ extends Pe.Component{shouldComponentUpdate(){return!0}constructor(e){super(e),this.routerOutletRef=Pe.createRef(),this.tabBarRef=Pe.createRef(),this.ionTabContextState={activeTab:void 0,selectTab:()=>!1,hasRouterOutlet:!1,tabBarProps:{ref:this.tabBarRef}}}componentDidMount(){this.tabBarRef.current&&(this.ionTabContextState.activeTab=this.tabBarRef.current.state.activeTab,this.tabBarRef.current.setActiveTabOnContext=e=>{this.ionTabContextState.activeTab=e},this.ionTabContextState.selectTab=this.tabBarRef.current.selectTab)}renderTabsInner(e,t){return m.jsx(UT,{...this.props,children:Pe.Children.map(e,i=>Pe.isValidElement(i)&&(i.type===Th||i.type.isRouterOutlet||i.type===C.Fragment&&i.props.children[0].type===Th)?t:i)})}render(){let e,t=!1;const{className:i,onIonTabsDidChange:s,onIonTabsWillChange:r,...o}=this.props,l=typeof this.props.children=="function"?this.props.children(this.ionTabContextState):this.props.children;if(Pe.Children.forEach(l,d=>{if(d==null||typeof d!="object"||!d.hasOwnProperty("type"))return;d.type===Th||d.type.isRouterOutlet?e=Pe.cloneElement(d):d.type===C.Fragment&&d.props.children[0].type===Th?e=Pe.cloneElement(d.props.children[0]):d.type===tF&&(t=!0),this.ionTabContextState.hasRouterOutlet=!!e;let u={...this.ionTabContextState.tabBarProps};s!==void 0&&(u={...u,onIonTabsDidChange:s}),r!==void 0&&(u={...u,onIonTabsWillChange:r}),this.ionTabContextState.tabBarProps=u}),!e&&!t)throw new Error("IonTabs must contain an IonRouterOutlet or an IonTab");if(e&&t)throw new Error("IonTabs cannot contain an IonRouterOutlet and an IonTab at the same time");return t?m.jsx(UT,{...this.props}):m.jsx(nI.Provider,{value:this.ionTabContextState,children:this.context.hasIonicRouter()?m.jsx(By,{className:i?`${i}`:"",routeInfo:this.context.routeInfo,...o,children:this.renderTabsInner(l,e)}):this.renderTabsInner(l,e)})}static get contextType(){return Fs}}class Ir extends Pe.Component{shouldComponentUpdate(){return!0}constructor(e){super(e),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const{onClick:e,...t}=this.props;return m.jsx(dF,{onIonTabButtonClick:this.handleIonTabButtonClick,...t})}static get displayName(){return"IonTabButton"}}class TF extends Pe.PureComponent{constructor(e){super(e),this.setActiveTabOnContext=i=>{};const t={};Pe.Children.forEach(e.children,i=>{i!=null&&typeof i=="object"&&i.props&&(i.type===Ir||i.type.isTabButton)&&(t[i.props.tab]={originalHref:i.props.href,currentHref:i.props.href,originalRouteOptions:i.props.href===e.routeInfo?.pathname?e.routeInfo?.routeOptions:void 0,currentRouteOptions:i.props.href===e.routeInfo?.pathname?e.routeInfo?.routeOptions:void 0})}),this.state={tabs:t},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const e=this.state.tabs,i=Object.keys(e).find(s=>{const r=e[s].originalHref;return this.props.routeInfo.pathname.startsWith(r)});i&&this.setState({activeTab:i})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(e){const t=this.state.tabs[e];return t?(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:t.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0):!1}static getDerivedStateFromProps(e,t){const i={...t.tabs},r=Object.keys(t.tabs).find(l=>{const d=t.tabs[l].originalHref;return e.routeInfo.pathname.startsWith(d)});Pe.Children.forEach(e.children,l=>{if(l!=null&&typeof l=="object"&&l.props&&(l.type===Ir||l.type.isTabButton)){const d=i[l.props.tab];(!d||d.originalHref!==l.props.href)&&(i[l.props.tab]={originalHref:l.props.href,currentHref:l.props.href,originalRouteOptions:l.props.routeOptions,currentRouteOptions:l.props.routeOptions})}});const{activeTab:o}=t;if(r&&o){const l=t.tabs[o].currentHref,d=t.tabs[o].currentRouteOptions;(r!==o||l!==e.routeInfo?.pathname||d!==e.routeInfo?.routeOptions)&&(i[r]={originalHref:i[r].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:i[r].originalRouteOptions,currentRouteOptions:e.routeInfo?.routeOptions},e.routeInfo.routeAction==="pop"&&r!==o&&(i[o]={originalHref:i[o].originalHref,currentHref:i[o].originalHref,originalRouteOptions:i[o].originalRouteOptions,currentRouteOptions:i[o].currentRouteOptions}))}return r&&e.onSetCurrentTab(r,e.routeInfo),{activeTab:r,tabs:i}}onTabButtonClick(e,t){const i=this.state.tabs[e.detail.tab],s=i.originalHref,r=this.props.tabsContext?.hasRouterOutlet,o=r?e.detail.href:"",{activeTab:l}=this.state;t&&t(e),l===e.detail.tab?s!==o&&this.context.resetTab(e.detail.tab,s,i.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),r&&(this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,o,e.detail.routeOptions)))}renderTabButton(e){return t=>{if(t!=null&&t.props&&(t.type===Ir||t.type.isTabButton)){const i=t.props.tab===e?this.props.routeInfo?.pathname:this.state.tabs[t.props.tab].currentHref,s=t.props.tab===e?this.props.routeInfo?.routeOptions:this.state.tabs[t.props.tab].currentRouteOptions;return Pe.cloneElement(t,{href:i,routeOptions:s,onClick:r=>this.onTabButtonClick(r,t.props.onClick)})}return null}}render(){const{activeTab:e}=this.state;return m.jsx(uF,{...this.props,selectedTab:e,children:Pe.Children.map(this.props.children,this.renderTabButton(e))})}static get contextType(){return Fs}}const kF=Pe.memo(({forwardedRef:n,...e})=>{const t=C.useContext(Fs),i=C.useContext(nI),s=n||i.tabBarProps.ref,r={...i.tabBarProps,ref:s};return m.jsx(TF,{ref:s,...e,routeInfo:e.routeInfo||t.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:t.setCurrentTab,tabsContext:{...i,tabBarProps:r},children:e.children})}),_F=La(kF,"IonTabBar");class HJ extends Pe.Component{constructor(){super(...arguments),this.clickButton=e=>{if(e.target&&e.target.closest("ion-nav")!==null)return;const{defaultHref:t,routerAnimation:i}=this.props;this.context.hasIonicRouter()?(e.stopPropagation(),this.context.goBack(t,i)):t!==void 0&&(window.location.href=t)}}render(){return m.jsx(hF,{onClick:this.clickButton,...this.props})}static get displayName(){return"IonBackButton"}static get contextType(){return Fs}shouldComponentUpdate(){return!0}}class AF extends Pe.PureComponent{constructor(e){super(e),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){const{icon:e,ios:t,md:i,mode:s,...r}=this.props;let o;const l=sF(),d=s||l?.get("mode");return t||i?d==="ios"?o=t??i??e:o=i??t??e:o=e,m.jsx(pF,{ref:this.props.forwardedRef,icon:o,...r,children:this.props.children})}static get contextType(){return Fs}}const af=La(AF,"IonIcon");class sI extends Pe.PureComponent{render(){const e=this.context.getIonRoute();return!this.context.hasIonicRouter()||!sI?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null):m.jsx(e,{...this.props})}static get contextType(){return Fs}}class rI extends Pe.PureComponent{render(){const e=this.context.getIonRedirect();return!this.context.hasIonicRouter()||!rI?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRedirect>"),null):m.jsx(e,{...this.props})}static get contextType(){return Fs}}const CF=Pe.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});class GJ extends Pe.PureComponent{constructor(e){super(e),this.nodes=new Map,this.animation=ht(e.id)}setupAnimation(e){const t=this.animation;this.nodes.size>0&&t.addElement(Array.from(this.nodes.values())),HT(t,e),GT(t,e)}componentDidMount(){const e=this.props;this.setupAnimation(e)}componentDidUpdate(e){const t=this.animation,i=this.props;HT(t,i,e),IF(t,i,e),GT(t,i,e)}render(){const{children:e}=this.props;return m.jsx(m.Fragment,{children:Pe.Children.map(e,(t,i)=>Pe.cloneElement(t,{ref:s=>this.nodes.set(i,s)}))})}}const HT=(n,e={},t={})=>{const i=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(const d in e)e.hasOwnProperty(d)&&!i.includes(d)&&e[d]!==t[d]&&n[d](e[d]);const s=e.from;s&&s!==t.from&&(Array.isArray(s)?s:[s]).forEach(u=>n.from(u.property,u.value));const r=e.to;r&&r!==t.to&&(Array.isArray(r)?r:[r]).forEach(u=>n.to(u.property,u.value));const o=e.fromTo;o&&o!==t.fromTo&&(Array.isArray(o)?o:[o]).forEach(u=>n.fromTo(u.property,u.fromValue,u.toValue));const l=e.onFinish;l&&l!==t.onFinish&&(Array.isArray(l)?l:[l]).forEach(u=>n.onFinish(u.callback,u.opts))},IF=(n,e={},t={})=>{const{progressStart:i,progressStep:s,progressEnd:r}=e;i&&(t.progressStart?.forceLinearEasing!==i?.forceLinearEasing||t.progressStart?.step!==i?.step)&&n.progressStart(i.forceLinearEasing,i.step),s&&t.progressStep?.step!==s?.step&&n.progressStep(s.step),r&&(t.progressEnd?.playTo!==r?.playTo||t.progressEnd?.step!==r?.step||t?.dur!==r?.dur)&&n.progressEnd(r.playTo,r.step,r.dur)},GT=(n,e={},t={})=>{!t.play&&e.play&&n.play(),!t.pause&&e.pause&&n.pause(),!t.stop&&e.stop&&n.stop(),!t.destroy&&e.destroy&&n.destroy()},RF=(n={})=>{typeof document<"u"&&document.documentElement.classList.add("ion-ce"),S3({...n})};class VJ extends Pe.Component{constructor(e){super(e),this.ionLifeCycleContext=new G8,this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed(()=>{this.props.mount||this._isMounted&&this.setState({show:!1},()=>this.props.removeView())}),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:e}=this.state;return m.jsx(Oy.Provider,{value:this.ionLifeCycleContext,children:e&&this.props.children})}}class qJ extends Pe.PureComponent{constructor(e){super(e),this.ionRouterContextValue={push:(t,i,s,r,o)=>{this.navigate(t,i,s,o,r)},back:t=>{this.goBack(void 0,t)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){typeof document<"u"&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){typeof document<"u"&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(e){e.detail.register(0,t=>{this.nativeGoBack(),t()})}goBack(e,t){this.props.onNavigateBack(e,t)}nativeGoBack(){this.props.onNativeBack()}navigate(e,t="forward",i="push",s,r,o){this.props.onNavigate(e,i,t,s,r,o)}getPageManager(){return By}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return m.jsx(Fs.Provider,{value:{...this.state,routeInfo:this.props.routeInfo},children:m.jsx(CF.Provider,{value:{...this.ionRouterContextValue,routeInfo:this.props.routeInfo},children:this.props.children})})}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ed(){return Ed=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ed.apply(this,arguments)}var Ro;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ro||(Ro={}));const VT="popstate";function LF(n){n===void 0&&(n={});function e(i,s){let{pathname:r,search:o,hash:l}=i.location;return gv("",{pathname:r,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:aI(s)}return OF(e,t,null,n)}function Hi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function oI(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DF(){return Math.random().toString(36).substr(2,8)}function qT(n,e){return{usr:n.state,key:n.key,idx:e}}function gv(n,e,t,i){return t===void 0&&(t=null),Ed({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ic(e):e,{state:t,key:e&&e.key||i||DF()})}function aI(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ic(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function OF(n,e,t,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,l=Ro.Pop,d=null,u=f();u==null&&(u=0,o.replaceState(Ed({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=Ro.Pop;let E=f(),T=E==null?null:E-u;u=E,d&&d({action:l,location:w.location,delta:T})}function b(E,T){l=Ro.Push;let k=gv(w.location,E,T);u=f()+1;let _=qT(k,u),O=w.createHref(k);try{o.pushState(_,"",O)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(O)}r&&d&&d({action:l,location:w.location,delta:1})}function v(E,T){l=Ro.Replace;let k=gv(w.location,E,T);u=f();let _=qT(k,u),O=w.createHref(k);o.replaceState(_,"",O),r&&d&&d({action:l,location:w.location,delta:0})}function y(E){let T=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof E=="string"?E:aI(E);return k=k.replace(/ $/,"%20"),Hi(T,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,T)}let w={get action(){return l},get location(){return n(s,o)},listen(E){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(VT,p),d=E,()=>{s.removeEventListener(VT,p),d=null}},createHref(E){return e(s,E)},createURL:y,encodeLocation(E){let T=y(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:v,go(E){return o.go(E)}};return w}var WT;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(WT||(WT={}));function NF(n,e,t){return t===void 0&&(t="/"),PF(n,e,t)}function PF(n,e,t,i){let s=typeof e=="string"?ic(e):e,r=dI(s.pathname||"/",t);if(r==null)return null;let o=lI(n);MF(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let u=KF(r);l=VF(o[d],u)}return l}function lI(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let s=(r,o,l)=>{let d={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};d.relativePath.startsWith("/")&&(Hi(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let u=ga([i,d.relativePath]),f=t.concat(d);r.children&&r.children.length>0&&(Hi(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),lI(r.children,e,f,u)),!(r.path==null&&!r.index)&&e.push({path:u,score:HF(u,r.index),routesMeta:f})};return n.forEach((r,o)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))s(r,o);else for(let d of cI(r.path))s(r,o,d)}),e}function cI(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=cI(i.join("/")),l=[];return l.push(...o.map(d=>d===""?r:[r,d].join("/"))),s&&l.push(...o),l.map(d=>n.startsWith("/")&&d===""?"/":d)}function MF(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:GF(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const $F=/^:[\w-]+$/,FF=3,jF=2,BF=1,UF=10,zF=-2,KT=n=>n==="*";function HF(n,e){let t=n.split("/"),i=t.length;return t.some(KT)&&(i+=zF),e&&(i+=jF),t.filter(s=>!KT(s)).reduce((s,r)=>s+($F.test(r)?FF:r===""?BF:UF),i)}function GF(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function VF(n,e,t){let{routesMeta:i}=n,s={},r="/",o=[];for(let l=0;l<i.length;++l){let d=i[l],u=l===i.length-1,f=r==="/"?e:e.slice(r.length)||"/",p=qF({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},f),b=d.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:ga([r,p.pathname]),pathnameBase:ZF(ga([r,p.pathnameBase])),route:b}),p.pathnameBase!=="/"&&(r=ga([r,p.pathnameBase]))}return o}function qF(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=WF(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((u,f,p)=>{let{paramName:b,isOptional:v}=f;if(b==="*"){let w=l[p]||"";o=r.slice(0,r.length-w.length).replace(/(.)\/+$/,"$1")}const y=l[p];return v&&!y?u[b]=void 0:u[b]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:o,pattern:n}}function WF(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),oI(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(i.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function KF(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oI(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function dI(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function YF(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?ic(n):n;return{pathname:t?t.startsWith("/")?t:XF(t,e):e,search:JF(i),hash:ej(s)}}function XF(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function b0(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QF(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function uI(n,e){let t=QF(n);return e?t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function hI(n,e,t,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=ic(n):(s=Ed({},n),Hi(!s.pathname||!s.pathname.includes("?"),b0("?","pathname","search",s)),Hi(!s.pathname||!s.pathname.includes("#"),b0("#","pathname","hash",s)),Hi(!s.search||!s.search.includes("#"),b0("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,l;if(o==null)l=t;else{let p=e.length-1;if(!i&&o.startsWith("..")){let b=o.split("/");for(;b[0]==="..";)b.shift(),p-=1;s.pathname=b.join("/")}l=p>=0?e[p]:"/"}let d=YF(s,l),u=o&&o!=="/"&&o.endsWith("/"),f=(r||o===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(u||f)&&(d.pathname+="/"),d}const ga=n=>n.join("/").replace(/\/\/+/g,"/"),ZF=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),JF=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ej=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const fI=["post","put","patch","delete"];new Set(fI);const ij=["get",...fI];new Set(ij);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Td(){return Td=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Td.apply(this,arguments)}const Uy=C.createContext(null),nj=C.createContext(null),Vd=C.createContext(null),Op=C.createContext(null),Ho=C.createContext({outlet:null,matches:[],isDataRoute:!1}),pI=C.createContext(null);function qd(){return C.useContext(Op)!=null}function nc(){return qd()||Hi(!1),C.useContext(Op).location}function mI(n){C.useContext(Vd).static||C.useLayoutEffect(n)}function vs(){let{isDataRoute:n}=C.useContext(Ho);return n?vj():sj()}function sj(){qd()||Hi(!1);let n=C.useContext(Uy),{basename:e,future:t,navigator:i}=C.useContext(Vd),{matches:s}=C.useContext(Ho),{pathname:r}=nc(),o=JSON.stringify(uI(s,t.v7_relativeSplatPath)),l=C.useRef(!1);return mI(()=>{l.current=!0}),C.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){i.go(u);return}let p=hI(u,JSON.parse(o),r,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ga([e,p.pathname])),(f.replace?i.replace:i.push)(p,f.state,f)},[e,i,o,r,n])}const rj=C.createContext(null);function oj(n){let e=C.useContext(Ho).outlet;return e&&C.createElement(rj.Provider,{value:n},e)}function aj(n,e){return lj(n,e)}function lj(n,e,t,i){qd()||Hi(!1);let{navigator:s}=C.useContext(Vd),{matches:r}=C.useContext(Ho),o=r[r.length-1],l=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=nc(),f;if(e){var p;let E=typeof e=="string"?ic(e):e;d==="/"||(p=E.pathname)!=null&&p.startsWith(d)||Hi(!1),f=E}else f=u;let b=f.pathname||"/",v=b;if(d!=="/"){let E=d.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(E.length).join("/")}let y=NF(n,{pathname:v}),w=fj(y&&y.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:ga([d,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:ga([d,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),r,t,i);return e&&w?C.createElement(Op.Provider,{value:{location:Td({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ro.Pop}},w):w}function cj(){let n=bj(),e=tj(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:s},t):null,null)}const dj=C.createElement(cj,null);class uj extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?C.createElement(Ho.Provider,{value:this.props.routeContext},C.createElement(pI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hj(n){let{routeContext:e,match:t,children:i}=n,s=C.useContext(Uy);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(Ho.Provider,{value:e},i)}function fj(n,e,t,i){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var r;if(!t)return null;if(t.errors)n=t.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=(s=t)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);f>=0||Hi(!1),o=o.slice(0,Math.min(o.length,f+1))}let d=!1,u=-1;if(t&&i&&i.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:b,errors:v}=t,y=p.route.loader&&b[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||y){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,p,b)=>{let v,y=!1,w=null,E=null;t&&(v=l&&p.route.id?l[p.route.id]:void 0,w=p.route.errorElement||dj,d&&(u<0&&b===0?(yj("route-fallback"),y=!0,E=null):u===b&&(y=!0,E=p.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,b+1)),k=()=>{let _;return v?_=w:y?_=E:p.route.Component?_=C.createElement(p.route.Component,null):p.route.element?_=p.route.element:_=f,C.createElement(hj,{match:p,routeContext:{outlet:f,matches:T,isDataRoute:t!=null},children:_})};return t&&(p.route.ErrorBoundary||p.route.errorElement||b===0)?C.createElement(uj,{location:t.location,revalidation:t.revalidation,component:w,error:v,children:k(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):k()},null)}var gI=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(gI||{}),bI=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(bI||{});function pj(n){let e=C.useContext(Uy);return e||Hi(!1),e}function mj(n){let e=C.useContext(nj);return e||Hi(!1),e}function gj(n){let e=C.useContext(Ho);return e||Hi(!1),e}function vI(n){let e=gj(),t=e.matches[e.matches.length-1];return t.route.id||Hi(!1),t.route.id}function bj(){var n;let e=C.useContext(pI),t=mj(),i=vI();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function vj(){let{router:n}=pj(gI.UseNavigateStable),e=vI(bI.UseNavigateStable),t=C.useRef(!1);return mI(()=>{t.current=!0}),C.useCallback(function(s,r){r===void 0&&(r={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Td({fromRouteId:e},r)))},[n,e])}const YT={};function yj(n,e,t){YT[n]||(YT[n]=!0)}function xj(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function v0(n){let{to:e,replace:t,state:i,relative:s}=n;qd()||Hi(!1);let{future:r,static:o}=C.useContext(Vd),{matches:l}=C.useContext(Ho),{pathname:d}=nc(),u=vs(),f=hI(e,uI(l,r.v7_relativeSplatPath),d,s==="path"),p=JSON.stringify(f);return C.useEffect(()=>u(JSON.parse(p),{replace:t,state:i,relative:s}),[u,p,s,t,i]),null}function wj(n){return oj(n.context)}function nn(n){Hi(!1)}function Sj(n){let{basename:e="/",children:t=null,location:i,navigationType:s=Ro.Pop,navigator:r,static:o=!1,future:l}=n;qd()&&Hi(!1);let d=e.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:d,navigator:r,static:o,future:Td({v7_relativeSplatPath:!1},l)}),[d,l,r,o]);typeof i=="string"&&(i=ic(i));let{pathname:f="/",search:p="",hash:b="",state:v=null,key:y="default"}=i,w=C.useMemo(()=>{let E=dI(f,d);return E==null?null:{location:{pathname:E,search:p,hash:b,state:v,key:y},navigationType:s}},[d,f,p,b,v,y,s]);return w==null?null:C.createElement(Vd.Provider,{value:u},C.createElement(Op.Provider,{children:t,value:w}))}function Ej(n){let{children:e,location:t}=n;return aj(bv(e),t)}new Promise(()=>{});function bv(n,e){e===void 0&&(e=[]);let t=[];return C.Children.forEach(n,(i,s)=>{if(!C.isValidElement(i))return;let r=[...e,s];if(i.type===C.Fragment){t.push.apply(t,bv(i.props.children,r));return}i.type!==nn&&Hi(!1),!i.props.index||!i.props.children||Hi(!1);let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=bv(i.props.children,r)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Tj="6";try{window.__reactRouterVersion=Tj}catch{}const kj="startTransition",XT=v5[kj];function _j(n){let{basename:e,children:t,future:i,window:s}=n,r=C.useRef();r.current==null&&(r.current=LF({window:s,v5Compat:!0}));let o=r.current,[l,d]=C.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},f=C.useCallback(p=>{u&&XT?XT(()=>d(p)):d(p)},[d,u]);return C.useLayoutEffect(()=>o.listen(f),[o,f]),C.useEffect(()=>xj(i),[i]),C.createElement(Sj,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:i})}var QT;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(QT||(QT={}));var ZT;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(ZT||(ZT={}));const Aj=()=>"https://special-dating.com/",Cj=()=>"/mobile",Cs={get baseUrl(){return Aj()},get mobileApiPath(){return Cj()},getMobileApiUrl:(n="")=>{const e=Cs.baseUrl.replace(/\/+$/,""),t=Cs.mobileApiPath.startsWith("/")?Cs.mobileApiPath:`/${Cs.mobileApiPath}`,i=n.startsWith("/")?n:`/${n}`;return`${e}${t}${i}`},getApiUrl:(n="")=>{const e=Cs.baseUrl.replace(/\/+$/,""),t=n.startsWith("/")?n:`/${n}`;return`${e}${t}`}};typeof window<"u"&&(window.siteConfig=Cs);const yI=C.createContext(void 0),Ij=({children:n})=>{const[e,t]=C.useState(null),[i,s]=C.useState(!0),[r,o]=C.useState(null),l=Pe.useRef(!1),d=async()=>{if(!l.current){l.current=!0;try{s(!0),o(null);const u=new URLSearchParams(window.location.search).get("page")||"index",f=Cs.getMobileApiUrl(`/getsetting.php?page=${encodeURIComponent(u)}`);console.log("Fetching settings from:",f);const p=await fetch(f),b=p.headers.get("content-type");if(!b||!b.includes("application/json")){const y=await p.text();throw console.error("Received non-JSON response:",y.substring(0,200)),new Error(`Server returned HTML instead of JSON. Check API URL: ${f}`)}if(!p.ok)throw new Error(`Failed to fetch settings: ${p.status} ${p.statusText}`);const v=await p.json();t(v)}catch(u){const f=u instanceof Error?u:new Error("Unknown error occurred");o(f),console.error("Error loading site config:",f),console.error("API URL attempted:",Cs.getMobileApiUrl("/getsetting.php?page=index"))}finally{s(!1),l.current=!1}}};return C.useEffect(()=>(d(),()=>{l.current=!1}),[]),m.jsx(yI.Provider,{value:{settings:e,loading:i,error:r,reload:d},children:n})},Ti=()=>{const n=C.useContext(yI);if(n===void 0)throw new Error("useSiteConfig must be used within a SiteConfigProvider");return n};class Rj{getApiUrl(e,t){const i=e.startsWith("/")?e:`/${e}`;if(t){const s=o=>o?o.trim().replace(/\/+$/,""):"",r=[s(t.aUrl),s(t.ajax_path),s(Cs.baseUrl)].filter(Boolean);for(const o of r){if(!o)continue;if(o.endsWith(i))return o;const l=o.replace(/\/requests\/api\.php$/i,"");if(l&&l!==o)return`${l}${i}`;if(o.includes("/requests/api.php"))return o.replace(/\/requests\/api\.php/i,i)}}return Cs.getApiUrl(e)}async query(e,t,i){const s=this.getApiUrl("/requests/api.php",i),r=encodeURIComponent(e),o=`${s}?action=${r}&query=${t}`,l=await fetch(o,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!l.ok)return{};try{return await l.json()}catch{return{}}}async rt(e,t,i){const s=this.getApiUrl("/requests/rt.php",i),r=encodeURIComponent(e),o=`${s}?action=${r}&query=${t}`,l=await fetch(o,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!l.ok)return{};try{return await l.json()}catch{return{}}}async game(e,t,i){const s=this.getApiUrl("/requests/api.php",i),r=new URLSearchParams({action:e,id:String(t)}),o=await fetch(`${s}?${r.toString()}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!o.ok)return{};try{return await o.json()}catch{return{}}}async login(e,t="-1",i){const s=this.getApiUrl("/requests/api.php",i),r=new URLSearchParams({action:"login",login_email:e.login_email,login_pass:e.login_pass,dID:t}),o=await fetch(`${s}?${r.toString()}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!o.ok)return{};try{return await o.json()}catch{return{}}}async register(e,t){const i=this.getApiUrl("/requests/api.php",t),s=new URLSearchParams({action:"register",reg_email:e.reg_email,reg_pass:e.reg_pass,dID:e.dID||"-1"});e.reg_name&&s.append("reg_name",e.reg_name),e.reg_birthday&&s.append("reg_birthday",e.reg_birthday),e.reg_gender!==void 0&&s.append("reg_gender",String(e.reg_gender)),e.reg_looking!==void 0&&s.append("reg_looking",String(e.reg_looking)),e.reg_photo&&s.append("reg_photo",e.reg_photo),e.reg_thumb&&s.append("reg_thumb",e.reg_thumb),e.reg_username&&s.append("reg_username",e.reg_username),e.reg_lat!==void 0&&s.append("reg_lat",String(e.reg_lat)),e.reg_lng!==void 0&&s.append("reg_lng",String(e.reg_lng)),e.reg_city&&s.append("reg_city",e.reg_city),e.reg_country&&s.append("reg_country",e.reg_country);const r=await fetch(`${i}?${s.toString()}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!r.ok)return{};try{return await r.json()}catch{return{}}}async recoverPassword(e,t){return this.query("recover",e,t)}async fbConnect(e,t){return this.query("fbconnect",e,t)}async firebaseAuth(e,t){const i=this.getApiUrl("/requests/api-auth.php",t),s=await fetch(i,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"firebaseAuth",...e})});if(!s.ok)return{error:1,error_m:`Request failed: ${s.status}`};try{return await s.json()}catch{return{error:1,error_m:"Invalid response format"}}}async chat(e,t,i,s){const r=this.getApiUrl("/requests/api.php",s),o=new URLSearchParams({action:e,uid1:String(t),uid2:String(i)}),l=await fetch(`${r}?${o.toString()}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!l.ok)return{};try{return await l.json()}catch{return{}}}async meet(e,t,i,s,r){const o=this.getApiUrl("/requests/api.php",r),l=new URLSearchParams({action:e,uid1:String(t),uid2:String(i)});s!==void 0&&l.append("uid3",String(s));const d=await fetch(`${o}?${l.toString()}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!d.ok)return{};try{return await d.json()}catch{return{}}}async device(e,t,i){const s=this.getApiUrl("/requests/api.php",i),r=new URLSearchParams({action:e,dID:t}),o=await fetch(`${s}?${r.toString()}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!o.ok)return{};try{return await o.json()}catch{return{}}}async currentUser(e,t,i){return this.device(e,t,i)}async config(e,t){const i=this.getApiUrl("/requests/api.php",t),s=new URLSearchParams({action:e}),r=await fetch(`${i}?${s.toString()}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!r.ok)return{};try{return await r.json()}catch{return{}}}async chatDetails(e,t){const i=this.getApiUrl("/requests/chat.php",t),s=new URLSearchParams({profileID:String(e)}),r=await fetch(`${i}?${s.toString()}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!r.ok)return{};try{return await r.json()}catch{return{}}}async custom(e,t,i){const s=this.getApiUrl(e,i),r=new URLSearchParams;Object.entries(t).forEach(([l,d])=>{r.append(l,String(d))});const o=await fetch(`${s}?${r.toString()}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!o.ok)return{};try{return await o.json()}catch{return{}}}async reels(e,t){return this.custom("/requests/reels.php",e,t)}async reelsPost(e,t){const i=this.getApiUrl("/requests/reels.php",t),s=new URLSearchParams;Object.entries(e).forEach(([o,l])=>{s.append(o,String(l))});const r=await fetch(i,{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()});if(!r.ok)return{};try{return await r.json()}catch{return{}}}async bellooPost(e,t){const i=this.getApiUrl("/requests/belloo.php",t);let s;const r={"X-Requested-With":"XMLHttpRequest"};e instanceof FormData?s=e:(s=new URLSearchParams,Object.entries(e).forEach(([l,d])=>{s.append(l,String(d))}),r["Content-Type"]="application/x-www-form-urlencoded");const o=await fetch(i,{method:"POST",credentials:"include",headers:r,body:s});if(!o.ok)return{};try{return await o.json()}catch{return{}}}}const Ne=new Rj,xI=C.createContext(void 0),Lj=({children:n})=>{const{settings:e}=Ti(),[t,i]=C.useState(null),[s,r]=C.useState(!0),[o,l]=C.useState({}),[d,u]=C.useState({}),[f,p]=C.useState(null),[b,v]=C.useState(null),[y,w]=C.useState(null),[E,T]=C.useState(null),k=C.useRef(!1),_=async()=>{try{r(!0);let R=window.userId||-1,M=null;const P=localStorage.getItem("user");P?(M=JSON.parse(P),M&&M.id?(R=M.id,window.userId=M.id):R=-1):R=-1;const N=e?.siteLang||1,L=await Ne.custom("/requests/api.php",{action:"config",dID:String(R),siteLang:String(N)},e);if(L&&L.config){if(localStorage.setItem("config",JSON.stringify(L.config)),v(L.config),window.site_config=L.config,L.app&&(localStorage.setItem("app",JSON.stringify(L.app)),p(L.app),window.app=L.app),L.prices&&(localStorage.setItem("prices",JSON.stringify(L.prices)),w(L.prices)),L.lang){const D={};Array.isArray(L.lang)?L.lang.forEach(($,U)=>{const G=$?.text||$;G&&(D[U]=G,D[String(U)]=G,$&&$.id!==void 0&&(D[$.id]=G,D[String($.id)]=G))}):Object.keys(L.lang).forEach($=>{const U=L.lang[$],G=U?.text||U;G&&(D[$]=typeof G=="string"?G:G.text||G)}),localStorage.setItem("lang",JSON.stringify(D)),l(D),window.site_lang=L.lang}if(L.alang){const D={};Array.isArray(L.alang)?L.alang.forEach(($,U)=>{const G=$?.text?.replace("&#039;","'")||$?.text||$;if(G){const Z=typeof G=="string"?G:G.text;D[U]=Z,D[String(U)]=Z,$&&$.id!==void 0&&(D[$.id]=Z,D[String($.id)]=Z)}}):Object.keys(L.alang).forEach($=>{const U=L.alang[$],G=U?.text?.replace("&#039;","'")||U?.text||U;G&&(D[$]=typeof G=="string"?G:G.text||G)}),localStorage.setItem("alang",JSON.stringify(D)),u(D),window.alang=L.alang}if(L.user&&L.user!==""){const D=L.user,$=D.id||window.userId||-1;if($&&$>0)try{const U=await Ne.custom("/requests/api.php",{action:"userProfile",id:$},e);if(U.user){const G={...U.user,slike:D.slike,sage:D.sage,photos:D.photos||U.user.photos,notification:D.notification||U.user.notification};localStorage.setItem("user",JSON.stringify(G)),i(G),window.user=G,window.user_info=G,G.photos&&(localStorage.setItem("usPhotos",JSON.stringify(G.photos)),window.usPhotos=G.photos),window.userId=G.id,window.sape=G.slike}else localStorage.setItem("user",JSON.stringify(D)),i(D),window.user=D,window.user_info=D,D.photos&&(localStorage.setItem("usPhotos",JSON.stringify(D.photos)),window.usPhotos=D.photos),window.userId=$,window.sape=D.slike}catch(U){console.error("Error fetching user profile:",U),localStorage.setItem("user",JSON.stringify(D)),i(D),window.user=D,window.user_info=D,D.photos&&(localStorage.setItem("usPhotos",JSON.stringify(D.photos)),window.usPhotos=D.photos),window.userId=$,window.sape=D.slike}else localStorage.setItem("user",JSON.stringify(D)),i(D),window.user=D,window.user_info=D,D.photos&&(localStorage.setItem("usPhotos",JSON.stringify(D.photos)),window.usPhotos=D.photos)}else i(null);if(L.premium_package&&localStorage.setItem("premium_package",JSON.stringify(L.premium_package)),L.credits_package&&localStorage.setItem("credits_package",JSON.stringify(L.credits_package)),L.account_basic&&localStorage.setItem("account_basic",JSON.stringify(L.account_basic)),L.account_premium&&localStorage.setItem("account_premium",JSON.stringify(L.account_premium)),L.gifts&&(localStorage.setItem("gifts",JSON.stringify(L.gifts)),T(L.gifts),window.appGifts=L.gifts),L.user&&L.user!==""){const D=e?.plugins?.settings?.firstPageAfterLogin;window.firstPageAfterLogin=D}else{const D=e?.mobileTheme||"twigo",$=e?.mobile_theme?.show_welcome_slider?.val==="Yes";window.shouldRedirectToLogin=!0,window.redirectPath=D==="twigo"&&$?"/intro":D==="twigo"?"/register":"/intro"}if(L.app&&L.app.logo&&(window.logo=L.app.logo),L.app){const D=document.createElement("style");D.type="text/css",D.innerHTML=`.bg-tinder {background:${L.app.first_color}; background: -moz-linear-gradient(left,  ${L.app.first_color} 0%, ${L.app.second_color} 100%);background: -webkit-linear-gradient(left,  ${L.app.first_color} 0%,${L.app.second_color} 100%); background: linear-gradient(to right,  ${L.app.first_color} 0%,${L.app.second_color} 100%); color:#fff }`,document.getElementsByTagName("head")[0].appendChild(D)}}else{const D=localStorage.getItem("user");if(D){const G=JSON.parse(D);i(G),window.user=G}const $=localStorage.getItem("lang");$&&l(JSON.parse($));const U=localStorage.getItem("alang");U&&u(JSON.parse(U))}}catch(R){console.error("Error loading user data:",R);const M=localStorage.getItem("user");if(M){const L=JSON.parse(M);i(L),window.user=L}const P=localStorage.getItem("lang");P&&l(JSON.parse(P));const N=localStorage.getItem("alang");N&&u(JSON.parse(N))}finally{r(!1)}};e&&!k.current&&(k.current=!0,_());const O={user:t,loading:s,lang:o,alang:d,app:f,config:b,prices:y,gifts:E,setUser:i,reloadUser:_};return m.jsx(xI.Provider,{value:O,children:n})},Ki=()=>{const n=C.useContext(xI);if(n===void 0)throw new Error("useUser must be used within a UserProvider");return n},wn=()=>{const{lang:n}=Ki(),e=C.useMemo(()=>{const t={};return n&&typeof n=="object"&&(Array.isArray(n)?n.forEach((i,s)=>{const r=i?.text||i;r&&(t[s]=typeof r=="string"?r:r.text,t[String(s)]=typeof r=="string"?r:r.text)}):Object.keys(n).forEach(i=>{const s=n[i],r=s?.text||s;r&&(t[i]=typeof r=="string"?r:String(r),t[String(i)]=typeof r=="string"?r:String(r))})),t},[n]);return C.useEffect(()=>{!n||typeof n!="object"||(Array.isArray(n)?n.forEach((t,i)=>{const s=document.querySelectorAll(`[data-lid="${i}"]`),r=t?.text||t;r&&typeof r=="string"?s.forEach(o=>{o.textContent=r}):r&&r.text&&s.forEach(o=>{o.textContent=r.text})}):Object.keys(n).forEach(t=>{const i=document.querySelectorAll(`[data-lid="${t}"]`),s=n[t],r=s?.text||s;if(r){const o=typeof r=="string"?r:r.text;o&&i.forEach(l=>{l.textContent=o})}}))},[n]),e},wI=C.createContext(void 0),In=()=>{const n=C.useContext(wI);if(!n)throw new Error("useNotification must be used within NotificationProvider");return n},Dj=({children:n})=>{const[e,t]=C.useState([]),i=C.useCallback(r=>{t(o=>o.filter(l=>l.id!==r))},[]),s=C.useCallback((r,o="neutral",l=3e3,d)=>{const u=Date.now().toString()+Math.random().toString(36).substr(2,9),f={id:u,message:r,type:o,duration:l,icon:d};t(p=>[...p,f]),l>0&&setTimeout(()=>{i(u)},l)},[i]);return m.jsxs(wI.Provider,{value:{notifications:e,showNotification:s,removeNotification:i},children:[n,m.jsx(Oj,{notifications:e,removeNotification:i})]})},Oj=({notifications:n,removeNotification:e})=>m.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,zIndex:23e3,pointerEvents:"none"},children:n.map(t=>m.jsx(Nj,{notification:t,onRemove:e},t.id))}),Nj=({notification:n,onRemove:e})=>{const[t,i]=C.useState(!1);Pe.useEffect(()=>{const o=setTimeout(()=>i(!0),10);return()=>clearTimeout(o)},[]);const s=()=>{i(!1),setTimeout(()=>e(n.id),600)},r=()=>{switch(n.type){case"error":return"assertive-bg";case"success":return"balanced-bg";case"neutral":default:return"positive-bg"}};return m.jsxs("div",{className:`awlert ${t?"enter":""} ${r()}`,onClick:s,style:{pointerEvents:"auto",cursor:"pointer"},children:[m.jsx("div",{className:"awlert-space"}),m.jsxs("div",{className:"awlert-content",children:[n.icon&&m.jsx("img",{src:n.icon,alt:"",className:"awlert-icon",style:{width:"48px",height:"48px",marginRight:"12px",objectFit:"contain"}}),m.jsx("span",{children:n.message})]})]})};function JT(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function zy(n={},e={}){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:JT(e[i])&&JT(n[i])&&Object.keys(e[i]).length>0&&zy(n[i],e[i])})}const SI={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Gr(){const n=typeof document<"u"?document:{};return zy(n,SI),n}const Pj={document:SI,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function gn(){const n=typeof window<"u"?window:{};return zy(n,Pj),n}function Mj(n=""){return n.trim().split(" ").filter(e=>!!e.trim())}function $j(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function EI(n,e=0){return setTimeout(n,e)}function qf(){return Date.now()}function Fj(n){const e=gn();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function jj(n,e="x"){const t=gn();let i,s,r;const o=Fj(n);return t.WebKitCSSMatrix?(s=o.transform||o.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(l=>l.replace(",",".")).join(", ")),r=new t.WebKitCSSMatrix(s==="none"?"":s)):(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=r.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?s=r.m41:i.length===16?s=parseFloat(i[12]):s=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?s=r.m42:i.length===16?s=parseFloat(i[13]):s=parseFloat(i[5])),s||0}function kh(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function Bj(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function Jn(...n){const e=Object(n[0]),t=["__proto__","constructor","prototype"];for(let i=1;i<n.length;i+=1){const s=n[i];if(s!=null&&!Bj(s)){const r=Object.keys(Object(s)).filter(o=>t.indexOf(o)<0);for(let o=0,l=r.length;o<l;o+=1){const d=r[o],u=Object.getOwnPropertyDescriptor(s,d);u!==void 0&&u.enumerable&&(kh(e[d])&&kh(s[d])?s[d].__swiper__?e[d]=s[d]:Jn(e[d],s[d]):!kh(e[d])&&kh(s[d])?(e[d]={},s[d].__swiper__?e[d]=s[d]:Jn(e[d],s[d])):e[d]=s[d])}}}return e}function _h(n,e,t){n.style.setProperty(e,t)}function TI({swiper:n,targetPosition:e,side:t}){const i=gn(),s=-n.translate;let r=null,o;const l=n.params.speed;n.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(n.cssModeFrameID);const d=e>s?"next":"prev",u=(p,b)=>d==="next"&&p>=b||d==="prev"&&p<=b,f=()=>{o=new Date().getTime(),r===null&&(r=o);const p=Math.max(Math.min((o-r)/l,1),0),b=.5-Math.cos(p*Math.PI)/2;let v=s+b*(e-s);if(u(v,e)&&(v=e),n.wrapperEl.scrollTo({[t]:v}),u(v,e)){n.wrapperEl.style.overflow="hidden",n.wrapperEl.style.scrollSnapType="",setTimeout(()=>{n.wrapperEl.style.overflow="",n.wrapperEl.scrollTo({[t]:v})}),i.cancelAnimationFrame(n.cssModeFrameID);return}n.cssModeFrameID=i.requestAnimationFrame(f)};f()}function Ys(n,e=""){const t=gn(),i=[...n.children];return t.HTMLSlotElement&&n instanceof HTMLSlotElement&&i.push(...n.assignedElements()),e?i.filter(s=>s.matches(e)):i}function Uj(n,e){const t=[e];for(;t.length>0;){const i=t.shift();if(n===i)return!0;t.push(...i.children,...i.shadowRoot?i.shadowRoot.children:[],...i.assignedElements?i.assignedElements():[])}}function zj(n,e){const t=gn();let i=e.contains(n);return!i&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(i=[...e.assignedElements()].includes(n),i||(i=Uj(n,e))),i}function Wf(n){try{console.warn(n);return}catch{}}function Kf(n,e=[]){const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:Mj(e)),t}function Hj(n){const e=gn(),t=Gr(),i=n.getBoundingClientRect(),s=t.body,r=n.clientTop||s.clientTop||0,o=n.clientLeft||s.clientLeft||0,l=n===e?e.scrollY:n.scrollTop,d=n===e?e.scrollX:n.scrollLeft;return{top:i.top+l-r,left:i.left+d-o}}function Gj(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Vj(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Lo(n,e){return gn().getComputedStyle(n,null).getPropertyValue(e)}function Yf(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function Xf(n,e){const t=[];let i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function vv(n,e,t){const i=gn();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function Sr(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}function Qf(n,e=""){typeof trustedTypes<"u"?n.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):n.innerHTML=e}let y0;function qj(){const n=gn(),e=Gr();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function kI(){return y0||(y0=qj()),y0}let x0;function Wj({userAgent:n}={}){const e=kI(),t=gn(),i=t.navigator.platform,s=n||t.navigator.userAgent,r={ios:!1,android:!1},o=t.screen.width,l=t.screen.height,d=s.match(/(Android);?[\s\/]+([\d.]+)?/);let u=s.match(/(iPad)(?!\1).*OS\s([\d_]+)/);const f=s.match(/(iPod)(.*OS\s([\d_]+))?/),p=!u&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),b=i==="Win32";let v=i==="MacIntel";const y=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&v&&e.touch&&y.indexOf(`${o}x${l}`)>=0&&(u=s.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),v=!1),d&&!b&&(r.os="android",r.android=!0),(u||p||f)&&(r.os="ios",r.ios=!0),r}function _I(n={}){return x0||(x0=Wj(n)),x0}let w0;function Kj(){const n=gn(),e=_I();let t=!1;function i(){const l=n.navigator.userAgent.toLowerCase();return l.indexOf("safari")>=0&&l.indexOf("chrome")<0&&l.indexOf("android")<0}if(i()){const l=String(n.navigator.userAgent);if(l.includes("Version/")){const[d,u]=l.split("Version/")[1].split(" ")[0].split(".").map(f=>Number(f));t=d<16||d===16&&u<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),r=i(),o=r||s&&e.ios;return{isSafari:t||r,needPerspectiveFix:t,need3dFix:o,isWebView:s}}function AI(){return w0||(w0=Kj()),w0}function Yj({swiper:n,on:e,emit:t}){const i=gn();let s=null,r=null;const o=()=>{!n||n.destroyed||!n.initialized||(t("beforeResize"),t("resize"))},l=()=>{!n||n.destroyed||!n.initialized||(s=new ResizeObserver(f=>{r=i.requestAnimationFrame(()=>{const{width:p,height:b}=n;let v=p,y=b;f.forEach(({contentBoxSize:w,contentRect:E,target:T})=>{T&&T!==n.el||(v=E?E.width:(w[0]||w).inlineSize,y=E?E.height:(w[0]||w).blockSize)}),(v!==p||y!==b)&&o()})}),s.observe(n.el))},d=()=>{r&&i.cancelAnimationFrame(r),s&&s.unobserve&&n.el&&(s.unobserve(n.el),s=null)},u=()=>{!n||n.destroyed||!n.initialized||t("orientationchange")};e("init",()=>{if(n.params.resizeObserver&&typeof i.ResizeObserver<"u"){l();return}i.addEventListener("resize",o),i.addEventListener("orientationchange",u)}),e("destroy",()=>{d(),i.removeEventListener("resize",o),i.removeEventListener("orientationchange",u)})}function Xj({swiper:n,extendParams:e,on:t,emit:i}){const s=[],r=gn(),o=(u,f={})=>{const p=r.MutationObserver||r.WebkitMutationObserver,b=new p(v=>{if(n.__preventObserver__)return;if(v.length===1){i("observerUpdate",v[0]);return}const y=function(){i("observerUpdate",v[0])};r.requestAnimationFrame?r.requestAnimationFrame(y):r.setTimeout(y,0)});b.observe(u,{attributes:typeof f.attributes>"u"?!0:f.attributes,childList:n.isElement||(typeof f.childList>"u"?!0:f).childList,characterData:typeof f.characterData>"u"?!0:f.characterData}),s.push(b)},l=()=>{if(n.params.observer){if(n.params.observeParents){const u=Xf(n.hostEl);for(let f=0;f<u.length;f+=1)o(u[f])}o(n.hostEl,{childList:n.params.observeSlideChildren}),o(n.wrapperEl,{attributes:!1})}},d=()=>{s.forEach(u=>{u.disconnect()}),s.splice(0,s.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),t("init",l),t("destroy",d)}var Qj={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const s=t?"unshift":"push";return n.split(" ").forEach(r=>{i.eventsListeners[r]||(i.eventsListeners[r]=[]),i.eventsListeners[r][s](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function s(...r){i.off(n,s),s.__emitterProxy&&delete s.__emitterProxy,e.apply(i,r)}return s.__emitterProxy=e,i.on(n,s,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((s,r)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&t.eventsListeners[i].splice(r,1)})}),t},emit(...n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let t,i,s;return typeof n[0]=="string"||Array.isArray(n[0])?(t=n[0],i=n.slice(1,n.length),s=e):(t=n[0].events,i=n[0].data,s=n[0].context||e),i.unshift(s),(Array.isArray(t)?t:t.split(" ")).forEach(o=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(l=>{l.apply(s,[o,...i])}),e.eventsListeners&&e.eventsListeners[o]&&e.eventsListeners[o].forEach(l=>{l.apply(s,i)})}),e}};function Zj(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(Lo(i,"padding-left")||0,10)-parseInt(Lo(i,"padding-right")||0,10),t=t-parseInt(Lo(i,"padding-top")||0,10)-parseInt(Lo(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function Jj(){const n=this;function e(D,$){return parseFloat(D.getPropertyValue(n.getDirectionLabel($))||0)}const t=n.params,{wrapperEl:i,slidesEl:s,rtlTranslate:r,wrongRTL:o}=n,l=n.virtual&&t.virtual.enabled,d=l?n.virtual.slides.length:n.slides.length,u=Ys(s,`.${n.params.slideClass}, swiper-slide`),f=l?n.virtual.slides.length:u.length;let p=[];const b=[],v=[];let y=t.slidesOffsetBefore;typeof y=="function"&&(y=t.slidesOffsetBefore.call(n));let w=t.slidesOffsetAfter;typeof w=="function"&&(w=t.slidesOffsetAfter.call(n));const E=n.snapGrid.length,T=n.slidesGrid.length,k=n.size-y-w;let _=t.spaceBetween,O=-y,R=0,M=0;if(typeof k>"u")return;typeof _=="string"&&_.indexOf("%")>=0?_=parseFloat(_.replace("%",""))/100*k:typeof _=="string"&&(_=parseFloat(_)),n.virtualSize=-_-y-w,u.forEach(D=>{r?D.style.marginLeft="":D.style.marginRight="",D.style.marginBottom="",D.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(_h(i,"--swiper-centered-offset-before",""),_h(i,"--swiper-centered-offset-after",""));const P=t.grid&&t.grid.rows>1&&n.grid;P?n.grid.initSlides(u):n.grid&&n.grid.unsetSlides();let N;const L=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(D=>typeof t.breakpoints[D].slidesPerView<"u").length>0;for(let D=0;D<f;D+=1){N=0;const $=u[D];if(!($&&(P&&n.grid.updateSlide(D,$,u),Lo($,"display")==="none"))){if(l&&t.slidesPerView==="auto")t.virtual.slidesPerViewAutoSlideSize&&(N=t.virtual.slidesPerViewAutoSlideSize),N&&$&&(t.roundLengths&&(N=Math.floor(N)),$.style[n.getDirectionLabel("width")]=`${N}px`);else if(t.slidesPerView==="auto"){L&&($.style[n.getDirectionLabel("width")]="");const U=getComputedStyle($),G=$.style.transform,Z=$.style.webkitTransform;if(G&&($.style.transform="none"),Z&&($.style.webkitTransform="none"),t.roundLengths)N=n.isHorizontal()?vv($,"width"):vv($,"height");else{const se=e(U,"width"),z=e(U,"padding-left"),Y=e(U,"padding-right"),V=e(U,"margin-left"),q=e(U,"margin-right"),ie=U.getPropertyValue("box-sizing");if(ie&&ie==="border-box")N=se+V+q;else{const{clientWidth:j,offsetWidth:H}=$;N=se+z+Y+V+q+(H-j)}}G&&($.style.transform=G),Z&&($.style.webkitTransform=Z),t.roundLengths&&(N=Math.floor(N))}else N=(k-(t.slidesPerView-1)*_)/t.slidesPerView,t.roundLengths&&(N=Math.floor(N)),$&&($.style[n.getDirectionLabel("width")]=`${N}px`);$&&($.swiperSlideSize=N),v.push(N),t.centeredSlides?(O=O+N/2+R/2+_,R===0&&D!==0&&(O=O-k/2-_),D===0&&(O=O-k/2-_),Math.abs(O)<1/1e3&&(O=0),t.roundLengths&&(O=Math.floor(O)),M%t.slidesPerGroup===0&&p.push(O),b.push(O)):(t.roundLengths&&(O=Math.floor(O)),(M-Math.min(n.params.slidesPerGroupSkip,M))%n.params.slidesPerGroup===0&&p.push(O),b.push(O),O=O+N+_),n.virtualSize+=N+_,R=N,M+=1}}if(n.virtualSize=Math.max(n.virtualSize,k)+w,r&&o&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${n.virtualSize+_}px`),t.setWrapperSize&&(i.style[n.getDirectionLabel("width")]=`${n.virtualSize+_}px`),P&&n.grid.updateWrapperSize(N,p),!t.centeredSlides){const D=[];for(let $=0;$<p.length;$+=1){let U=p[$];t.roundLengths&&(U=Math.floor(U)),p[$]<=n.virtualSize-k&&D.push(U)}p=D,Math.floor(n.virtualSize-k)-Math.floor(p[p.length-1])>1&&p.push(n.virtualSize-k)}if(l&&t.loop){const D=v[0]+_;if(t.slidesPerGroup>1){const $=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),U=D*t.slidesPerGroup;for(let G=0;G<$;G+=1)p.push(p[p.length-1]+U)}for(let $=0;$<n.virtual.slidesBefore+n.virtual.slidesAfter;$+=1)t.slidesPerGroup===1&&p.push(p[p.length-1]+D),b.push(b[b.length-1]+D),n.virtualSize+=D}if(p.length===0&&(p=[0]),_!==0){const D=n.isHorizontal()&&r?"marginLeft":n.getDirectionLabel("marginRight");u.filter(($,U)=>!t.cssMode||t.loop?!0:U!==u.length-1).forEach($=>{$.style[D]=`${_}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let D=0;v.forEach(U=>{D+=U+(_||0)}),D-=_;const $=D>k?D-k:0;p=p.map(U=>U<=0?-y:U>$?$+w:U)}if(t.centerInsufficientSlides){let D=0;v.forEach(U=>{D+=U+(_||0)}),D-=_;const $=(y||0)+(w||0);if(D+$<k){const U=(k-D-$)/2;p.forEach((G,Z)=>{p[Z]=G-U}),b.forEach((G,Z)=>{b[Z]=G+U})}}if(Object.assign(n,{slides:u,snapGrid:p,slidesGrid:b,slidesSizesGrid:v}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){_h(i,"--swiper-centered-offset-before",`${-p[0]}px`),_h(i,"--swiper-centered-offset-after",`${n.size/2-v[v.length-1]/2}px`);const D=-n.snapGrid[0],$=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(U=>U+D),n.slidesGrid=n.slidesGrid.map(U=>U+$)}if(f!==d&&n.emit("slidesLengthChange"),p.length!==E&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),b.length!==T&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const D=`${t.containerModifierClass}backface-hidden`,$=n.el.classList.contains(D);f<=t.maxBackfaceHiddenSlides?$||n.el.classList.add(D):$&&n.el.classList.remove(D)}}function eB(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let s=0,r;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const o=l=>i?e.slides[e.getSlideIndexByData(l)]:e.slides[l];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(l=>{t.push(l)});else for(r=0;r<Math.ceil(e.params.slidesPerView);r+=1){const l=e.activeIndex+r;if(l>e.slides.length&&!i)break;t.push(o(l))}else t.push(o(e.activeIndex));for(r=0;r<t.length;r+=1)if(typeof t[r]<"u"){const l=t[r].offsetHeight;s=l>s?l:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function tB(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}const ek=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function iB(n=this&&this.translate||0){const e=this,t=e.params,{slides:i,rtlTranslate:s,snapGrid:r}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-n;s&&(o=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let l=t.spaceBetween;typeof l=="string"&&l.indexOf("%")>=0?l=parseFloat(l.replace("%",""))/100*e.size:typeof l=="string"&&(l=parseFloat(l));for(let d=0;d<i.length;d+=1){const u=i[d];let f=u.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(f-=i[0].swiperSlideOffset);const p=(o+(t.centeredSlides?e.minTranslate():0)-f)/(u.swiperSlideSize+l),b=(o-r[0]+(t.centeredSlides?e.minTranslate():0)-f)/(u.swiperSlideSize+l),v=-(o-f),y=v+e.slidesSizesGrid[d],w=v>=0&&v<=e.size-e.slidesSizesGrid[d],E=v>=0&&v<e.size-1||y>1&&y<=e.size||v<=0&&y>=e.size;E&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(d)),ek(u,E,t.slideVisibleClass),ek(u,w,t.slideFullyVisibleClass),u.progress=s?-p:p,u.originalProgress=s?-b:b}}function nB(n){const e=this;if(typeof n>"u"){const f=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*f||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:r,isEnd:o,progressLoop:l}=e;const d=r,u=o;if(i===0)s=0,r=!0,o=!0;else{s=(n-e.minTranslate())/i;const f=Math.abs(n-e.minTranslate())<1,p=Math.abs(n-e.maxTranslate())<1;r=f||s<=0,o=p||s>=1,f&&(s=0),p&&(s=1)}if(t.loop){const f=e.getSlideIndexByData(0),p=e.getSlideIndexByData(e.slides.length-1),b=e.slidesGrid[f],v=e.slidesGrid[p],y=e.slidesGrid[e.slidesGrid.length-1],w=Math.abs(n);w>=b?l=(w-b)/y:l=(w+y-v)/y,l>1&&(l-=1)}Object.assign(e,{progress:s,progressLoop:l,isBeginning:r,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),r&&!d&&e.emit("reachBeginning toEdge"),o&&!u&&e.emit("reachEnd toEdge"),(d&&!r||u&&!o)&&e.emit("fromEdge"),e.emit("progress",s)}const S0=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function sB(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:s}=n,r=n.virtual&&t.virtual.enabled,o=n.grid&&t.grid&&t.grid.rows>1,l=p=>Ys(i,`.${t.slideClass}${p}, swiper-slide${p}`)[0];let d,u,f;if(r)if(t.loop){let p=s-n.virtual.slidesBefore;p<0&&(p=n.virtual.slides.length+p),p>=n.virtual.slides.length&&(p-=n.virtual.slides.length),d=l(`[data-swiper-slide-index="${p}"]`)}else d=l(`[data-swiper-slide-index="${s}"]`);else o?(d=e.find(p=>p.column===s),f=e.find(p=>p.column===s+1),u=e.find(p=>p.column===s-1)):d=e[s];d&&(o||(f=Vj(d,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!f&&(f=e[0]),u=Gj(d,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u===0&&(u=e[e.length-1]))),e.forEach(p=>{S0(p,p===d,t.slideActiveClass),S0(p,p===f,t.slideNextClass),S0(p,p===u,t.slidePrevClass)}),n.emitSlidesClasses()}const lf=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let s=i.querySelector(`.${n.params.lazyPreloaderClass}`);!s&&n.isElement&&(i.shadowRoot?s=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(s=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},E0=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},yv=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),s=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const o=s,l=[o-e];l.push(...Array.from({length:e}).map((d,u)=>o+i+u)),n.slides.forEach((d,u)=>{l.includes(d.column)&&E0(n,u)});return}const r=s+i-1;if(n.params.rewind||n.params.loop)for(let o=s-e;o<=r+e;o+=1){const l=(o%t+t)%t;(l<s||l>r)&&E0(n,l)}else for(let o=Math.max(s-e,0);o<=Math.min(r+e,t-1);o+=1)o!==s&&(o>r||o<s)&&E0(n,o)};function rB(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let s;for(let r=0;r<e.length;r+=1)typeof e[r+1]<"u"?i>=e[r]&&i<e[r+1]-(e[r+1]-e[r])/2?s=r:i>=e[r]&&i<e[r+1]&&(s=r+1):i>=e[r]&&(s=r);return t.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function oB(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:s,activeIndex:r,realIndex:o,snapIndex:l}=e;let d=n,u;const f=v=>{let y=v-e.virtual.slidesBefore;return y<0&&(y=e.virtual.slides.length+y),y>=e.virtual.slides.length&&(y-=e.virtual.slides.length),y};if(typeof d>"u"&&(d=rB(e)),i.indexOf(t)>=0)u=i.indexOf(t);else{const v=Math.min(s.slidesPerGroupSkip,d);u=v+Math.floor((d-v)/s.slidesPerGroup)}if(u>=i.length&&(u=i.length-1),d===r&&!e.params.loop){u!==l&&(e.snapIndex=u,e.emit("snapIndexChange"));return}if(d===r&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=f(d);return}const p=e.grid&&s.grid&&s.grid.rows>1;let b;if(e.virtual&&s.virtual.enabled&&s.loop)b=f(d);else if(p){const v=e.slides.find(w=>w.column===d);let y=parseInt(v.getAttribute("data-swiper-slide-index"),10);Number.isNaN(y)&&(y=Math.max(e.slides.indexOf(v),0)),b=Math.floor(y/s.grid.rows)}else if(e.slides[d]){const v=e.slides[d].getAttribute("data-swiper-slide-index");v?b=parseInt(v,10):b=d}else b=d;Object.assign(e,{previousSnapIndex:l,snapIndex:u,previousRealIndex:o,realIndex:b,previousIndex:r,activeIndex:d}),e.initialized&&yv(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==b&&e.emit("realIndexChange"),e.emit("slideChange"))}function aB(n,e){const t=this,i=t.params;let s=n.closest(`.${i.slideClass}, swiper-slide`);!s&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(l=>{!s&&l.matches&&l.matches(`.${i.slideClass}, swiper-slide`)&&(s=l)});let r=!1,o;if(s){for(let l=0;l<t.slides.length;l+=1)if(t.slides[l]===s){r=!0,o=l;break}}if(s&&r)t.clickedSlide=s,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var lB={updateSize:Zj,updateSlides:Jj,updateAutoHeight:eB,updateSlidesOffset:tB,updateSlidesProgress:iB,updateProgress:nB,updateSlidesClasses:sB,updateActiveIndex:oB,updateClickedSlide:aB};function cB(n=this.isHorizontal()?"x":"y"){const e=this,{params:t,rtlTranslate:i,translate:s,wrapperEl:r}=e;if(t.virtualTranslate)return i?-s:s;if(t.cssMode)return s;let o=jj(r,n);return o+=e.cssOverflowAdjustment(),i&&(o=-o),o||0}function dB(n,e){const t=this,{rtlTranslate:i,params:s,wrapperEl:r,progress:o}=t;let l=0,d=0;const u=0;t.isHorizontal()?l=i?-n:n:d=n,s.roundLengths&&(l=Math.floor(l),d=Math.floor(d)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?l:d,s.cssMode?r[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-l:-d:s.virtualTranslate||(t.isHorizontal()?l-=t.cssOverflowAdjustment():d-=t.cssOverflowAdjustment(),r.style.transform=`translate3d(${l}px, ${d}px, ${u}px)`);let f;const p=t.maxTranslate()-t.minTranslate();p===0?f=0:f=(n-t.minTranslate())/p,f!==o&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function uB(){return-this.snapGrid[0]}function hB(){return-this.snapGrid[this.snapGrid.length-1]}function fB(n=0,e=this.params.speed,t=!0,i=!0,s){const r=this,{params:o,wrapperEl:l}=r;if(r.animating&&o.preventInteractionOnTransition)return!1;const d=r.minTranslate(),u=r.maxTranslate();let f;if(i&&n>d?f=d:i&&n<u?f=u:f=n,r.updateProgress(f),o.cssMode){const p=r.isHorizontal();if(e===0)l[p?"scrollLeft":"scrollTop"]=-f;else{if(!r.support.smoothScroll)return TI({swiper:r,targetPosition:-f,side:p?"left":"top"}),!0;l.scrollTo({[p?"left":"top"]:-f,behavior:"smooth"})}return!0}return e===0?(r.setTransition(0),r.setTranslate(f),t&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionEnd"))):(r.setTransition(e),r.setTranslate(f),t&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(b){!r||r.destroyed||b.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,r.animating=!1,t&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}var pB={getTranslate:cB,setTranslate:dB,minTranslate:uB,maxTranslate:hB,translateTo:fB};function mB(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function CI({swiper:n,runCallbacks:e,direction:t,step:i}){const{activeIndex:s,previousIndex:r}=n;let o=t;o||(s>r?o="next":s<r?o="prev":o="reset"),n.emit(`transition${i}`),e&&o==="reset"?n.emit(`slideResetTransition${i}`):e&&s!==r&&(n.emit(`slideChangeTransition${i}`),o==="next"?n.emit(`slideNextTransition${i}`):n.emit(`slidePrevTransition${i}`))}function gB(n=!0,e){const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),CI({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function bB(n=!0,e){const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),CI({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var vB={setTransition:mB,transitionStart:gB,transitionEnd:bB};function yB(n=0,e,t=!0,i,s){typeof n=="string"&&(n=parseInt(n,10));const r=this;let o=n;o<0&&(o=0);const{params:l,snapGrid:d,slidesGrid:u,previousIndex:f,activeIndex:p,rtlTranslate:b,wrapperEl:v,enabled:y}=r;if(!y&&!i&&!s||r.destroyed||r.animating&&l.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=r.params.speed);const w=Math.min(r.params.slidesPerGroupSkip,o);let E=w+Math.floor((o-w)/r.params.slidesPerGroup);E>=d.length&&(E=d.length-1);const T=-d[E];if(l.normalizeSlideIndex)for(let P=0;P<u.length;P+=1){const N=-Math.floor(T*100),L=Math.floor(u[P]*100),D=Math.floor(u[P+1]*100);typeof u[P+1]<"u"?N>=L&&N<D-(D-L)/2?o=P:N>=L&&N<D&&(o=P+1):N>=L&&(o=P)}if(r.initialized&&o!==p&&(!r.allowSlideNext&&(b?T>r.translate&&T>r.minTranslate():T<r.translate&&T<r.minTranslate())||!r.allowSlidePrev&&T>r.translate&&T>r.maxTranslate()&&(p||0)!==o))return!1;o!==(f||0)&&t&&r.emit("beforeSlideChangeStart"),r.updateProgress(T);let k;o>p?k="next":o<p?k="prev":k="reset";const _=r.virtual&&r.params.virtual.enabled;if(!(_&&s)&&(b&&-T===r.translate||!b&&T===r.translate))return r.updateActiveIndex(o),l.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),l.effect!=="slide"&&r.setTranslate(T),k!=="reset"&&(r.transitionStart(t,k),r.transitionEnd(t,k)),!1;if(l.cssMode){const P=r.isHorizontal(),N=b?T:-T;if(e===0)_&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),_&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{v[P?"scrollLeft":"scrollTop"]=N})):v[P?"scrollLeft":"scrollTop"]=N,_&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1});else{if(!r.support.smoothScroll)return TI({swiper:r,targetPosition:N,side:P?"left":"top"}),!0;v.scrollTo({[P?"left":"top"]:N,behavior:"smooth"})}return!0}const M=AI().isSafari;return _&&!s&&M&&r.isElement&&r.virtual.update(!1,!1,o),r.setTransition(e),r.setTranslate(T),r.updateActiveIndex(o),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,i),r.transitionStart(t,k),e===0?r.transitionEnd(t,k):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(N){!r||r.destroyed||N.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(t,k))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function xB(n=0,e,t=!0,i){typeof n=="string"&&(n=parseInt(n,10));const s=this;if(s.destroyed)return;typeof e>"u"&&(e=s.params.speed);const r=s.grid&&s.params.grid&&s.params.grid.rows>1;let o=n;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)o=o+s.virtual.slidesBefore;else{let l;if(r){const w=o*s.params.grid.rows;l=s.slides.find(E=>E.getAttribute("data-swiper-slide-index")*1===w).column}else l=s.getSlideIndexByData(o);const d=r?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:u,slidesOffsetBefore:f,slidesOffsetAfter:p}=s.params,b=u||!!f||!!p;let v=s.params.slidesPerView;v==="auto"?v=s.slidesPerViewDynamic():(v=Math.ceil(parseFloat(s.params.slidesPerView,10)),b&&v%2===0&&(v=v+1));let y=d-l<v;if(b&&(y=y||l<Math.ceil(v/2)),i&&b&&s.params.slidesPerView!=="auto"&&!r&&(y=!1),y){const w=b?l<s.activeIndex?"prev":"next":l-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:w,slideTo:!0,activeSlideIndex:w==="next"?l+1:l-d+1,slideRealIndex:w==="next"?s.realIndex:void 0})}if(r){const w=o*s.params.grid.rows;o=s.slides.find(E=>E.getAttribute("data-swiper-slide-index")*1===w).column}else o=s.getSlideIndexByData(o)}return requestAnimationFrame(()=>{s.slideTo(o,e,t,i)}),s}function wB(n,e=!0,t){const i=this,{enabled:s,params:r,animating:o}=i;if(!s||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);let l=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(l=Math.max(i.slidesPerViewDynamic("current",!0),1));const d=i.activeIndex<r.slidesPerGroupSkip?1:l,u=i.virtual&&r.virtual.enabled;if(r.loop){if(o&&!u&&r.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+d,n,e,t)}),!0}return r.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+d,n,e,t)}function SB(n,e=!0,t){const i=this,{params:s,snapGrid:r,slidesGrid:o,rtlTranslate:l,enabled:d,animating:u}=i;if(!d||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);const f=i.virtual&&s.virtual.enabled;if(s.loop){if(u&&!f&&s.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const p=l?i.translate:-i.translate;function b(k){return k<0?-Math.floor(Math.abs(k)):Math.floor(k)}const v=b(p),y=r.map(k=>b(k)),w=s.freeMode&&s.freeMode.enabled;let E=r[y.indexOf(v)-1];if(typeof E>"u"&&(s.cssMode||w)){let k;r.forEach((_,O)=>{v>=_&&(k=O)}),typeof k<"u"&&(E=w?r[k]:r[k>0?k-1:k])}let T=0;if(typeof E<"u"&&(T=o.indexOf(E),T<0&&(T=i.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(T=T-i.slidesPerViewDynamic("previous",!0)+1,T=Math.max(T,0))),s.rewind&&i.isBeginning){const k=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(k,n,e,t)}else if(s.loop&&i.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(T,n,e,t)}),!0;return i.slideTo(T,n,e,t)}function EB(n,e=!0,t){const i=this;if(!i.destroyed)return typeof n>"u"&&(n=i.params.speed),i.slideTo(i.activeIndex,n,e,t)}function TB(n,e=!0,t,i=.5){const s=this;if(s.destroyed)return;typeof n>"u"&&(n=s.params.speed);let r=s.activeIndex;const o=Math.min(s.params.slidesPerGroupSkip,r),l=o+Math.floor((r-o)/s.params.slidesPerGroup),d=s.rtlTranslate?s.translate:-s.translate;if(d>=s.snapGrid[l]){const u=s.snapGrid[l],f=s.snapGrid[l+1];d-u>(f-u)*i&&(r+=s.params.slidesPerGroup)}else{const u=s.snapGrid[l-1],f=s.snapGrid[l];d-u<=(f-u)*i&&(r-=s.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,s.slidesGrid.length-1),s.slideTo(r,n,e,t)}function kB(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let s=n.getSlideIndexWhenGrid(n.clickedIndex),r;const o=n.isElement?"swiper-slide":`.${e.slideClass}`,l=n.grid&&n.params.grid&&n.params.grid.rows>1;if(e.loop){if(n.animating)return;r=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?n.slideToLoop(r):s>(l?(n.slides.length-i)/2-(n.params.grid.rows-1):n.slides.length-i)?(n.loopFix(),s=n.getSlideIndex(Ys(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),EI(()=>{n.slideTo(s)})):n.slideTo(s)}else n.slideTo(s)}var _B={slideTo:yB,slideToLoop:xB,slideNext:wB,slidePrev:SB,slideReset:EB,slideToClosest:TB,slideToClickedSlide:kB};function AB(n,e){const t=this,{params:i,slidesEl:s}=t;if(!i.loop||t.virtual&&t.params.virtual.enabled)return;const r=()=>{Ys(s,`.${i.slideClass}, swiper-slide`).forEach((y,w)=>{y.setAttribute("data-swiper-slide-index",w)})},o=()=>{const v=Ys(s,`.${i.slideBlankClass}`);v.forEach(y=>{y.remove()}),v.length>0&&(t.recalcSlides(),t.updateSlides())},l=t.grid&&i.grid&&i.grid.rows>1;i.loopAddBlankSlides&&(i.slidesPerGroup>1||l)&&o();const d=i.slidesPerGroup*(l?i.grid.rows:1),u=t.slides.length%d!==0,f=l&&t.slides.length%i.grid.rows!==0,p=v=>{for(let y=0;y<v;y+=1){const w=t.isElement?Kf("swiper-slide",[i.slideBlankClass]):Kf("div",[i.slideClass,i.slideBlankClass]);t.slidesEl.append(w)}};if(u){if(i.loopAddBlankSlides){const v=d-t.slides.length%d;p(v),t.recalcSlides(),t.updateSlides()}else Wf("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(f){if(i.loopAddBlankSlides){const v=i.grid.rows-t.slides.length%i.grid.rows;p(v),t.recalcSlides(),t.updateSlides()}else Wf("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();const b=i.centeredSlides||!!i.slidesOffsetBefore||!!i.slidesOffsetAfter;t.loopFix({slideRealIndex:n,direction:b?void 0:"next",initial:e})}function CB({slideRealIndex:n,slideTo:e=!0,direction:t,setTranslate:i,activeSlideIndex:s,initial:r,byController:o,byMousewheel:l}={}){const d=this;if(!d.params.loop)return;d.emit("beforeLoopFix");const{slides:u,allowSlidePrev:f,allowSlideNext:p,slidesEl:b,params:v}=d,{centeredSlides:y,slidesOffsetBefore:w,slidesOffsetAfter:E,initialSlide:T}=v,k=y||!!w||!!E;if(d.allowSlidePrev=!0,d.allowSlideNext=!0,d.virtual&&v.virtual.enabled){e&&(!k&&d.snapIndex===0?d.slideTo(d.virtual.slides.length,0,!1,!0):k&&d.snapIndex<v.slidesPerView?d.slideTo(d.virtual.slides.length+d.snapIndex,0,!1,!0):d.snapIndex===d.snapGrid.length-1&&d.slideTo(d.virtual.slidesBefore,0,!1,!0)),d.allowSlidePrev=f,d.allowSlideNext=p,d.emit("loopFix");return}let _=v.slidesPerView;_==="auto"?_=d.slidesPerViewDynamic():(_=Math.ceil(parseFloat(v.slidesPerView,10)),k&&_%2===0&&(_=_+1));const O=v.slidesPerGroupAuto?_:v.slidesPerGroup;let R=k?Math.max(O,Math.ceil(_/2)):O;R%O!==0&&(R+=O-R%O),R+=v.loopAdditionalSlides,d.loopedSlides=R;const M=d.grid&&v.grid&&v.grid.rows>1;u.length<_+R||d.params.effect==="cards"&&u.length<_+R*2?Wf("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):M&&v.grid.fill==="row"&&Wf("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const P=[],N=[],L=M?Math.ceil(u.length/v.grid.rows):u.length,D=r&&L-T<_&&!k;let $=D?T:d.activeIndex;typeof s>"u"?s=d.getSlideIndex(u.find(V=>V.classList.contains(v.slideActiveClass))):$=s;const U=t==="next"||!t,G=t==="prev"||!t;let Z=0,se=0;const Y=(M?u[s].column:s)+(k&&typeof i>"u"?-_/2+.5:0);if(Y<R){Z=Math.max(R-Y,O);for(let V=0;V<R-Y;V+=1){const q=V-Math.floor(V/L)*L;if(M){const ie=L-q-1;for(let j=u.length-1;j>=0;j-=1)u[j].column===ie&&P.push(j)}else P.push(L-q-1)}}else if(Y+_>L-R){se=Math.max(Y-(L-R*2),O),D&&(se=Math.max(se,_-L+T+1));for(let V=0;V<se;V+=1){const q=V-Math.floor(V/L)*L;M?u.forEach((ie,j)=>{ie.column===q&&N.push(j)}):N.push(q)}}if(d.__preventObserver__=!0,requestAnimationFrame(()=>{d.__preventObserver__=!1}),d.params.effect==="cards"&&u.length<_+R*2&&(N.includes(s)&&N.splice(N.indexOf(s),1),P.includes(s)&&P.splice(P.indexOf(s),1)),G&&P.forEach(V=>{u[V].swiperLoopMoveDOM=!0,b.prepend(u[V]),u[V].swiperLoopMoveDOM=!1}),U&&N.forEach(V=>{u[V].swiperLoopMoveDOM=!0,b.append(u[V]),u[V].swiperLoopMoveDOM=!1}),d.recalcSlides(),v.slidesPerView==="auto"?d.updateSlides():M&&(P.length>0&&G||N.length>0&&U)&&d.slides.forEach((V,q)=>{d.grid.updateSlide(q,V,d.slides)}),v.watchSlidesProgress&&d.updateSlidesOffset(),e){if(P.length>0&&G){if(typeof n>"u"){const V=d.slidesGrid[$],ie=d.slidesGrid[$+Z]-V;l?d.setTranslate(d.translate-ie):(d.slideTo($+Math.ceil(Z),0,!1,!0),i&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-ie,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-ie))}else if(i){const V=M?P.length/v.grid.rows:P.length;d.slideTo(d.activeIndex+V,0,!1,!0),d.touchEventsData.currentTranslate=d.translate}}else if(N.length>0&&U)if(typeof n>"u"){const V=d.slidesGrid[$],ie=d.slidesGrid[$-se]-V;l?d.setTranslate(d.translate-ie):(d.slideTo($-se,0,!1,!0),i&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-ie,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-ie))}else{const V=M?N.length/v.grid.rows:N.length;d.slideTo(d.activeIndex-V,0,!1,!0)}}if(d.allowSlidePrev=f,d.allowSlideNext=p,d.controller&&d.controller.control&&!o){const V={slideRealIndex:n,direction:t,setTranslate:i,activeSlideIndex:s,byController:!0};Array.isArray(d.controller.control)?d.controller.control.forEach(q=>{!q.destroyed&&q.params.loop&&q.loopFix({...V,slideTo:q.params.slidesPerView===v.slidesPerView?e:!1})}):d.controller.control instanceof d.constructor&&d.controller.control.params.loop&&d.controller.control.loopFix({...V,slideTo:d.controller.control.params.slidesPerView===v.slidesPerView?e:!1})}d.emit("loopFix")}function IB(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||!t||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(s=>{const r=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;i[r]=s}),n.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),i.forEach(s=>{t.append(s)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var RB={loopCreate:AB,loopFix:CB,loopDestroy:IB};function LB(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function DB(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var OB={setGrabCursor:LB,unsetGrabCursor:DB};function NB(n,e=this){function t(i){if(!i||i===Gr()||i===gn())return null;i.assignedSlot&&(i=i.assignedSlot);const s=i.closest(n);return!s&&!i.getRootNode?null:s||t(i.getRootNode().host)}return t(e)}function tk(n,e,t){const i=gn(),{params:s}=n,r=s.edgeSwipeDetection,o=s.edgeSwipeThreshold;return r&&(t<=o||t>=i.innerWidth-o)?r==="prevent"?(e.preventDefault(),!0):!1:!0}function PB(n){const e=this,t=Gr();let i=n;i.originalEvent&&(i=i.originalEvent);const s=e.touchEventsData;if(i.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==i.pointerId)return;s.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(s.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){tk(e,i,i.targetTouches[0].pageX);return}const{params:r,touches:o,enabled:l}=e;if(!l||!r.simulateTouch&&i.pointerType==="mouse"||e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let d=i.target;if(r.touchEventsTarget==="wrapper"&&!zj(d,e.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||s.isTouched&&s.isMoved)return;const u=!!r.noSwipingClass&&r.noSwipingClass!=="",f=i.composedPath?i.composedPath():i.path;u&&i.target&&i.target.shadowRoot&&f&&(d=f[0]);const p=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,b=!!(i.target&&i.target.shadowRoot);if(r.noSwiping&&(b?NB(p,d):d.closest(p))){e.allowClick=!0;return}if(r.swipeHandler&&!d.closest(r.swipeHandler))return;o.currentX=i.pageX,o.currentY=i.pageY;const v=o.currentX,y=o.currentY;if(!tk(e,i,v))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=v,o.startY=y,s.touchStartTime=qf(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(s.allowThresholdMove=!1);let w=!0;d.matches(s.focusableElements)&&(w=!1,d.nodeName==="SELECT"&&(s.isTouched=!1)),t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==d&&(i.pointerType==="mouse"||i.pointerType!=="mouse"&&!d.matches(s.focusableElements))&&t.activeElement.blur();const E=w&&e.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||E)&&!d.isContentEditable&&i.preventDefault(),r.freeMode&&r.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function MB(n){const e=Gr(),t=this,i=t.touchEventsData,{params:s,touches:r,rtlTranslate:o,enabled:l}=t;if(!l||!s.simulateTouch&&n.pointerType==="mouse")return;let d=n;if(d.originalEvent&&(d=d.originalEvent),d.type==="pointermove"&&(i.touchId!==null||d.pointerId!==i.pointerId))return;let u;if(d.type==="touchmove"){if(u=[...d.changedTouches].find(R=>R.identifier===i.touchId),!u||u.identifier!==i.touchId)return}else u=d;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",d);return}const f=u.pageX,p=u.pageY;if(d.preventedByNestedSwiper){r.startX=f,r.startY=p;return}if(!t.allowTouchMove){d.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(r,{startX:f,startY:p,currentX:f,currentY:p}),i.touchStartTime=qf());return}if(s.touchReleaseOnEdges&&!s.loop)if(t.isVertical()){if(p<r.startY&&t.translate<=t.maxTranslate()||p>r.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else{if(o&&(f>r.startX&&-t.translate<=t.maxTranslate()||f<r.startX&&-t.translate>=t.minTranslate()))return;if(!o&&(f<r.startX&&t.translate<=t.maxTranslate()||f>r.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(i.focusableElements)&&e.activeElement!==d.target&&d.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&d.target===e.activeElement&&d.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",d),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=f,r.currentY=p;const b=r.currentX-r.startX,v=r.currentY-r.startY;if(t.params.threshold&&Math.sqrt(b**2+v**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let R;t.isHorizontal()&&r.currentY===r.startY||t.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:b*b+v*v>=25&&(R=Math.atan2(Math.abs(v),Math.abs(b))*180/Math.PI,i.isScrolling=t.isHorizontal()?R>s.touchAngle:90-R>s.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",d),typeof i.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(i.startMoving=!0),i.isScrolling||d.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!s.cssMode&&d.cancelable&&d.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&d.stopPropagation();let y=t.isHorizontal()?b:v,w=t.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;s.oneWayMovement&&(y=Math.abs(y)*(o?1:-1),w=Math.abs(w)*(o?1:-1)),r.diff=y,y*=s.touchRatio,o&&(y=-y,w=-w);const E=t.touchesDirection;t.swipeDirection=y>0?"prev":"next",t.touchesDirection=w>0?"prev":"next";const T=t.params.loop&&!s.cssMode,k=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(T&&k&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const R=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(R)}i.allowMomentumBounce=!1,s.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",d)}if(new Date().getTime(),s._loopSwapReset!==!1&&i.isMoved&&i.allowThresholdMove&&E!==t.touchesDirection&&T&&k&&Math.abs(y)>=1){Object.assign(r,{startX:f,startY:p,currentX:f,currentY:p,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",d),i.isMoved=!0,i.currentTranslate=y+i.startTranslate;let _=!0,O=s.resistanceRatio;if(s.touchReleaseOnEdges&&(O=0),y>0?(T&&k&&i.allowThresholdMove&&i.currentTranslate>(s.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(_=!1,s.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+y)**O))):y<0&&(T&&k&&i.allowThresholdMove&&i.currentTranslate<(s.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(s.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(_=!1,s.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-y)**O))),_&&(d.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),s.threshold>0)if(Math.abs(y)>s.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,r.diff=t.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{i.currentTranslate=i.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&t.freeMode||s.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function $B(n){const e=this,t=e.touchEventsData;let i=n;i.originalEvent&&(i=i.originalEvent);let s;if(i.type==="touchend"||i.type==="touchcancel"){if(s=[...i.changedTouches].find(R=>R.identifier===t.touchId),!s||s.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;s=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:o,touches:l,rtlTranslate:d,slidesGrid:u,enabled:f}=e;if(!f||!o.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const p=qf(),b=p-t.touchStartTime;if(e.allowClick){const R=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(R&&R[0]||i.target,R),e.emit("tap click",i),b<300&&p-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=qf(),EI(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||l.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let v;if(o.followFinger?v=d?e.translate:-e.translate:v=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:v});return}const y=v>=-e.maxTranslate()&&!e.params.loop;let w=0,E=e.slidesSizesGrid[0];for(let R=0;R<u.length;R+=R<o.slidesPerGroupSkip?1:o.slidesPerGroup){const M=R<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof u[R+M]<"u"?(y||v>=u[R]&&v<u[R+M])&&(w=R,E=u[R+M]-u[R]):(y||v>=u[R])&&(w=R,E=u[u.length-1]-u[u.length-2])}let T=null,k=null;o.rewind&&(e.isBeginning?k=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(T=0));const _=(v-u[w])/E,O=w<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(b>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(_>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?T:w+O):e.slideTo(w)),e.swipeDirection==="prev"&&(_>1-o.longSwipesRatio?e.slideTo(w+O):k!==null&&_<0&&Math.abs(_)>o.longSwipesRatio?e.slideTo(k):e.slideTo(w))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(w+O):e.slideTo(w):(e.swipeDirection==="next"&&e.slideTo(T!==null?T:w+O),e.swipeDirection==="prev"&&e.slideTo(k!==null?k:w))}}function ik(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:s,snapGrid:r}=n,o=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const l=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!l?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!o?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=s,n.allowSlideNext=i,n.params.watchOverflow&&r!==n.snapGrid&&n.checkOverflow()}function FB(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function jB(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let s;const r=n.maxTranslate()-n.minTranslate();r===0?s=0:s=(n.translate-n.minTranslate())/r,s!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function BB(n){const e=this;lf(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function UB(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const II=(n,e)=>{const t=Gr(),{params:i,el:s,wrapperEl:r,device:o}=n,l=!!i.nested,d=e==="on"?"addEventListener":"removeEventListener",u=e;!s||typeof s=="string"||(t[d]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:l}),s[d]("touchstart",n.onTouchStart,{passive:!1}),s[d]("pointerdown",n.onTouchStart,{passive:!1}),t[d]("touchmove",n.onTouchMove,{passive:!1,capture:l}),t[d]("pointermove",n.onTouchMove,{passive:!1,capture:l}),t[d]("touchend",n.onTouchEnd,{passive:!0}),t[d]("pointerup",n.onTouchEnd,{passive:!0}),t[d]("pointercancel",n.onTouchEnd,{passive:!0}),t[d]("touchcancel",n.onTouchEnd,{passive:!0}),t[d]("pointerout",n.onTouchEnd,{passive:!0}),t[d]("pointerleave",n.onTouchEnd,{passive:!0}),t[d]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&s[d]("click",n.onClick,!0),i.cssMode&&r[d]("scroll",n.onScroll),i.updateOnWindowResize?n[u](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",ik,!0):n[u]("observerUpdate",ik,!0),s[d]("load",n.onLoad,{capture:!0}))};function zB(){const n=this,{params:e}=n;n.onTouchStart=PB.bind(n),n.onTouchMove=MB.bind(n),n.onTouchEnd=$B.bind(n),n.onDocumentTouchStart=UB.bind(n),e.cssMode&&(n.onScroll=jB.bind(n)),n.onClick=FB.bind(n),n.onLoad=BB.bind(n),II(n,"on")}function HB(){II(this,"off")}var GB={attachEvents:zB,detachEvents:HB};const nk=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function VB(){const n=this,{realIndex:e,initialized:t,params:i,el:s}=n,r=i.breakpoints;if(!r||r&&Object.keys(r).length===0)return;const o=Gr(),l=i.breakpointsBase==="window"||!i.breakpointsBase?i.breakpointsBase:"container",d=["window","container"].includes(i.breakpointsBase)||!i.breakpointsBase?n.el:o.querySelector(i.breakpointsBase),u=n.getBreakpoint(r,l,d);if(!u||n.currentBreakpoint===u)return;const p=(u in r?r[u]:void 0)||n.originalParams,b=nk(n,i),v=nk(n,p),y=n.params.grabCursor,w=p.grabCursor,E=i.enabled;b&&!v?(s.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!b&&v&&(s.classList.add(`${i.containerModifierClass}grid`),(p.grid.fill&&p.grid.fill==="column"||!p.grid.fill&&i.grid.fill==="column")&&s.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),y&&!w?n.unsetGrabCursor():!y&&w&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(M=>{if(typeof p[M]>"u")return;const P=i[M]&&i[M].enabled,N=p[M]&&p[M].enabled;P&&!N&&n[M].disable(),!P&&N&&n[M].enable()});const T=p.direction&&p.direction!==i.direction,k=i.loop&&(p.slidesPerView!==i.slidesPerView||T),_=i.loop;T&&t&&n.changeDirection(),Jn(n.params,p);const O=n.params.enabled,R=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),E&&!O?n.disable():!E&&O&&n.enable(),n.currentBreakpoint=u,n.emit("_beforeBreakpoint",p),t&&(k?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!_&&R?(n.loopCreate(e),n.updateSlides()):_&&!R&&n.loopDestroy()),n.emit("breakpoint",p)}function qB(n,e="window",t){if(!n||e==="container"&&!t)return;let i=!1;const s=gn(),r=e==="window"?s.innerHeight:t.clientHeight,o=Object.keys(n).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const d=parseFloat(l.substr(1));return{value:r*d,point:l}}return{value:l,point:l}});o.sort((l,d)=>parseInt(l.value,10)-parseInt(d.value,10));for(let l=0;l<o.length;l+=1){const{point:d,value:u}=o[l];e==="window"?s.matchMedia(`(min-width: ${u}px)`).matches&&(i=d):u<=t.clientWidth&&(i=d)}return i||"max"}var WB={setBreakpoint:VB,getBreakpoint:qB};function KB(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(s=>{i[s]&&t.push(e+s)}):typeof i=="string"&&t.push(e+i)}),t}function YB(){const n=this,{classNames:e,params:t,rtl:i,el:s,device:r}=n,o=KB(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),s.classList.add(...e),n.emitContainerClasses()}function XB(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var QB={addClasses:YB,removeClasses:XB};function ZB(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const s=n.slides.length-1,r=n.slidesGrid[s]+n.slidesSizesGrid[s]+i*2;n.isLocked=n.size>r}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var JB={checkOverflow:ZB},xv={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function eU(n,e){return function(i={}){const s=Object.keys(i)[0],r=i[s];if(typeof r!="object"||r===null){Jn(e,i);return}if(n[s]===!0&&(n[s]={enabled:!0}),s==="navigation"&&n[s]&&n[s].enabled&&!n[s].prevEl&&!n[s].nextEl&&(n[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&n[s]&&n[s].enabled&&!n[s].el&&(n[s].auto=!0),!(s in n&&"enabled"in r)){Jn(e,i);return}typeof n[s]=="object"&&!("enabled"in n[s])&&(n[s].enabled=!0),n[s]||(n[s]={enabled:!1}),Jn(e,i)}}const T0={eventsEmitter:Qj,update:lB,translate:pB,transition:vB,slide:_B,loop:RB,grabCursor:OB,events:GB,breakpoints:WB,checkOverflow:JB,classes:QB},k0={};let Hy=class kr{constructor(...e){let t,i;e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?i=e[0]:[t,i]=e,i||(i={}),i=Jn({},i),t&&!i.el&&(i.el=t);const s=Gr();if(i.el&&typeof i.el=="string"&&s.querySelectorAll(i.el).length>1){const d=[];return s.querySelectorAll(i.el).forEach(u=>{const f=Jn({},i,{el:u});d.push(new kr(f))}),d}const r=this;r.__swiper__=!0,r.support=kI(),r.device=_I({userAgent:i.userAgent}),r.browser=AI(),r.eventsListeners={},r.eventsAnyListeners=[],r.modules=[...r.__modules__],i.modules&&Array.isArray(i.modules)&&r.modules.push(...i.modules);const o={};r.modules.forEach(d=>{d({params:i,swiper:r,extendParams:eU(i,o),on:r.on.bind(r),once:r.once.bind(r),off:r.off.bind(r),emit:r.emit.bind(r)})});const l=Jn({},xv,o);return r.params=Jn({},l,k0,i),r.originalParams=Jn({},r.params),r.passedParams=Jn({},i),r.params&&r.params.on&&Object.keys(r.params.on).forEach(d=>{r.on(d,r.params.on[d])}),r.params&&r.params.onAny&&r.onAny(r.params.onAny),Object.assign(r,{enabled:r.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return r.params.direction==="horizontal"},isVertical(){return r.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:r.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:r.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),r.emit("_swiper"),r.params.init&&r.init(),r}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,s=Ys(t,`.${i.slideClass}, swiper-slide`),r=Yf(s[0]);return Yf(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=Ys(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const s=i.minTranslate(),o=(i.maxTranslate()-s)*e+s;i.translateTo(o,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const s=e.getSlideClasses(i);t.push({slideEl:i,classNames:s}),e.emit("_slideClass",i,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e="current",t=!1){const i=this,{params:s,slides:r,slidesGrid:o,slidesSizesGrid:l,size:d,activeIndex:u}=i;let f=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let p=r[u]?Math.ceil(r[u].swiperSlideSize):0,b;for(let v=u+1;v<r.length;v+=1)r[v]&&!b&&(p+=Math.ceil(r[v].swiperSlideSize),f+=1,p>d&&(b=!0));for(let v=u-1;v>=0;v-=1)r[v]&&!b&&(p+=r[v].swiperSlideSize,f+=1,p>d&&(b=!0))}else if(e==="current")for(let p=u+1;p<r.length;p+=1)(t?o[p]+l[p]-o[u]<d:o[p]-o[u]<d)&&(f+=1);else for(let p=u-1;p>=0;p-=1)o[u]-o[p]<d&&(f+=1);return f}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&lf(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const o=e.rtlTranslate?e.translate*-1:e.translate,l=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(l),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)s(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const o=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(o.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||s()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t=!0){const i=this,s=i.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${s}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(r=>{e==="vertical"?r.style.width="":r.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(s()):Ys(i,s())[0];return!o&&t.params.createElements&&(o=Kf("div",t.params.wrapperClass),i.append(o),Ys(i,`.${t.params.slideClass}`).forEach(l=>{o.append(l)})),Object.assign(t,{el:i,wrapperEl:o,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:o,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Lo(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Lo(i,"direction")==="rtl"),wrongRTL:Lo(o,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(r=>{r.complete?lf(t,r):r.addEventListener("load",o=>{lf(t,o.target)})}),yv(t),t.initialized=!0,yv(t),t.emit("init"),t.emit("afterInit"),t}destroy(e=!0,t=!0){const i=this,{params:s,el:r,wrapperEl:o,slides:l}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),t&&(i.removeClasses(),r&&typeof r!="string"&&r.removeAttribute("style"),o&&o.removeAttribute("style"),l&&l.length&&l.forEach(d=>{d.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),d.removeAttribute("style"),d.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(d=>{i.off(d)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),$j(i)),i.destroyed=!0),null}static extendDefaults(e){Jn(k0,e)}static get extendedDefaults(){return k0}static get defaults(){return xv}static installModule(e){kr.prototype.__modules__||(kr.prototype.__modules__=[]);const t=kr.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>kr.installModule(t)),kr):(kr.installModule(e),kr)}};Object.keys(T0).forEach(n=>{Object.keys(T0[n]).forEach(e=>{Hy.prototype[e]=T0[n][e]})});Hy.use([Yj,Xj]);const RI=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Ea(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function Nl(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:Ea(e[i])&&Ea(n[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?n[i]=e[i]:Nl(n[i],e[i]):n[i]=e[i]})}function LI(n={}){return n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function DI(n={}){return n.pagination&&typeof n.pagination.el>"u"}function OI(n={}){return n.scrollbar&&typeof n.scrollbar.el>"u"}function NI(n=""){const e=n.split(" ").map(i=>i.trim()).filter(i=>!!i),t=[];return e.forEach(i=>{t.indexOf(i)<0&&t.push(i)}),t.join(" ")}function tU(n=""){return n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function iU({swiper:n,slides:e,passedParams:t,changedParams:i,nextEl:s,prevEl:r,scrollbarEl:o,paginationEl:l}){const d=i.filter(N=>N!=="children"&&N!=="direction"&&N!=="wrapperClass"),{params:u,pagination:f,navigation:p,scrollbar:b,virtual:v,thumbs:y}=n;let w,E,T,k,_,O,R,M;i.includes("thumbs")&&t.thumbs&&t.thumbs.swiper&&!t.thumbs.swiper.destroyed&&u.thumbs&&(!u.thumbs.swiper||u.thumbs.swiper.destroyed)&&(w=!0),i.includes("controller")&&t.controller&&t.controller.control&&u.controller&&!u.controller.control&&(E=!0),i.includes("pagination")&&t.pagination&&(t.pagination.el||l)&&(u.pagination||u.pagination===!1)&&f&&!f.el&&(T=!0),i.includes("scrollbar")&&t.scrollbar&&(t.scrollbar.el||o)&&(u.scrollbar||u.scrollbar===!1)&&b&&!b.el&&(k=!0),i.includes("navigation")&&t.navigation&&(t.navigation.prevEl||r)&&(t.navigation.nextEl||s)&&(u.navigation||u.navigation===!1)&&p&&!p.prevEl&&!p.nextEl&&(_=!0);const P=N=>{n[N]&&(n[N].destroy(),N==="navigation"?(n.isElement&&(n[N].prevEl.remove(),n[N].nextEl.remove()),u[N].prevEl=void 0,u[N].nextEl=void 0,n[N].prevEl=void 0,n[N].nextEl=void 0):(n.isElement&&n[N].el.remove(),u[N].el=void 0,n[N].el=void 0))};i.includes("loop")&&n.isElement&&(u.loop&&!t.loop?O=!0:!u.loop&&t.loop?R=!0:M=!0),d.forEach(N=>{if(Ea(u[N])&&Ea(t[N]))Object.assign(u[N],t[N]),(N==="navigation"||N==="pagination"||N==="scrollbar")&&"enabled"in t[N]&&!t[N].enabled&&P(N);else{const L=t[N];(L===!0||L===!1)&&(N==="navigation"||N==="pagination"||N==="scrollbar")?L===!1&&P(N):u[N]=t[N]}}),d.includes("controller")&&!E&&n.controller&&n.controller.control&&u.controller&&u.controller.control&&(n.controller.control=u.controller.control),i.includes("children")&&e&&v&&u.virtual.enabled?(v.slides=e,v.update(!0)):i.includes("virtual")&&v&&u.virtual.enabled&&(e&&(v.slides=e),v.update(!0)),i.includes("children")&&e&&u.loop&&(M=!0),w&&y.init()&&y.update(!0),E&&(n.controller.control=u.controller.control),T&&(n.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),n.el.appendChild(l)),l&&(u.pagination.el=l),f.init(),f.render(),f.update()),k&&(n.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),n.el.appendChild(o)),o&&(u.scrollbar.el=o),b.init(),b.updateSize(),b.setTranslate()),_&&(n.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),Qf(s,n.navigation.arrowSvg),s.part.add("button-next"),n.el.appendChild(s)),(!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-button-prev"),Qf(r,n.navigation.arrowSvg),r.part.add("button-prev"),n.el.appendChild(r))),s&&(u.navigation.nextEl=s),r&&(u.navigation.prevEl=r),p.init(),p.update()),i.includes("allowSlideNext")&&(n.allowSlideNext=t.allowSlideNext),i.includes("allowSlidePrev")&&(n.allowSlidePrev=t.allowSlidePrev),i.includes("direction")&&n.changeDirection(t.direction,!1),(O||M)&&n.loopDestroy(),(R||M)&&n.loopCreate(),n.update()}function nU(n={},e=!0){const t={on:{}},i={},s={};Nl(t,xv),t._emitClasses=!0,t.init=!1;const r={},o=RI.map(d=>d.replace(/_/,"")),l=Object.assign({},n);return Object.keys(l).forEach(d=>{typeof n[d]>"u"||(o.indexOf(d)>=0?Ea(n[d])?(t[d]={},s[d]={},Nl(t[d],n[d]),Nl(s[d],n[d])):(t[d]=n[d],s[d]=n[d]):d.search(/on[A-Z]/)===0&&typeof n[d]=="function"?e?i[`${d[2].toLowerCase()}${d.substr(3)}`]=n[d]:t.on[`${d[2].toLowerCase()}${d.substr(3)}`]=n[d]:r[d]=n[d])}),["navigation","pagination","scrollbar"].forEach(d=>{t[d]===!0&&(t[d]={}),t[d]===!1&&delete t[d]}),{params:t,passedParams:s,rest:r,events:i}}function sU({el:n,nextEl:e,prevEl:t,paginationEl:i,scrollbarEl:s,swiper:r},o){LI(o)&&e&&t&&(r.params.navigation.nextEl=e,r.originalParams.navigation.nextEl=e,r.params.navigation.prevEl=t,r.originalParams.navigation.prevEl=t),DI(o)&&i&&(r.params.pagination.el=i,r.originalParams.pagination.el=i),OI(o)&&s&&(r.params.scrollbar.el=s,r.originalParams.scrollbar.el=s),r.init(n)}function rU(n,e,t,i,s){const r=[];if(!e)return r;const o=d=>{r.indexOf(d)<0&&r.push(d)};if(t&&i){const d=i.map(s),u=t.map(s);d.join("")!==u.join("")&&o("children"),i.length!==t.length&&o("children")}return RI.filter(d=>d[0]==="_").map(d=>d.replace(/_/,"")).forEach(d=>{if(d in n&&d in e)if(Ea(n[d])&&Ea(e[d])){const u=Object.keys(n[d]),f=Object.keys(e[d]);u.length!==f.length?o(d):(u.forEach(p=>{n[d][p]!==e[d][p]&&o(d)}),f.forEach(p=>{n[d][p]!==e[d][p]&&o(d)}))}else n[d]!==e[d]&&o(d)}),r}const oU=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.emit("_virtualUpdated"),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function Zf(){return Zf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Zf.apply(this,arguments)}function PI(n){return n.type&&n.type.displayName&&n.type.displayName.includes("SwiperSlide")}function MI(n){const e=[];return Pe.Children.toArray(n).forEach(t=>{PI(t)?e.push(t):t.props&&t.props.children&&MI(t.props.children).forEach(i=>e.push(i))}),e}function aU(n){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Pe.Children.toArray(n).forEach(i=>{if(PI(i))e.push(i);else if(i.props&&i.props.slot&&t[i.props.slot])t[i.props.slot].push(i);else if(i.props&&i.props.children){const s=MI(i.props.children);s.length>0?s.forEach(r=>e.push(r)):t["container-end"].push(i)}else t["container-end"].push(i)}),{slides:e,slots:t}}function lU(n,e,t){if(!t)return null;const i=f=>{let p=f;return f<0?p=e.length+f:p>=e.length&&(p=p-e.length),p},s=n.isHorizontal()?{[n.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:r,to:o}=t,l=n.params.loop?-e.length:0,d=n.params.loop?e.length*2:e.length,u=[];for(let f=l;f<d;f+=1)f>=r&&f<=o&&u.push(e[i(f)]);return u.map((f,p)=>Pe.cloneElement(f,{swiper:n,style:s,key:f.props.virtualIndex||f.key||`slide-${p}`}))}function dd(n,e){return typeof window>"u"?C.useEffect(n,e):C.useLayoutEffect(n,e)}const sk=C.createContext(null),cU=C.createContext(null),Wd=C.forwardRef(({className:n,tag:e="div",wrapperTag:t="div",children:i,onSwiper:s,...r}={},o)=>{let l=!1;const[d,u]=C.useState("swiper"),[f,p]=C.useState(null),[b,v]=C.useState(!1),y=C.useRef(!1),w=C.useRef(null),E=C.useRef(null),T=C.useRef(null),k=C.useRef(null),_=C.useRef(null),O=C.useRef(null),R=C.useRef(null),M=C.useRef(null),{params:P,passedParams:N,rest:L,events:D}=nU(r),{slides:$,slots:U}=aU(i),G=()=>{v(!b)};Object.assign(P.on,{_containerClasses(V,q){u(q)}});const Z=()=>{Object.assign(P.on,D),l=!0;const V={...P};if(delete V.wrapperClass,E.current=new Hy(V),E.current.virtual&&E.current.params.virtual.enabled){E.current.virtual.slides=$;const q={cache:!1,slides:$,renderExternal:p,renderExternalUpdate:!1};Nl(E.current.params.virtual,q),Nl(E.current.originalParams.virtual,q)}};w.current||Z(),E.current&&E.current.on("_beforeBreakpoint",G);const se=()=>{l||!D||!E.current||Object.keys(D).forEach(V=>{E.current.on(V,D[V])})},z=()=>{!D||!E.current||Object.keys(D).forEach(V=>{E.current.off(V,D[V])})};C.useEffect(()=>()=>{E.current&&E.current.off("_beforeBreakpoint",G)}),C.useEffect(()=>{!y.current&&E.current&&(E.current.emitSlidesClasses(),y.current=!0)}),dd(()=>{if(o&&(o.current=w.current),!!w.current)return E.current.destroyed&&Z(),sU({el:w.current,nextEl:_.current,prevEl:O.current,paginationEl:R.current,scrollbarEl:M.current,swiper:E.current},P),s&&!E.current.destroyed&&s(E.current),()=>{E.current&&!E.current.destroyed&&E.current.destroy(!0,!1)}},[]),dd(()=>{se();const V=rU(N,T.current,$,k.current,q=>q.key);return T.current=N,k.current=$,V.length&&E.current&&!E.current.destroyed&&iU({swiper:E.current,slides:$,passedParams:N,changedParams:V,nextEl:_.current,prevEl:O.current,scrollbarEl:M.current,paginationEl:R.current}),()=>{z()}}),dd(()=>{oU(E.current)},[f]);function Y(){return P.virtual?lU(E.current,$,f):$.map((V,q)=>Pe.cloneElement(V,{swiper:E.current,swiperSlideIndex:q}))}return Pe.createElement(e,Zf({ref:w,className:NI(`${d}${n?` ${n}`:""}`)},L),Pe.createElement(cU.Provider,{value:E.current},U["container-start"],Pe.createElement(t,{className:tU(P.wrapperClass)},U["wrapper-start"],Y(),U["wrapper-end"]),LI(P)&&Pe.createElement(Pe.Fragment,null,Pe.createElement("div",{ref:O,className:"swiper-button-prev"}),Pe.createElement("div",{ref:_,className:"swiper-button-next"})),OI(P)&&Pe.createElement("div",{ref:M,className:"swiper-scrollbar"}),DI(P)&&Pe.createElement("div",{ref:R,className:"swiper-pagination"}),U["container-end"]))});Wd.displayName="Swiper";const yn=C.forwardRef(({tag:n="div",children:e,className:t="",swiper:i,zoom:s,lazy:r,virtualIndex:o,swiperSlideIndex:l,...d}={},u)=>{const f=C.useRef(null),[p,b]=C.useState("swiper-slide"),[v,y]=C.useState(!1);function w(_,O,R){O===f.current&&b(R)}dd(()=>{if(typeof l<"u"&&(f.current.swiperSlideIndex=l),u&&(u.current=f.current),!(!f.current||!i)){if(i.destroyed){p!=="swiper-slide"&&b("swiper-slide");return}return i.on("_slideClass",w),()=>{i&&i.off("_slideClass",w)}}}),dd(()=>{i&&f.current&&!i.destroyed&&b(i.getSlideClasses(f.current))},[i]);const E={isActive:p.indexOf("swiper-slide-active")>=0,isVisible:p.indexOf("swiper-slide-visible")>=0,isPrev:p.indexOf("swiper-slide-prev")>=0,isNext:p.indexOf("swiper-slide-next")>=0},T=()=>typeof e=="function"?e(E):e,k=()=>{y(!0)};return Pe.createElement(n,Zf({ref:f,className:NI(`${p}${t?` ${t}`:""}`),"data-swiper-slide-index":o,onLoad:k},d),s&&Pe.createElement(sk.Provider,{value:E},Pe.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof s=="number"?s:void 0},T(),r&&!v&&Pe.createElement("div",{className:"swiper-lazy-preloader"}))),!s&&Pe.createElement(sk.Provider,{value:E},T(),r&&!v&&Pe.createElement("div",{className:"swiper-lazy-preloader"})))});yn.displayName="SwiperSlide";function dU({swiper:n,extendParams:e,on:t,emit:i}){const s=Gr(),r=gn();n.keyboard={enabled:!1},e({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function o(u){if(!n.enabled)return;const{rtlTranslate:f}=n;let p=u;p.originalEvent&&(p=p.originalEvent);const b=p.keyCode||p.charCode,v=n.params.keyboard.pageUpDown,y=v&&b===33,w=v&&b===34,E=b===37,T=b===39,k=b===38,_=b===40;if(!n.allowSlideNext&&(n.isHorizontal()&&T||n.isVertical()&&_||w)||!n.allowSlidePrev&&(n.isHorizontal()&&E||n.isVertical()&&k||y))return!1;if(!(p.shiftKey||p.altKey||p.ctrlKey||p.metaKey)&&!(s.activeElement&&(s.activeElement.isContentEditable||s.activeElement.nodeName&&(s.activeElement.nodeName.toLowerCase()==="input"||s.activeElement.nodeName.toLowerCase()==="textarea")))){if(n.params.keyboard.onlyInViewport&&(y||w||E||T||k||_)){let O=!1;if(Xf(n.el,`.${n.params.slideClass}, swiper-slide`).length>0&&Xf(n.el,`.${n.params.slideActiveClass}`).length===0)return;const R=n.el,M=R.clientWidth,P=R.clientHeight,N=r.innerWidth,L=r.innerHeight,D=Hj(R);f&&(D.left-=R.scrollLeft);const $=[[D.left,D.top],[D.left+M,D.top],[D.left,D.top+P],[D.left+M,D.top+P]];for(let U=0;U<$.length;U+=1){const G=$[U];if(G[0]>=0&&G[0]<=N&&G[1]>=0&&G[1]<=L){if(G[0]===0&&G[1]===0)continue;O=!0}}if(!O)return}n.isHorizontal()?((y||w||E||T)&&(p.preventDefault?p.preventDefault():p.returnValue=!1),((w||T)&&!f||(y||E)&&f)&&n.slideNext(),((y||E)&&!f||(w||T)&&f)&&n.slidePrev()):((y||w||k||_)&&(p.preventDefault?p.preventDefault():p.returnValue=!1),(w||_)&&n.slideNext(),(y||k)&&n.slidePrev()),i("keyPress",b)}}function l(){n.keyboard.enabled||(s.addEventListener("keydown",o),n.keyboard.enabled=!0)}function d(){n.keyboard.enabled&&(s.removeEventListener("keydown",o),n.keyboard.enabled=!1)}t("init",()=>{n.params.keyboard.enabled&&l()}),t("destroy",()=>{n.keyboard.enabled&&d()}),Object.assign(n.keyboard,{enable:l,disable:d})}function uU(n,e,t,i){return n.params.createElements&&Object.keys(i).forEach(s=>{if(!t[s]&&t.auto===!0){let r=Ys(n.el,`.${i[s]}`)[0];r||(r=Kf("div",i[s]),r.className=i[s],n.el.append(r)),t[s]=r,e[s]=r}}),t}function Qc(n=""){return`.${n.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function Gy({swiper:n,extendParams:e,on:t,emit:i}){const s="swiper-pagination";e({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:T=>T,formatFractionTotal:T=>T,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),n.pagination={el:null,bullets:[]};let r,o=0;function l(){return!n.params.pagination.el||!n.pagination.el||Array.isArray(n.pagination.el)&&n.pagination.el.length===0}function d(T,k){const{bulletActiveClass:_}=n.params.pagination;T&&(T=T[`${k==="prev"?"previous":"next"}ElementSibling`],T&&(T.classList.add(`${_}-${k}`),T=T[`${k==="prev"?"previous":"next"}ElementSibling`],T&&T.classList.add(`${_}-${k}-${k}`)))}function u(T,k,_){if(T=T%_,k=k%_,k===T+1)return"next";if(k===T-1)return"previous"}function f(T){const k=T.target.closest(Qc(n.params.pagination.bulletClass));if(!k)return;T.preventDefault();const _=Yf(k)*n.params.slidesPerGroup;if(n.params.loop){if(n.realIndex===_)return;const O=u(n.realIndex,_,n.slides.length);O==="next"?n.slideNext():O==="previous"?n.slidePrev():n.slideToLoop(_)}else n.slideTo(_)}function p(){const T=n.rtl,k=n.params.pagination;if(l())return;let _=n.pagination.el;_=Sr(_);let O,R;const M=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,P=n.params.loop?Math.ceil(M/n.params.slidesPerGroup):n.snapGrid.length;if(n.params.loop?(R=n.previousRealIndex||0,O=n.params.slidesPerGroup>1?Math.floor(n.realIndex/n.params.slidesPerGroup):n.realIndex):typeof n.snapIndex<"u"?(O=n.snapIndex,R=n.previousSnapIndex):(R=n.previousIndex||0,O=n.activeIndex||0),k.type==="bullets"&&n.pagination.bullets&&n.pagination.bullets.length>0){const N=n.pagination.bullets;let L,D,$;if(k.dynamicBullets&&(r=vv(N[0],n.isHorizontal()?"width":"height"),_.forEach(U=>{U.style[n.isHorizontal()?"width":"height"]=`${r*(k.dynamicMainBullets+4)}px`}),k.dynamicMainBullets>1&&R!==void 0&&(o+=O-(R||0),o>k.dynamicMainBullets-1?o=k.dynamicMainBullets-1:o<0&&(o=0)),L=Math.max(O-o,0),D=L+(Math.min(N.length,k.dynamicMainBullets)-1),$=(D+L)/2),N.forEach(U=>{const G=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(Z=>`${k.bulletActiveClass}${Z}`)].map(Z=>typeof Z=="string"&&Z.includes(" ")?Z.split(" "):Z).flat();U.classList.remove(...G)}),_.length>1)N.forEach(U=>{const G=Yf(U);G===O?U.classList.add(...k.bulletActiveClass.split(" ")):n.isElement&&U.setAttribute("part","bullet"),k.dynamicBullets&&(G>=L&&G<=D&&U.classList.add(...`${k.bulletActiveClass}-main`.split(" ")),G===L&&d(U,"prev"),G===D&&d(U,"next"))});else{const U=N[O];if(U&&U.classList.add(...k.bulletActiveClass.split(" ")),n.isElement&&N.forEach((G,Z)=>{G.setAttribute("part",Z===O?"bullet-active":"bullet")}),k.dynamicBullets){const G=N[L],Z=N[D];for(let se=L;se<=D;se+=1)N[se]&&N[se].classList.add(...`${k.bulletActiveClass}-main`.split(" "));d(G,"prev"),d(Z,"next")}}if(k.dynamicBullets){const U=Math.min(N.length,k.dynamicMainBullets+4),G=(r*U-r)/2-$*r,Z=T?"right":"left";N.forEach(se=>{se.style[n.isHorizontal()?Z:"top"]=`${G}px`})}}_.forEach((N,L)=>{if(k.type==="fraction"&&(N.querySelectorAll(Qc(k.currentClass)).forEach(D=>{D.textContent=k.formatFractionCurrent(O+1)}),N.querySelectorAll(Qc(k.totalClass)).forEach(D=>{D.textContent=k.formatFractionTotal(P)})),k.type==="progressbar"){let D;k.progressbarOpposite?D=n.isHorizontal()?"vertical":"horizontal":D=n.isHorizontal()?"horizontal":"vertical";const $=(O+1)/P;let U=1,G=1;D==="horizontal"?U=$:G=$,N.querySelectorAll(Qc(k.progressbarFillClass)).forEach(Z=>{Z.style.transform=`translate3d(0,0,0) scaleX(${U}) scaleY(${G})`,Z.style.transitionDuration=`${n.params.speed}ms`})}k.type==="custom"&&k.renderCustom?(Qf(N,k.renderCustom(n,O+1,P)),L===0&&i("paginationRender",N)):(L===0&&i("paginationRender",N),i("paginationUpdate",N)),n.params.watchOverflow&&n.enabled&&N.classList[n.isLocked?"add":"remove"](k.lockClass)})}function b(){const T=n.params.pagination;if(l())return;const k=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.grid&&n.params.grid.rows>1?n.slides.length/Math.ceil(n.params.grid.rows):n.slides.length;let _=n.pagination.el;_=Sr(_);let O="";if(T.type==="bullets"){let R=n.params.loop?Math.ceil(k/n.params.slidesPerGroup):n.snapGrid.length;n.params.freeMode&&n.params.freeMode.enabled&&R>k&&(R=k);for(let M=0;M<R;M+=1)T.renderBullet?O+=T.renderBullet.call(n,M,T.bulletClass):O+=`<${T.bulletElement} ${n.isElement?'part="bullet"':""} class="${T.bulletClass}"></${T.bulletElement}>`}T.type==="fraction"&&(T.renderFraction?O=T.renderFraction.call(n,T.currentClass,T.totalClass):O=`<span class="${T.currentClass}"></span> / <span class="${T.totalClass}"></span>`),T.type==="progressbar"&&(T.renderProgressbar?O=T.renderProgressbar.call(n,T.progressbarFillClass):O=`<span class="${T.progressbarFillClass}"></span>`),n.pagination.bullets=[],_.forEach(R=>{T.type!=="custom"&&Qf(R,O||""),T.type==="bullets"&&n.pagination.bullets.push(...R.querySelectorAll(Qc(T.bulletClass)))}),T.type!=="custom"&&i("paginationRender",_[0])}function v(){n.params.pagination=uU(n,n.originalParams.pagination,n.params.pagination,{el:"swiper-pagination"});const T=n.params.pagination;if(!T.el)return;let k;typeof T.el=="string"&&n.isElement&&(k=n.el.querySelector(T.el)),!k&&typeof T.el=="string"&&(k=[...document.querySelectorAll(T.el)]),k||(k=T.el),!(!k||k.length===0)&&(n.params.uniqueNavElements&&typeof T.el=="string"&&Array.isArray(k)&&k.length>1&&(k=[...n.el.querySelectorAll(T.el)],k.length>1&&(k=k.find(_=>Xf(_,".swiper")[0]===n.el))),Array.isArray(k)&&k.length===1&&(k=k[0]),Object.assign(n.pagination,{el:k}),k=Sr(k),k.forEach(_=>{T.type==="bullets"&&T.clickable&&_.classList.add(...(T.clickableClass||"").split(" ")),_.classList.add(T.modifierClass+T.type),_.classList.add(n.isHorizontal()?T.horizontalClass:T.verticalClass),T.type==="bullets"&&T.dynamicBullets&&(_.classList.add(`${T.modifierClass}${T.type}-dynamic`),o=0,T.dynamicMainBullets<1&&(T.dynamicMainBullets=1)),T.type==="progressbar"&&T.progressbarOpposite&&_.classList.add(T.progressbarOppositeClass),T.clickable&&_.addEventListener("click",f),n.enabled||_.classList.add(T.lockClass)}))}function y(){const T=n.params.pagination;if(l())return;let k=n.pagination.el;k&&(k=Sr(k),k.forEach(_=>{_.classList.remove(T.hiddenClass),_.classList.remove(T.modifierClass+T.type),_.classList.remove(n.isHorizontal()?T.horizontalClass:T.verticalClass),T.clickable&&(_.classList.remove(...(T.clickableClass||"").split(" ")),_.removeEventListener("click",f))})),n.pagination.bullets&&n.pagination.bullets.forEach(_=>_.classList.remove(...T.bulletActiveClass.split(" ")))}t("changeDirection",()=>{if(!n.pagination||!n.pagination.el)return;const T=n.params.pagination;let{el:k}=n.pagination;k=Sr(k),k.forEach(_=>{_.classList.remove(T.horizontalClass,T.verticalClass),_.classList.add(n.isHorizontal()?T.horizontalClass:T.verticalClass)})}),t("init",()=>{n.params.pagination.enabled===!1?E():(v(),b(),p())}),t("activeIndexChange",()=>{typeof n.snapIndex>"u"&&p()}),t("snapIndexChange",()=>{p()}),t("snapGridLengthChange",()=>{b(),p()}),t("destroy",()=>{y()}),t("enable disable",()=>{let{el:T}=n.pagination;T&&(T=Sr(T),T.forEach(k=>k.classList[n.enabled?"remove":"add"](n.params.pagination.lockClass)))}),t("lock unlock",()=>{p()}),t("click",(T,k)=>{const _=k.target,O=Sr(n.pagination.el);if(n.params.pagination.el&&n.params.pagination.hideOnClick&&O&&O.length>0&&!_.classList.contains(n.params.pagination.bulletClass)){if(n.navigation&&(n.navigation.nextEl&&_===n.navigation.nextEl||n.navigation.prevEl&&_===n.navigation.prevEl))return;const R=O[0].classList.contains(n.params.pagination.hiddenClass);i(R===!0?"paginationShow":"paginationHide"),O.forEach(M=>M.classList.toggle(n.params.pagination.hiddenClass))}});const w=()=>{n.el.classList.remove(n.params.pagination.paginationDisabledClass);let{el:T}=n.pagination;T&&(T=Sr(T),T.forEach(k=>k.classList.remove(n.params.pagination.paginationDisabledClass))),v(),b(),p()},E=()=>{n.el.classList.add(n.params.pagination.paginationDisabledClass);let{el:T}=n.pagination;T&&(T=Sr(T),T.forEach(k=>k.classList.add(n.params.pagination.paginationDisabledClass))),y()};Object.assign(n.pagination,{enable:w,disable:E,render:b,update:p,init:v,destroy:y})}const Yi=()=>{const{settings:n}=Ti(),e=C.useMemo(()=>{const t={};if(n?.alang&&typeof n.alang=="object"){let i=0;Object.keys(n.alang).forEach(s=>{const r=n.alang[s],o=typeof r=="string"?r:r?.text||r;o&&(t[i]=typeof o=="string"?o:String(o),t[String(i)]=typeof o=="string"?o:String(o),i++)})}return t},[n?.alang]);return C.useEffect(()=>{!e||Object.keys(e).length===0||Object.keys(e).forEach(t=>{const i=document.querySelectorAll(`[data-alid="${t}"]`),s=e[t];s&&i.forEach(r=>{r.textContent=s})})},[e]),e},Vy=({isOpen:n,onClose:e,userPhoto:t})=>{const{settings:i}=Ti(),{user:s,config:r}=Ki(),o=Yi();wn();const[l,d]=C.useState([]),[u,f]=C.useState(""),[p,b]=C.useState(null),v=C.useRef(null),y=C.useRef(!1);C.useEffect(()=>{if(n){const M=localStorage.getItem("credits_package");if(M)try{const L=JSON.parse(M);d(Array.isArray(L)?L:[])}catch(L){console.error("Error parsing credits_package:",L)}const P=localStorage.getItem("account_basic");if(P)try{b(JSON.parse(P))}catch(L){console.error("Error parsing account_basic:",L)}const N=r||i||window.site_config||{};f(N.currency||"USD")}},[n,r,i]);const w=M=>M?M.startsWith("http")?M:`${i?.siteUrl||""}${M.startsWith("/")?M:`/${M}`}`:"",E=(M,P,N)=>{const D=`${i?.siteUrl||""}pay/index.php?package=${N}&type=credits&fromMobile=true`;window.cordova?window.cordova.InAppBrowser.open(D,"_blank","location=yes"):window.location.href=D},T=t||s?.profile_photo||"",k=i?.siteUrl||"",_=i?.prices?.chat||p?.chat||"0",O=()=>{y.current=!0,e()},R=M=>{M.stopPropagation()};return C.useEffect(()=>{n&&(y.current=!1)},[n]),m.jsx(ms,{ref:v,isOpen:n,onDidDismiss:e,canDismiss:()=>Promise.resolve(y.current),children:m.jsx(Wt,{className:"mi-violetita twigo-bg",onClick:R,children:m.jsxs("div",{onClick:R,style:{width:"100%",height:"100%",position:"relative"},children:[m.jsx("button",{className:"credits-not-now-btn",onClick:O,style:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",background:"transparent",border:"none",color:"#ffffff",fontSize:"14px",fontWeight:500,cursor:"pointer",zIndex:10,padding:"8px 12px",textDecoration:"none",WebkitTapHighlightColor:"transparent"},children:"Not now"}),m.jsx("div",{className:"credits-modal-bg",onClick:R,style:{backgroundImage:`url('${k}mobile/twigo/img/credits.png')`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),m.jsx("div",{className:"credits-modal-photo",onClick:R,style:{backgroundImage:`url(${w(T)})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),m.jsx("div",{className:"credits-separator",onClick:R}),m.jsx("div",{onClick:R,children:m.jsxs(Wd,{modules:[Gy],pagination:{clickable:!0},className:"credits-slider slider-pager",spaceBetween:0,slidesPerView:1,children:[m.jsx(yn,{className:"credits-slider-items",children:m.jsxs("div",{className:"credit-slide",children:[m.jsx("h2",{className:"comforta",children:o[225]||"Title 1"}),m.jsx("p",{className:"comforta",children:o[226]||"Description 1"})]})}),m.jsx(yn,{className:"credits-slider-items",children:m.jsxs("div",{className:"credit-slide",children:[m.jsx("h2",{className:"comforta",children:o[227]||"Title 2"}),m.jsx("p",{className:"comforta",children:o[228]||"Description 2"})]})}),m.jsx(yn,{className:"credits-slider-items",children:m.jsxs("div",{className:"credit-slide",children:[m.jsx("h2",{className:"comforta",children:o[229]||"Title 3"}),m.jsx("p",{className:"comforta",children:o[230]||"Description 3"})]})}),m.jsx(yn,{className:"credits-slider-items",children:m.jsxs("div",{className:"credit-slide",children:[m.jsx("h2",{className:"comforta",children:o[231]||"Title 4"}),m.jsx("p",{className:"comforta",children:o[232]||"Description 4"})]})}),m.jsx(yn,{className:"credits-slider-items",children:m.jsxs("div",{className:"credit-slide",children:[m.jsx("h2",{className:"comforta",children:o[45]||"Daily Chat"}),m.jsxs("p",{className:"comforta",children:[o[46]||"Get"," ",m.jsx("b",{children:p?.chat||0})," ",o[47]||"chats for"," ",m.jsx("b",{children:_})," ",o[48]||"credits"]})]})}),m.jsx(yn,{className:"credits-slider-items",children:m.jsxs("div",{className:"credit-slide",children:[m.jsx("h2",{className:"comforta",children:o[49]||"Title 6"}),m.jsx("p",{className:"comforta",children:o[50]||"Description 6"})]})}),m.jsx(yn,{className:"credits-slider-items",children:m.jsxs("div",{className:"credit-slide",children:[m.jsx("h2",{className:"comforta",children:o[51]||"Title 7"}),m.jsx("p",{className:"comforta",children:o[52]||"Description 7"})]})})]})}),m.jsxs("div",{className:"text-muted border-none",onClick:R,children:[m.jsx("div",{className:"item item-divider b-none text-center gradient7 credits-header",children:o[53]||"Buy Credits"}),l.map((M,P)=>m.jsx("div",{className:"list credits-prices",onClick:N=>{N.stopPropagation(),E(M.quantity,M.price,P)},children:m.jsx("div",{className:"item premium-bg comforta div-c1",children:m.jsxs("div",{children:[m.jsxs("span",{className:"ml-5 text-gray-777",children:[M.quantity," ",o[48]||"Credits"]}),m.jsxs("span",{className:"credits-price",children:[M.price," ",u]})]})})},P))]})]})})})},hU="updateCredits",fU=1,pU="",mU=3e3,gU="Credits spent",bU={getUser:()=>window.user||null,getSettings:()=>window.settings||null,showNotification:void 0,openCreditsModal:void 0};let Xs={...bU},kd=0,Ta=!1;const Np=n=>{const e=parseInt(String(n??0),10);return Number.isNaN(e)?0:e},vU=n=>`You spent ${n} credits`,yU=()=>{const n=Xs.getSettings?.();if(!n)return"";const e=n?.site_theme?.notification_inapp_credits_icon?.val||"";if(!e)return"";const t=n?.siteUrl||"";return e.startsWith("http")?e:`${t}${e.startsWith("/")?e:`/${e}`}`},qy=()=>{const n=Xs.getUser?.();n&&(kd=Np(n.credits))},xU=n=>{Xs={...Xs,...n},Ta||(qy(),Ta=!0)},Wy=()=>{Xs.openCreditsModal?.()},wU=(n,e=!0)=>{if(!n||n<=0)return!0;Ta||(qy(),Ta=!0);const t=Np(n),i=kd>=t;return!i&&e&&Wy(),i},SU=n=>{kd=Math.max(0,Np(n)),Ta=!0},EU=()=>Xs.getUser?.()?.id?!0:(console.warn("Credits service: missing user"),!1),TU=async(n,e,t=!0,i=!0)=>{if(!n||n<=0||!EU())return!1;Ta||(qy(),Ta=!0);const s=Xs.getUser?.(),r=Xs.getSettings?.(),o=kd,l=Np(n);if(o<l)return Wy(),!1;if(kd=Math.max(o-l,0),t){const d=encodeURIComponent(e||gU),u=`${s.id},${l},${fU},${d},${pU}`;await Ne.query(hU,u,r)}return i&&Xs.showNotification&&Xs.showNotification(vU(l),"success",mU,yU()),!0},rn={configure:xU,hasEnoughCredits:wU,wasteCredit:TU,openCreditsModal:Wy,setCurrentCredits:SU};class Do{static instance=null;static channel=null;static isInitialized=!1;static settings=null;static inIframe(){try{return window.self!==window.top}catch{return!0}}static getPusherCredentials(e){return e?.plugins?.pusher?.key&&e?.plugins?.pusher?.cluster?{key:e.plugins.pusher.key,cluster:e.plugins.pusher.cluster}:null}static init(e,t,i){const s=e||this.settings;if(this.isInitialized&&this.instance)return!0;if(!window.Pusher)return console.warn("Pusher SDK not loaded"),!1;let r=t,o=i;if(!r||!o){const l=this.getPusherCredentials(s);if(!l)return console.warn("Pusher credentials not found in settings"),!1;r=l.key,o=l.cluster}try{this.instance=new window.Pusher(r,{cluster:o});const l=this.inIframe()?`${r}iframe`:r;return this.channel=this.instance.subscribe(l),window.rt=this.instance,window.channel=this.channel,this.isInitialized=!0,this.inIframe()&&console.log("Pusher initialized in iframe mode"),!0}catch(l){return console.error("Pusher initialization error:",l),!1}}static getInstance(){return this.instance}static setSettings(e){this.settings=e}static getChannel(){return(!this.instance||!this.channel)&&this.init(this.settings),this.channel}static reinitIfNeeded(){return!this.instance||!this.channel?this.init(this.settings):!0}static bind(e,t){if(!this.channel)return console.warn("Pusher channel not initialized"),!1;try{return this.channel.bind(e,t),!0}catch(i){return console.error("Error binding Pusher event:",i),!1}}static unbind(e,t){if(!this.channel)return!1;try{return e&&t?this.channel.unbind(e,t):e?this.channel.unbind(e):this.channel.unbind(),!0}catch(i){return console.error("Error unbinding Pusher event:",i),!1}}static isReady(){return this.isInitialized&&this.instance!==null&&this.channel!==null}static cleanup(){if(this.channel)try{this.channel.unbind(),this.channel.unsubscribe()}catch(e){console.error("Error cleaning up Pusher:",e)}this.instance=null,this.channel=null,this.isInitialized=!1,window.rt=null,window.channel=null}}const kU=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"}));function $I(){return m.jsx(m.Fragment,{children:m.jsx("div",{className:"wrapper loader-bg-fafafa",style:{height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},children:m.jsx("div",{className:"contact-list__loader_inline top-45p",children:m.jsxs("div",{className:"loader large grey centered",children:[m.jsx("div",{className:"first dot twigo-gradient1"}),m.jsx("div",{className:"second dot twigo-gradient1"}),m.jsx("div",{className:"third dot twigo-gradient1"})]})})})})}function _U(){const n=vs(),e=nc(),{settings:t}=Ti(),{user:i,loading:s,setUser:r}=Ki();wn();const{showNotification:o}=In(),[l,d]=C.useState(!1),u=C.useRef(null),f=C.useRef(null),p=C.useRef(null);C.useEffect(()=>{if(!s&&i&&window.firstPageAfterLogin){const w=window.firstPageAfterLogin,E=e.pathname;(E==="/home"||E==="/home/")&&(w==="Profile"?n("/home/profile",{replace:!0}):w==="Meet"?n("/home/meet",{replace:!0}):w==="Explore"?n("/home/explore",{replace:!0}):w==="Chat"&&n("/home/matches",{replace:!0})),delete window.firstPageAfterLogin}if(!s&&!i&&window.shouldRedirectToLogin){const w=window.redirectPath||"/intro";!e.pathname.startsWith("/intro")&&!e.pathname.startsWith("/register")&&n(w,{replace:!0}),delete window.shouldRedirectToLogin,delete window.redirectPath}},[s,i,e.pathname,n]),C.useEffect(()=>{rn.configure({getUser:()=>i,getSettings:()=>t,showNotification:o,openCreditsModal:()=>d(!0)}),i?.credits!==void 0&&rn.setCurrentCredits(i.credits)},[i,t,r,o]),C.useEffect(()=>!i?.id||!t||s||!t?.plugins?.pusher?.key?void 0:((()=>{try{Do.setSettings(t);const E=Do.getChannel();if(!E){console.warn("Pusher channel not available");return}E.unbind();const T=N=>{window.playAudio&&window.playAudio("Notification.wav"),o(N.message||"","success")},k=`notification${i.id}`,_=N=>{if(window.dispatchEvent(new CustomEvent("pusher:notification",{detail:N})),i){const L=i.unreadMessagesCount??0,D={...i,unreadMessagesCount:L+1};r(D)}e.pathname!=="/home/matches"&&T(N)};u.current=_,E.bind(k,_);const O=`visit${i.id}`,R=N=>{T(N)};f.current=R,E.bind(O,R);const M=`like${i.id}`,P=N=>{T(N)};p.current=P,E.bind(M,P)}catch(E){console.error("Error setting up Pusher:",E)}})(),()=>{const E=Do.getChannel();E&&(u.current&&E.unbind(`notification${i.id}`,u.current),f.current&&E.unbind(`visit${i.id}`,f.current),p.current&&E.unbind(`like${i.id}`,p.current))}),[i?.id,t,s,o,e.pathname]);const b=w=>{n(w)},v=t?.siteUrl||"",y=e.pathname.startsWith("/home/reels");return s?m.jsx($i,{children:m.jsx(Wt,{fullscreen:!0,children:m.jsx($I,{})})}):m.jsxs($i,{className:"has-tabbar",children:[m.jsx(Wt,{fullscreen:!0,style:y?{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}:void 0,children:m.jsx(wj,{})}),m.jsxs(_F,{slot:y?"top":"bottom",style:y?{"--background":"transparent",position:"absolute",bottom:"0px",width:"100%","--border-style":"solid","--border-width":"0 0 1px 0","--border-color":"rgba(255, 255, 255, 0.3)",boxShadow:"none",borderTop:"1px solid rgba(255, 255, 255, 0.3)"}:void 0,children:[m.jsx(Ir,{tab:"explore",onClick:()=>b("/home/explore"),selected:e.pathname==="/home/explore",children:m.jsx("div",{className:"tabbar-item__icon",children:m.jsx("div",{className:"icon icon--stretch mt-5px",children:m.jsx("img",{src:`${v}mobile/twigo/img/${e.pathname==="/home/explore"?"menu-discover-active.svg":"menu-discover.svg"}`,alt:"Discover"})})})}),m.jsx(Ir,{tab:"meet",onClick:()=>b("/home/meet"),selected:e.pathname==="/home/meet",children:m.jsx("div",{className:"tabbar-item__icon",children:m.jsx("div",{className:"icon icon--stretch mt-5px",children:m.jsx("img",{src:`${v}mobile/twigo/img/${e.pathname==="/home/meet"?"menu-meet-active.svg":"menu-meet.svg"}`,alt:"Meet"})})})}),m.jsx(Ir,{tab:"stories",onClick:()=>b("/home/stories"),selected:e.pathname==="/home/stories",children:m.jsx("div",{className:"tabbar-item__icon",children:m.jsx("div",{className:"icon icon--stretch mt-5px",children:m.jsx("img",{src:`${v}mobile/twigo/img/${e.pathname==="/home/stories"?"menu-stories-active.svg":"menu-stories.svg"}`,alt:"Stories"})})})}),m.jsx(Ir,{tab:"reels",onClick:()=>b("/home/reels"),selected:e.pathname==="/home/reels",children:m.jsx("div",{className:"tabbar-item__icon",children:m.jsx("div",{className:"icon icon--stretch mt-5px",children:m.jsx("img",{src:`${v}mobile/twigo/img/${e.pathname==="/home/reels"?"menu-reel-active.svg":"menu-reel.svg"}`,alt:"Chat"})})})}),m.jsx(Ir,{tab:"matches",onClick:()=>b("/home/matches"),selected:e.pathname==="/home/matches",children:m.jsxs("div",{className:"tabbar-item__icon",children:[m.jsx("div",{className:"icon icon--stretch mt-6px",children:m.jsx("img",{src:`${v}mobile/twigo/img/${e.pathname==="/home/matches"?"menu-chat-active.svg":"menu-chat.svg"}`,alt:"Chat"})}),(i?.unreadMessagesCount??0)>0&&m.jsx("div",{className:"tabbar-item__icon-indicator is-shown"})]})}),m.jsx(Ir,{tab:"profile",onClick:()=>b("/home/profile"),selected:e.pathname==="/home/profile",children:m.jsx("div",{className:"tabbar-item__icon",children:m.jsx("div",{className:"icon icon--stretch mt-5px",children:m.jsx("img",{src:`${v}mobile/twigo/img/${e.pathname==="/home/profile"?"menu-profile-active.svg":"menu-profile.svg"}`,alt:"Profile"})})})})]}),m.jsx(Vy,{isOpen:l,onClose:()=>d(!1),userPhoto:i?.profile_photo||""})]})}const AU=()=>{};var rk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},CU=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],o=n[t++],l=n[t++],d=((s&7)<<18|(r&63)<<12|(o&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const r=n[t++],o=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},jI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],o=s+1<n.length,l=o?n[s+1]:0,d=s+2<n.length,u=d?n[s+2]:0,f=r>>2,p=(r&3)<<4|l>>4;let b=(l&15)<<2|u>>6,v=u&63;d||(v=64,o||(b=64)),i.push(t[f],t[p],t[b],t[v])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(FI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):CU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],l=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const p=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||l==null||u==null||p==null)throw new IU;const b=r<<2|l>>4;if(i.push(b),u!==64){const v=l<<4&240|u>>2;if(i.push(v),p!==64){const y=u<<6&192|p;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class IU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RU=function(n){const e=FI(n);return jI.encodeByteArray(e,!0)},BI=function(n){return RU(n).replace(/\./g,"")},UI=function(n){try{return jI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=()=>LU().__FIREBASE_DEFAULTS__,OU=()=>{if(typeof process>"u"||typeof rk>"u")return;const n=rk.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},NU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&UI(n[1]);return e&&JSON.parse(e)},Ky=()=>{try{return AU()||DU()||OU()||NU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},PU=n=>{var e,t;return(t=(e=Ky())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},zI=()=>{var n;return(n=Ky())===null||n===void 0?void 0:n.config},HI=n=>{var e;return(e=Ky())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $U(n){return(await fetch(n,{credentials:"include"})).ok}const ud={};function FU(){const n={prod:[],emulator:[]};for(const e of Object.keys(ud))ud[e]?n.emulator.push(e):n.prod.push(e);return n}function jU(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ok=!1;function BU(n,e){if(typeof window>"u"||typeof document>"u"||!Pp(window.location.host)||ud[n]===e||ud[n]||ok)return;ud[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",r=FU().prod.length>0;function o(){const b=document.getElementById(i);b&&b.remove()}function l(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function d(b,v){b.setAttribute("width","24"),b.setAttribute("id",v),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function u(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{ok=!0,o()},b}function f(b,v){b.setAttribute("id",v),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function p(){const b=jU(i),v=t("text"),y=document.getElementById(v)||document.createElement("span"),w=t("learnmore"),E=document.getElementById(w)||document.createElement("a"),T=t("preprendIcon"),k=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const _=b.element;l(_),f(E,w);const O=u();d(k,T),_.append(k,y,E,O),document.body.appendChild(_)}r?(y.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function zU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HU(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GU(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VU(){const n=Cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qU(){try{return typeof indexedDB=="object"}catch{return!1}}function WU(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU="FirebaseError";class Go extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=KU,Object.setPrototypeOf(this,Go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kd.prototype.create)}}class Kd{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?YU(r,i):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Go(s,l,i)}}function YU(n,e){return n.replace(XU,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const XU=/\{\$([^}]+)}/g;function QU(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wl(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],o=e[s];if(ak(r)&&ak(o)){if(!Wl(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function ak(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nd(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function sd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ZU(n,e){const t=new JU(n,e);return t.subscribe.bind(t)}class JU{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");e7(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=_0),s.error===void 0&&(s.error=_0),s.complete===void 0&&(s.complete=_0);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e7(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(n){return n&&n._delegate?n._delegate:n}class Kl{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new MU;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n7(e))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=da){return this.instances.has(e)}getOptions(e=da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&o.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:i7(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=da){return this.component?this.component.multipleInstances?e:da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i7(n){return n===da?void 0:n}function n7(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new t7(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(di||(di={}));const r7={debug:di.DEBUG,verbose:di.VERBOSE,info:di.INFO,warn:di.WARN,error:di.ERROR,silent:di.SILENT},o7=di.INFO,a7={[di.DEBUG]:"log",[di.VERBOSE]:"log",[di.INFO]:"info",[di.WARN]:"warn",[di.ERROR]:"error"},l7=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=a7[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let GI=class{constructor(e){this.name=e,this._logLevel=o7,this._logHandler=l7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in di))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,di.DEBUG,...e),this._logHandler(this,di.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,di.VERBOSE,...e),this._logHandler(this,di.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,di.INFO,...e),this._logHandler(this,di.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,di.WARN,...e),this._logHandler(this,di.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,di.ERROR,...e),this._logHandler(this,di.ERROR,...e)}};const c7=(n,e)=>e.some(t=>n instanceof t);let lk,ck;function d7(){return lk||(lk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u7(){return ck||(ck=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VI=new WeakMap,wv=new WeakMap,qI=new WeakMap,A0=new WeakMap,Yy=new WeakMap;function h7(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t(Po(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&VI.set(t,n)}).catch(()=>{}),Yy.set(e,n),e}function f7(n){if(wv.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});wv.set(n,e)}let Sv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Po(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function p7(n){Sv=n(Sv)}function m7(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(C0(this),e,...t);return qI.set(i,e.sort?e.sort():[e]),Po(i)}:u7().includes(n)?function(...e){return n.apply(C0(this),e),Po(VI.get(this))}:function(...e){return Po(n.apply(C0(this),e))}}function g7(n){return typeof n=="function"?m7(n):(n instanceof IDBTransaction&&f7(n),c7(n,d7())?new Proxy(n,Sv):n)}function Po(n){if(n instanceof IDBRequest)return h7(n);if(A0.has(n))return A0.get(n);const e=g7(n);return e!==n&&(A0.set(n,e),Yy.set(e,n)),e}const C0=n=>Yy.get(n);function b7(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,e),l=Po(o);return i&&o.addEventListener("upgradeneeded",d=>{i(Po(o.result),d.oldVersion,d.newVersion,Po(o.transaction),d)}),t&&o.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),l.then(d=>{r&&d.addEventListener("close",()=>r()),s&&d.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const v7=["get","getKey","getAll","getAllKeys","count"],y7=["put","add","delete","clear"],I0=new Map;function dk(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(I0.get(e))return I0.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=y7.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||v7.includes(t)))return;const r=async function(o,...l){const d=this.transaction(o,s?"readwrite":"readonly");let u=d.store;return i&&(u=u.index(l.shift())),(await Promise.all([u[t](...l),s&&d.done]))[0]};return I0.set(e,r),r}p7(n=>({...n,get:(e,t,i)=>dk(e,t)||n.get(e,t,i),has:(e,t)=>!!dk(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(w7(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function w7(n){const e=n.getComponent();return e?.type==="VERSION"}const Ev="@firebase/app",uk="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new GI("@firebase/app"),S7="@firebase/app-compat",E7="@firebase/analytics-compat",T7="@firebase/analytics",k7="@firebase/app-check-compat",_7="@firebase/app-check",A7="@firebase/auth",C7="@firebase/auth-compat",I7="@firebase/database",R7="@firebase/data-connect",L7="@firebase/database-compat",D7="@firebase/functions",O7="@firebase/functions-compat",N7="@firebase/installations",P7="@firebase/installations-compat",M7="@firebase/messaging",$7="@firebase/messaging-compat",F7="@firebase/performance",j7="@firebase/performance-compat",B7="@firebase/remote-config",U7="@firebase/remote-config-compat",z7="@firebase/storage",H7="@firebase/storage-compat",G7="@firebase/firestore",V7="@firebase/ai",q7="@firebase/firestore-compat",W7="firebase",K7="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="[DEFAULT]",Y7={[Ev]:"fire-core",[S7]:"fire-core-compat",[T7]:"fire-analytics",[E7]:"fire-analytics-compat",[_7]:"fire-app-check",[k7]:"fire-app-check-compat",[A7]:"fire-auth",[C7]:"fire-auth-compat",[I7]:"fire-rtdb",[R7]:"fire-data-connect",[L7]:"fire-rtdb-compat",[D7]:"fire-fn",[O7]:"fire-fn-compat",[N7]:"fire-iid",[P7]:"fire-iid-compat",[M7]:"fire-fcm",[$7]:"fire-fcm-compat",[F7]:"fire-perf",[j7]:"fire-perf-compat",[B7]:"fire-rc",[U7]:"fire-rc-compat",[z7]:"fire-gcs",[H7]:"fire-gcs-compat",[G7]:"fire-fst",[q7]:"fire-fst-compat",[V7]:"fire-vertex","fire-js":"fire-js",[W7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=new Map,X7=new Map,kv=new Map;function hk(n,e){try{n.container.addComponent(e)}catch(t){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _d(n){const e=n.name;if(kv.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;kv.set(e,n);for(const t of Jf.values())hk(t,n);for(const t of X7.values())hk(t,n);return!0}function WI(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ps(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mo=new Kd("app","Firebase",Q7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Kl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=K7;function KI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Tv,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw Mo.create("bad-app-name",{appName:String(s)});if(t||(t=zI()),!t)throw Mo.create("no-options");const r=Jf.get(s);if(r){if(Wl(t,r.options)&&Wl(i,r.config))return r;throw Mo.create("duplicate-app",{appName:s})}const o=new s7(s);for(const d of kv.values())o.addComponent(d);const l=new Z7(t,i,o);return Jf.set(s,l),l}function J7(n=Tv){const e=Jf.get(n);if(!e&&n===Tv&&zI())return KI();if(!e)throw Mo.create("no-app",{appName:n});return e}function Pl(n,e,t){var i;let s=(i=Y7[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const l=[`Unable to register library "${s}" with version "${e}":`];r&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(l.join(" "));return}_d(new Kl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9="firebase-heartbeat-database",t9=1,Ad="firebase-heartbeat-store";let R0=null;function YI(){return R0||(R0=b7(e9,t9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ad)}catch(t){console.warn(t)}}}}).catch(n=>{throw Mo.create("idb-open",{originalErrorMessage:n.message})})),R0}async function i9(n){try{const t=(await YI()).transaction(Ad),i=await t.objectStore(Ad).get(XI(n));return await t.done,i}catch(e){if(e instanceof Go)Br.warn(e.message);else{const t=Mo.create("idb-get",{originalErrorMessage:e?.message});Br.warn(t.message)}}}async function fk(n,e){try{const i=(await YI()).transaction(Ad,"readwrite");await i.objectStore(Ad).put(e,XI(n)),await i.done}catch(t){if(t instanceof Go)Br.warn(t.message);else{const i=Mo.create("idb-set",{originalErrorMessage:t?.message});Br.warn(i.message)}}}function XI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=1024,s9=30;class r9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new a9(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=pk();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>s9){const o=l9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Br.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=pk(),{heartbeatsToSend:i,unsentEntries:s}=o9(this._heartbeatsCache.heartbeats),r=BI(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return Br.warn(t),""}}}function pk(){return new Date().toISOString().substring(0,10)}function o9(n,e=n9){const t=[];let i=n.slice();for(const s of n){const r=t.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),mk(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),mk(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class a9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qU()?WU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await i9(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return fk(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return fk(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mk(n){return BI(JSON.stringify({version:2,heartbeats:n})).length}function l9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(n){_d(new Kl("platform-logger",e=>new x7(e),"PRIVATE")),_d(new Kl("heartbeat",e=>new r9(e),"PRIVATE")),Pl(Ev,uk,n),Pl(Ev,uk,"esm2017"),Pl("fire-js","")}c9("");function Xy(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function QI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d9=QI,ZI=new Kd("auth","Firebase",QI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=new GI("@firebase/auth");function u9(n,...e){ep.logLevel<=di.WARN&&ep.warn(`Auth (${Xd}): ${n}`,...e)}function cf(n,...e){ep.logLevel<=di.ERROR&&ep.error(`Auth (${Xd}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n,...e){throw Zy(n,...e)}function Ps(n,...e){return Zy(n,...e)}function Qy(n,e,t){const i=Object.assign(Object.assign({},d9()),{[e]:t});return new Kd("auth","Firebase",i).create(e,{appName:n.name})}function $r(n){return Qy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function h9(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&gs(n,"argument-error"),Qy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zy(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return ZI.create(n,...e)}function st(n,e,...t){if(!n)throw Zy(e,...t)}function Or(n){const e="INTERNAL ASSERTION FAILED: "+n;throw cf(e),new Error(e)}function Ur(n,e){n||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function f9(){return gk()==="http:"||gk()==="https:"}function gk(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(f9()||HU()||"connection"in navigator)?navigator.onLine:!0}function m9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ur(t>e,"Short delay should be less than long delay!"),this.isMobile=UU()||GU()}get(){return p9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(n,e){Ur(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],v9=new Qd(3e4,6e4);function qr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Wr(n,e,t,i,s={}){return eR(n,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const l=Yd(Object.assign({key:n.config.apiKey},o)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:d},r);return zU()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Pp(n.emulatorConfig.host)&&(u.credentials="include"),JI.fetch()(await tR(n,n.config.apiHost,t,l),u)})}async function eR(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},g9),e);try{const s=new x9(n),r=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Ah(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const l=r.ok?o.errorMessage:o.error.message,[d,u]=l.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ah(n,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw Ah(n,"email-already-in-use",o);if(d==="USER_DISABLED")throw Ah(n,"user-disabled",o);const f=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Qy(n,f,u);gs(n,f)}}catch(s){if(s instanceof Go)throw s;gs(n,"network-request-failed",{message:String(s)})}}async function Zd(n,e,t,i,s={}){const r=await Wr(n,e,t,i,s);return"mfaPendingCredential"in r&&gs(n,"multi-factor-auth-required",{_serverResponse:r}),r}async function tR(n,e,t,i){const s=`${e}${t}?${i}`,r=n,o=r.config.emulator?Jy(n.config,s):`${n.config.apiScheme}://${s}`;return b9.includes(t)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function y9(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class x9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ps(this.auth,"network-request-failed")),v9.get())})}}function Ah(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Ps(n,e,i);return s.customData._tokenResponse=t,s}function bk(n){return n!==void 0&&n.enterprise!==void 0}class w9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return y9(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function S9(n,e){return Wr(n,"GET","/v2/recaptchaConfig",qr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E9(n,e){return Wr(n,"POST","/v1/accounts:delete",e)}async function tp(n,e){return Wr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T9(n,e=!1){const t=Vr(n),i=await t.getIdToken(e),s=ex(i);st(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r?.sign_in_provider;return{claims:s,token:i,authTime:hd(L0(s.auth_time)),issuedAtTime:hd(L0(s.iat)),expirationTime:hd(L0(s.exp)),signInProvider:o||null,signInSecondFactor:r?.sign_in_second_factor||null}}function L0(n){return Number(n)*1e3}function ex(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return cf("JWT malformed, contained fewer than 3 sections"),null;try{const s=UI(t);return s?JSON.parse(s):(cf("Failed to decode base64 JWT payload"),null)}catch(s){return cf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function vk(n){const e=ex(n);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Go&&k9(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function k9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hd(this.lastLoginAt),this.creationTime=hd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ip(n){var e;const t=n.auth,i=await n.getIdToken(),s=await Cd(n,tp(t,{idToken:i}));st(s?.users.length,t,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?iR(r.providerUserInfo):[],l=C9(n.providerData,o),d=n.isAnonymous,u=!(n.email&&r.passwordHash)&&!l?.length,f=d?u:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new Av(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function A9(n){const e=Vr(n);await ip(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C9(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function iR(n){return n.map(e=>{var{providerId:t}=e,i=Xy(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I9(n,e){const t=await eR(n,{},async()=>{const i=Yd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=n.config,o=await tR(n,s,"/v1/token",`key=${r}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:l,body:i};return n.emulatorConfig&&Pp(n.emulatorConfig.host)&&(d.credentials="include"),JI.fetch()(o,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function R9(n,e){return Wr(n,"POST","/v2/accounts:revokeToken",qr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){st(e.length!==0,"internal-error");const t=vk(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:r}=await I9(e,t);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:r}=t,o=new Ml;return i&&(st(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(st(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(st(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ml,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(n,e){st(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Os{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,r=Xy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Av(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Cd(this,this.stsTokenManager.getToken(this.auth,e));return st(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return T9(this,e)}reload(){return A9(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Os(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ip(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ps(this.auth.app))return Promise.reject($r(this.auth));const e=await this.getIdToken();return await Cd(this,E9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,r,o,l,d,u,f;const p=(i=t.displayName)!==null&&i!==void 0?i:void 0,b=(s=t.email)!==null&&s!==void 0?s:void 0,v=(r=t.phoneNumber)!==null&&r!==void 0?r:void 0,y=(o=t.photoURL)!==null&&o!==void 0?o:void 0,w=(l=t.tenantId)!==null&&l!==void 0?l:void 0,E=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,T=(u=t.createdAt)!==null&&u!==void 0?u:void 0,k=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:_,emailVerified:O,isAnonymous:R,providerData:M,stsTokenManager:P}=t;st(_&&P,e,"internal-error");const N=Ml.fromJSON(this.name,P);st(typeof _=="string",e,"internal-error"),xo(p,e.name),xo(b,e.name),st(typeof O=="boolean",e,"internal-error"),st(typeof R=="boolean",e,"internal-error"),xo(v,e.name),xo(y,e.name),xo(w,e.name),xo(E,e.name),xo(T,e.name),xo(k,e.name);const L=new Os({uid:_,auth:e,email:b,emailVerified:O,displayName:p,isAnonymous:R,photoURL:y,phoneNumber:v,tenantId:w,stsTokenManager:N,createdAt:T,lastLoginAt:k});return M&&Array.isArray(M)&&(L.providerData=M.map(D=>Object.assign({},D))),E&&(L._redirectEventId=E),L}static async _fromIdTokenResponse(e,t,i=!1){const s=new Ml;s.updateFromServerResponse(t);const r=new Os({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await ip(r),r}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];st(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?iR(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!r?.length,l=new Ml;l.updateFromIdToken(i);const d=new Os({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Av(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!r?.length};return Object.assign(d,u),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new Map;function Nr(n){Ur(n instanceof Function,"Expected a class definition");let e=yk.get(n);return e?(Ur(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yk.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nR.type="NONE";const xk=nR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(n,e,t){return`firebase:${n}:${e}:${t}`}class $l{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=df(this.userKey,s.apiKey,r),this.fullPersistenceKey=df("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await tp(this.auth,{idToken:e}).catch(()=>{});return t?Os._fromGetAccountInfoResponse(this.auth,t,e):null}return Os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new $l(Nr(xk),e,i);const s=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=s[0]||Nr(xk);const o=df(i,e.config.apiKey,e.name);let l=null;for(const u of t)try{const f=await u._get(o);if(f){let p;if(typeof f=="string"){const b=await tp(e,{idToken:f}).catch(()=>{});if(!b)break;p=await Os._fromGetAccountInfoResponse(e,b,f)}else p=Os._fromJSON(e,f);u!==r&&(l=p),r=u;break}}catch{}const d=s.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!d.length?new $l(r,e,i):(r=d[0],l&&await r._set(o,l.toJSON()),await Promise.all(t.map(async u=>{if(u!==r)try{await u._remove(o)}catch{}})),new $l(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cR(e))return"Blackberry";if(dR(e))return"Webos";if(rR(e))return"Safari";if((e.includes("chrome/")||oR(e))&&!e.includes("edge/"))return"Chrome";if(lR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function sR(n=Cn()){return/firefox\//i.test(n)}function rR(n=Cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oR(n=Cn()){return/crios\//i.test(n)}function aR(n=Cn()){return/iemobile/i.test(n)}function lR(n=Cn()){return/android/i.test(n)}function cR(n=Cn()){return/blackberry/i.test(n)}function dR(n=Cn()){return/webos/i.test(n)}function tx(n=Cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function L9(n=Cn()){var e;return tx(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function D9(){return VU()&&document.documentMode===10}function uR(n=Cn()){return tx(n)||lR(n)||dR(n)||cR(n)||/windows phone/i.test(n)||aR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(n,e=[]){let t;switch(n){case"Browser":t=wk(Cn());break;case"Worker":t=`${wk(Cn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xd}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=r=>new Promise((o,l)=>{try{const d=e(r);o(d)}catch(d){l(d)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N9(n,e={}){return Wr(n,"GET","/v2/passwordPolicy",qr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=6;class M9{constructor(e){var t,i,s,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:P9,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,r,o,l;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(r=d.containsUppercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),d}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sk(this),this.idTokenSubscription=new Sk(this),this.beforeStateQueue=new O9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Nr(t)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await $l.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await tp(this,{idToken:e}),i=await Os._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ps(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===l)&&d?.user&&(s=d.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ip(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ps(this.app))return Promise.reject($r(this));const t=e?Vr(e):null;return t&&st(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ps(this.app)?Promise.reject($r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ps(this.app)?Promise.reject($r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await N9(this),t=new M9(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kd("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await R9(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Nr(e)||this._popupRedirectResolver;st(t,this,"argument-error"),this.redirectPersistenceManager=await $l.create(this,[Nr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const r=typeof t=="function"?t:t.next.bind(t);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(l,this,"internal-error"),l.then(()=>{o||r(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,s);return()=>{o=!0,d()}}else{const d=e.addObserver(t);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&u9(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Kr(n){return Vr(n)}class Sk{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZU(t=>this.observer=t)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function F9(n){Mp=n}function fR(n){return Mp.loadJS(n)}function j9(){return Mp.recaptchaEnterpriseScript}function B9(){return Mp.gapiScript}function U9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class z9{constructor(){this.enterprise=new H9}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class H9{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const G9="recaptcha-enterprise",pR="NO_RECAPTCHA";class V9{constructor(e){this.type=G9,this.auth=Kr(e)}async verify(e="verify",t=!1){async function i(r){if(!t){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,l)=>{S9(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new w9(d);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,o(u.siteKey)}}).catch(d=>{l(d)})})}function s(r,o,l){const d=window.grecaptcha;bk(d)?d.enterprise.ready(()=>{d.enterprise.execute(r,{action:e}).then(u=>{o(u)}).catch(()=>{o(pR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new z9().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{i(this.auth).then(l=>{if(!t&&bk(window.grecaptcha))s(l,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let d=j9();d.length!==0&&(d+=l),fR(d).then(()=>{s(l,r,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function Ek(n,e,t,i=!1,s=!1){const r=new V9(n);let o;if(s)o=pR;else try{o=await r.verify(t)}catch{o=await r.verify(t,!0)}const l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const d=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const d=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function np(n,e,t,i,s){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ek(n,e,t,t==="getOobCode");return i(n,o)}else return i(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ek(n,e,t,t==="getOobCode");return i(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(n,e){const t=WI(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),r=t.getOptions();if(Wl(r,e??{}))return s;gs(s,"already-initialized")}return t.initialize({options:e})}function W9(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Nr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function K9(n,e,t){const i=Kr(n);st(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=mR(e),{host:o,port:l}=Y9(e),d=l===null?"":`:${l}`,u={url:`${r}//${o}${d}/`},f=Object.freeze({host:o,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){st(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),st(Wl(u,i.config.emulator)&&Wl(f,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=u,i.emulatorConfig=f,i.settings.appVerificationDisabledForTesting=!0,Pp(o)?($U(`${r}//${o}${d}`),BU("Auth",!0)):X9()}function mR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Y9(n){const e=mR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Tk(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:Tk(o)}}}function Tk(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function X9(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,t){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function Q9(n,e){return Wr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z9(n,e){return Zd(n,"POST","/v1/accounts:signInWithPassword",qr(n,e))}async function J9(n,e){return Wr(n,"POST","/v1/accounts:sendOobCode",qr(n,e))}async function ez(n,e){return J9(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tz(n,e){return Zd(n,"POST","/v1/accounts:signInWithEmailLink",qr(n,e))}async function iz(n,e){return Zd(n,"POST","/v1/accounts:signInWithEmailLink",qr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends ix{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Id(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Id(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return np(e,t,"signInWithPassword",Z9);case"emailLink":return tz(e,{email:this._email,oobCode:this._password});default:gs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return np(e,i,"signUpPassword",Q9);case"emailLink":return iz(e,{idToken:t,email:this._email,oobCode:this._password});default:gs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(n,e){return Zd(n,"POST","/v1/accounts:signInWithIdp",qr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz="http://localhost";class ka extends ix{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ka(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=t,r=Xy(t,["providerId","signInMethod"]);if(!i||!s)return null;const o=new ka(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Fl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Fl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fl(e,t)}buildRequest(){const e={requestUri:nz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rz(n){const e=nd(sd(n)).link,t=e?nd(sd(e)).deep_link_id:null,i=nd(sd(n)).deep_link_id;return(i?nd(sd(i)).link:null)||i||t||e||n}class nx{constructor(e){var t,i,s,r,o,l;const d=nd(sd(e)),u=(t=d.apiKey)!==null&&t!==void 0?t:null,f=(i=d.oobCode)!==null&&i!==void 0?i:null,p=sz((s=d.mode)!==null&&s!==void 0?s:null);st(u&&f&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=f,this.continueUrl=(r=d.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=d.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=d.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const t=rz(e);try{return new nx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(){this.providerId=sc.PROVIDER_ID}static credential(e,t){return Id._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=nx.parseLink(t);return st(i,"argument-error"),Id._fromEmailAndCode(e,i.code,i.tenantId)}}sc.PROVIDER_ID="password";sc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends sx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Jd{constructor(){super("facebook.com")}static credential(e){return ka._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ao.credential(e.oauthAccessToken)}catch{return null}}}Ao.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ao.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Jd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ka._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Lr.credential(t,i)}catch{return null}}}Lr.GOOGLE_SIGN_IN_METHOD="google.com";Lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends Jd{constructor(){super("github.com")}static credential(e){return ka._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Co.credential(e.oauthAccessToken)}catch{return null}}}Co.GITHUB_SIGN_IN_METHOD="github.com";Co.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Jd{constructor(){super("twitter.com")}static credential(e,t){return ka._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Io.credential(t,i)}catch{return null}}}Io.TWITTER_SIGN_IN_METHOD="twitter.com";Io.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oz(n,e){return Zd(n,"POST","/v1/accounts:signUp",qr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const r=await Os._fromIdTokenResponse(e,i,s),o=kk(i);return new _a({user:r,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=kk(i);return new _a({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function kk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp extends Go{constructor(e,t,i,s){var r;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,sp.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new sp(e,t,i,s)}}function gR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?sp._fromErrorAndOperation(n,r,e,i):r})}async function az(n,e,t=!1){const i=await Cd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _a._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lz(n,e,t=!1){const{auth:i}=n;if(ps(i.app))return Promise.reject($r(i));const s="reauthenticate";try{const r=await Cd(n,gR(i,s,e,n),t);st(r.idToken,i,"internal-error");const o=ex(r.idToken);st(o,i,"internal-error");const{sub:l}=o;return st(n.uid===l,i,"user-mismatch"),_a._forOperation(n,s,r)}catch(r){throw r?.code==="auth/user-not-found"&&gs(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(n,e,t=!1){if(ps(n.app))return Promise.reject($r(n));const i="signIn",s=await gR(n,i,e),r=await _a._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(r.user),r}async function cz(n,e){return bR(Kr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(n){const e=Kr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dz(n,e,t){const i=Kr(n);await np(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ez)}async function uz(n,e,t){if(ps(n.app))return Promise.reject($r(n));const i=Kr(n),o=await np(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oz).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&vR(n),d}),l=await _a._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(l.user),l}function hz(n,e,t){return ps(n.app)?Promise.reject($r(n)):cz(Vr(n),sc.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&vR(n),i})}function fz(n,e,t,i){return Vr(n).onIdTokenChanged(e,t,i)}function pz(n,e,t){return Vr(n).beforeAuthStateChanged(e,t)}function mz(n){return Vr(n).signOut()}async function gz(n){return Vr(n).delete()}const rp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rp,"1"),this.storage.removeItem(rp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz=1e3,vz=10;class xR extends yR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,l,d)=>{this.notifyListeners(o,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);D9()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,vz):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},bz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xR.type="LOCAL";const yz=xR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR extends yR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wR.type="SESSION";const SR=wR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new $p(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:r}=t.data,o=this.handlersMap[s];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(o).map(async u=>u(t.origin,r)),d=await xz(l);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$p.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((l,d)=>{const u=rx("",20);s.port1.start();const f=setTimeout(()=>{d(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(p){const b=p;if(b.data.eventId===u)switch(b.data.status){case"ack":clearTimeout(f),r=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(b.data.response);break;default:clearTimeout(f),clearTimeout(r),d(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return window}function Sz(n){tr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}async function Ez(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tz(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function kz(){return ER()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="firebaseLocalStorageDb",_z=1,op="firebaseLocalStorage",kR="fbase_key";class eu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fp(n,e){return n.transaction([op],e?"readwrite":"readonly").objectStore(op)}function Az(){const n=indexedDB.deleteDatabase(TR);return new eu(n).toPromise()}function Cv(){const n=indexedDB.open(TR,_z);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(op,{keyPath:kR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(op)?e(i):(i.close(),await Az(),e(await Cv()))})})}async function _k(n,e,t){const i=Fp(n,!0).put({[kR]:e,value:t});return new eu(i).toPromise()}async function Cz(n,e){const t=Fp(n,!1).get(e),i=await new eu(t).toPromise();return i===void 0?null:i.value}function Ak(n,e){const t=Fp(n,!0).delete(e);return new eu(t).toPromise()}const Iz=800,Rz=3;class _R{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Rz)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ER()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$p._getInstance(kz()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Ez(),!this.activeServiceWorker)return;this.sender=new wz(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Tz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cv();return await _k(e,rp,"1"),await Ak(e,rp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>_k(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Cz(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ak(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Fp(s,!1).getAll();return new eu(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Iz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_R.type="LOCAL";const Lz=_R;new Qd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(n,e){return e?Nr(e):(st(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends ix{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Dz(n){return bR(n.auth,new ox(n),n.bypassAuthState)}function Oz(n){const{auth:e,user:t}=n;return st(t,e,"internal-error"),lz(t,new ox(n),n.bypassAuthState)}async function Nz(n){const{auth:e,user:t}=n;return st(t,e,"internal-error"),az(t,new ox(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,t,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:r,error:o,type:l}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(d))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dz;case"linkViaPopup":case"linkViaRedirect":return Nz;case"reauthViaPopup":case"reauthViaRedirect":return Oz;default:gs(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz=new Qd(2e3,1e4);async function Mz(n,e,t){if(ps(n.app))return Promise.reject(Ps(n,"operation-not-supported-in-this-environment"));const i=Kr(n);h9(n,e,sx);const s=AR(i,t);return new fa(i,"signInViaPopup",e,s).executeNotNull()}class fa extends CR{constructor(e,t,i,s,r){super(e,t,s,r),this.provider=i,this.authWindow=null,this.pollId=null,fa.currentPopupAction&&fa.currentPopupAction.cancel(),fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return st(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=rx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Pz.get())};e()}}fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z="pendingRedirect",uf=new Map;class Fz extends CR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=uf.get(this.auth._key());if(!e){try{const i=await jz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}uf.set(this.auth._key(),e)}return this.bypassAuthState||uf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jz(n,e){const t=zz(e),i=Uz(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function Bz(n,e){uf.set(n._key(),e)}function Uz(n){return Nr(n._redirectPersistence)}function zz(n){return df($z,n.config.apiKey,n.name)}async function Hz(n,e,t=!1){if(ps(n.app))return Promise.reject($r(n));const i=Kr(n),s=AR(i,e),o=await new Fz(i,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz=600*1e3;class Vz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!IR(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ps(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gz&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ck(e))}saveEventToCache(e){this.cachedEventUids.add(Ck(e)),this.lastProcessedEventTime=Date.now()}}function Ck(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function IR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function qz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wz(n,e={}){return Wr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yz=/^https?/;async function Xz(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Wz(n);for(const t of e)try{if(Qz(t))return}catch{}gs(n,"unauthorized-domain")}function Qz(n){const e=_v(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!Yz.test(t))return!1;if(Kz.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz=new Qd(3e4,6e4);function Ik(){const n=tr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Jz(n){return new Promise((e,t)=>{var i,s,r;function o(){Ik(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ik(),t(Ps(n,"network-request-failed"))},timeout:Zz.get()})}if(!((s=(i=tr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=tr().gapi)===null||r===void 0)&&r.load)o();else{const l=U9("iframefcb");return tr()[l]=()=>{gapi.load?o():t(Ps(n,"network-request-failed"))},fR(`${B9()}?onload=${l}`).catch(d=>t(d))}}).catch(e=>{throw hf=null,e})}let hf=null;function eH(n){return hf=hf||Jz(n),hf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH=new Qd(5e3,15e3),iH="__/auth/iframe",nH="emulator/auth/iframe",sH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oH(n){const e=n.config;st(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Jy(e,nH):`https://${n.config.authDomain}/${iH}`,i={apiKey:e.apiKey,appName:n.name,v:Xd},s=rH.get(n.config.apiHost);s&&(i.eid=s);const r=n._getFrameworks();return r.length&&(i.fw=r.join(",")),`${t}?${Yd(i).slice(1)}`}async function aH(n){const e=await eH(n),t=tr().gapi;return st(t,n,"internal-error"),e.open({where:document.body,url:oH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sH,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=Ps(n,"network-request-failed"),l=tr().setTimeout(()=>{r(o)},tH.get());function d(){tr().clearTimeout(l),s(i)}i.ping(d).then(d,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cH=500,dH=600,uH="_blank",hH="http://localhost";class Rk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fH(n,e,t,i=cH,s=dH){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const d=Object.assign(Object.assign({},lH),{width:i.toString(),height:s.toString(),top:r,left:o}),u=Cn().toLowerCase();t&&(l=oR(u)?uH:t),sR(u)&&(e=e||hH,d.scrollbars="yes");const f=Object.entries(d).reduce((b,[v,y])=>`${b}${v}=${y},`,"");if(L9(u)&&l!=="_self")return pH(e||"",l),new Rk(null);const p=window.open(e||"",l,f);st(p,n,"popup-blocked");try{p.focus()}catch{}return new Rk(p)}function pH(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH="__/auth/handler",gH="emulator/auth/handler",bH=encodeURIComponent("fac");async function Lk(n,e,t,i,s,r){st(n.config.authDomain,n,"auth-domain-config-required"),st(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Xd,eventId:s};if(e instanceof sx){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",QU(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Jd){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const d=await n._getAppCheckToken(),u=d?`#${bH}=${encodeURIComponent(d)}`:"";return`${vH(n)}?${Yd(l).slice(1)}${u}`}function vH({config:n}){return n.emulator?Jy(n,gH):`https://${n.authDomain}/${mH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="webStorageSupport";class yH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SR,this._completeRedirectFn=Hz,this._overrideRedirectResult=Bz}async _openPopup(e,t,i,s){var r;Ur((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await Lk(e,t,i,_v(),s);return fH(e,o,rx())}async _openRedirect(e,t,i,s){await this._originValidation(e);const r=await Lk(e,t,i,_v(),s);return Sz(r),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:r}=this.eventManagers[t];return s?Promise.resolve(s):(Ur(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await aH(e),i=new Vz(e);return t.register("authEvent",s=>(st(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(D0,{type:D0},s=>{var r;const o=(r=s?.[0])===null||r===void 0?void 0:r[D0];o!==void 0&&t(!!o),gs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Xz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return uR()||rR()||tx()}}const xH=yH;var Dk="@firebase/auth",Ok="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EH(n){_d(new Kl("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=i.options;st(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:o,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hR(n)},u=new $9(i,s,r,d);return W9(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),_d(new Kl("auth-internal",e=>{const t=Kr(e.getProvider("auth").getImmediate());return(i=>new wH(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pl(Dk,Ok,SH(n)),Pl(Dk,Ok,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TH=300,kH=HI("authIdTokenMaxAge")||TH;let Nk=null;const _H=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>kH)return;const s=t?.token;Nk!==s&&(Nk=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function AH(n=J7()){const e=WI(n,"auth");if(e.isInitialized())return e.getImmediate();const t=q9(n,{popupRedirectResolver:xH,persistence:[Lz,yz,SR]}),i=HI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=_H(r.toString());pz(t,o,()=>o(t.currentUser)),fz(t,l=>o(l))}}const s=PU("auth");return s&&K9(t,`http://${s}`),t}function CH(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}F9({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const r=Ps("internal-error");r.customData=s,t(r)},i.type="text/javascript",i.charset="UTF-8",CH().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EH("Browser");var IH="firebase",RH="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pl(IH,RH,"app");const LH={apiKey:"AIzaSyD3d2nGVAgcChfSvnDWT_r-r_Hvnm5FOZ8",authDomain:"special-dating-479e7.firebaseapp.com",projectId:"special-dating-479e7",storageBucket:"special-dating-479e7.firebasestorage.app",messagingSenderId:"685009420752",appId:"1:685009420752:web:9e7e50f948d8170ae2f9d5"},DH=KI(LH),pl=AH(DH);class OH{async loginWithEmail(e,t){return(await hz(pl,e,t)).user}async registerWithEmail(e,t){return(await uz(pl,e,t)).user}async loginWithGoogle(){const e=new Lr;return(await Mz(pl,e)).user}async resetPassword(e){await dz(pl,e)}async logout(){await mz(pl)}async deleteUser(e){await gz(e)}async linkWithBackend(e,t,i){try{const s=await e.getIdToken();let r="email";if(e.providerData&&e.providerData.length>0){const d=e.providerData[0].providerId;d==="google.com"?r="google":d==="facebook.com"&&(r="facebook")}const o={action:"firebaseAuth",token:s,email:e.email||"",name:i?.name||e.displayName||"",photo:e.photoURL||"",provider:r,dID:"-1"};i&&(i.name&&(o.name=i.name),i.gender!==void 0&&(o.gender=i.gender),i.looking!==void 0&&(o.looking=i.looking),i.birthday&&(o.birthday=i.birthday),i.day!==void 0&&(o.day=i.day),i.month!==void 0&&(o.month=i.month),i.year!==void 0&&(o.year=i.year),i.age!==void 0&&(o.age=i.age),i.city&&(o.city=i.city),i.country&&(o.country=i.country),i.lat!==void 0&&(o.lat=i.lat),i.lng!==void 0&&(o.lng=i.lng),i.photo&&(o.photo=i.photo));const l=await Ne.firebaseAuth(o,t);if(l.error===1)throw new Error(l.error_m||"Backend request failed");return l}catch(s){throw console.error("Error linking Firebase with backend:",s),s}}getCurrentUser(){return pl.currentUser}}const Is=new OH,NH="/mobile/assets/twigo_bg-5Z33frNL.png";function PH(){const n=vs(),{settings:e}=Ti(),{showNotification:t}=In(),i=Yi(),[s,r]=C.useState({login_email:"",login_pass:""}),[o,l]=C.useState(!1),[d,u]=C.useState(!0),[f,p]=C.useState(!1),[b,v]=C.useState(!1),[y,w]=C.useState(""),[E,T]=C.useState(!1);C.useEffect(()=>{if(console.log(1),!!e)try{e.mobile_theme?.logo?.val?w(e.mobile_theme.logo.val):e.site_theme?.logo?.val&&w(e.site_theme.logo.val)}catch(L){console.error("Error loading data from settings:",L)}},[e]),C.useEffect(()=>{u(s.login_pass.length<=3)},[s.login_pass]);const k=(L,D)=>{r($=>({...$,[L]:D}))},_=()=>{const L=`${e?.site_url||window.location.origin}index.php?page=pp`;window.open(L,"_blank")},O=()=>{const L=`${e?.site_url||window.location.origin}index.php?page=tac`;window.open(L,"_blank")},R=async()=>{if(!(s.login_pass.length<4)){l(!0);try{try{const D=await Is.loginWithEmail(s.login_email,s.login_pass),$=await Is.linkWithBackend(D,e);if($.success&&$.valid==="Yes"){const U=$.user_id;if(U){window.userId=U,window.userId=U;let G={id:U};localStorage.setItem("user",JSON.stringify(G)),window.location.href="/home/explore"}else t("Login successful","success",3e3),n("/home/explore");return}}catch(D){console.log("Firebase login failed, trying traditional login:",D.message)}const L=await Ne.login(s,"-1",e);L.error===1?(t(L.error_m||"Login failed","error",3e3),l(!1),u(!0)):(localStorage.setItem("user",JSON.stringify(L.user)),localStorage.setItem("usPhotos",JSON.stringify(L.user.photos||[])),localStorage.setItem("mobileUser",L.user.app_id||""),window.user=L.user,window.usPhotos=L.user.photos,window.userId=L.user.id,window.sape=L.user.slike,n("/home/explore"))}catch(L){console.error("Login error:",L),t("Login failed. Please check your credentials.","error",3e3),l(!1)}}},M=async()=>{if(!s.login_email){t("Please enter your email address","error",3e3);return}l(!0);try{await Is.resetPassword(s.login_email);const L=JSON.parse(localStorage.getItem("lang")||"{}");t(L[341]?.text||"Password recovery email sent. Please check your inbox.","success",3e3),p(!1),l(!1)}catch(L){console.error("Password recovery error:",L),L.code==="auth/invalid-email"?t("Please enter a valid email address","error",3e3):L.code==="auth/user-not-found"?t("No account found with this email address","error",3e3):t(L.message||"Something went wrong. Please try again later","error",3e3),l(!1)}},P=async()=>{T(!0);try{const L=await Is.loginWithGoogle(),D=await Is.linkWithBackend(L,e);if(D.success&&D.valid==="Yes"){const $=D.user_id;if($){window.userId=$;let U={id:$};localStorage.setItem("user",JSON.stringify(U)),n("/home/explore")}else t("Login successful","success",3e3),n("/home/explore")}else t(D.message||"Login failed","error",3e3)}catch(L){console.error("Google login error:",L);const D=L.message||"Google login failed";D.includes("popup-closed-by-user")||t(D,"error",3e3)}finally{T(!1)}},N=[{text:i[246]||"Create Account",handler:()=>{n("/register")}}];return m.jsx($i,{children:m.jsxs(Wt,{fullscreen:!0,scrollY:!0,children:[m.jsx("div",{className:"page landing visible zIndex-600",children:m.jsx("div",{className:"flexible-page",children:m.jsxs("div",{className:"page-content",children:[m.jsx("div",{className:"landing-decorations twigo-landing",style:{backgroundImage:`url(${NH})`}}),m.jsxs("div",{className:"landing-wrapper pt-16vh",children:[m.jsx("div",{className:"landing-logo",children:y&&m.jsx("img",{src:y,alt:"Logo"})}),m.jsxs("div",{className:"landing-actions",children:[m.jsxs("div",{className:"cta-box",children:[m.jsx("div",{className:"cta-box__content comforta twigo-landing-text","data-alid":"148",children:i[148]||"Find, connect and chat with new people, its already close by."}),m.jsxs("div",{className:"cta-box__buttons",children:[m.jsx("ul",{className:"list-view",children:m.jsxs("form",{autoComplete:"off",className:"login-form",children:[m.jsx("li",{className:"list-item-form twigo-landing-input",children:m.jsx(FT,{type:"email",placeholder:i[149]||"Email",value:s.login_email,onIonInput:L=>k("login_email",L.detail.value),className:"login-input box-shadow-credits input-text",autocomplete:"new-password",autocapitalize:"off"})}),!f&&m.jsx("li",{className:"list-item-form twigo-landing-input",children:m.jsx(FT,{type:"password",placeholder:i[150]||"Password",value:s.login_pass,onIonInput:L=>k("login_pass",L.detail.value),className:"login-input box-shadow-credits input-text",autocomplete:"new-password",id:"pass"})})]})}),m.jsxs("div",{className:"button-wrapper mt-25px",children:[o&&!f&&m.jsx("div",{className:"login-loader mb-40",children:m.jsx("div",{style:{textAlign:"center"},children:m.jsx(Wi,{})})}),!o&&!f&&m.jsx("button",{className:`button twigo-gradient2 pr-20 ${d?"disabled":""}`,onClick:R,disabled:d,children:m.jsx("div",{className:"button__content",children:m.jsx("span",{className:"button__text fc-fff",children:i[151]||"Enter"})})}),!f&&m.jsx("div",{className:"social-login-container",style:{display:"flex",flexDirection:"column",gap:"10px"},children:m.jsxs("button",{className:"button button--google",onClick:P,disabled:E||o,style:{width:"100%",marginTop:"5px",padding:"12px",backgroundColor:"#fff !important",border:"1px solid rgb(163 158 158)",borderRadius:"1px",display:"flex",alignItems:"center",justifyContent:"center",cursor:E||o?"not-allowed":"pointer",opacity:E||o?.6:1},children:[m.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:m.jsxs("g",{fill:"#000",fillRule:"evenodd",children:[m.jsx("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335"}),m.jsx("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.21 1.18-.84 2.08-1.79 2.68l2.83 2.19c2.01-1.86 3.17-4.6 3.17-7.37z",fill:"#4285F4"}),m.jsx("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05"}),m.jsx("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.83-2.19c-.76.53-1.78.9-3.13.9-2.38 0-4.4-1.57-5.12-3.74L.96 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853"})]})}),m.jsxs("span",{style:{color:"#333",fontWeight:"500",whiteSpace:"pre"},children:[" ".repeat(4),E?"Loading...":"    Continue with Google"]})]})}),f&&m.jsx("button",{className:"button button--primary",onClick:M,disabled:o,children:m.jsx("div",{className:"button__content",children:m.jsx("span",{className:"button__text","data-alid":"152",children:i[152]||"Recover Password"})})}),m.jsx("button",{onClick:()=>v(!0),className:"inline-button inline-button--primary mt-25 twigo-landing-btn",children:m.jsx("span",{className:"inline-button__text","data-alid":"153",children:i[153]||"Create new account"})})]})]})]}),m.jsxs("div",{className:"landing-footer",children:[!f&&m.jsx("span",{onClick:()=>p(!0),children:i[154]||"Forget password?"}),f&&m.jsx("span",{onClick:()=>{p(!1)},children:i[155]||"Back to login"}),m.jsx("a",{onClick:_,children:i[156]||"Privacy"}),m.jsx("a",{onClick:O,children:i[157]||"Conditions"})]})]})]})]})})}),m.jsx(Bn,{isOpen:b,onDidDismiss:()=>v(!1),header:i[25]||"Register",buttons:[...N,{text:i[2]||"Cancel",role:"cancel"}]})]})})}const MH=({isOpen:n,onClose:e,visitorMode:t=!0})=>{const{settings:i}=Ti(),s=o=>{if(t){if(i?.site_url){const l=i.site_url.replace(/\/$/,"");window.location.href=`${l}/mobile/index.php?lang=${o}`}}else console.log("Update user language:",o),e()},r=i?.languages||[{id:"en",text:"English"}];return m.jsxs(ms,{isOpen:n,onDidDismiss:e,children:[m.jsx(Ca,{children:m.jsxs(Ra,{children:[m.jsx(Ia,{children:"Select Language"}),m.jsx(My,{slot:"end",children:m.jsx(jy,{onClick:e,children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#8c8c8c",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),m.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]})}),m.jsx(Wt,{children:m.jsx($y,{children:Array.isArray(r)&&r.length>0?r.map(o=>m.jsx(Vf,{button:!0,onClick:()=>s(o.id),children:o.text},o.id)):m.jsx(Vf,{children:m.jsx("div",{style:{color:"#666"},children:"No languages available"})})})})]})},$H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAB/5JREFUeJzlm9+PXVUVx7/7TgfaUqYtLaKlRdpEBYHSaoBQClG0USB90TRBy3/AD5UYNajJJEIssQZ9ahoTo0Vb62sVhQoV6ItaGKiMUwq009DSXzPU/tRS5n58OOfO7LPOPufuc39MpXyTm5x99lprr7Xu3vvstc46Tl0GcLmk2yVdL+laSTdL+oikaZJ6UrIxSWckHZH0d0lDkgYlveCcG+m2jh0HsBRYC7wK1GkddeAV4CfAkvNtVymAS4BvADvbMLgZdgIPAZecb3vHAcwEfgAc7aLhFkeAR4C+82m4A1YDB0sUDU3/QeArwD7v3j7gq2lfjIwG3gG+dj6Mvwp4rkSxHcC2wP11wMWpjGHv/nB6byqwPsD3LPBSyXhbgQWTZfxKYLRAke3AncDdgb7HjJycA7y+xw1vHfgScBuwhfCsGAHu6abhDni0YPAdwC0p3Uxgv+l/MiCvzAEO2GRk7AMuTftvBV4O6FEH+rthfA/wi8CAp4EHgB6Pdo2hGQKmVXFA2j8d2G1kPeb195A8Ec4E9Frv69QJ438fGORfwHWGdoFRaAy4tUBuqQNSmuVkZ9xp4EpDc0PqZIvNbTuBZCqG/vktBJ7FwM8N3YYS2U0dkNJtNDKfCNDMAJ4K6Lm+ZeNTwT8KCP0VMCVAOxs46dG9BywskR3rgEXAOY/2BDArQNcLbAjo29+q8SvJb3i/BlwB/cOGNrfxGfooB6S0dhY8VEDnAk6oA3dHG54KWkDyWPHxBwL/vMfzqqFf2mSMKg64ych+uYS2l/xyeBf4eFPDUwGO5ODhY5CS8zdwY6yCHk+0A1J6G2NcX0I7A9hl6LeGaHPTGbhPUun0/QDjXufcZv9GxgHATEm7JH10MrWaRLwj6Rrn3MnGjZoheFAXrvGSNE/S/f6N8RmQrvFhSXO9/gFJJ5oInSvJPxC9LWlPhDK3SJqaXv9X0t8ieBZJ8oOeQUnNMkZ9kvwN+Yikhc65MxkqkmSGjz9GKCTgCcMXFZBU3QRTnpVmrJ9G8j1t+PKPUfKPseWRwrd7PHUCh5QCvlYccBnZs8nzkXzLjG0DlmCpIdgRKdgBxz2+N2L4Ut7KDkj59nh8xyg4mAX4bPS4WJrYBFcb+sIzvMFCJWusgZ2RfO3AH2OWsntCGaxNq6UJB6zwOsYkbYoU+gnTfi2Srx0MNtGhCJsk1b32CkmqAXOU5OwbeMk5dzRSqA12Ynb/dmHHKAy4fDjnDit5qjVwIzC3Julzyp4HtlVQ5mrTHq7A2ypackCK57zrmqTba8o+wyVpewWBV5j2gQq8rWJ/Ex3KYG27ribpGnNzqILAuaYdu3TagT34zKnAu8u0P1VTdhM5q2rT+DLv+pyanxo7geNKNuoG7J9Qhj2S3vPan6wZAQedc2OKhx8in3LOUYG3JTjn6pJOF+jQjPd9SQe9W5c7YFQT/+Q5JRFTLOZJ6k2vx5Rfn2W4UlIjwfK+qu0f8zXxZrkdnUcccFbSRRUEXEg4a8PhDx2mSDqlD+8SOGmDkr0VBImkeKGBdyvythQMpbx+ANY0/2h4/bfSb9WUfa7OoyTzG8Ap73pGbGTWDoCazNOnAu8UZTNeIzVJu70bF0mKSx8nGPWue5WNDLuFWZqY/lLzjJCPRcpu+K/XlD8dXVtB4KhpVzmUtAp78quy9Kxtu2vKh7BRmaAUh017fgXeVmHHOFSB19r2Wk3S88rGyZ+vIHDYtK+uwNsqFpl2lY37Tu+6Lml7zTk3KumfXsdnSWr7YmAHt8p1Ay05ALhCkl9q94pzbqRxEPJfG/VIii08sjnAwtdVHYQN32PzkF9XNu/xzPgVsKRDSdE3I5VpJym61+Ozm3AZ34Cx8QZL0Km0+OxIvk6kxf8ayVeYFvenxC8N3yMxwiX9w7t2kpZF8rWC25R9nxk1UyX1m/a4rfbV2F5J/gZ4SEmSpAzTDc8JSccilGolFpit7GHrqJIi6zJcrOzpL/xqTJKA73Ph47u+zfb1eJ+Sk+HHIv6NDyIOKHk9Ph4/ZAIf59wJ4NuSfuvdRslS8HNpFjOVnNEbOKbm+cGqS6BPyRJo4N9K8oNF6FXyR/p/8sO+8YUA/mKmzRAwo4R+saEfKKL1eNotkbHnAZ+2j3yR5dPNxvAFzCdf/r4VKEydkc0NAHymyRhViqRuNrILd3+SIqk/GfpR4KqmhhtB95Avk9tAcZncNw3tb5rIb6dM7oECOgc8aWjHgC9HG24E9pPHBqA3QBsqlCyMDWIdQL5Q8jiBDyVI/nlrPMAPWzLeExyq33+KwJ4A/MzQbSyRG+uAzUbm2gBNH/kqEIB1LRvuCe8JKAFJHd5iQzufbLF0nYIjdYwDgDtoXiy9hPyGB/A7OlwxHpoJZ0hqi/xy+R8bmteB6VUdQPIR1htG1qNe/xTgW8B/Anqt65jxRql+wh9MDADLUpo+4G3TvxGzeZY5gGQzs7NumIkPJpaTf+pAsuG1t+YjnPBF4FBgcEgiwy8AdwX61lRwwFrDWwdWpIZvKRj7KHBXV433FFwAPFOgCCQFSdsC99cDU4scAEwj/H3Cs+TjeR9/xuwNk+WIe4EDJYqFlssQsIr8Z3OryBc4F8loYD+watINN064FPgecLhE0U7jMPAdSo7nkw6Sj5weJLw5dQoDJB9p5Z4q/1cgCY4eJ9kLxtoweCyVsQabw+sQJuNd3hxJd0j6dPq7SUmGZrryn88fUvbz+RfTtH3X8D9GYHsVGy+RvgAAAABJRU5ErkJggg==";function FH(){const n=vs(),{settings:e}=Ti(),{showNotification:t}=In(),i=Yi(),[s,r]=C.useState({reg_name:"",reg_email:"",reg_pass:""}),[o,l]=C.useState(!1),[d,u]=C.useState(!1),[f,p]=C.useState(!1),[b,v]=C.useState(!1),[y,w]=C.useState(!1),[E,T]=C.useState(""),[k,_]=C.useState(""),[O,R]=C.useState(!1),[M,P]=C.useState(!1),N=C.useRef({});C.useEffect(()=>{if(e)try{e.mobile_theme?.logo?.val?T(e.mobile_theme.logo.val):e.site_theme?.logo?.val&&T(e.site_theme.logo.val),e.mobile_theme?.slider_img_1?.val&&_(e.mobile_theme.slider_img_1.val)}catch(q){console.error("Error loading data from settings:",q)}},[e]);const L=async()=>{if(e){if(navigator.geolocation)return new Promise(q=>{navigator.geolocation.getCurrentPosition(async ie=>{const j=ie.coords.latitude,H=ie.coords.longitude;N.current.reg_lat=j,N.current.reg_lng=H;try{const X=`https://api.opencagedata.com/geocode/v1/json?key=5735f128554f4f4db408b1e4c7f861cc&q=${j},${H}&pretty=1&no_annotations=1`,re=await(await fetch(X)).json();re.results&&re.results[0]&&(N.current.reg_city=re.results[0].components.city||re.results[0].formatted||"",N.current.reg_country=re.results[0].components.country||"")}catch(K){console.error("Geocoding error:",K)}q()},async ie=>{console.warn("Browser geolocation failed, trying IP-based location:",ie),await D(),q()},{enableHighAccuracy:!0,timeout:5e3,maximumAge:1e3})});await D()}},D=async()=>{if(!(!e?.plugins?.ipstack?.enabled||e.plugins.ipstack.enabled!=="Yes"))try{const q=e.plugins.ipstack.key,ie=window.userIp||e.userIp||"";if(q&&ie){const H=await(await fetch(`https://api.ipstack.com/${ie}?access_key=${q}`)).json();N.current={reg_city:H.city||"",reg_country:H.country_name||"",reg_lat:H.latitude||0,reg_lng:H.longitude||0}}}catch(q){console.error("IP location error:",q)}},$=q=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(q),U=async q=>{try{const ie=await Ne.query("checkUsername",q,e);return ie.validEmail==="No"?(t(ie.validEmailMsg||"Email is already registered","error",2e3),!1):ie.validEmail==="Yes"}catch(ie){return console.error("Email check error:",ie),t("Error checking email availability","error",2e3),!1}},G=(q,ie)=>{r(j=>({...j,[q]:ie})),q==="reg_email"&&!y?u(ie.length>4&&$(ie)):q==="reg_pass"&&y&&u(ie.length>4)},Z=async()=>{if(!s.reg_email){t(i[4]||"Please fill in all fields","error",2e3);return}if(!$(s.reg_email)){t(i[5]||"Please enter a valid email address","error",2e3);return}l(!0);const q=await U(s.reg_email);l(!1),q&&(w(!0),p(!0),v(!0),u(!1),L())},se=async()=>{if(!s.reg_email){t(i[4]||"Please fill in all fields","error",2e3);return}if(!$(s.reg_email)){t(i[5]||"Please enter a valid email address","error",2e3);return}if(f&&(!s.reg_name||s.reg_name.trim()==="")){t(i[4]||"Please fill in all fields","error",2e3);return}if(!s.reg_pass||s.reg_pass.length<4){if(!b){v(!0);return}t(i[4]||"Please fill in all fields","error",2e3);return}if(!y){l(!0);const ie=await U(s.reg_email);if(l(!1),!ie)return}const q=`${s.reg_name||""}  ${s.reg_email}  ${s.reg_pass}`;localStorage.setItem("register",q),window.regName=s.reg_name,window.regEmail=s.reg_email,window.regPass=s.reg_pass,window.reg_username="",window.reg_city=N.current.reg_city||"",window.reg_country=N.current.reg_country||"",window.reg_lat=N.current.reg_lat||0,window.reg_lng=N.current.reg_lng||0,n("/register3")},z=(q,ie)=>{q.key==="Enter"&&(ie==="reg_email"&&!y?Z():(ie==="reg_pass"||ie==="reg_name"&&f)&&se())},Y=()=>{R(!0)},V=async()=>{P(!0);try{const q=await Is.loginWithGoogle(),ie=q.email||"",j=q.displayName||"",H=q.photoURL||"";if((await Ne.query("checkUsername",ie,e)).validEmail==="No"){const X=await Is.linkWithBackend(q,e);if(X.success&&X.valid==="Yes"){const ae=X.user_id;if(ae){window.userId=ae;let re={id:ae};localStorage.setItem("user",JSON.stringify(re)),window.location.href="/home/explore"}}else t("Account already exists. Please sign in instead.","error",3e3),n("/welcome")}else r({reg_name:j,reg_email:ie,reg_pass:"fb"}),window.firebaseUser={email:ie,name:j,photo:H,provider:"google"},await L(),window.regName=j,window.regEmail=ie,window.regPass="fb",window.reg_city=N.current.reg_city||"",window.reg_country=N.current.reg_country||"",window.reg_lat=N.current.reg_lat||0,window.reg_lng=N.current.reg_lng||0,n("/register3")}catch(q){console.error("Google signup error:",q),q.message?.includes("popup-closed-by-user")||t(q.message||"Google signup failed","error",3e3)}finally{P(!1)}};return m.jsxs($i,{children:[m.jsxs(Wt,{fullscreen:!0,scrollY:!0,className:"bg-fff",children:[m.jsxs("div",{className:"twigo-register-header",style:{position:"relative"},children:[m.jsx("div",{className:"content-header-div-title",children:m.jsx("div",{className:"navigation-bar__logo zIndex-999",style:{display:"inline"},children:E&&m.jsx("img",{src:E,alt:"Logo"})})}),m.jsxs("div",{className:"content-header-div-right register-header-right",children:[m.jsx("button",{className:"inline-button twigo-landing-btn register-language-btn",onClick:Y,children:m.jsx("img",{src:$H,width:"20",alt:"Language"})}),m.jsx("button",{id:"signin_reg_btn",className:"inline-button twigo-landing-btn register-signin-btn",onClick:()=>n("/welcome"),children:i[290]||"Sign In"})]})]}),m.jsxs("div",{className:"page landing visible zIndex-600",children:[m.jsxs("div",{className:"flexible-page",id:"regf_landing",style:{backgroundImage:k?`url(${k})`:"none"},children:[m.jsx("div",{className:"regf-landing-overlay"}),m.jsxs("div",{className:"page-content",children:[m.jsx("div",{className:"landing-decorations twigo-landing"}),m.jsx("div",{className:"landing-wrapper",style:{paddingTop:"30vh"},children:m.jsx("div",{className:"landing-actions mt-80px",children:m.jsx("div",{className:"cta-box",children:m.jsxs("div",{className:"cta-box__buttons",style:{position:"relative",zIndex:2},children:[m.jsxs("ul",{className:"list-view",children:[f&&m.jsx("li",{className:"list-item-form border-none register-form-list-item",children:m.jsx("input",{type:"text",placeholder:i[158]||"Name",value:s.reg_name,onChange:q=>G("reg_name",q.target.value),onKeyPress:q=>z(q,"reg_name"),className:"register-twigo-input register-input-field",autoCapitalize:"off"})}),m.jsx("li",{className:"list-item-form border-none register-form-list-item",children:m.jsx("input",{type:"email",placeholder:i[149]||"Email",value:s.reg_email,onChange:q=>G("reg_email",q.target.value),onKeyPress:q=>z(q,"reg_email"),className:"register-twigo-input register-input-field",autoCapitalize:"off"})}),b&&m.jsx("li",{className:"list-item-form border-none register-form-list-item",children:m.jsx("input",{type:"password",placeholder:i[150]||"Password",value:s.reg_pass,onChange:q=>G("reg_pass",q.target.value),onKeyPress:q=>z(q,"reg_pass"),className:"register-twigo-input register-input-field",minLength:4})})]}),m.jsxs("div",{className:"button-wrapper mt-25px",children:[o&&m.jsx("div",{className:"login-loader mb-40",children:m.jsx("center",{children:m.jsx(Wi,{})})}),!o&&m.jsx("button",{className:`button button--secundary a register-next-btn ${d?"active":""}`,onClick:y?se:Z,disabled:!d,children:m.jsx("div",{className:"button__content",children:m.jsx("span",{className:"button__text",children:i[26]||"Next"})})}),!y&&m.jsx("div",{className:"social-login-container",style:{display:"flex",flexDirection:"column",gap:"10px"},children:m.jsxs("button",{className:"button button--google",onClick:V,disabled:M||o,style:{width:"100%",padding:"12px",marginTop:"5px",backgroundColor:"#fff",border:"1px solid #ddd",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:M||o?"not-allowed":"pointer",opacity:M||o?.6:1},children:[m.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:m.jsxs("g",{fill:"#000",fillRule:"evenodd",children:[m.jsx("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335"}),m.jsx("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.21 1.18-.84 2.08-1.79 2.68l2.83 2.19c2.01-1.86 3.17-4.6 3.17-7.37z",fill:"#4285F4"}),m.jsx("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05"}),m.jsx("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.83-2.19c-.76.53-1.78.9-3.13.9-2.38 0-4.4-1.57-5.12-3.74L.96 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853"})]})}),m.jsx("span",{style:{color:"#333",fontWeight:"500"},children:M?"Loading...":i[305]||"Sign up with Google"})]})})]})]})})})})]})]}),m.jsx("div",{className:"featured-members-section",children:m.jsxs("div",{className:"container",children:[m.jsx("h2",{className:"section-title",children:i[289]||"Featured Members"}),m.jsxs("div",{className:"members-grid",style:{display:"flex",justifyContent:"center",gap:"20px",flexWrap:"wrap"},children:[m.jsxs("div",{className:"member-card",children:[m.jsx("img",{src:`${e?.siteUrl||""}mobile/img/1.jpg`,alt:"Profile picture of Member 1"}),m.jsx("h4",{children:"Dongfang(Vina), 36"}),m.jsx("p",{children:"Shanghai, China"})]}),m.jsxs("div",{className:"member-card",children:[m.jsx("img",{src:`${e?.siteUrl||""}mobile/img/2.jpg`,alt:"Profile picture of Member 2"}),m.jsx("h4",{children:"Esther mine, 22"}),m.jsx("p",{children:"Lagos, Nigeria"})]})]})]})}),m.jsx("div",{className:"additional-sections",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"info-section",children:[m.jsx("h2",{children:i[290]||"Why Choose Us?"}),m.jsx("p",{children:i[291]||"We offer the best matchmaking experience with advanced algorithms to help you connect with your perfect match."})]}),m.jsxs("div",{className:"testimonials-section",style:{marginTop:"25px"},children:[m.jsx("h2",{children:i[292]||"What Our Members Say"}),m.jsxs("div",{className:"testimonials",children:[m.jsxs("div",{className:"testimonial",children:[m.jsx("img",{src:`${e?.siteUrl||""}mobile/img/4.jpg`,alt:"Profile picture of Member 4"}),m.jsx("h4",{children:"Elena, 41"}),m.jsxs("p",{children:['"',i[293]||"I found my soulmate here",'"']})]}),m.jsxs("div",{className:"testimonial",children:[m.jsx("img",{src:`${e?.siteUrl||""}mobile/img/3.jpg`,alt:"Profile picture of Member 3"}),m.jsx("h4",{children:"Wenfang, 55"}),m.jsxs("p",{children:['"',i[294]||"This site changed my life.",'"']})]}),m.jsxs("div",{className:"testimonial",children:[m.jsx("img",{src:`${e?.siteUrl||""}mobile/img/5.jpg`,alt:"Profile picture of Member 5"}),m.jsx("h4",{children:"Jenne Darc(Jenny), 48"}),m.jsxs("p",{children:['"',i[295]||"Amazing experience with great people.",'"']})]})]})]})]})}),m.jsx("footer",{className:"site-footer",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"footer-grid",children:[m.jsxs("div",{className:"footer-column",children:[m.jsx("h3",{children:i[296]||"About Us"}),m.jsx("p",{children:i[297]||"Learn more about our mission and values."})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h3",{children:i[298]||"Contact"}),m.jsx("p",{children:i[299]||"contact@special-dating.com"}),m.jsx("p",{children:i[300]||"+123 456 7890"})]}),m.jsxs("div",{className:"footer-column",children:[m.jsx("h3",{children:i[301]||"Follow Us"}),m.jsx("p",{children:"Facebook | Instagram | Twitter"})]})]})})})]})]}),m.jsx(MH,{isOpen:O,onClose:()=>R(!1),visitorMode:!0})]})}const jH="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAlxJREFUWEfFl8FO20AQhnfitHaIHRmzKrSnSiBRUamQQyVOcKbnCo48A7xAHyEv0KriRtVLe6K9cuOA0kMhQipSpUqBwraYEIhNs7gal41cYycbx1Zyzcz8n2dmZ3eAyP+AkMeqaZoa547iefcVTVPy6O44vA1wzRVF47ZtO4R8dwkhnkxokDBSTHPOyOdhRMK2Y9Jue1e2/eWCEMK7+XUDAMuaMnI5Q+9H+K7t1QVjB824jMQBgK6XqaaRe4OJ//N2HPKn2ayyKIgogHyxOEMLBTWXhriI0Wq5N5eX+wjRDsYNA0CxODOetngI4mcwE0GAVNMel71wOToAljVVGrzhZIvmNyaeECIAFErL4zLuGxuVp0tLC+9rtW9ri4srn2V8omwYq2IpuA9gmnOmzDkX4gi+tbX9cnV1bS8pwO2csBEAKC0/7BUoTXGhxVj1CMerRumo1Q0gC3HUY+zsN/RKf1biCIBlAMN4MqaqBTUqA1mKo57rtlzQ9WcPxK0WhMhaXIxobMBHUV9/crJbA4BSr+aU+Z9z/mNi4vl8lG0swOHhdqVU0pc9zzs/Pf31RkYozoaxs69xMyO2BBhMQDQazXeTkwvrg0BE+eJY7tqEWUP4TdjrGGYJ4R9DmUGUFYQ/iGRHcRYQjFXrfV1GQYh6/fjV7OyL10kbM3gZYQzp6xiNd3Y+LFcqbz9tbn5sJAX47zrGIJROG4SMGEkD9ud390GC/sN9kt1+wVAfpSKLQ32WC4hUy9HvYtKBoHRaH7wxk61mwaYe2nIaPlmh9byQE7ujf6tB6ybJev4XfilgjZ4cIf8AAAAASUVORK5CYII=",O0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAMAAAAKE/YAAAAA/1BMVEXp6/Dm6O7h4+vb3ufX2uTV2OPS1uHT1+LX2+Ta3ebf4url5+3h5OvO0t7Gy9nDyNfFytjN0d7W2uTg4uro6vDU2OLHzNrf4uno6u/Kz9zIzdrY2+Xn6e/Z3ObV2ePd4OjJzdvHy9nLz9zi5evc3+jGytnEydjP09/n6e7Jztvj5ezKztvc3+fEydfe4Ojm6e7IzdvFytnZ3OXN0t7l6O7h4+rU1+Lk5u3N0d3M0d3j5uzi5ezg4+rQ1ODe4enM0N3R1eDb3+fW2ePf4enY3OXb3ubT1uHIzNra3ubQ1N/k5+3T1+HL0N3i5OvO09/k5uzKztzL0NzR1eHZ3ebR1OAg0wBYAAADvklEQVR42u3b61bbRhQF4C0MGJDtbYIsZFtg44DMzQ0QAg4YSNKUtM2l1/d/lv7tWiWJpTOcM3TN9wRnaY3O3PYgCIIgCIIgCIIgCIIgCILgSYkWaotLy8v1pZXVtRhPQGOx2eK/tdefbSReV9xJ+ZDW8ib8lNW6/LpeP4d3kq2U39be9q3swZDft7OVwB9xk/MZPYcvdvc4r6IPLyR1ljHOYW9/neUcxLAWdVlWemhd8wHLa9lWnR+xijSGoTGrOcphps6qxrByzOoWYSPeY3WTBkw0KXGUwMAPlOlDXzKkTPsF1K1SagnqTih1mkPZgHJnUPaSckPoOqcLr6DqjC5c6I8OuR40JQWduISiBt2o6c8scnUoWqYbUyh6TTdSKOrRkQR6CjoSQU1CV66gJqcr11AT05XGUyx6For+phd0ZSH8iGotT0/bcHKxn8ahaEQ3Wvrn0nJdKOrQjbHxZtz/7fgm3ViFothgFpdr0Yn9J3hYcwJV23ThBqpu6cIWVOUGazy5O8q1oGyFcstQdk25AbT1KFXk0HZBqSbUNShVg74D/dFh3z/ewEA8ocgGLIwp0YWJNeH630aX1bUy2HjL6t7BSNJjVe0IVlZZVQdmsh1WU8Sw0xcsSs1kqeBDm9lVij/aT4vdBLaiHZZVHMLajwohMfs88hQeyE5YRnEJH2wq5GJtO8gBPHEtOOuwM1ZIahqeob6HP3YUbmjNIm938EhNEE43M+N8foJHDhUanlmn3oVHGgoHpWYPdVYgYHXBfw+P3Cv0abMLuiKBN7KCc3oOb2woHPAapoPG8MYHwe2QlVfkkxsfyTrnd5LDA/nPRywj7UewFdV+KVjW5OXWrzCS33a6rGr4cRBBWba2fTehULdzm0NJMlucFnRj8ml7M8Nja/SbbbpVTJ/NEjyW6/fjUz6OdnOlAeei4zcpH1frpnYOdz6/G1HHUWcGFxY6PWpK6xuQueqk1Nf6+FlwrviaVka7qGTWpaWDW5QW39Dal0uUc7xHe+1VlJDf0A/Nfcwr7tIXwyvM57eU/mjNV3V8Qp+k81QdfaBfWpeCEy4zv2eCgI+Z+vd+woLa5A+11+mjkeDq1c6x4EWnmaHCh1b91Ov01R/4misKWDWQC/rrTzwsP6W/ikiQ4TbzFx70hdrkcb79gl47FwRNzJwpjA6V8ZG16bdJLnhqY2YgeFRt5gL/MaWA1aq6Td9NsjnyXgJKi6YBDVVN9S3Sf0vl06L2/hakzc1MBTstM58EbdrM6H8xPO6pRf7S/B/rjxMWIx/o4QAAAABJRU5ErkJggg==";function BH(){const n=vs(),{settings:e}=Ti(),{showNotification:t}=In(),i=Yi(),s=C.useRef(null),r=C.useRef(null),o=()=>{const X=(localStorage.getItem("register")||"").split("  ");return{reg_name:X[0]||window.regName||"",reg_email:X[1]||window.regEmail||"",reg_pass:X[2]||window.regPass||""}},[l]=C.useState(o()),[d]=C.useState(l.reg_name||window.regName||""),[u,f]=C.useState(""),[p,b]=C.useState(0),[v,y]=C.useState(0),[w,E]=C.useState(!1),[T,k]=C.useState(!1),[_,O]=C.useState(""),[R,M]=C.useState(""),[P,N]=C.useState(O0),[L,D]=C.useState(!1),[$,U]=C.useState(!1),G=[{id:1,text:"Male"},{id:2,text:"Female"}],Z={reg_city:window.reg_city||"",reg_country:window.reg_country||"",reg_lat:window.reg_lat||0,reg_lng:window.reg_lng||0};C.useEffect(()=>{e&&!l.reg_name&&!window.regName&&n("/register")},[e,n,l.reg_name]),C.useEffect(()=>{p>0&&v>0&&u?U(!0):U(!1)},[p,v,u]);const se=()=>{s.current?.click()},z=async K=>{const X=K.target.files?.[0];if(!X)return;if(!X.type.match(/^image\/(jpeg|jpg|png|gif|webp)$/)){t(i[1036]||"Invalid image format","error",2e3);return}k(!0);const ae=new FileReader;ae.onload=re=>{const ge=re.target?.result;N(ge),Y(ge)},ae.onerror=()=>{t("Error reading image file","error",2e3),k(!1)},ae.readAsDataURL(X)},Y=async K=>{try{const X=window.userId||0,ae=e?.site_url||"",re=new URLSearchParams;re.append("action","register"),re.append("base64",K),re.append("uid",String(X));const Se=await(await fetch(`${ae}assets/sources/appupload.php`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:re.toString()})).json();Se.contetnerror?(E(!1),N(O0),t(i[1036]||"Photo upload failed","error",2e3)):(E(!0),O(Se.photo||""),M(Se.thumb||""))}catch(X){console.error("Photo upload error:",X),E(!1),N(O0),t("Error uploading photo","error",2e3)}finally{k(!1)}},V=K=>{b(K)},q=K=>{y(K)},ie=K=>{if(!K)return{valid:!1};const X=K.split("-");if(X.length!==3)return{valid:!1};const ae=parseInt(e?.plugins?.settings?.minRegisterAge||"18"),re=parseInt(X[0]),ge=parseInt(X[1])-1,Se=parseInt(X[2]);return{valid:new Date(re+ae,ge,Se,0,0,0,0)<new Date,minAge:ae}},j=async()=>{if(!w&&e?.plugins?.settings?.forcePhotoUpload==="Yes"){t(i[3]||"Please upload a photo","error",2e3);return}if(!u){t(i[6]||"Please enter your date of birth","error",3e3);return}const K=ie(u);if(!K.valid){const X=K.minAge||e?.plugins?.settings?.minRegisterAge||"18",re=(e?.lang||{})[856]||i[856]||"You must be at least";t(`${re} ${X}`,"error",3e3);return}if(p===0){t("Please select your gender","error",2e3);return}if(v===0){t("Please select who you are looking for","error",2e3);return}D(!0);try{const X=await Is.registerWithEmail(l.reg_email,l.reg_pass);try{const ae=u.split("-"),re=parseInt(ae[0]),ge=parseInt(ae[1]),Se=parseInt(ae[2]),De=new Date().getFullYear()-re,ze=await Is.linkWithBackend(X,e,{name:l.reg_name,gender:p,looking:v,birthday:u,day:Se,month:ge,year:re,age:De,city:Z.reg_city,country:Z.reg_country,lat:Z.reg_lat,lng:Z.reg_lng,photo:_});if(ze.success&&ze.valid==="Yes"){const Qe=ze.user_id;if(Qe){window.userId=Qe;let nt={id:Qe};localStorage.setItem("user",JSON.stringify(nt)),window.location.href="/home/explore"}else t("Registration successful","success",3e3),n("/home/explore")}else{try{await Is.deleteUser(X),console.log("Firebase user rolled back due to backend registration failure")}catch(Qe){console.error("Failed to rollback Firebase user:",Qe)}t(ze.message||"Registration failed","error",3e3),D(!1),U(!0)}}catch(ae){try{await Is.deleteUser(X),console.log("Firebase user rolled back due to backend error")}catch(re){console.error("Failed to rollback Firebase user:",re)}throw ae}}catch(X){console.error("Firebase registration error:",X),X.code==="auth/email-already-in-use"?t("This email is already registered. Please sign in instead.","error",3e3):X.code==="auth/invalid-email"?t("Please enter a valid email address","error",3e3):X.code==="auth/weak-password"?t("Password is too weak. Please choose a stronger password.","error",3e3):t(X.message||"Registration failed. Please try again.","error",3e3),D(!1),U(!0)}},H=()=>{n("/register")};return m.jsx($i,{children:m.jsxs(Wt,{fullscreen:!0,className:"twigo-gradient1",scrollY:!0,style:{"--background":"transparent"},children:[m.jsxs("div",{className:"twigo-register-header",children:[m.jsx("div",{className:"content-header-div-title",children:m.jsx("h2",{className:"twigo-font view-title-h2",children:i[246]||"Register"})}),m.jsx("div",{className:"content-header-div-right",onClick:H,style:{cursor:"pointer"},children:m.jsx("img",{src:jH,alt:"Back"})})]}),m.jsx("div",{className:"wrapper nop-nom page-content",children:m.jsxs("div",{className:"login-form animated fadeIn",style:{paddingTop:0},children:[m.jsxs("div",{className:"landing-logo",style:{marginTop:0,paddingTop:0,textAlign:"center"},children:[m.jsx("div",{className:"brick box-shadow-credits register-photo",onClick:se,style:{display:"block",margin:"0 auto",cursor:"pointer",position:"relative",width:"160px",height:"160px"},children:m.jsx("div",{ref:r,className:"brick__image",id:"photo-upload",style:{backgroundImage:`url(${P})`,backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:"100%",borderRadius:"50%"},children:T&&m.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.4)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:"Processing..."})})}),m.jsx("input",{ref:s,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",style:{display:"none"},onChange:z})]}),m.jsxs("h2",{className:"comforta twigo-register-page3-text",style:{marginTop:"-30px",color:"#fff"},children:[m.jsx("strong",{children:d}),", ",i[31]||"please tell us a bit more about you"]}),m.jsx("p",{className:"comforta twigo-register-page3-p","data-alid":"32",style:{color:"#fff"},children:i[32]||"Which day you born?"}),m.jsx("input",{type:"date",placeholder:"mm/dd/yyyy",min:"1940-01-01",max:new Date().toISOString().split("T")[0],value:u,onChange:K=>f(K.target.value),className:"login-input twigo-register-date",style:{width:"90%",marginLeft:"20px",color:"#fff"}}),m.jsx("p",{className:"comforta twigo-register-page3-p","data-alid":"258",style:{marginTop:"20px",color:"#fff"},children:i[258]||"You are.."}),m.jsx("div",{className:"twigo-register-page3-gender",children:G.map(K=>m.jsx("div",{className:`selectGender ${p===K.id?"active":""}`,onClick:()=>V(K.id),style:{cursor:"pointer"},children:m.jsx("span",{className:"comforta",children:K.text})},K.id))}),m.jsx("p",{className:"comforta twigo-register-page3-p","data-alid":"259",style:{marginTop:"20px",color:"#fff"},children:i[259]||"You are looking for.."}),m.jsx("div",{className:"twigo-register-page3-gender",children:G.map(K=>m.jsx("div",{className:`selectGender ${v===K.id?"active":""}`,onClick:()=>q(K.id),style:{cursor:"pointer"},children:m.jsx("span",{className:"comforta",children:K.text})},K.id))}),L?m.jsx("div",{className:"login-loader ml-20px",style:{marginTop:"20px"},children:m.jsx("center",{children:m.jsx(Wi,{})})}):m.jsx("div",{className:`login-btn ml-20px ${$?"active":""}`,onClick:j,style:{cursor:$?"pointer":"not-allowed",marginTop:"20px"},children:m.jsx("span",{className:"comforta register-span",children:m.jsx("center",{children:i[26]||"Next"})})})]})})]})})}const Ch=3,UH=300,zH=(()=>{let n=!1;return()=>{n||(console.warn("[CityAutocompleteInput] Missing Geoapify API key. The API key should be configured in the server settings (config.plugins.settings.geolocation)."),n=!0)}})();function HH({value:n,placeholder:e,onInputChange:t,onSelect:i,onBlur:s,className:r,disabled:o}){const{config:l}=Ki(),[d,u]=C.useState([]),[f,p]=C.useState(!1),[b,v]=C.useState(!1),[y,w]=C.useState(null),E=C.useRef(null),T=C.useRef(null),k=C.useRef(null),_=C.useMemo(()=>l?.plugins?.settings?.geolocation||void 0||"",[l]),O=C.useMemo(()=>_?!0:(zH(),!1),[_]);C.useEffect(()=>{if(O){if(!n||n.trim().length<Ch){u([]),p(!1);return}return E.current&&window.clearTimeout(E.current),E.current=window.setTimeout(async()=>{T.current&&T.current.abort(),T.current=new AbortController;try{v(!0),w(null),p(!0);const N=new URLSearchParams({text:n.trim(),type:"city",limit:"7",apiKey:_,format:"json"}),L=await fetch(`https://api.geoapify.com/v1/geocode/autocomplete?${N.toString()}`,{signal:T.current.signal});if(!L.ok)throw new Error(`Geoapify request failed with status ${L.status}`);const D=await L.json();let $=[];Array.isArray(D.results)?$=D.results:Array.isArray(D.features)&&($=D.features);const U=$.map(G=>{const Z=G?.properties||G||{},se=typeof Z.lat=="number"?Z.lat:G?.geometry?.coordinates?.[1]??Z.lat,z=typeof Z.lon=="number"?Z.lon:G?.geometry?.coordinates?.[0]??Z.lon;if(typeof se!="number"||typeof z!="number"||isNaN(se)||isNaN(z))return null;const Y=Z.city||Z.name||Z.town||Z.village,V=Z.state||Z.county||void 0,q=Z.country||Z.country_code||Z.countryCode||void 0,ie=Z.formatted||Z.address_line1||Y,j=[Y,V,q].filter(Boolean);return{label:ie||j.join(", ")||n,city:Y,state:V,country:q,lat:se,lon:z}}).filter(Boolean);u(U),p(!0)}catch(N){if(N?.name==="AbortError")return;console.error("Error fetching city suggestions:",N),w("Unable to load suggestions"),p(!0)}finally{v(!1)}},UH),()=>{E.current&&window.clearTimeout(E.current),T.current&&T.current.abort()}}},[n,O,_]),C.useEffect(()=>{const N=L=>{k.current&&!k.current.contains(L.target)&&setTimeout(()=>{p(!1),s&&s()},100)};return document.addEventListener("mousedown",N),document.addEventListener("touchstart",N),()=>{document.removeEventListener("mousedown",N),document.removeEventListener("touchstart",N)}},[s]),C.useEffect(()=>{d.length>0&&n.trim().length>=Ch&&p(!0)},[d,n]);const R=()=>{(d.length>0||b||n.trim().length>=Ch)&&p(!0)},M=N=>{i(N),p(!1)},P=()=>{s&&s()};return m.jsxs("div",{ref:k,className:r,style:{width:"100%",position:"relative",marginTop:"10px"},children:[m.jsx("input",{type:"text",value:n,placeholder:e,onChange:N=>t(N.target.value),onFocus:R,onBlur:P,disabled:o,style:{width:"100%",padding:"10px 35px 10px 10px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px",outline:"none",fontFamily:"inherit",backgroundColor:o?"#f5f5f5":"#fff"}}),m.jsx("div",{style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",zIndex:1,color:"#999"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"19.997",viewBox:"0 0 20 19.997",children:m.jsx("path",{d:"M19.895,1.321,10.805,19.5A.833.833,0,0,1,10,20a1.2,1.2,0,0,1-.213-.028.857.857,0,0,1-.5-.32.9.9,0,0,1-.192-.561V10.908H.906a.9.9,0,0,1-.561-.192.857.857,0,0,1-.32-.5.92.92,0,0,1,.057-.6.858.858,0,0,1,.412-.426L18.673.1a.855.855,0,0,1,.412-.1.844.844,0,0,1,.639.27.847.847,0,0,1,.263.49A.863.863,0,0,1,19.895,1.321Z",fill:"currentColor"})})}),f&&(d.length>0||b||y)&&m.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"#fff",border:"1px solid #ddd",borderRadius:"4px",marginTop:"4px",zIndex:1e4,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"240px",overflowY:"auto",overflowX:"hidden"},children:[b&&m.jsx("div",{style:{padding:"12px",textAlign:"center",color:"#777",fontSize:"14px"},children:"Loading..."}),y&&!b&&m.jsx("div",{style:{padding:"12px",color:"#cc3d3d",fontSize:"14px"},children:y}),!b&&!y&&d.length===0&&n.trim().length>=Ch&&m.jsx("div",{style:{padding:"12px",textAlign:"center",color:"#999",fontSize:"14px"},children:"No cities found"}),!b&&!y&&d.map((N,L)=>m.jsxs("button",{type:"button",onClick:D=>{D.preventDefault(),D.stopPropagation(),M(N)},onMouseDown:D=>{D.preventDefault()},style:{display:"block",width:"100%",textAlign:"left",padding:"12px",border:"none",borderBottom:L<d.length-1?"1px solid #eee":"none",background:"none",fontFamily:"inherit",fontSize:"14px",cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="#fff"},children:[m.jsx("div",{style:{fontWeight:500,color:"#333"},children:N.label}),(N.state||N.country)&&m.jsx("div",{style:{color:"#777",fontSize:"12px",marginTop:"2px"},children:[N.state,N.country].filter(Boolean).join(", ")})]},`${N.label}-${N.lat}-${N.lon}-${L}`))]})]})}const GH=({isOpen:n,onClose:e,onSelect:t,initialValue:i="",presentingElement:s})=>{const r=Yi(),[o,l]=C.useState(i);C.useEffect(()=>{n&&l(i||"")},[n,i]);const d=f=>{l(f)},u=f=>{t(f),l(f.city||f.label)};return m.jsxs(ms,{isOpen:n,onDidDismiss:e,presentingElement:s,children:[m.jsx(Ca,{children:m.jsxs(Ra,{children:[m.jsx(Ia,{children:"Select Location"}),m.jsx(My,{slot:"end",children:m.jsx(jy,{onClick:e,children:"Close"})})]})}),m.jsx(Wt,{style:{"--overflow":"visible"},children:m.jsx("div",{style:{padding:"20px",position:"relative",overflow:"visible"},children:m.jsx(HH,{value:o,placeholder:r[277]||"Type your city",onInputChange:d,onSelect:u})})})]})},jp=({isOpen:n,onClose:e})=>{const{settings:t}=Ti(),{user:i,config:s,setUser:r}=Ki(),o=Yi(),l=wn(),{showNotification:d}=In(),[u,f]=C.useState(!1),[p,b]=C.useState(""),[v,y]=C.useState(0),[w,E]=C.useState(""),[T,k]=C.useState(500),[_,O]=C.useState({from:18,to:60}),[R,M]=C.useState(!1),[P,N]=C.useState(!1),[L,D]=C.useState([]),[$,U]=C.useState(!1),G=C.useRef(null),Z=parseInt(s?.plugins?.settings?.minRegisterAge||"18"),se=99,z=s?.plugins?.settings?.distanceMeter||"KM",Y=parseInt(s?.plugins?.settings?.distanceLimit||"500"),q=!(s?.plugins?.meet?.viewOnlyPremiumOnline==="Yes")||i?.premium===1;C.useEffect(()=>{i?.city&&E(i.city)},[i?.city]),C.useEffect(()=>{if(i&&n){const re=i.looking||1,ge=s?.genders||[];if(ge.length>0&&re>0){const Qe=re-1;ge[Qe]&&(b(ge[Qe].text||""),y(re))}const Se=i.city||"";E(Se),k(i.s_radius||500);const De=i.s_age||"";if(De){const Qe=De.split(",");Qe.length>=2?O({from:parseInt(Qe[0])||Z,to:parseInt(Qe[1])||se}):O({from:Z,to:se})}else O({from:Z,to:se});const ze=window.onlineMeet||0;if(M(ze===1),ge.length>0){const Qe=ge.filter(nt=>nt.id!==i.gender);D(Qe)}}},[i,n,s,Z,se]);const ie=async re=>{if(i?.id){b(re.text),y(re.id),N(!1);try{f(!0);const ge=`${i.id},${re.id}`,Se=await Ne.query("updateGender",ge,t);Se.user&&(ae(Se.user),window.cards=[])}catch(ge){console.error("Error updating gender:",ge),d("Error updating gender preference","error",2e3)}finally{f(!1)}}},j=async re=>{if(i?.id)try{f(!0);const ge=re.city||re.label,Se=`${i.id},${re.lat},${re.lon},${ge},${re.country||""}`,De=await Ne.query("updateLocation",Se,t);De.user&&(ae(De.user),E(ge),U(!1),d("Location updated successfully","success",2e3))}catch(ge){console.error("Error updating location:",ge),d("Error updating location","error",2e3)}finally{f(!1)}},H=async re=>{if(i?.id){k(re);try{const ge=`${i.id},${re}`,Se=await Ne.query("updateSRadius",ge,t);Se.user&&ae(Se.user)}catch(ge){console.error("Error updating distance:",ge),d("Error updating distance","error",2e3)}}},K=async(re,ge)=>{if(i?.id){O({from:re,to:ge});try{const Se=`${i.id},${re},${ge}`,De=await Ne.query("updateAge",Se,t)}catch(Se){console.error("Error updating age range:",Se)}}},X=async re=>{if(re?.preventDefault(),re?.stopPropagation(),!q){d(l[689]||"This feature requires premium","error",2e3);return}if(!i?.id)return;const ge=!R;M(ge),window.onlineMeet=ge?1:0},ae=re=>{localStorage.setItem("user",JSON.stringify(re)),r(re),window.user=re,window.user_info=re};return i?m.jsxs(m.Fragment,{children:[m.jsxs(ms,{ref:G,isOpen:n,onDidDismiss:e,children:[m.jsxs("div",{className:"content-header-main",children:[m.jsx("div",{className:"content-header-main-title",children:m.jsx("h2",{className:"twigo-font",children:o[275]||"Filter"})}),m.jsx("div",{onClick:e,className:"content-header-main-right",children:m.jsx("span",{className:"twigo-font",children:o[281]||"Done"})})]}),m.jsxs(Wt,{children:[m.jsxs("div",{className:"list mt-85",children:[m.jsxs("div",{className:"item b-t border-color-white",children:[m.jsx("div",{className:"row no-padder settings-t-list",children:m.jsx("div",{className:"comforta font-w-500 font-s-16",children:o[278]||"Show me"})}),m.jsxs("div",{className:"row no-padder settings-t-list-right",onClick:()=>N(!0),style:{cursor:"pointer"},children:[m.jsx("span",{className:"settings-t-list-right-tl",children:o[276]||"Current Selection"}),m.jsx("span",{className:"settings-t-list-right-tr",children:p||"Select"})]})]}),m.jsxs("div",{className:"item b-t border-color-white",children:[m.jsx("div",{className:"row no-padder settings-t-list",children:m.jsx("div",{className:"comforta font-w-500 font-s-16",children:o[279]||"Location"})}),m.jsxs("div",{className:"row no-padder settings-t-list-right",onClick:()=>U(!0),style:{cursor:"pointer",position:"relative"},children:[m.jsx("span",{className:"settings-t-list-right-tl",children:"Current Location"}),m.jsx("span",{className:"settings-t-list-right-tr",children:w||"Select"}),m.jsx("div",{className:"settings-t-list-right-icon",style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",zIndex:1,pointerEvents:"none"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"19.997",viewBox:"0 0 20 19.997",children:m.jsx("path",{id:"locations",className:"cls-1",d:"M19.895,1.321,10.805,19.5A.833.833,0,0,1,10,20a1.2,1.2,0,0,1-.213-.028.857.857,0,0,1-.5-.32.9.9,0,0,1-.192-.561V10.908H.906a.9.9,0,0,1-.561-.192.857.857,0,0,1-.32-.5.92.92,0,0,1,.057-.6.858.858,0,0,1,.412-.426L18.673.1a.855.855,0,0,1,.412-.1.844.844,0,0,1,.639.27.847.847,0,0,1,.263.49A.863.863,0,0,1,19.895,1.321Z",fill:"#999"})})})]})]}),m.jsxs("div",{className:"item b-t border-color-white",style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[m.jsxs("div",{className:"row no-padder settings-t-list",style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[m.jsx("div",{className:"comforta font-w-500 font-s-16",children:o[280]||"Distance"}),m.jsxs("span",{className:"settings-t-list-right-distance comforta",children:[T," ",z]})]}),m.jsx("div",{className:"range range-calm comforta",style:{width:"100%"},children:m.jsx(jT,{pin:!1,min:1,max:Y,value:T,className:"custom-range",onIonChange:re=>H(re.detail.value),style:{width:"100%"}})})]}),m.jsxs("div",{className:"item b-t border-color-white",style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[m.jsxs("div",{className:"row no-padder settings-t-list",style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[m.jsx("div",{className:"twigo-font font-s-16 font-w-500",children:o[91]||"Age range"}),m.jsxs("span",{className:"settings-t-list-right-distance twigo-font",children:[_.from,"-",_.to]})]}),m.jsx(jT,{dualKnobs:!0,min:Z,max:se,step:1,value:{lower:_.from,upper:_.to},pin:!1,className:"custom-range",style:{width:"100%",padding:"10px 0"},onIonChange:re=>{const ge=re.detail.value;O({from:ge.lower,to:ge.upper}),K(ge.lower,ge.upper)}})]}),m.jsxs("div",{className:"item item-toggle comforta twigo-gradient1 font-c-white font-w-500",style:{cursor:"pointer"},children:[o[92]||"Online users",m.jsxs("label",{className:"toggle toggle-assertive",children:[m.jsx("input",{type:"checkbox",checked:R,onChange:X}),m.jsx("div",{className:"track",children:m.jsx("div",{className:"handle"})})]})]})]}),m.jsx(Bn,{isOpen:P,onDidDismiss:()=>N(!1),buttons:[...L.map(re=>({text:re.text,handler:()=>ie(re)})),{text:o[2]||"Cancel",role:"cancel"}]})]})]}),m.jsx(GH,{isOpen:$,onClose:()=>U(!1),onSelect:j,initialValue:w,presentingElement:G.current||void 0})]}):null},VH=({isOpen:n,onClose:e,title:t,description:i,price:s,buttonText:r,action:o,onSuccess:l})=>{const{settings:d}=Ti(),{user:u,setUser:f}=Ki(),p=Yi();wn();const{showNotification:b}=In(),[v,y]=C.useState(!1),w=k=>k?k.startsWith("http")?k:`${d?.siteUrl||""}${k.startsWith("/")?k:`/${k}`}`:"",E=u?.profile_photo||"",T=async k=>{if(k?.preventDefault(),k?.stopPropagation(),!u?.id||v)return;const _=parseInt(String(s));if(await rn.wasteCredit(_,t,!1,!0))try{y(!0);const R=`${u.id},${_}`,M=await Ne.query(o,R,d);M.user&&(localStorage.setItem("user",JSON.stringify(M.user)),f(M.user),window.user=M.user,window.user_info=M.user,rn.setCurrentCredits(M.user.credits),l&&l(),e())}catch(R){console.error("Error processing boost:",R),b("Error processing boost","error",2e3)}finally{y(!1)}};return n?m.jsx("div",{className:"wrapper-reward",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:e,children:m.jsxs("div",{className:"modal-reward modal--congratulations vivify fadeIn",onClick:k=>k.stopPropagation(),style:{position:"relative",zIndex:10001},children:[m.jsxs("div",{className:"modal-reward-top",children:[m.jsx("div",{className:"klose animated fadeInUp bg-333",onClick:e,style:{cursor:"pointer",position:"absolute",top:"10px",right:"10px",width:"30px",height:"30px",borderRadius:"50%",backgroundColor:"#333",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),m.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),m.jsx("div",{className:"modal-reward-icon u-imgResponsive animated fadeInUp rounded profileP modal-user-photo",style:{backgroundImage:`url(${w(E)})`}}),m.jsx("div",{className:"modal-reward-header animated fadeInUp",children:t}),m.jsxs("div",{className:"modal-reward-subheader animated fadeInUp comforta fs-15",children:[i,m.jsx("br",{}),p[121]||"This service cost"," ",m.jsx("strong",{children:s})," ",p[48]||"Credits"]})]}),m.jsx("div",{className:"modal-reward-bottom",style:{opacity:v?.6:1},children:m.jsx("button",{type:"button",className:"modal-reward-btn u-btn u-btn--danger comforta",onClick:T,disabled:v,style:{cursor:v?"wait":"pointer",width:"100%",pointerEvents:v?"none":"auto"},children:v?"Processing...":r})})]})}):null},tu=({isOpen:n,onClose:e,userPhoto:t})=>{const{settings:i}=Ti(),{user:s,config:r}=Ki(),o=Yi();wn();const[l,d]=C.useState([]),[u,f]=C.useState(""),[p,b]=C.useState(null),[v,y]=C.useState(0),[w,E]=C.useState(!0),T=C.useRef(null),k=C.useRef(!1);C.useEffect(()=>{if(n){const L=localStorage.getItem("premium_package");if(L)try{const U=JSON.parse(L);d(U||[])}catch(U){console.error("Error parsing premium_package:",U)}const D=localStorage.getItem("account_premium");if(D)try{b(JSON.parse(D))}catch(U){console.error("Error parsing account_premium:",U)}const $=i?.currency;$&&f($),i?.plugins?.videocall?.enabled==="No"&&E(!1)}},[n,i,r]);const _=()=>{k.current=!0,e()},O=L=>{L.stopPropagation()};C.useEffect(()=>{n&&(k.current=!1)},[n]);const R=(L,D,$)=>{const G=`${i?.siteUrl||""}pay/index.php?package=${$}&type=premium&fromMobile=true`;window.location.href=G},M=L=>L?L.startsWith("http")?L:`${i?.siteUrl||""}${L.startsWith("/")?L:`/${L}`}`:`${i?.siteUrl||""}mobile/twigo/img/default-avatar.png`,P=t||s?.profile_photo||"";i?.siteUrl;const N=p?.chat||0;return m.jsx(ms,{ref:T,isOpen:n,onDidDismiss:e,canDismiss:()=>Promise.resolve(k.current),children:m.jsx(Wt,{className:"premium-modal-content",onClick:O,scrollY:!1,children:m.jsxs("div",{onClick:O,style:{width:"100%",height:"100%",position:"relative"},children:[m.jsx("div",{className:"premium-header-section",children:m.jsxs("div",{className:"premium-gradient-bg",children:[m.jsxs("div",{className:"premium-decorative-elements",children:[m.jsx("div",{className:"decorative-star star-1",children:""}),m.jsx("div",{className:"decorative-star star-2",children:""}),m.jsx("div",{className:"decorative-circle circle-1"}),m.jsx("div",{className:"decorative-circle circle-2"}),m.jsx("div",{className:"decorative-dash dash-1"}),m.jsx("div",{className:"decorative-dash dash-2"})]}),m.jsx("button",{className:"premium-not-now-btn",onClick:_,style:{position:"absolute",top:"20px",background:"transparent",border:"none",color:"#ffffff",fontSize:"14px",fontWeight:500,cursor:"pointer",zIndex:10,padding:"8px 12px",textDecoration:"none",WebkitTapHighlightColor:"transparent"},children:"Not now"}),m.jsxs("div",{className:"premium-avatar-container",children:[m.jsx("div",{className:"premium-avatar-dashed-ring"}),m.jsxs("div",{className:"premium-avatar-frame",children:[m.jsx("div",{className:"premium-avatar",style:{backgroundImage:`url(${M(P)})`,width:"100%",height:"100%",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),m.jsx("div",{className:"premium-crown",children:""})]})]})]})}),m.jsx("div",{className:"premium-feature-section",children:m.jsxs(Wd,{modules:[Gy],pagination:{clickable:!0,renderBullet:(L,D)=>`<span class="${D}" style="width: 8px; height: 8px; border-radius: 50%; background: transparent; border: 1.5px solid #d0d0d0; display: inline-block; margin: 0 4px;"></span>`},onSlideChange:L=>y(L.activeIndex),className:"premium-feature-swiper",spaceBetween:0,slidesPerView:1,children:[m.jsx(yn,{children:m.jsxs("div",{className:"premium-feature-content",children:[m.jsxs("h2",{className:"premium-feature-title",children:[N," ",o[56]||"Daily chat"]}),m.jsx("p",{className:"premium-feature-description",children:o[57]||"Connect with more people is the clue for a good start."})]})}),m.jsx(yn,{children:m.jsxs("div",{className:"premium-feature-content",children:[m.jsx("h2",{className:"premium-feature-title",children:o[58]||"Title 2"}),m.jsx("p",{className:"premium-feature-description",children:o[59]||"Description 2"})]})}),m.jsx(yn,{children:m.jsxs("div",{className:"premium-feature-content",children:[m.jsx("h2",{className:"premium-feature-title",children:o[62]||"Title 3"}),m.jsx("p",{className:"premium-feature-description",children:o[63]||"Description 3"})]})}),m.jsx(yn,{children:m.jsxs("div",{className:"premium-feature-content",children:[m.jsx("h2",{className:"premium-feature-title",children:o[64]||"Title 4"}),m.jsx("p",{className:"premium-feature-description",children:o[65]||"Description 4"})]})}),m.jsx(yn,{children:m.jsx("div",{className:"premium-feature-content",children:m.jsx("p",{className:"premium-feature-description",children:o[67]||"Description 5"})})}),w&&m.jsx(yn,{children:m.jsxs("div",{className:"premium-feature-content",children:[m.jsx("h2",{className:"premium-feature-title",children:o[60]||"Video Call"}),m.jsx("p",{className:"premium-feature-description",children:o[61]||"Description 6"})]})})]})}),m.jsxs("div",{className:"premium-packages-section",children:[m.jsx("div",{className:"premium-packages-header",children:m.jsx("span",{children:o[68]||"Premium packages"})}),m.jsx("div",{className:"premium-packages-list",children:l.map((L,D)=>m.jsxs(Pe.Fragment,{children:[m.jsx("div",{className:"premium-package-item",onClick:$=>{$.stopPropagation(),R(L.quantity,L.price,D)},children:m.jsxs("div",{className:"package-content",children:[m.jsxs("span",{className:"package-days",children:[L.quantity," ",o[69]||"Days"]}),m.jsxs("span",{className:"package-price",children:[L.price," ",u||"EUR"]})]})}),D<l.length-1&&m.jsx("div",{className:"package-divider"})]},D))})]})]})})})},qH="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACMCAYAAACuwEE+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAmbSURBVHja7N1rbFvlHcfx/7n6luO7nWtdJy00vVBBWWmBjSURjJbSicGGCgxUNq0dvYxpQkC1adompCFetlzbQVVRVkpXJm3dRjVIoMAIvWqIkqRtEuee+BbH9nGOfW574VhAizZoR5s6v29eRDpRnsTJR8fn8fOchPkJHT1KCH3JWPwIEMAggEEAgwAGAQxCAIMABgEMAhgEMAhgEAIYBDAIYBDAIIBBAIMQwCCAQQCDAAYBDEIAgwAGAQwCGAQwCGAQAhgEMAhgEMAggEEAgxDAIIBBAIMABgEMAhiEAAYBDAIYBDAIYBACGPTV42fqA7c6ObaxWXI0tkhSaInd4QuLFrub54mIcilNi/cW8v3Hc3JnaybT2ZqW81nDABciZib+g60bH/R5mjcFg6El9goiItMgmhhR80pWN4iIrBUc66oWLMzU+bfvWC7bui069sGuRApgZhAYT50o3LNtVt3Vd7i9JQjH9o0nu9oy2aGPJ/OFXPEsItpZtnaRzTKvWar4xt0ebwnWiT+nEns29w+mhlQNYMq8+usctgd3hcNVjVb70MeTub8/MTJ8ZO/4BBGRFOT50DV2q7NS4ImI0mOq1n88N5mJaToR0XX3el2rflldU73Aah/5RMntXBuJRI7IkwBTptUuslk2HZg71zdbtB7ek4y/8lD/wOSEbsy/2VnRvDHgn3NjhVMK8MJnPycT09Tu97PptmdisY4307LdzXH3PReqW7rG64/35pVtq86cGelQ8gBTZtk9HPfzg1fMCS91SO+/FI/u+nHfgM3Fsfdsm1W37D5fgGGJUsNqYbRDyY0PFVQiMj11olg932p3VQuiaZDZvjsR27N5YEhJ68baneFZN6z1BXva5czWlae7cyldxyypjFr5eFUwvNQhdbZmUq881D/oqhb4da82hK+4qcKV6CsorVujYx8dmEiPnVIKn/28qnlWcfFql7N5U7Dq+gd8QW9ItOxY0xvZ/dO+Qd9s0TKvWXKteKwq8PqWoVGcYcqk6vlWy5b2xkZDJ3ry+s6OaHdeffgfcxvm3+x0d76VSb28rm8g1pMv/LcxAnMs4v3bZ4caWyTXJ/9Mp7auPNNdeaXF8vgHjY1ERL9f1tkx2qUUZgqYsn7h7qb1AZ/VyfGHtsfGRruUwsotVYH5NzvdPe1yZvuansj/wkJEFOvOF3as6emNHJEzC25xulc8Vhkc6VDy7+6IR20ujv/WOr9vJp1hyhaMw8tzi1e7PEpa19/7QzzprhX45g2BSiWt63sfHhjIxrUvfe2RiWn6qz8bGMhnDb15U7DSXSPw7+6IJ5SMrl99h9tr93AcwFzmhZbYbf6wxdp3PJeNnskXrv2+x+WsEsRj+1OJ3sNffUrc0y5PHt8/nnBVC+KSuzyusVNKof94LusPW6yzr3VYAeZyn0pfZbMyLFHksCwTEc1rkpxEREdfS46f75hHXxtPERE1tkgSEVHkSE5mWKLaRVYbwFzmBRpECxHRaFdeISKqWWSzZeOaOvjvSeV8x+w/kZuUE5pas9BmJyIa7VQUIiJ/g0UEmMs80cGxRESTE7rOMEQOD8dPTui6ktbPexFRSetGbkLX7R6OZ5ji2EREVgnXMJf/A5t6ZKZhFl8/4BiGiMwLHtgkky2ORYY+NTaDWVL5ZRICGAQwCGAuyTOQ+el70zz3+IWMefa4pgkwl31aofhrVCeLm6JM0yRDN6m0Sep8KuQMw9BNMqeElMYufa2ZUFktPjIM0bU/8LgaWyRp4QqX2zdbtPS0y5n0mKouvt3l0fKm2dWWSemqaRJDX21uY5LJCQwzr1ly8xaG+ejAxLizUhAaljukRF8hf/KNiVTHW5nM8T+NT5Qzn7IB46+3CD98IRRacIvTXXqa0FXT4MXizlytYJosS8TyFzYJNjTTNAwiXiyOoxVMgxMYtjTqyYPp8d3r+wYSfQW1HMGUxX4YKcBz6/bW14eXOqT+E7nsv3Ym4qlhVb1Yr4+YJpG7VhBufNDnX3ir07NubwP/9Ooz3aUtngAzzWraGPSHlzqkjjfTqRfu7onkxi/NLrgPdydT6/c1hBtbJPe3Hwr4DvxuJIqL3mnYkjvdHlUxjP2PDg1dKixERHJS0/c/OjisKoZxzfeKdyYAzPS8frHGuvPKdNj5NtKh5OM9BSUwx2IFmGkaJzCMrprT5s5ErWAYvMiW5QpTWVzDTC0wXtAvyF0r8OGlDjsRUeSwnEsNX9DNakxp0RNgyu0UyzG06ldVlTetDwRd1YJIVLzt5N3tsejfnhgdK61II4AhIqK7nqqtvuUXlTV52dBPHkyPMwwxc79ZIa3+TU2dVeLYfY8MjoAJwBARUf0yh61pQ6AqNawWdv0o0nvyYDpLRLRwhbNi7Uvh+qYNgaqj+8ZTvR/OzNtiy/ai93xbfLvLKVhZ9v0X49ESFiKik2+ks++9GI8KNpa96jaXE0wAhoiIpKAgEBGNnc6fc490dOqYs/Lz91wDzAwuESmiqF/mcJz9sYblxWPxSCEPJgBDREQnXk9NyElNu2GtL9C8MeBjOYZYjqGWzUHf8gd8ATmpqSdeT02ACcAQEdFol1L4629HBkUby971VF3IGxIFb0gU7nyyNiTaWPYvvx4eOvsmfYCZ4bVujSZOvZNJi3aW5S0My1sYVrSz7Kl3Mum2Z2IJEAGYz/8AOIa0wtSygjn1RsV9LizHQAjAnBvDnrus8EXHEF7pJWKIKZ1JVOXTBSCWY2hqGyfWBgDm00zdNOWEphERNW8K+kvHs3FNM3UTWADmLDAm0dvPxeJXNkmu7zxSWUNElIlq6jvPx+LgAjBfWFdbRn7mu2dOL7/f5zVNovaXE0msH5UzmP/D5WlPuzzZ0y4PTafvCbOkrzljGlxzGLppMmX85xzKAkwmqqnuGlF0ePlL/ndaKnw856oWxPSYpgLMNO3UoWxaCvJC88aA/1J/Ly2bg34pyAunD2XSuIaZprU9HY1ddZvTvXJLdS0xDB16PpZQMvpF3RRulTi2aUPAd+tjVbVyUlPbno7FyhFM2dwqe929Xvc922bNdnh5PhPT1Gzs4j4lSEFeqPDzgpzUtD2bB/oO/zGZAphpXsNyh61pYzAwr6nCWeG7uBuf5KSudram028/G4v1tJfvlHxG/oMthGk1AhgEMAhgEMAgBDAIYBDAIIBBAIMABiGAQQCDAAYBDAIYhAAGAQwCGAQwCGAQwCAEMAhgEMAggEEAgwAGIYBBAIMABgEMAhgEMAgBDAIYBDAIYBDAIAQwCGDQ195/BgAzOuTchM+lugAAAABJRU5ErkJggg==",Da=({isOpen:n,onClose:e,userId:t})=>{const{settings:i}=Ti(),{user:s,gifts:r,config:o,prices:l,reloadUser:d,setUser:u}=Ki(),f=Yi(),p=wn(),{showNotification:b}=In();vs();const[v,y]=C.useState(!1),[w,E]=C.useState(null),[T,k]=C.useState(!1),[_,O]=C.useState(!1),[R,M]=C.useState(!1),[P,N]=C.useState(!1),[L,D]=C.useState(0),[$,U]=C.useState(!1),[G,Z]=C.useState(!1),[se,z]=C.useState(!1),[Y,V]=C.useState(""),[q,ie]=C.useState(!1),j=C.useRef(!1);C.useEffect(()=>{if(!n||!t||!s?.id){j.current=!1;return}j.current||(j.current=!0,H(),K())},[n,t,s?.id,e]);const H=async()=>{if(!(!t||!s?.id))try{y(!0);const Ee=await Ne.chat("cuser",t,s.id,i);if(Ee.user){console.log("Profile user data:",Ee.user),console.log("Photos data:",Ee.user.photos);const $e=Ee.user.status==="y"?1:0;if(i?.plugins?.meet?.viewOnlyPremiumOnline==="Yes"&&s.premium===0&&$e===1){b(p[695]||"Only premium users can visit online profiles","error"),e();return}E(Ee.user)}else b("Error loading profile","error"),e()}catch(Ee){console.error("Error loading profile:",Ee),b("Error loading profile","error"),e()}finally{y(!1)}},K=async()=>{if(!(!t||!s?.id||t===s.id))try{await Ne.query("addVisit",`${s.id},${t}`,i)}catch(Ee){console.error("Error tracking visit:",Ee)}},X=Ee=>Ee?Ee.startsWith("http")?Ee:`${i?.siteUrl||""}${Ee.startsWith("/")?Ee:`/${Ee}`}`:"",ae=Ee=>{if(!Ee)return"";const $e=document.createElement("textarea");return $e.innerHTML=Ee,$e.value},re=async()=>{if(!(!w||!s?.id))try{await Ne.query("block",`${s.id},${w.id}`,i),b(f[17]||"User blocked","success"),e()}catch(Ee){console.error("Error blocking user:",Ee),e()}},ge=()=>{k(!1),Z(!0)},Se=Ee=>{if(!w||!s)return;const $e=`${w.first_name},${tt} - ${p[360]||f[360]||"Check out the profile"}`,It=w.username||w.first_name.toLowerCase().replace(/\s+/g,""),Et=`${i?.siteUrl||""}@${It}`,Tt={title:p[360]||f[360]||"Check out the profile",text:$e,url:Et};Ee==="whatsapp"?window.location.href=`https://wa.me/?text=${encodeURIComponent($e+" "+Et)}`:Ee==="facebook"?window.location.href=`fb-messenger://share/?link=${encodeURIComponent(Et)}&app_id=123456789`:Ee==="sms"&&navigator.share&&navigator.share(Tt).catch(ni=>{console.error("Error sharing:",ni)})},De=(Ee,$e)=>{$e!==void 0&&D($e),N(!0)},ze=()=>{z(!1),V("")},Qe=()=>{ie(!1),ze()},nt=async()=>(ie(!0),!0),Pt=async Ee=>{if(!w||!s?.id)return;const $e=Number(Ee.price||0);if(!($e<=0||!await rn.wasteCredit($e,"Credits for send gift in live",!0,!0)))try{const Et=X(Ee.icon||Ee.image||""),Tt=`${s.id}[rt]${w.id}[rt]${s.profile_photo||""}[rt]${s.first_name||""}[rt]${Et}[rt]image`;await Ne.rt("message",Tt,i);const ni=`${s.id}[message]${w.id}[message]${Et}[message]gift[message]${$e}`;await Ne.query("sendMessage",ni,i),b("Gift sent!","success"),U(!1)}catch(Et){console.error("Error sending gift:",Et),b("Gift sent!","success"),U(!1)}},Ce=w?.id===s?.id,at=o?.plugins?.meet?.viewOnlyPremiumPrivate==="Yes",Ie=Number(s?.premium)===1,et=Number(w?.unlocked)===1,we=Ce||et&&(!at||Ie),ee=at&&!Ie,_e=(Ee,$e)=>{if(we){De(Ee,$e);return}const It=X(Ee);V(It),z(!0)},Be=w?.status==="y",Xe=w?.first_name||"",tt=w?.age||0,He=w?.city||"",We=w?.country||"",vt=w?.profile_photo_big||w?.profile_photo||"",Yt=w?.bio||"",ii=w?.photos||[],$t=ii.filter(Ee=>(Ee.private===0||Ee.private==="0")&&(Ee.approved===1||Ee.approved==="1")),Te=ii.filter(Ee=>Ee.private===1||Ee.private==="1"),Me=Te.length>0,kt=o?.plugins?.gifts?.enabled==="Yes",Ct=Number(l?.private??w?.extended?.private_price??0),Bt=ee?[]:[p[192]||f[192],p[193]||f[193],Ct>0?`${Ct}`:null,p[73]||f[73]].filter(Boolean),Xt=ee?p[695]||f[695]||"Only premium users can visit online profiles":Bt.join(" "),Ut=p[290]||f[290]||"Private photo",ke=ee?p[452]||f[452]||"Become premium":p[191]||f[191]||"Buy private photos permission",lt=[{photo:vt,private:0,approved:1},...$t].filter(Ee=>Ee.photo);return w?.isFan,n?m.jsxs(m.Fragment,{children:[m.jsxs(ms,{isOpen:n,onDidDismiss:e,className:"profile-modal",children:[m.jsx("div",{className:"page-container",children:m.jsx("div",{className:"page visible scroll profile-page",children:m.jsx("div",{className:"profile-preview js-profile-preview",children:m.jsx("div",{className:"layout js-screen-container",children:m.jsxs("div",{className:"layout__content",children:[m.jsx("div",{className:"profile-preview__close",onClick:e,children:m.jsx("div",{className:"icon",children:m.jsx("svg",{className:"icon__content icon__content--inactive",children:m.jsx("svg",{viewBox:"0 0 64 64",id:"icon-cross",width:"100%",height:"100%",children:m.jsx("path",{d:"M32 29.92L13.18 11.1a1.47 1.47 0 0 0-2.08 2.08L29.92 32 11.17 50.75a1.47 1.47 0 0 0 2.08 2.08L32 34.08 50.82 52.9a1.47 1.47 0 0 0 2.08-2.08L34.08 32l18.75-18.75a1.47 1.47 0 0 0-2.08-2.08L32 29.92z"})})})})}),v?m.jsx("div",{className:"profile-loading",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:m.jsx(Wi,{})}):w?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"profile-preview__photos",children:m.jsx("div",{className:"slider-gallery",children:m.jsx("div",{className:"slider-gallery__pages gallery-fix",children:m.jsx("div",{className:"slider-gallery__page is-active",children:m.jsx("div",{className:"multimedia",children:m.jsx("div",{className:"multimedia__image vivify fadeIn",style:{backgroundImage:`url(${X(vt)})`},onClick:()=>De(vt,0)})})})})})}),m.jsx("div",{className:"profile-preview__info border-radius-0",children:m.jsxs("div",{className:"profile-info",children:[m.jsx("div",{className:"profile-info__section",children:m.jsxs("div",{className:"profile-info__title",children:[m.jsxs("div",{className:"profile-title",children:[m.jsx("div",{className:"profile-title__user qa-headline-text",children:m.jsxs("div",{className:"profile-title__statuses",children:[m.jsx("span",{className:"profile-title__username comforta bold",children:Xe}),m.jsxs("div",{className:"profile-title__statuses",children:[Be&&m.jsx("div",{className:"csms-online-status csms-online-status--online profile-user-online"}),tt>0&&m.jsx("div",{className:"agething twigo-font twigo-gradient2",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"37",height:"16",viewBox:"0 0 37 16",children:m.jsxs("g",{children:[m.jsx("text",{transform:"translate(17 13)",fill:"#fff",fontSize:"10",fontFamily:"SegoeUI, Segoe UI",letterSpacing:"0.009em",children:m.jsx("tspan",{x:"0",y:"0",children:tt})}),m.jsxs("g",{transform:"translate(6 3)",children:[m.jsx("rect",{width:"10",height:"10",fill:"none"}),m.jsx("path",{d:"M2.857,10V9.285H1.428V7.857H2.857V7.071a3.571,3.571,0,1,1,1.429,0v.786H5.714V9.285H4.286V10ZM1.428,3.572A2.143,2.143,0,1,0,3.572,1.428,2.145,2.145,0,0,0,1.428,3.572Z",transform:"translate(1.429)",fill:"#fff"})]})]})})})]})]})}),!Ce&&m.jsx("div",{className:"profile-title__actions",children:m.jsx("div",{className:"profile-title__actions-item",children:m.jsx("div",{className:"close-profile-modal",onClick:()=>k(!0),children:m.jsx("div",{className:"icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 24 24",fill:"none",stroke:"#c1c0c9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"5",r:"1"}),m.jsx("circle",{cx:"12",cy:"12",r:"1"}),m.jsx("circle",{cx:"12",cy:"19",r:"1"})]})})})})})]}),(He||We)&&m.jsx("div",{className:"profile-info__content cityandcountry",children:[He,We].filter(Boolean).join(", ")})]})}),kt&&!Ce&&m.jsxs("div",{id:"gifts",className:"profile-widget js-wrap js-gifts-container",children:[m.jsx("h2",{className:"twigo-font profile-edit-h2 profileh2",children:p[463]||"Gifts"}),m.jsxs("div",{className:"gift-add",onClick:()=>U(!0),"data-url":"chat","data-gift":"Yes","data-uid":w.id,children:[m.jsx("div",{className:"inline gift",children:m.jsx("img",{src:"https://www.belloo.date/3.5/assets/sources/uploads/5d7b123f845f8_4.png",width:"50px",height:"auto",alt:""})}),m.jsxs("b",{className:"inline gift-add__txt montserrat profileRightSectionFontStyle",children:[p[464]||"Get"," ",Xe," ",p[447]||"attention with a gift"]})]})]}),m.jsxs("div",{className:"profile-info__section vrt-personal-info mt-10px",children:[m.jsx("h2",{className:"twigo-font profile-edit-h2 profileh2",children:p[117]||f[170]||"About me"}),m.jsx("div",{className:"profile-info__content comforta",children:Yt?m.jsx("p",{dangerouslySetInnerHTML:{__html:ae(Yt).replace(/\n/g,"<br />")}}):m.jsx("p",{children:f[239]||"This user dont have a bio message"})})]}),$t.length>0&&m.jsxs("div",{className:"profile-info__section",children:[m.jsx("h2",{className:"twigo-font profile-edit-h2 profileh2",children:f[238]||"Photos"}),m.jsx("div",{className:"profile-info__content row overfllow-auto",children:$t.map((Ee,$e)=>m.jsx("div",{className:"col-33 brick brick--lg brick--squared profilephotosgrid",onClick:()=>De(Ee.photo,$e+1),children:m.jsx("div",{className:"brick__image",style:{backgroundImage:`url('${X(Ee.photo)}')`}})},$e))})]}),Me&&m.jsxs("div",{className:"profile-info__section",children:[m.jsx("h2",{className:"twigo-font profile-edit-h2 profileh2",children:p[68]||f[240]||"Private Photos"}),m.jsx("div",{className:"profile-info__content row overfllow-auto",children:Te.map((Ee,$e)=>Number(w?.unlocked)===1?m.jsx("div",{className:"col-33 brick brick--lg brick--squared profilephotosgrid",onClick:()=>_e(Ee.photo,lt.length+$e),children:m.jsx("div",{className:"brick__image",style:{backgroundImage:`url('${X(Ee.photo)}')`}})},$e):m.jsx("div",{className:"col-33 brick brick--lg brick--squared profilephotosgrid",onClick:()=>_e(Ee.photo,lt.length+$e),children:m.jsx("div",{className:"brick__image",style:{backgroundImage:`url('${X(Ee.photo)}')`},children:m.jsx("img",{src:qH,className:"border-radius-3px",alt:"Private"})})},$e))})]}),m.jsx("div",{className:"myprofile-separator h-20"}),w.question&&w.question.length>0&&m.jsx(m.Fragment,{children:w.question.map((Ee,$e)=>Ee.userAnswer&&m.jsxs("div",{className:"profile-info__section profile-qa",children:[m.jsx("div",{className:"profile-info__title comforta profile-q",children:Ee.question}),m.jsx("div",{className:"profile-info__content",children:m.jsx("p",{className:"comforta profile-a",children:Ee.userAnswer})})]},$e))}),w.interest&&w.interest.length>0&&m.jsxs("div",{className:"profile-info__section mt-20px",children:[m.jsxs("div",{className:"profile-info__title",children:[w.interest.length," ",p[276]||"Interests"]}),m.jsx("div",{className:"profile-info__content",children:m.jsx("div",{className:"profile-interests row overfllow-auto",children:w.interest.map((Ee,$e)=>m.jsx("div",{className:"container-grid-interest col-25 interestsBorderRadius box-shadow",style:{backgroundImage:Ee.icon?`url('${X(Ee.icon)}')`:"none"},children:m.jsx("div",{className:"interestName",children:m.jsx("span",{className:"text-shadow",children:Ee.name})})},$e))})})]})]})})]}):null]})})})})}),$&&m.jsxs("div",{className:"page overlay-page stickers visible twigo-chat-page",children:[m.jsx("div",{className:"stickers-top",onClick:()=>U(!1)}),m.jsx("div",{className:"stickers-body",children:m.jsx("div",{className:"stickers-showcase",children:r&&Array.isArray(r)&&r.length>0?r.map((Ee,$e)=>m.jsx("div",{className:"stickers-showcase__item",children:m.jsx("div",{className:"stickers-showcase__item_ selected vivify popIn",onClick:()=>Pt(Ee),style:{animationDelay:`${$e*50}ms`},children:m.jsx("div",{className:"stickers-showcase__image",style:{backgroundImage:`url(${X(Ee.icon||Ee.image||"")})`}})})},$e)):m.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#999"},children:f[239]||"No gifts available"})})}),m.jsx("div",{className:"floating-action stickers-promo",children:m.jsxs("div",{className:"cta-box cta-box--compact",children:[m.jsxs("div",{className:"cta-box__header cta-box__header--xsm",children:[f[210]||"Send gift to"," ",Xe]}),m.jsx("div",{className:"cta-box__buttons",children:m.jsx("div",{className:"button-wrapper",children:m.jsx("button",{className:"button fc-333",children:m.jsx("div",{className:"button__content",children:m.jsxs("span",{className:"button__text",children:[f[283]||"You have"," ",s?.credits||0," ",f[48]||"Credits"]})})})})}),m.jsx("div",{className:"cta-box__additional",children:f[50]||"Get more attention with our awesome gifts"})]})})]})]}),m.jsx(Bn,{isOpen:T,onDidDismiss:()=>k(!1),buttons:[{text:`${f[237]||"Share"} ${Xe}`,handler:()=>{ge()}},{text:`${f[17]||"Block"} ${Xe}`,role:"destructive",handler:()=>{O(!0)}},{text:f[2]||"Cancel",role:"cancel"}]}),m.jsx(Bn,{isOpen:_,onDidDismiss:()=>O(!1),buttons:[{text:`${f[18]||"Are you sure you want to block"} ${Xe}?`,handler:()=>{re()}},{text:f[2]||"Cancel",role:"cancel"}]}),m.jsx(ms,{isOpen:P,onDidDismiss:()=>N(!1),children:m.jsxs("div",{style:{width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.95)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[m.jsx("div",{onClick:()=>N(!1),style:{position:"absolute",top:"20px",right:"20px",width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.3)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:1e3},children:m.jsx("svg",{viewBox:"0 0 64 64",width:"24",height:"24",style:{fill:"#fff"},children:m.jsx("path",{d:"M32 29.92L13.18 11.1a1.47 1.47 0 0 0-2.08 2.08L29.92 32 11.17 50.75a1.47 1.47 0 0 0 2.08 2.08L32 34.08 50.82 52.9a1.47 1.47 0 0 0 2.08-2.08L34.08 32l18.75-18.75a1.47 1.47 0 0 0-2.08-2.08L32 29.92z"})})}),lt.length>0?m.jsx(Wd,{modules:[Gy],pagination:{clickable:!0},initialSlide:L,style:{width:"100%",height:"100%"},children:lt.map((Ee,$e)=>m.jsx(yn,{children:m.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:m.jsx("img",{src:X(Ee.photo),alt:"Profile",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})})},$e))}):null]})}),m.jsx(ms,{isOpen:se,onDidDismiss:ze,className:"image-modal transparent",children:m.jsxs("div",{className:"modal image-modal transparent",children:[m.jsx("div",{className:"private-blurred-background",onClick:ze,children:m.jsx("div",{className:"blur-black",style:{background:`url(${Y}) center no-repeat`}})}),m.jsx("div",{id:"private",className:"private-container",children:m.jsxs("div",{className:"private-photo",children:[m.jsx("div",{className:"private-photo--album",onClick:ze}),m.jsx("div",{className:"private-photo--name comforta",children:Ut}),Xt&&m.jsx("div",{className:"private-photo--followers comforta fc-fff",children:Xt}),m.jsx("div",{className:"private-photo--button comforta",onClick:nt,children:ke})]})})]})}),m.jsx(tu,{isOpen:q,onClose:Qe,userPhoto:s?.profile_photo}),m.jsx(ms,{isOpen:G,onDidDismiss:()=>Z(!1),className:"profile-modal",children:m.jsx("div",{className:"page overlay-page visible",style:{zIndex:600},children:m.jsx("div",{"data-view-id":"561",children:m.jsxs("div",{className:"layout layout--centered-content",children:[m.jsx("div",{className:"layout__content layout__content--vpadded layout__content--hpadded",children:m.jsx("div",{className:"sharing-media",children:m.jsx("div",{className:"sharing-media__multimedia",children:m.jsx("div",{className:"multimedia",children:m.jsx("div",{className:"multimedia__image",style:{backgroundImage:`url('${X(vt)}')`}})})})})}),m.jsx("div",{className:"layout__content layout__content--vpadded layout__content--hpadded",children:m.jsxs("div",{className:"cta-box",children:[m.jsx("div",{className:"cta-box__header",children:f[236]||"Share Profile"}),m.jsx("div",{className:"cta-box__buttons cta-box__buttons--wide",children:m.jsxs("div",{className:"external-providers-list external-providers-list--horizontal external-providers-list--centered js-scroller",children:[m.jsx("div",{className:"external-provider",children:m.jsxs("a",{href:"javascript:;",onClick:()=>Se("facebook"),children:[m.jsx("div",{className:"external-provider__icon",children:m.jsx("div",{className:"icon icon--stretch","data-qa":"icon",children:m.jsx("svg",{className:"icon__content icon__content--inactive",children:m.jsx("svg",{viewBox:"0 0 64 64",id:"icon-social-circle-messenger",width:"100%",height:"100%",children:m.jsxs("g",{fill:"none",fillRule:"evenodd",children:[m.jsx("path",{fill:"#0084FF",d:"M32 0a32 32 0 1 0 0 64 32 32 0 0 0 0-64"}),m.jsx("path",{fill:"#FFF",d:"M21.63 43.31a14.98 14.98 0 0 1-6.09-11.94C15.54 22.88 22.91 16 32 16s16.46 6.88 16.46 15.37c0 8.5-7.37 15.38-16.46 15.38-1.73 0-3.4-.25-4.97-.72l-5.4 3.34v-6.06zm-.08-6.77l8.76-9.46 4.25 4.8 8.01-4.8-8.83 9.61-4.29-4.63-7.9 4.48z"})]})})})})}),m.jsx("br",{}),m.jsx("div",{className:"external-provider__details",children:m.jsx("div",{className:"external-provider__details-summary",children:"Messenger"})})]})}),m.jsx("div",{className:"external-provider",children:m.jsxs("a",{href:"javascript:;",onClick:()=>Se("whatsapp"),children:[m.jsx("div",{className:"external-provider__icon",children:m.jsx("div",{className:"icon icon--stretch","data-qa":"icon",children:m.jsx("svg",{className:"icon__content icon__content--inactive",children:m.jsxs("svg",{viewBox:"0 0 64 64",id:"icon-social-circle-whatsapp",width:"100%",height:"100%",children:[m.jsx("circle",{cx:"32",cy:"32",r:"32",fill:"#17d417"}),m.jsxs("g",{fill:"#FFF",children:[m.jsx("path",{d:"M15.82 46.59l7.75-2.16 1.11-.3 1.02.54a14.67 14.67 0 0 0 6.98 1.75c8.17 0 14.79-6.64 14.79-14.83 0-8.2-6.62-14.84-14.79-14.84a14.81 14.81 0 0 0-12.73 22.38l.62 1.05-.33 1.19-2.08 7.56-1.66.46-1.13-1.13.45-1.67zm-.8-15c0-9.79 7.9-17.72 17.66-17.72s17.66 7.93 17.66 17.72a17.69 17.69 0 0 1-26 15.62l-9.4 2.62 2.53-9.23a17.68 17.68 0 0 1-2.45-9.01z",fillRule:"nonzero"}),m.jsx("path",{d:"M28.27 24.51l1.18 2.81s.48 1.12-.58 2c-1.05.88-.33 1.75-.33 1.75s1.31 2.39 5.07 4.66c0 0 1 .7 1.89-.23 0 0 .6-.61 1.1-1.25 0 0 .64-.88 1.6-.28 0 0 1.4.79 2.77 1.5 0 0 1.25.51.7 1.85 0 0-1.58 3.54-5.53 2.7 0 0-2.85-.29-5.36-2.12-.39-.28-.5-.35-1.39-1.07l-.55-.5a21.68 21.68 0 0 1-1.23-1.22c-2.02-2.18-2.9-4.04-2.9-4.04s-.97-1.96-1.1-3.13c0 0-.48-2.56 1.68-4.03 0 0 2.08-1.6 2.98.6z"})]})]})})})}),m.jsx("br",{}),m.jsx("div",{className:"external-provider__details",children:m.jsx("div",{className:"external-provider__details-summary",children:"WhatsApp"})})]})}),m.jsx("div",{className:"external-provider",children:m.jsxs("a",{href:"javascript:;",onClick:()=>Se("sms"),children:[m.jsx("div",{className:"external-provider__icon",children:m.jsx("div",{className:"icon icon--stretch","data-qa":"icon",children:m.jsx("svg",{className:"icon__content icon__content--inactive",children:m.jsxs("svg",{viewBox:"0 0 64 64",id:"icon-circle-message",width:"100%",height:"100%",children:[m.jsx("circle",{fill:"#17D417",cx:"32",cy:"32",r:"32"}),m.jsx("path",{fill:"#FFF",d:"M42.4 40.23a9.41 9.41 0 0 0 2.86 5.03c-1.53 0-4.68-.27-7.75-1.2a13.26 13.26 0 1 1 4.88-3.83zM32 33.28a1.28 1.28 0 1 0 0-2.56 1.28 1.28 0 0 0 0 2.56zm4.7 0a1.28 1.28 0 1 0 0-2.56 1.28 1.28 0 0 0 0 2.56zm-9.4 0a1.28 1.28 0 1 0 0-2.56 1.28 1.28 0 0 0 0 2.56z"})]})})})}),m.jsx("br",{}),m.jsx("div",{className:"external-provider__details",children:m.jsx("div",{className:"external-provider__details-summary",children:"Mensaje"})})]})})]})}),m.jsx("br",{}),m.jsx("div",{className:"cta-box__content cta-box__content--vpadded cta-box__content--hpadded js-copy-link-container is-hidden",children:m.jsx("input",{type:"text",className:"share-copy-fallback js-copy-link-input"})}),m.jsx("div",{className:"cta-box__buttons",children:m.jsx("div",{className:"button-wrapper",children:m.jsx("div",{className:"button-wrapper__item",children:m.jsx("button",{className:"inline-button js-dismiss",onClick:()=>Z(!1),children:m.jsx("span",{className:"inline-button__text",children:f[2]||"Cancel"})})})})})]})})]})})})})]}):null},WH=()=>{const{user:n,prices:e,setUser:t}=Ki(),i=wn(),[s,r]=C.useState(null);return{boostData:s,openBoostModal:d=>{if(!n||!e)return;let u="",f="",p="",b=0,v;d===1?(b=parseInt(e.first||"0"),v="riseUp",u=i[414]||"Get seen by more people!",f=i[415]||"Rise up to first place in People nearby and get visitors",p=i[416]||"Rise up"):(b=parseInt(e.discover||"0"),v="discover100",u=i[526]||"Discover",f=i[527]||"Get discovered by more people",p=i[526]||"Discover"),r({isOpen:!0,title:u,description:f,price:b,buttonText:p,action:v})},closeBoostModal:()=>{r(null)}}},RR=({isOpen:n,onClose:e,type:t})=>{const{settings:i}=Ti(),{user:s,prices:r}=Ki(),o=Yi(),l=wn();vs();const[d,u]=C.useState(!1),[f,p]=C.useState([]),[b,v]=C.useState([]),[y,w]=C.useState([]),[E,T]=C.useState([]),[k,_]=C.useState(!1),[O,R]=C.useState(!1),[M,P]=C.useState(!1),[N,L]=C.useState(!1),[D,$]=C.useState(null),[U,G]=C.useState(!1),[Z,se]=C.useState(!1),[z,Y]=C.useState(null),{boostData:V,openBoostModal:q,closeBoostModal:ie}=WH();C.useEffect(()=>{if(n){const ee=localStorage.getItem("account_basic");if(ee)try{$(JSON.parse(ee))}catch(_e){console.error("Error parsing account_basic:",_e)}}},[n]);const j=s?.premium===1||D?.fans&&D.fans>0,H=s?.premium===1||D?.visits&&D.visits>0;C.useEffect(()=>{n&&s?.id&&(t==="visitors"?X():K())},[n,s?.id,t]);const K=async()=>{if(s?.id)try{u(!0);const ee=await Ne.game("getMatches",s.id,i);ee.matches!=null?(p(ee.matches||[]),_(ee.matches.length===0)):(p([]),_(!0)),ee.mylikes!=null?(v(ee.mylikes||[]),R(ee.mylikes.length===0)):(v([]),R(!0)),ee.myfans!=null?(w(ee.myfans||[]),P(ee.myfans.length===0)):(w([]),P(!0))}catch(ee){console.error("Error loading matches:",ee),_(!0),R(!0),P(!0)}finally{u(!1)}},X=async()=>{if(s?.id)try{u(!0);const ee=await Ne.game("getVisitors",s.id,i);ee.visitors!=null?(T(ee.visitors||[]),L(ee.visitors.length===0)):(T([]),L(!0))}catch(ee){console.error("Error loading visitors:",ee),L(!0)}finally{u(!1)}},ae=()=>{switch(t){case"matches":return o[11]||"Matches";case"mylikes":return l[295]||"My Likes";case"likesme":return l[101]||"Likes Me";case"visitors":return o[10]||"Visitors";default:return"Matches"}},re=()=>{switch(t){case"matches":return f;case"mylikes":return b;case"likesme":return y;case"visitors":return E;default:return[]}},ge=()=>{switch(t){case"matches":return k;case"mylikes":return O;case"likesme":return M;case"visitors":return N;default:return!1}},Se=()=>{switch(t){case"matches":return{title:o[229]||"No matches yet",subtitle:o[230]||"Start swiping to find matches",buttonText:o[233]||"Boost Me"};case"mylikes":return{title:o[229]||"First place is for winners!",subtitle:o[230]||"A lot of people are looking for you. The best and easiest way to get noticed is by putting yourself First in Search. Thats 24 hours of staying at the top of the search results!",buttonText:o[233]||"Put yourself first!"};case"likesme":return{title:o[234]||"No likes yet",subtitle:o[232]||"Get discovered by more people",buttonText:o[235]||"Discover"};case"visitors":return{title:o[234]||"No visitors yet",subtitle:o[232]||"Get discovered by more people",buttonText:o[235]||"Discover"};default:return{title:"No matches",subtitle:"Start swiping",buttonText:"Boost"}}},De=ee=>{Y(ee),se(!0)},ze=()=>{let ee=1;t==="matches"&&(ee=2),q(ee)},Qe=(ee,_e,Be)=>{Be.stopPropagation(),console.log("Open story:",ee,_e)},nt=ee=>ee?ee.startsWith("http")?ee:`${i?.siteUrl||""}${ee.startsWith("/")?ee:`/${ee}`}`:"",Pt=ee=>ee?ee.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'"):"",Ce=re(),at=ge(),Ie=Se();i?.siteUrl;const et=s?.profile_photo||"",we=Math.min(window.innerWidth/2,200);return m.jsxs(ms,{isOpen:n,onDidDismiss:e,children:[m.jsxs(Wt,{className:"vivify fadeIn",style:V?.isOpen?{pointerEvents:"none",opacity:.5}:{},children:[m.jsxs("div",{style:{position:"fixed",top:"0",left:"0",width:"100%",height:"85px",borderBottom:"1px solid #e3e3e3",background:"#f8f8f8",zIndex:999},children:[m.jsx("div",{className:"content-header-div-title",children:m.jsx("h2",{className:"twigo-font",onClick:e,style:{cursor:"pointer"},children:ae()})}),m.jsx("div",{className:"content-header-div-right",onClick:e,style:{cursor:"pointer"},children:m.jsx("span",{className:"twigo-font",children:o[264]||"Close"})})]}),d&&m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:m.jsx(Wi,{})}),!d&&at&&m.jsx("div",{className:"mt-50px",children:m.jsxs("div",{className:"credits-section text-center",children:[m.jsx("h5",{className:"comforta font-bold fc-color-BFC5D5",children:t==="likesme"||t==="visitors"?o[71]||"No results":o[70]||"No results"}),m.jsx("div",{className:"wrapper text-center",children:m.jsx("div",{className:"pos-rlt",children:m.jsx("div",{className:"thumb-xxl rounded profileP border-profile",style:{backgroundImage:`url(${nt(et)})`,height:`${we}px`,width:`${we}px`}})})}),m.jsx("h1",{className:"font-bold",children:Ie.title}),m.jsx("h4",{className:"font-bold",children:Ie.subtitle}),m.jsx("center",{children:m.jsx("span",{className:t==="likesme"||t==="visitors"?"spotlight-me twigo-gradient1 box-shadow":"first-me first-me-btn",onClick:ze,style:{cursor:"pointer"},children:Ie.buttonText})}),t==="matches"&&m.jsxs(m.Fragment,{children:[m.jsx("br",{}),m.jsxs("h4",{children:[o[208]||"Price"," ",m.jsx("b",{children:r?.discover||"0"})," ",o[203]||"credits"]})]}),t==="mylikes"&&m.jsxs(m.Fragment,{children:[m.jsx("br",{}),m.jsxs("h4",{children:[o[208]||"Price"," ",m.jsx("b",{children:r?.first||"0"})," ",o[203]||"credits"]})]}),(t==="likesme"||t==="visitors")&&m.jsxs(m.Fragment,{children:[m.jsx("br",{}),m.jsxs("h4",{children:[o[208]||"Price"," ",m.jsx("b",{children:r?.discover||"0"})," ",o[203]||"credits"]})]})]})}),!d&&!at&&Ce.length>0&&m.jsx($y,{style:{marginTop:"85px"},children:m.jsx("div",{className:t==="likesme"&&!j||t==="visitors"&&!H?"sblur":"",children:Ce.map((ee,_e)=>m.jsxs(Vf,{className:"border-none pt-5",onClick:()=>{t==="likesme"&&!j||t==="visitors"&&!H||De(ee)},lines:"none",style:t==="likesme"&&!j||t==="visitors"&&!H?{pointerEvents:"none"}:{},children:[m.jsxs("div",{className:"thumb-md rounded pull-left m-l m-r-md profileP list-thumb-user-photo",style:{backgroundImage:`url(${nt(ee.photo)})`,width:"60px",height:"60px",minWidth:"60px",minHeight:"60px",backgroundSize:"cover",backgroundPosition:"center"},onClick:Be=>{ee.story&&ee.story>0&&Qe(ee.id,ee.story,Be)},children:[ee.story&&ee.story>0&&m.jsx("div",{className:"storyOn",style:{position:"absolute",top:0,left:0,right:0,bottom:0,border:"2px solid #ff6b6b",borderRadius:"8px"}}),ee.unreadCount&&ee.unreadCount>0&&m.jsx("div",{style:{position:"absolute",top:"-5px",right:"-5px",backgroundColor:"#ff0000",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:ee.unreadCount})]}),m.jsxs("div",{className:"text-lg b-b b-light clear padder-v",style:{flex:1,marginLeft:"10px",position:"relative"},onClick:Be=>{(t==="likesme"&&j||t==="visitors"&&H)&&(Be.stopPropagation(),De(ee))},children:[m.jsxs("div",{className:"text-c chat-name display-inline-table",style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1},children:[m.jsx("span",{className:"twigo-font font-bold",children:ee.name}),ee.status===1&&m.jsx("span",{className:"chat-status bg-51B80E",style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#51B80E",display:"inline-block",marginLeft:"5px"}})]}),ee.last_m_time&&m.jsx("div",{className:"text-xs text-muted text-right list-user-msg-time",style:{fontSize:"12px",color:"#999",marginLeft:"10px"},children:ee.last_m_time})]}),(t==="likesme"||t==="visitors")&&ee.last_m&&m.jsx("div",{className:"list-user-last-msg",children:m.jsx("p",{className:"text-muted chat-last-m paQueRespete",style:{margin:"5px 0 0 0",fontSize:"14px",color:"#666"},children:Pt(ee.last_m)})}),t==="mylikes"&&ee.last_m&&m.jsx("div",{className:"text-xs text-muted",style:{fontSize:"12px",color:"#999",marginTop:"2px"},children:ee.last_m}),t==="matches"&&(ee.city||ee.country)&&m.jsx("div",{className:"text-xs text-muted",style:{fontSize:"12px",color:"#999",marginTop:"2px"},children:[ee.city,ee.country].filter(Boolean).join(", ")}),t==="matches"&&ee.last_m&&m.jsx("div",{className:"list-user-last-msg",children:m.jsx("p",{className:"text-muted chat-last-m paQueRespete",style:{margin:"5px 0 0 0",fontSize:"14px",color:"#666",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Pt(ee.last_m)})})]})]},ee.id||_e))})}),t==="likesme"&&!j&&!M&&!d&&m.jsx("div",{className:"only-premium o-p-div",children:m.jsxs("div",{className:"credits-section text-center mt-0",children:[m.jsx("div",{className:"wrapper text-center",children:m.jsx("div",{className:"pos-rlt",children:m.jsx("div",{className:"thumb-xxl rounded profileP border-profile box-shadow-credits",style:{backgroundImage:`url(${nt(et)})`,height:`${we}px`,width:`${we}px`}})})}),m.jsx("h1",{className:"font-bold",style:{display:"none"},children:o[8]||"Premium"}),m.jsxs("h1",{className:"font-bold",children:[y.length," ",o[74]||"Likes Me"]}),m.jsx("h4",{className:"font-bold fc-333",children:o[75]||"Upgrade to see who likes you"}),m.jsx("center",{children:m.jsx("span",{className:"spotlight-me twigo-gradient1 box-shadow",onClick:()=>{G(!0)},style:{cursor:"pointer"},children:o[76]||"GET PREMIUM"})}),m.jsx("br",{})]})}),t==="visitors"&&!H&&!N&&!d&&m.jsx("div",{className:"only-premium o-p-div",children:m.jsxs("div",{className:"credits-section text-center mt-0",children:[m.jsx("div",{className:"wrapper text-center",children:m.jsx("div",{className:"pos-rlt",children:m.jsx("div",{className:"thumb-xxl rounded profileP border-profile box-shadow-credits",style:{backgroundImage:`url(${nt(et)})`,height:`${we}px`,width:`${we}px`}})})}),m.jsx("h1",{className:"font-bold",id:"searching_title",style:{display:"none"},children:o[8]||"Premium"}),m.jsxs("h1",{className:"font-bold",id:"visitors_title",children:[E.length," ",o[81]||"Visitors"]}),m.jsx("h4",{className:"font-bold fc-333",children:o[82]||"Upgrade to see who visited your profile"}),m.jsx("center",{children:m.jsx("span",{className:"spotlight-me twigo-gradient1 box-shadow",onClick:()=>{G(!0)},style:{cursor:"pointer"},children:o[76]||"GET PREMIUM"})}),m.jsx("br",{})]})})]}),V&&m.jsx(VH,{isOpen:V.isOpen,onClose:ie,title:V.title,description:V.description,price:V.price,buttonText:V.buttonText,action:V.action,onSuccess:()=>{s?.id&&K()}}),m.jsx(tu,{isOpen:U,onClose:()=>G(!1),userPhoto:s?.profile_photo}),z&&m.jsx(Da,{isOpen:Z,onClose:()=>{se(!1),Y(null)},userId:z.id})]})},Iv="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34Z'/></svg>",KH="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M456.69 421.39 362.6 327.3a173.8 173.8 0 0 0 34.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.8 173.8 0 0 0 327.3 362.6l94.09 94.09a25 25 0 0 0 35.3-35.3M97.92 222.72a124.8 124.8 0 1 1 124.8 124.8 124.95 124.95 0 0 1-124.8-124.8'/></svg>",Ih=async(n,e,t,i,s,r,o,l,d)=>{try{l&&await Ne.custom("/requests/api.php",{action:"today",query:String(n)},d);let f=YH(n,e,s,r,o);const p=f.includes(".gif"),b=f.includes("gift");p&&!b&&(f=f.split(".gif")[0]+".gif[message]gif");let v;try{v=await Ne.custom("/requests/api.php",{action:"sendMessage",query:f},d)}catch(k){console.error("Database save failed:",k),v=null}let y=s,w=r;r==="gif"?y=s.split(".gif")[0]+".gif":r==="gift"&&(w="image");const E=XH(n,e,t,i,y,w);let T;try{T=await Ne.rt("message",E,d)}catch{T=null}return{dbResponse:v,rtResponse:T}}catch(u){throw console.error("Error sending message:",u),u}},N0=async(n,e,t,i)=>{try{const s=`${n},${e},${t}`;return await Ne.rt("typing",s,i)}catch(s){throw console.error("Error sending typing:",s),s}},YH=(n,e,t,i,s)=>{let r=`${n}[message]${e}[message]${t}[message]${i}`;return s&&(r+=`[message]${s}`),r},XH=(n,e,t,i,s,r)=>`${n}[rt]${e}[rt]${t}[rt]${i}[rt]${s}[rt]${r}`,LR=({isOpen:n,onClose:e,selectedUser:t})=>{const{settings:i}=Ti(),{user:s,config:r,prices:o,gifts:l,setUser:d}=Ki(),u=Yi();wn();const{showNotification:f}=In(),[p]=C.useState(t),[b,v]=C.useState([]),[y,w]=C.useState([]),[E,T]=C.useState(!0),[k,_]=C.useState(""),[O,R]=C.useState(""),[M,P]=C.useState([]),[N,L]=C.useState(!1),[D,$]=C.useState(!1),[U,G]=C.useState(!1),[Z,se]=C.useState(!1),[z,Y]=C.useState(!1),[V,q]=C.useState(!1),[ie,j]=C.useState(!1),[H,K]=C.useState(0),[X,ae]=C.useState(0),[re,ge]=C.useState(!1),[Se,De]=C.useState(!1),[ze,Qe]=C.useState(0),[nt,Pt]=C.useState(!1),[Ce,at]=C.useState(""),[Ie,et]=C.useState(0),[we,ee]=C.useState(15),[_e,Be]=C.useState(!1),[Xe,tt]=C.useState(0),[He,We]=C.useState(!0),[vt,Yt]=C.useState(!1),[ii,$t]=C.useState(!1),[Te,Me]=C.useState(!1),[kt,Ct]=C.useState(200),Bt=C.useRef(null),Xt=C.useRef(null),Ut=C.useRef(null),ke=C.useRef(new Date),lt=C.useRef(!1),Ee=C.useRef(null),$e=C.useRef(null),It=C.useRef(null),Et=C.useRef(null),Tt=C.useRef(null),ni=C.useRef(null),Qt=i?.plugins||{},[yt,ct]=C.useState(()=>{if(l&&Array.isArray(l)&&l.length>0)return l;try{const fe=localStorage.getItem("gifts");return fe?JSON.parse(fe):[]}catch{return[]}}),Xi=(o||{}).chat||0;C.useEffect(()=>{if(l&&Array.isArray(l)&&l.length>0)ct(l);else try{const fe=localStorage.getItem("gifts");if(fe){const Ae=JSON.parse(fe);Array.isArray(Ae)&&Ae.length>0&&ct(Ae)}}catch(fe){console.error("Error loading gifts from localStorage:",fe)}},[l]);const Qi=C.useCallback(async()=>{G(!0);try{const Ae=await(await fetch("https://api.giphy.com/v1/gifs/trending?api_key=2n2rOkvKWUwIVyydayTpL52AK4iD9qeo&limit=24")).json();Ae.data&&Array.isArray(Ae.data)&&P(Ae.data)}catch(fe){console.error("Error fetching trending GIFs:",fe)}finally{G(!1)}},[]),Sn=C.useCallback(async fe=>{if(!fe||fe.trim().length===0){Qi();return}G(!0);try{const mt=await(await fetch(`https://api.giphy.com/v1/gifs/search?q=${encodeURIComponent(fe)}&api_key=2n2rOkvKWUwIVyydayTpL52AK4iD9qeo&limit=24`)).json();mt.data&&Array.isArray(mt.data)&&P(mt.data)}catch(Ae){console.error("Error searching GIFs:",Ae)}finally{G(!1)}},[Qi]);C.useEffect(()=>{if(!n||!s?.id||!p){const Vt=Do.getChannel();Vt&&(It.current&&Et.current&&(Vt.unbind(It.current,Et.current),It.current=null,Et.current=null),Tt.current&&ni.current&&(Vt.unbind(Tt.current,ni.current),Tt.current=null,ni.current=null)),lt.current=!1,Ee.current=null;return}if(lt.current||Ee.current===p.id)return;lt.current=!0,Ee.current=p.id;const fe=Math.min(window.innerWidth/2,200);Ct(fe);const Ae=window.innerHeight-300,mt=document.querySelector(".stickers-top");return mt&&(mt.style.height=`${Ae}px`),Qt.chat?.viewUserCredits==="Yes"&&(De(!0),Qe(p.credits||0)),pe(p.id).finally(()=>{lt.current=!1}),Zi(),()=>{const Vt=Do.getChannel();Vt&&(It.current&&Et.current&&(Vt.unbind(It.current,Et.current),It.current=null,Et.current=null),Tt.current&&ni.current&&(Vt.unbind(Tt.current,ni.current),Tt.current=null,ni.current=null))}},[n,p?.id,s?.id]),C.useEffect(()=>{N&&M.length===0&&Qi()},[N,M.length,Qi]),C.useEffect(()=>{if(!N)return;const fe=setTimeout(()=>{O.trim().length>0?Sn(O):Qi()},500);return()=>clearTimeout(fe)},[O,N,Sn,Qi]);const Zi=()=>{if(!(!s?.id||!r||!p)&&Qt.pusher?.key)try{Do.setSettings(i);const fe=Do.getChannel();if(!fe){console.warn("Pusher channel not available");return}const Ae=`typing${s.id}${p.id}`;It.current=Ae;const mt=wi=>{console.log("typing",wi),wi.t==1?(se(!0),$e.current&&clearTimeout($e.current),$e.current=setTimeout(()=>{se(!1),$e.current=null},3e3),console.log("setWriting(true);")):(se(!1),$e.current&&(clearTimeout($e.current),$e.current=null))};Et.current=mt;const Vt=`chat${s.id}${p.id}`;Tt.current=Vt;const an=wi=>{w(Li=>[...Li,{isMe:!1,seen:1,type:wi.type,body:wi.message}]),se(!1);const xs=`${s.id},${p.id}`;Ne.query("messageRead",xs,i),window.playAudio&&window.playAudio("inchat-sound.mp3"),setTimeout(()=>{je()},100)};ni.current=an,setTimeout(()=>{fe.bind(Ae,mt),fe.bind(Vt,an)},500)}catch(fe){console.error("Error setting up Pusher:",fe)}},pe=async fe=>{if(s?.id)try{T(!0);const Ae=await Ne.chat("userChat",s.id,fe,i);let mt=Ae.chat||Ae.data?.chat||[];mt=mt.map(Li=>Li.gif===1?{...Li,type:"gif",photo:0}:Li.gift===1?{...Li,type:"gift",photo:0}:Li.type==="image"&&Li.photo===1?{...Li,photo:1}:Li),v(mt||[]),mt&&Array.isArray(mt)&&mt.length>0?mt.length>15?(Be(!0),tt(mt.length-15)):Be(!1):(ge(!0),Be(!1));const Vt=Ae.premium||Ae.data?.premium||0,an=Ae.blocked||Ae.data?.blocked||0;K(Vt),ae(an),Vt===1&&q(!0);let wi=0,xs=0;mt.forEach(Li=>{Li.isMe?wi++:xs++}),Qt.chat?.spamPrevention==="Yes"&&wi>=2&&xs===0&&Y(!0),an===1&&window.confirm(`${u[12]||"Blocked"} ${p?.name}
${p?.name} ${u[13]||"has blocked you"}`)&&e()}catch(Ae){console.error("Error loading chat:",Ae),v([])}finally{T(!1),setTimeout(()=>{je()},750)}},je=async()=>{if(Bt.current){const fe=await Bt.current.getScrollElement();fe&&(fe.scrollTop=fe.scrollHeight)}},xt=fe=>{!s||!p||(fe.length<2?N0(s.id,p.id,0,i):new Date().getTime()-ke.current.getTime()>2e3&&(ke.current=new Date,N0(s.id,p.id,1,i)))},Mt=async()=>{if(!s||!p)return!1;if(Qt.chat?.creditsPerMessageEnabled==="Yes"){const fe=parseInt(Qt.chat?.creditsPerMessage||"0"),Ae=window.allG||3;if(fe>0&&(Qt.chat?.creditsPerMessageGender==s.gender||Qt.chat?.creditsPerMessageGender==Ae)&&!await rn.wasteCredit(fe,"Credits for send chat message",!0,!1))return!1}return!0},rt=async fe=>{if(!s||!p)return;if(Qt.chat?.onlyPremium==="Yes"&&s.premium===0){Yt(!0),f(Qt.chat?.onlyPremiumMessage||"Premium required","error");return}if(!await Mt())return;const mt=b.length===0&&y.length===0;w(Vt=>[...Vt,{isMe:!0,seen:0,type:"text",body:fe}]);try{await Ih(s.id,p.id,s.profile_photo||"",s.first_name||"",fe,"text",void 0,mt,i)}catch(Vt){console.error("Error sending message:",Vt)}try{await N0(s.id,p.id,0,i)}catch(Vt){console.error("Error sending typing indicator:",Vt)}_(""),setTimeout(()=>{je()},100)},xi=async(fe=0)=>{if(!(!s||!p)){if(Qt.chat?.onlyPremium==="Yes"&&s.premium===0){Yt(!0),f(Qt.chat?.onlyPremiumMessage||"Premium required","error");return}Ut.current&&Ut.current.click()}},te=async fe=>{const Ae=fe.target.files?.[0];if(!Ae||!s||!p)return;if(!Ae.type.startsWith("image/")){f("Please select an image file","error");return}if(!await Mt()){Ut.current&&(Ut.current.value="");return}const Vt=new FileReader;Vt.onload=async an=>{const wi=an.target?.result;if(wi){w(xs=>[...xs,{isMe:!0,seen:0,type:"image",body:wi,photo:1}]);try{const xs=i?.site_url||"",Li=new URLSearchParams;Li.append("action","sendChat"),Li.append("base64",wi),Li.append("uid",String(s.id)),Li.append("rid",String(p.id));const rc=await(await fetch(`${xs}assets/sources/appupload.php`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Li.toString()})).json();if(rc.photo){const Yr=b.length===0&&y.length===0;w(Oa=>{const bn=[...Oa],Ji=bn.length-1;return Ji>=0&&bn[Ji].isMe&&bn[Ji].type==="image"&&(bn[Ji]={...bn[Ji],body:rc.photo}),bn}),await Ih(s.id,p.id,s.profile_photo||"",s.first_name||"",rc.photo,"image",void 0,Yr,i),setTimeout(()=>{je()},100)}else f("Failed to upload photo","error"),w(Yr=>Yr.slice(0,-1))}catch{}}},Vt.readAsDataURL(Ae),Ut.current&&(Ut.current.value="")},Re=async fe=>{if(!s||!p)return;if(Qt.chat?.onlyPremium==="Yes"&&s.premium===0){Yt(!0);return}if(!await Mt())return;const mt=b.length===0&&y.length===0;try{await Ih(s.id,p.id,s.profile_photo||"",s.first_name||"",fe,"gif",void 0,mt,i)}catch(Vt){console.error("Error sending GIF:",Vt)}w(Vt=>[...Vt,{isMe:!0,seen:0,type:"image",body:fe}]),L(!1),R(""),setTimeout(()=>{je()},100)},Ke=async(fe,Ae)=>{if(!s||!p)return;const mt=parseInt(String(Ae));if(!await rn.wasteCredit(mt,"Credits for send gift in live",!0,!0))return;w(wi=>[...wi,{isMe:!0,seen:0,type:"text",body:`<img src="${fe}"/>`}]);const an=b.length===0&&y.length===0;try{await Ih(s.id,p.id,s.profile_photo||"",s.first_name||"",fe,"gift",String(Ae),an,i)}catch(wi){console.error("Error sending gift:",wi)}$(!1),Pt(!1),setTimeout(()=>{je()},100),Qt.chat?.transferCreditsGiftToReciever},Ye=(fe,Ae)=>{if(!s)return;const mt=parseInt(String(Ae));rn.hasEnoughCredits(mt)&&(at(fe),et(Ae),Pt(!0))},pt=fe=>{const Ae=fe+we,mt=Xe-fe;mt<=0?(Be(!1),tt(0)):tt(mt),ee(Ae)},ki=()=>{L(!N),$(!1),We(!0),_("")},Ri=()=>{if(!yt||yt.length===0)try{const fe=localStorage.getItem("gifts");if(fe){const Ae=JSON.parse(fe);Array.isArray(Ae)&&Ae.length>0&&ct(Ae)}}catch(fe){console.error("Error reloading gifts:",fe)}$(!D),L(!1),We(!0),_("")},bi=()=>{Me(!0)},ue=()=>{e()},Le=p?.photo||p?.profile_photo||"",Ge=p?.name||"";if(p?.age,p?.city,p?.status===1||p?.status,!p)return null;const ot=i?.siteUrl||"";return m.jsx(ms,{isOpen:n,onDidDismiss:e,children:m.jsxs("div",{className:`has-giphy vivify fadeIn ${N?"show-gif":""}`,style:{background:"#fff",height:"100%"},children:[m.jsxs("div",{className:"twigo-header",children:[m.jsx("div",{className:"content-header-div-right",style:{position:"absolute",top:"8px",left:"10px",right:"auto",height:"32px",textAlign:"right",zIndex:9,background:"rgba(0, 0, 0, 0.5)",borderRadius:"50%",padding:"0px",width:"auto"},onClick:ue,children:m.jsx("img",{src:`${ot}mobile/twigo/img/arrow-back.png`,alt:""})}),m.jsx("div",{className:"twigo-header-title",style:{top:"42px",left:"10px"},children:m.jsx("h2",{className:"twigo-font twigo-header-title-h2",onClick:bi,children:Ge})}),m.jsx("div",{className:"twigo-header-chat-subtext",children:m.jsx("div",{className:"twigo-header-chat-subtext-content",children:Z&&m.jsxs("p",{className:"twigo-font twigo-header-chat-writing",children:[u[209]||"","..."]})})}),m.jsx("div",{className:"twigo-header-chat-photo",children:m.jsx("div",{className:"brick box-shadow w50-h50",onClick:bi,children:m.jsx("div",{className:"brick__image",style:{backgroundImage:`url(${Le})`}})})})]}),m.jsx("div",{className:"twigo-chat-back",onClick:ue}),D&&m.jsxs("div",{className:"page overlay-page stickers visible twigo-chat-page",children:[m.jsx("div",{className:"stickers-top",onClick:()=>$(!1)}),m.jsx("div",{className:"stickers-body",children:m.jsx("div",{className:"stickers-showcase",children:yt&&yt.length>0?yt.map((fe,Ae)=>m.jsx("div",{className:"stickers-showcase__item",children:m.jsx("div",{className:`stickers-showcase__item_ selected vivify popIn delay-${Ae*50}`,onClick:()=>Ye(fe.icon,fe.price),children:m.jsx("div",{className:"stickers-showcase__image",style:{backgroundImage:`url(${fe.icon})`}})})},Ae)):m.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#999"},children:"No gifts available. Please check console for details."})})}),m.jsx("div",{className:"floating-action stickers-promo",children:m.jsxs("div",{className:"cta-box cta-box--compact",children:[m.jsxs("div",{className:"cta-box__header cta-box__header--xsm",children:[u[210]||""," ",Ge]}),m.jsx("div",{className:"cta-box__buttons",children:m.jsx("div",{className:"button-wrapper",children:m.jsx("button",{className:"button fc-333",children:m.jsx("div",{className:"button__content",children:m.jsxs("span",{className:"button__text",children:[u[283]||""," ",s?.credits||0," ",u[48]||""]})})})})}),m.jsx("div",{className:"cta-box__additional",children:u[50]||""})]})})]}),z&&m.jsxs("div",{className:"chat-initial",children:[m.jsx("div",{className:"chat-blocker-stub"}),m.jsx("div",{className:"chat-blocker js-blocker qa-blocker",children:m.jsxs("div",{className:"cta-box",children:[m.jsx("div",{className:"cta-box__content",style:{display:D?"none":"block"},children:m.jsxs("div",{className:"chat-blocker-info",children:[m.jsx("div",{className:"chat-blocker-info__image",children:m.jsx("div",{className:"gift gift--sm",children:m.jsx("div",{className:"gift__image",children:m.jsx("img",{src:"img/chat-initial-gift.png",alt:""})})})}),m.jsxs("div",{className:"chat-blocker-info__text",children:[u[211]||"",":"]})]})}),m.jsx("div",{className:"cta-box__buttons",children:m.jsx("button",{className:"button button--primary",onClick:Ri,children:m.jsx("div",{className:"button__content",children:m.jsx("span",{className:"button__text",children:u[161]||""})})})})]})})]}),!V&&!ie&&m.jsxs("div",{className:"chat-v2__controls is-chat-messaging loader-bg-fafafa",children:[m.jsxs("div",{className:"chat-input loader-bg-fafafa",children:[m.jsx("div",{className:"chat-input__mirror"}),!N&&m.jsx("input",{id:"chat-input-textarea",ref:Xt,className:"chat-input__textarea chat-i-txt",placeholder:u[282]||u[111]||"Escribir mensaje",value:k,onChange:fe=>{_(fe.target.value),xt(fe.target.value)},onKeyUp:fe=>{xt(k)},onKeyDown:fe=>{if(fe.key==="Enter"&&!fe.shiftKey){fe.preventDefault();const Ae=k.trim();Ae.length>0&&(rt(Ae),_(""))}}}),N&&m.jsx("input",{className:"chat-input__textarea loader-bg-fafafa",placeholder:u[111]||"",value:O,onChange:fe=>{R(fe.target.value)}}),m.jsx("label",{htmlFor:"chat-input-textarea",className:"chat-input__label"})]}),m.jsxs("div",{className:"chat-switchers top-45px",children:[m.jsx("div",{className:"chat-switchers__item",onClick:()=>We(!He),children:m.jsx("i",{className:"icon-svg icon-svg--stretch",children:m.jsx("svg",{viewBox:"0 0 64 64",id:"icon-control-text",width:"100%",height:"100%",children:m.jsx("path",{d:"M57.21 36l-.06.01c-2.12 1.21-5.2 1.48-7.92 1.73l-.28.02c-5.52.5-8.32 2.8-8.32 6.85 0 3.88 2.4 5.85 7.16 5.85 1.42 0 6.31-.5 9.52-7.01l.01-7.35a.1.1 0 0 0-.1-.1M48 52.68c-6.1 0-9.6-3.02-9.6-8.29 0-5.39 3.75-8.69 10.56-9.3l.4-.03c3.23-.3 7.66-.68 8.27-2.77v-2.06c0-1.6-.52-2.77-1.63-3.71-1.2-1.02-3.29-1.54-6.2-1.54-4.69 0-7.33 1.97-7.86 5.84l-.02.11-2.36-.25.02-.11c.67-5.12 4.3-7.94 10.22-7.94 3.54 0 6.08.68 7.74 2.1a6.89 6.89 0 0 1 2.46 5.5v13.22l.04.01.02.14-.07.15v3.16c0 .3.03.6.04.9l.02.35c.02.37.09.74.2 1.1.11.31.3.57.55.76.24.2.46.3.93.3.3 0 1.03-.04 1.31-.11l.38-.07h.09l.07.1.42 2.08-.22.1c-.75.25-1.6.25-2.05.25-.95 0-1.7-.25-2.39-.79a3.97 3.97 0 0 1-1.33-1.88c-.2-.57-.3-1.15-.33-1.73l-.03-.67C54 52.19 49.7 52.69 48 52.69M16.84 11L0 52.9h2.6L9.2 36.43h17.65l6.61 16.45h2.6L19.23 11h-2.4zm1.2 3.5l7.56 19.77H10.47l7.57-19.78z",fill:"#111"})})})}),m.jsx("div",{className:"chat-switchers__item",onClick:()=>xi(1),children:m.jsx("i",{className:"icon-svg icon-svg--stretch",children:m.jsx("svg",{viewBox:"0 0 64 64",id:"icon-control-camera",width:"100%",height:"100%",children:m.jsx("path",{d:"M31.92 44.81a9.34 9.34 0 0 1 0-18.66 9.34 9.34 0 0 1 0 18.66zm0-21.33a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm25.41 24.6c0 3.17-2.75 6.25-6.04 6.25H12.54c-3.28 0-5.87-3.08-5.87-6.26v-22.6c0-3.18 2.59-5.8 5.87-5.8H16c1.04 0 3.32-.59 3.75-1.53l2.58-5.3c.4-.87 1.3-1.17 2.3-1.17h14.6c.99 0 1.9.3 2.3 1.17l2.57 5.42c.44.95 2.72 1.4 3.75 1.4h3.45c3.29 0 6.04 2.63 6.04 5.8v22.61zM46.51 17l-2.58-5.3C43.1 9.9 41.25 9 39.22 9h-14.6c-2.03 0-3.88.9-4.72 2.7L17.32 17h-4.78A8.49 8.49 0 0 0 4 25.46v22.61C4 52.73 7.78 57 12.54 57H51.3c4.76 0 8.71-4.27 8.71-8.93v-22.6C60 20.8 56.05 17 51.29 17H46.5z",fill:"#111",fillRule:"evenodd"})})})}),m.jsx("div",{className:"chat-switchers__item",onClick:Ri,children:m.jsx("i",{className:"icon-svg icon-svg--stretch",children:m.jsx("svg",{viewBox:"0 0 64 64",id:"icon-control-gift",width:"100%",height:"100%",children:m.jsx("path",{d:"M30.68 31.67v22.66H16.21a2.65 2.65 0 0 1-2.63-2.66v-20h-2.63v20A5.3 5.3 0 0 0 16.2 57H47.8a5.3 5.3 0 0 0 5.26-5.33v-20h-2.63v20a2.65 2.65 0 0 1-2.63 2.66H33.32V31.67h19.73c2.18 0 3.95-1.8 3.95-4v-5.34c0-2.2-1.77-4-3.95-4h-8.59A8.03 8.03 0 0 0 46.47 13c0-4.42-3.53-8-7.9-8A7.86 7.86 0 0 0 32 8.58 7.86 7.86 0 0 0 17.53 13c0 2.05.76 3.92 2 5.33h-8.58a3.97 3.97 0 0 0-3.95 4v5.34c0 2.2 1.77 4 3.95 4h19.73zm7.9-24A5.3 5.3 0 0 1 43.84 13a5.3 5.3 0 0 1-5.26 5.33A5.3 5.3 0 0 1 33.32 13a5.3 5.3 0 0 1 5.26-5.33zm-13.16 0A5.3 5.3 0 0 1 30.68 13a5.3 5.3 0 0 1-5.26 5.33A5.3 5.3 0 0 1 20.16 13a5.3 5.3 0 0 1 5.26-5.33zM30.68 29H10.95c-.73 0-1.32-.6-1.32-1.33v-5.34c0-.73.6-1.33 1.32-1.33h19.73v8zm2.64 0h19.73c.73 0 1.32-.6 1.32-1.33v-5.34c0-.73-.6-1.33-1.32-1.33H33.32v8z",fill:"#111",fillRule:"evenodd"})})})}),m.jsx("div",{className:"chat-switchers__item",onClick:ki,children:m.jsx("i",{className:"icon-svg icon-svg--stretch",children:m.jsxs("svg",{viewBox:"0 0 64 64",id:"icon-control-gif",width:"100%",height:"100%",children:[m.jsx("path",{d:"M5.64 20.4v25.98c0 4.3 3.53 7.8 7.9 7.8h36.92c4.36 0 7.9-3.5 7.9-7.8V20.4c0-4.31-3.53-7.8-7.9-7.8H13.54c-4.36 0-7.9 3.49-7.9 7.8zM3 20.4C3 14.65 7.72 10 13.54 10h36.92C56.28 10 61 14.66 61 20.4v25.98c0 5.74-4.72 10.4-10.54 10.4H13.54A10.47 10.47 0 0 1 3 46.37V20.4z",fill:"#111"}),m.jsx("path",{d:"M41.23 25.6h7.9V23H38.6V43.77h2.64v-9.15h3.95v-2.49h-3.95v-6.55zM25.4 32.13v-.05h2.64v10.94c0 .41-.35.75-.75.75h-8.12a3 3 0 0 1-3-3V26a3 3 0 0 1 3-3h8.12c.41 0 .75.33.75.75v1.85h-7.73c-.84 0-1.5.67-1.5 1.5v12.6c0 .82.67 1.5 1.5 1.5h5.09v-6.56h-2.64v-2.49h2.64zM32 22.99h2.64v20.8H32v-20.8z",fill:"#111"})]})})})]}),k.length===0&&m.jsx("div",{className:"chat-send comforta fc-999",children:m.jsx("img",{src:`${ot}mobile/twigo/img/chat-send-inactive.svg`,alt:""})}),k.length>0&&m.jsx("div",{className:"chat-send comforta fc-333",onClick:()=>{rt(k),_("")},children:m.jsx("img",{src:`${ot}mobile/twigo/img/chat-send.svg`,alt:""})})]}),m.jsx(Wt,{className:"twigo-chat-content",ref:Bt,children:m.jsx("div",{className:"chat visible animated fadeIn",style:{paddingTop:"100px"},children:m.jsx("div",{className:"chat-v2",children:m.jsxs("div",{children:[b.length===0&&m.jsxs("div",{className:"ice-breaker",children:[m.jsx("div",{className:"ice-breaker__userpic",children:m.jsx("div",{className:"brick",children:m.jsx("div",{className:"brick__image",style:{backgroundImage:`url(${Le})`}})})}),m.jsxs("div",{className:"ice-breaker__text",children:[u[212]||""," ",Ge," ",u[213]||"","."]})]}),m.jsxs("div",{className:"chat-v2__messages",children:[_e&&m.jsxs("div",{className:"chat-v2__status qa-chat-section-title",onClick:()=>pt(15),children:[u[106]||""," ",Xe," ",u[107]||""]}),E&&m.jsx("div",{className:"contact-list__loader_inline mt-150",children:m.jsxs("div",{className:"loader small grey centered",children:[m.jsx("div",{className:"first dot"}),m.jsx("div",{className:"second dot"}),m.jsx("div",{className:"third dot"})]})}),b.filter((fe,Ae)=>b.length<=we||Ae>=b.length-we).map((fe,Ae)=>m.jsxs("div",{className:`chat-message ${fe.isMe?"chat-message--out chat-message--blue":"chat-message--in chat-message--grey"}`,children:[m.jsxs("div",{className:"chat-message__container",children:[fe.isMe&&m.jsx("div",{id:"me"}),!fe.isMe&&m.jsx("div",{id:"you"}),m.jsxs("div",{className:`chat-message__text ${fe.type==="image"?"noBackground":""}`,children:[fe.type!=="image"&&fe.type!=="gif"&&fe.type!=="gift"&&m.jsx("div",{className:`chat-message__text_ ${fe.isMe?"twigo-gradient2 box-shadow-chat":"box-shadow-chat"}`,dangerouslySetInnerHTML:{__html:fe.body.replace(/\n/g,"<br>")}}),(fe.type==="image"||fe.type==="gif"||fe.type==="gift")&&m.jsx("img",{src:fe.body,className:"twigo-chat-gif",alt:"",onClick:()=>{}})]})]}),Number(fe.seen)===0&&m.jsx("div",{className:"chat-message__status",children:u[214]||""}),Number(fe.seen)===1&&m.jsx("div",{className:"chat-message__status",children:u[215]||""})]},Ae)),y.map((fe,Ae)=>m.jsxs("div",{className:`chat-message js-chat-message ${fe.isMe?"chat-message--out chat-message--blue":"chat-message--in chat-message--grey"}`,children:[m.jsx("div",{className:"chat-message__container",children:m.jsxs("div",{className:`chat-message__text ${fe.type==="image"?"noBackground":""}`,children:[fe.type!=="image"&&fe.type!=="gif"&&fe.type!=="gift"&&m.jsx("div",{className:`chat-message__text_ ${fe.isMe?"twigo-gradient2":""}`,dangerouslySetInnerHTML:{__html:fe.body.replace(/\n/g,"<br>")}}),(fe.type==="image"||fe.type==="gif"||fe.type==="gift")&&m.jsx("img",{src:fe.body,className:"twigo-chat-gif",alt:"",onClick:()=>{}})]})}),Number(fe.seen)===0&&m.jsx("div",{className:"chat-message__status",children:u[214]||""}),Number(fe.seen)===1&&m.jsx("div",{className:"chat-message__status",children:u[215]||""})]},`new-${Ae}`)),Z&&m.jsx("div",{className:"chat-message js-chat-message chat-message--grey",children:m.jsx("div",{className:"chat-message__container mt-5px",children:m.jsx("div",{className:"chat-message__text",children:m.jsx("div",{className:"chat-message__text_",children:m.jsxs("div",{className:"loader small grey",children:[m.jsx("div",{className:"first dot"}),m.jsx("div",{className:"second dot"}),m.jsx("div",{className:"third dot"})]})})})})})]}),m.jsx("div",{className:"chat-v2__spacing-stub h-140"})]})})})}),nt&&m.jsx("div",{className:"wrapper-reward",children:m.jsxs("div",{className:"modal-reward modal--congratulations animated fadeIn",children:[m.jsxs("div",{className:"modal-reward-top",children:[m.jsx("div",{className:"klose animated fadeInUp",onClick:()=>Pt(!1),children:m.jsx(af,{icon:Iv,className:"close-gift-chat"})}),m.jsx("img",{className:"modal-reward-icon u-imgResponsive animated fadeInUp",src:Ce,alt:""}),m.jsxs("div",{className:"modal-reward-header animated fadeInUp comforta",children:[u[108]||""," ",Ge]}),m.jsxs("div",{className:"modal-reward-subheader animated fadeInUp comforta",children:[u[109]||""," ",m.jsx("strong",{children:Ie})," ",u[48]||""]})]}),m.jsx("div",{className:"modal-reward-bottom",onClick:()=>{Ke(Ce,Ie),Pt(!1)},children:m.jsx("button",{className:"modal-reward-btn u-btn u-btn--danger mi-pollita gradient32 comforta font-w-700",children:u[110]||""})})]})}),N&&m.jsxs("div",{className:"giphy-container bottom-80",children:[U&&m.jsx("div",{className:"text-center",children:m.jsx(Wi,{name:"circular"})}),m.jsx("div",{className:"scroll-horizontal",children:M.map((fe,Ae)=>m.jsx("div",{className:"text-center scroll-item",onClick:()=>Re(fe.images?.fixed_height_small?.url||fe.images?.preview_gif?.url||""),children:m.jsx("img",{src:fe.images?.fixed_height_small?.url||fe.images?.preview_gif?.url||"",alt:""})},Ae))})]}),D&&m.jsx("div",{className:"gift-container bottom-80",children:m.jsx("div",{className:"scroll-horizontal",children:yt.map((fe,Ae)=>m.jsx("div",{className:"text-center scroll-item",onClick:()=>Ye(fe.icon,Number(fe.price)),children:m.jsx("img",{src:fe.icon||"",alt:""})},Ae))})}),V&&m.jsx("div",{children:m.jsxs("div",{className:"credits-section text-center chat-limit",children:[m.jsx("h5",{className:"mi-pollita fc-BFC5D5",children:u[112]||""}),m.jsx("div",{className:"wrapper text-center",children:m.jsx("div",{className:"pos-rlt",children:m.jsx("div",{className:"thumb-xxl rounded profileP border-profile",style:{backgroundImage:`url(${Le})`,height:`${kt}px`,width:`${kt}px`}})})}),m.jsxs("h1",{children:[u[46]||""," ",u[47]||""]}),m.jsx("h4",{onClick:()=>rn.openCreditsModal(),children:u[113]||""}),m.jsx("center",{children:m.jsx("span",{className:"spotlight-me btn-chat-limit",onClick:()=>{},children:u[114]||""})}),m.jsx("br",{}),m.jsxs("h4",{children:[u[208]||""," ",m.jsx("b",{children:Xi})," ",u[48]||""]})]})}),ie&&m.jsx("div",{className:"only-premium chat-premium",children:m.jsxs("div",{className:"credits-section text-center chat-premium-content",children:[m.jsx("h5",{className:"mi-pollita fc-BFC5D5",children:u[112]||""}),m.jsx("div",{className:"wrapper text-center",children:m.jsx("div",{className:"pos-rlt",children:m.jsx("div",{className:"thumb-xxl rounded profileP border-profile",style:{backgroundImage:`url(${Le})`,height:`${kt}px`,width:`${kt}px`}})})}),m.jsx("h1",{children:u[112]||""}),m.jsx("h4",{children:u[115]||""}),m.jsx("center",{children:m.jsx("span",{className:"spotlight-me btn-chat-limit",onClick:()=>Yt(!0),children:u[114]||""})}),m.jsx("br",{}),m.jsxs("h4",{children:[u[208]||""," ",m.jsx("b",{children:Xi})," ",u[48]||""]})]})}),m.jsx("input",{ref:Ut,type:"file",id:"uploadSendPhoto",style:{display:"none"},accept:"image/*",onChange:te}),m.jsx(Bn,{isOpen:Te,onDidDismiss:()=>Me(!1),buttons:[{text:u[15]||"",handler:()=>{$t(!0)}},{text:u[16]||"",handler:async()=>{if(s?.id&&p?.id){const fe=`${s.id},${p.id}`;await Ne.query("del_conv",fe,i),e()}}},{text:`${u[17]||""} ${Ge}`,handler:async()=>{if(window.confirm(`${u[17]||""} ${Ge}?
${u[18]||""} ${Ge}?`)&&s?.id&&p?.id){const fe=`${s.id},${p.id}`;await Ne.query("block",fe,i),setTimeout(()=>{e()},550)}}},{text:u[2]||"Cancel",role:"cancel"}]}),vt&&m.jsx(tu,{isOpen:vt,onClose:()=>Yt(!1)}),ii&&p&&m.jsx(Da,{isOpen:ii,onClose:()=>$t(!1),userId:p.id})]})})};function DR({age:n,gender:e,className:t}){if(!n)return null;const s=(typeof e=="string"?parseInt(e):e)==2,o=t||`meet-user-gender twigo-font ${s?"twigo-gradient2":"twigo-gradient3"}`;return m.jsx("span",{className:o,children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"37",height:"16",viewBox:"0 0 37 16",children:m.jsxs("g",{children:[m.jsx("text",{transform:"translate(17 13)",fill:"#fff",fontSize:"10",fontFamily:"SegoeUI, Segoe UI",letterSpacing:"0.009em",children:m.jsx("tspan",{x:"0",y:"0",children:n})}),s?m.jsxs("g",{id:"woman",transform:"translate(6 3)",children:[m.jsx("rect",{id:"Gender_woman_background","data-name":"Gender/woman background",width:"10",height:"10",fill:"none"}),m.jsx("path",{id:"Oval_2","data-name":"Oval 2",d:"M2.857,10V9.285H1.428V7.857H2.857V7.071a3.571,3.571,0,1,1,1.429,0v.786H5.714V9.285H4.286V10ZM1.428,3.572A2.143,2.143,0,1,0,3.572,1.428,2.145,2.145,0,0,0,1.428,3.572Z",transform:"translate(1.429)",fill:"#fff"})]}):m.jsxs("g",{id:"man",transform:"translate(6 3)",children:[m.jsx("rect",{id:"Gender_man_background","data-name":"Gender/man background",width:"10",height:"10",fill:"none"}),m.jsx("path",{id:"Oval_2","data-name":"Oval 2",d:"M2.786,11.286V7.056a3.571,3.571,0,1,1,1.542.006l-.008,4.259ZM1.428,3.572A2.143,2.143,0,1,0,3.572,1.428,2.145,2.145,0,0,0,1.428,3.572Z",transform:"translate(3.99 11.061) rotate(-135)",fill:"#fff"}),m.jsx("rect",{id:"Rectangle_3","data-name":"Rectangle 3",width:"4.286",height:"1.429",transform:"translate(5.714)",fill:"#fff"}),m.jsx("rect",{id:"Rectangle_3-2","data-name":"Rectangle 3",width:"4.286",height:"1.429",transform:"translate(10) rotate(90)",fill:"#fff"})]})]})})})}function QH(){const{settings:n}=Ti(),{user:e,loading:t,setUser:i}=Ki(),{showNotification:s}=In(),r=Yi(),o=wn(),[l,d]=C.useState([]),[u,f]=C.useState(0),[p,b]=C.useState(!0),[v,y]=C.useState(!0),[w,E]=C.useState(!1),[T,k]=C.useState(!1),[_,O]=C.useState(!1),[R,M]=C.useState(null),[P,N]=C.useState(!1),[L,D]=C.useState(0),[$,U]=C.useState(!1),[G,Z]=C.useState(!1),[se,z]=C.useState(null),Y=C.useRef(null),V=C.useRef(0),q=C.useRef(0),ie=C.useRef(!1),j=C.useRef(0),H=C.useRef(!1);C.useEffect(()=>{if(e&&!t){K();const ee=n?.plugins?.rewards?.newAccountFreeCredit||0;e.registerReward==="noData"&&ee>0&&U(!0)}const we=()=>{const ee=window.innerHeight-120;D(ee),document.documentElement.style.setProperty("--explore-card-height",`${ee}px`),document.documentElement.style.setProperty("--explore-card-height-offset",`${ee-70}px`)};return we(),window.addEventListener("resize",we),()=>window.removeEventListener("resize",we)},[e,t]);const K=async()=>{if(e?.id)try{b(!0);const we=await Ne.game("game",e.id,n);if(we.game&&Array.isArray(we.game)&&we.game.length>0){const ee=we.game.filter(_e=>_e.id!==e.id);ee.length>0&&(console.log("First card structure:",ee[0]),console.log("Age:",ee[0].full?.age,ee[0].age),console.log("Gender:",ee[0].full?.gender,ee[0].gender)),d(ee),y(ee.length>0),f(0)}else y(!1)}catch(we){console.error("Error loading cards:",we),y(!1)}finally{b(!1)}},X=async(we,ee)=>{if(console.log(e),!!e?.id)try{await Ne.meet("game_like",e.id,we,ee,n)}catch(_e){console.error("Error performing game action:",_e)}},ae=()=>{const we=n?.plugins?.discover?.creditForLike||0;return parseInt(String(we),10)||0},re=async()=>{if(P||!l[u]||!e)return;const we=l[u],ee=ae();if(console.log(ee),ee>0){const _e=rn.hasEnoughCredits(ee,!1);if(console.log(_e),!_e){rn.openCreditsModal();return}await rn.wasteCredit(ee,"Credits for like",!0,!0)}await X(we.id,1),we.isFan===1&&(M(we),k(!0)),u<l.length-1?f(u+1):await K()},ge=async()=>{if(P||!l[u])return;N(!0),setTimeout(()=>N(!1),900);const we=l[u];await X(we.id,0),u<l.length-1?f(u+1):await K()},Se=we=>{ie.current=!0,H.current=!1,j.current=we.touches[0].clientX,V.current=0,q.current=0},De=we=>{if(!ie.current||!Y.current)return;const _e=we.touches[0].clientX-j.current;if(Math.abs(_e)>10&&(H.current=!0),q.current=V.current-50,_e<q.current)return!1;V.current=_e;const Be=V.current/10;Y.current.style.transform=`translateX(${V.current}px) rotate(${Be}deg)`,Y.current.style.webkitTransform=`translateX(${V.current}px) rotate(${Be}deg)`},ze=we=>{q.current=0,V.current=0,ie.current=!1,H.current=!0,we<0?ge():re()},Qe=()=>{if(!ie.current||!Y.current)return;const we=V.current;we>100||we<-100?ze(we):(ie.current=!1,Y.current.style.transform="translateX(0px)",Y.current.style.webkitTransform="translateX(0px)",V.current=0,q.current=0,setTimeout(()=>{H.current=!1},100))},nt=we=>we?we.startsWith("http")?we:`${n?.siteUrl||""}${we.startsWith("/")?we:`/${we}`}`:"",Pt=we=>{ie.current||H.current||O(!0)},Ce=we=>{if(ie.current||H.current)return;const ee=we.full?.name||we.name||"",_e=we.full?.age??we.age??0,Be=typeof _e=="number"?_e:Number(_e)||0,Xe=we.full?.city||we.city||"",tt=we.status??0,He=typeof tt=="number"?tt:Number(tt)||0,We=we.photoBig||we.discoverPhoto||we.photo||"",vt=nt(We);z({id:we.id,name:ee,photo:vt,profile_photo:vt,age:Be,city:Xe,status:He}),Z(!0)},at=async()=>{if(!e?.id)return;const we=n?.plugins?.rewards?.newAccountFreeCredit||0;if(!(we<=0)){console.log("getRegisterReward");try{U(!1);const ee=n?.site_theme?.notification_inapp_credits_icon?.val||"",_e=n?.siteUrl||"",Be=ee?ee.startsWith("http")?ee:`${_e}${ee.startsWith("/")?ee:`/${ee}`}`:"",Xe=`${we} ${o[123]?.text||o[123]||"credits"}`;s(Xe,"success",2500,Be);const tt=`${e.id},${we},reward,Reward credits for register,newAccountFreeCredit`,He=await Ne.query("updateCredits",tt,n);if(He.user){const We={...e,registerReward:"Yes",credits:He.user.credits||e.credits+we};i(We),localStorage.setItem("user",JSON.stringify(We)),window.user=We,window.user_info=We}else{const We={...e,registerReward:"Yes",credits:(e.credits||0)+we};i(We),localStorage.setItem("user",JSON.stringify(We)),window.user=We,window.user_info=We}try{new Audio(`${_e}mobile/sounds/coin.wav`).play().catch(()=>{})}catch{}}catch(ee){console.error("Error claiming register reward:",ee)}}},Ie=l[u],et=n?.siteUrl||"";return C.useEffect(()=>{if(Ie&&Y.current){Y.current.style.transition="none",Y.current.style.transform="translateX(0px) rotate(0deg)",Y.current.style.webkitTransform="translateX(0px) rotate(0deg)",Y.current.style.opacity="1",V.current=0,q.current=0,ie.current=!1,H.current=!1;const we=Y.current.querySelector(".multimedia__image.profilePhoto");if(we){const ee=nt(Ie.discoverPhoto||Ie.photo);we.style.backgroundImage=`url(${ee})`}}},[Ie,u]),t||p?m.jsx($i,{children:m.jsx(Wt,{fullscreen:!0,className:"twigo-gradient2 mt--20",children:m.jsx("div",{className:"page-container twigo-gradient1",children:m.jsx("div",{className:"page encounters visible bg-none",children:m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:m.jsx(Wi,{})})})})})}):m.jsx($i,{children:m.jsxs(Wt,{fullscreen:!0,className:"twigo-gradient2 mt--20",scrollY:!1,children:[$&&m.jsx("div",{className:"profile-parent-view vivify fadeIn",style:{position:"absolute",zIndex:1e3},children:m.jsxs("div",{className:"encounters__card exploreRewardCard",onClick:at,style:{height:`${L+200}px`,left:"0px"},children:[m.jsx("div",{className:"click-overlay",onClick:at}),m.jsxs("div",{className:"encounters-message exploreRewardCard-inter",children:[m.jsx("div",{className:"coin exploreRewardCard-coin",onClick:at,children:m.jsxs("div",{className:"front jump",id:"coinJump",children:[m.jsx("div",{className:"star"}),m.jsx("span",{className:"creditsAmount",children:n?.plugins?.rewards?.newAccountFreeCredit||0}),m.jsxs("div",{className:"shapes",children:[m.jsx("div",{className:"shape_l"}),m.jsx("div",{className:"shape_r"}),m.jsx("span",{className:"top"}),m.jsx("span",{className:"bottom",children:n?.site_name||""})]})]})}),m.jsxs("span",{className:"comforta exploreRewardCard-span",children:[o[519]?.text||o[519]||"Welcome to"," ",n?.site_name||"",",",o[520]?.text||o[520]||" get"," ",m.jsx("strong",{children:n?.plugins?.rewards?.newAccountFreeCredit||0})," ",o[73]?.text||o[73]||"credits"]})]})]})}),m.jsx("div",{className:"page-container twigo-gradient1",children:m.jsxs("div",{className:"page encounters visible bg-none",children:[m.jsx("div",{className:"view-title",children:m.jsx("div",{className:"landing-logo",children:m.jsx("img",{width:"130",src:n?.site_theme?.logo?.val||"",alt:"Logo"})})}),m.jsx("div",{className:"view-title-icon",style:{zIndex:5},onClick:()=>E(!0),children:m.jsx("img",{src:`${et}mobile/twigo/img/btn-filter.svg`,alt:"Settings"})}),!v&&m.jsx("div",{className:"profile-parent-view vivify fadeIn",children:m.jsx("div",{className:"encounters__card exploreNoResultText","data-height":L,children:m.jsxs("div",{className:"encounters-message",children:[m.jsx("h1",{className:"comforta exploreNoResultText-h1",children:r[162]||"No more profiles"}),m.jsxs("span",{className:"exploreNoResultText-span",children:[r[163]||"Try adjusting your filters",".",m.jsx("br",{}),r[164]||"Want to see more profiles","?"]}),m.jsx("button",{className:"button btn-primary exploreNoResultText-btn",onClick:()=>E(!0),children:m.jsx("div",{className:"button__content",children:m.jsx("span",{className:"button__text comforta",children:r[165]||"Adjust Filters"})})})]})})}),v&&Ie&&m.jsx("div",{className:"profiles-wrapper exploreResultOK",children:m.jsxs("div",{className:"encounters__card exploreResultOK-card","data-height":L-70,children:[m.jsx("div",{className:"box-shadow-credits vivify fadeIn delay-150 exploreResultOK-shadow",id:"discoverOpacityBg1"}),m.jsx("div",{className:"box-shadow-credits vivify fadeIn delay-300 exploreResultOK-shadow2",id:"discoverOpacityBg2"}),!p&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"profile-action vivify popInRight delay-300 box-shadow-credits exploreResultOK-btn-like",id:"likeBtn",onClick:re,children:m.jsx("i",{className:"icon-svg icon-svg--stretch",children:m.jsxs("svg",{viewBox:"0 0 64 64",id:"icon-floating-yes",width:"72px",height:"72px",children:[m.jsx("circle",{fill:"#fff",cx:"32",cy:"32",r:"32"}),m.jsx("path",{d:"M18.5 29.7c0-4.25 3.43-7.7 7.65-7.7A7.67 7.67 0 0 1 32 24.73 7.67 7.67 0 0 1 37.85 22a7.68 7.68 0 0 1 7.65 7.7C45.5 36.57 36.46 45 32 45s-13.5-8.42-13.5-15.3z",fill:"#fe8565"})]})})}),m.jsx("div",{className:"profile-action vivify popInLeft delay-300 box-shadow-credits exploreResultOK-btn-nolike",id:"nolikeBtn",onClick:ge,children:m.jsx("i",{className:"icon-svg icon-svg--stretch",children:m.jsxs("svg",{viewBox:"0 0 64 64",id:"icon-floating-no",width:"72px",height:"72px",children:[m.jsx("circle",{fill:"rgba(255,255,255,1)",cx:"32",cy:"32",r:"32"}),m.jsx("path",{d:"M32 29.82l-7.37-7.37a1.54 1.54 0 1 0-2.18 2.18L29.83 32l-7.38 7.37a1.54 1.54 0 1 0 2.18 2.18L32 34.17l7.37 7.38a1.54 1.54 0 1 0 2.18-2.18L34.17 32l7.38-7.37a1.54 1.54 0 1 0-2.18-2.18L32 29.83z",fill:"#C4C4C4"})]})})}),m.jsx("div",{className:"profile-action vivify popInRight box-shadow-credits delay-150 exploreResultOK-btn-chat",onClick:()=>Ce(Ie),children:m.jsx("i",{className:"icon-svg icon-svg--stretch",children:m.jsxs("svg",{className:"icon__content icon__content--inactive",viewBox:"0 0 64 64",id:"icon-floating-chat",width:"100%",height:"100%",children:[m.jsx("circle",{fill:"#FFF",cx:"32",cy:"32",r:"32"}),m.jsx("path",{d:"M45 45c-1.5 0-4.59-.26-7.6-1.17A12.95 12.95 0 0 1 32 45a13 13 0 1 1 10.2-4.93A9.22 9.22 0 0 0 45 45zM27 33.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z",fill:"#1AB0FF",fillRule:"nonzero"})]})})})]}),m.jsxs("div",{className:"encounters-card",id:"discoverGame",ref:Y,onTouchStart:Se,onTouchMove:De,onTouchEnd:Qe,style:{touchAction:"pan-y"},children:[m.jsx("div",{className:"encounters-card__photos",id:"discoverPhotos",onClick:()=>Pt(),children:m.jsxs("div",{className:"slider-gallery",children:[p&&m.jsxs("div",{className:"loader large grey centered",children:[m.jsx("div",{className:"first dot"}),m.jsx("div",{className:"second dot"}),m.jsx("div",{className:"third dot"})]}),m.jsx("div",{className:"slider-gallery__pages transform-0",children:m.jsx("div",{className:"slider-gallery__page is-active",children:m.jsx("div",{className:"multimedia",style:{display:p?"none":void 0},children:m.jsx("div",{className:"multimedia__image profilePhoto bg-fafafa"})})})})]})}),m.jsx("div",{className:"encounters-card__floating",id:"discoverNameContainer",style:{display:p?"none":void 0},children:m.jsxs("div",{className:"encounters-card__info box-shadow-credits",onClick:()=>Pt(),children:[m.jsx("div",{className:"encounters-card__name",children:m.jsxs("div",{className:"profile-user-info",children:[m.jsx("div",{className:"profile-user-info__text twigo-font",children:m.jsx("span",{className:"profile-user-info__name twigo-font",children:Ie.full?.name||Ie.name||""})}),m.jsx("div",{className:"profile-user-info__meta twigo-font ml-10",children:m.jsx(DR,{age:Ie.full?.age||Ie.age,gender:Ie.full?.gender??Ie.gender})}),m.jsx("div",{className:"profile-user-info__status",children:Ie.status===1&&m.jsx("div",{className:"csms-online-status csms-online-status--online ml-5"})})]})}),m.jsx("div",{className:"encounters-card__announce",children:m.jsxs("div",{children:[Ie.full?.city||"",", ",Ie.full?.country||""]})})]})}),m.jsx("div",{className:"encounters-card__floating explore-mobile-ad",id:"discoverAdContainer",style:{display:p?"none":void 0},children:m.jsx("div",{className:"encounters-card__info bg-none"})})]})]})})]})}),w&&m.jsx(jp,{isOpen:w,onClose:()=>{E(!1),K()}}),T&&m.jsx(RR,{isOpen:T,onClose:()=>{k(!1),M(null)},type:"matches"}),_&&Ie&&m.jsx(Da,{isOpen:_,onClose:()=>O(!1),userId:Ie.id}),se&&m.jsx(LR,{isOpen:G,onClose:()=>{Z(!1),z(null)},selectedUser:se})]})})}function ZH(){return m.jsxs($i,{children:[m.jsx(Ca,{children:m.jsx(Ra,{children:m.jsx(Ia,{children:"feed"})})}),m.jsx(Wt,{fullscreen:!0,children:m.jsx("div",{style:{padding:16},children:"feed"})})]})}function JH(n,e,t){return new Promise(i=>{n.toBlob(i,e,t)})}const eG=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function tG(n,e,t){const i=eG.exec(n),s=e.mimeType??i?.[1]??"plain/text";let r;if(i?.[2]!=null){const o=atob(decodeURIComponent(i[3])),l=new Uint8Array(o.length);for(let d=0;d<o.length;d++)l[d]=o.charCodeAt(d);r=[l]}else i?.[3]!=null&&(r=[decodeURIComponent(i[3])]);return new Blob(r,{type:s})}function Pk(n,e,t,i){return n===e?n:i===0?e:n+(e-n)*2**(-i/t)}const OR=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];class Rv extends Error{cause;isNetworkError;request;constructor(e,t=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}}class iG{#e;#t=!1;#n;#i;constructor(e,t){this.#i=e,this.#n=()=>t(e)}progress(){this.#t||this.#i>0&&(clearTimeout(this.#e),this.#e=setTimeout(this.#n,this.#i))}done(){this.#t||(clearTimeout(this.#e),this.#e=void 0,this.#t=!0)}}const Rh=()=>{};function nG(n,e={}){const{body:t=null,headers:i={},method:s="GET",onBeforeRequest:r=Rh,onUploadProgress:o=Rh,shouldRetry:l=()=>!0,onAfterResponse:d=Rh,onTimeout:u=Rh,responseType:f,retries:p=3,signal:b=null,timeout:v=3e4,withCredentials:y=!1}=e,w=k=>.3*2**(k-1)*1e3,E=new iG(v,u);function T(k=0){return new Promise(async(_,O)=>{const R=new XMLHttpRequest,M=P=>{l(R)&&k<p?setTimeout(()=>{T(k+1).then(_,O)},w(k)):(E.done(),O(P))};R.open(s,n,!0),R.withCredentials=y,f&&(R.responseType=f),b?.addEventListener("abort",()=>{R.abort(),O(new DOMException("Aborted","AbortError"))}),R.onload=async()=>{try{await d(R,k)}catch(P){P.request=R,M(P);return}R.status>=200&&R.status<300?(E.done(),_(R)):l(R)&&k<p?setTimeout(()=>{T(k+1).then(_,O)},w(k)):(E.done(),O(new Rv(R.statusText,R)))},R.onerror=()=>M(new Rv(R.statusText,R)),R.upload.onprogress=P=>{E.progress(),o(P)},i&&Object.keys(i).forEach(P=>{R.setRequestHeader(P,i[P])}),await r(R,k),R.send(t)})}return T()}function sG(n){const e=t=>"error"in t&&!!t.error;return n.filter(t=>!e(t))}function rG(n){return n.filter(e=>!e.progress?.uploadStarted||!e.isRestored)}function NR(n){return typeof n!="object"||n===null||!("nodeType"in n)?!1:n.nodeType===Node.ELEMENT_NODE}function Mk(n){if(typeof n=="string"){const e=document.querySelectorAll(n);return e.length===0?null:Array.from(e)}return typeof n=="object"&&NR(n)?[n]:null}function oG(n,e=document){return typeof n=="string"?e.querySelector(n):NR(n)?n:null}function PR(n){const e=n.lastIndexOf(".");return e===-1||e===n.length-1?{name:n,extension:void 0}:{name:n.slice(0,e),extension:n.slice(e+1)}}const Lv={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function MR(n){if(n.type)return n.type;const e=n.name?PR(n.name).extension?.toLowerCase():null;return e&&e in Lv?Lv[e]:"application/octet-stream"}function aG(n){return n.charCodeAt(0).toString(32)}function $k(n){let e="";return n.replace(/[^A-Z0-9]/gi,t=>(e+=`-${aG(t)}`,"/"))+e}function lG(n,e){let t=e||"uppy";return typeof n.name=="string"&&(t+=`-${$k(n.name.toLowerCase())}`),n.type!==void 0&&(t+=`-${n.type}`),n.meta&&typeof n.meta.relativePath=="string"&&(t+=`-${$k(n.meta.relativePath.toLowerCase())}`),n.data?.size!==void 0&&(t+=`-${n.data.size}`),n.data.lastModified!==void 0&&(t+=`-${n.data.lastModified}`),t}function cG(n){return!n.isRemote||!n.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(n.remote.provider)}function dG(n,e){if(cG(n))return n.id;const t=MR(n);return lG({...n,type:t},e)}function Fk(n,e){return n===!0?Object.keys(e):Array.isArray(n)?n:[]}const fd=Array.from;function uG(n){const e=fd(n.files);return Promise.resolve(e)}function $R(n,e,t,{onSuccess:i}){n.readEntries(s=>{const r=[...e,...s];s.length?queueMicrotask(()=>{$R(n,r,t,{onSuccess:i})}):i(r)},s=>{t(s),i(e)})}function FR(n,e){return n==null?n:{kind:n.isFile?"file":n.isDirectory?"directory":void 0,name:n.name,getFile(){return new Promise((t,i)=>n.file(t,i))},async*values(){const t=n.createReader();yield*await new Promise(s=>{$R(t,[],e,{onSuccess:r=>s(r.map(o=>FR(o,e)))})})},isSameEntry:void 0}}async function*jR(n,e,t=void 0){const i=()=>`${e}/${n.name}`;if(n.kind==="file"){const s=await n.getFile();s!=null?(s.relativePath=e?i():null,yield s):t!=null&&(yield t)}else if(n.kind==="directory")for await(const s of n.values())yield*jR(s,e?i():n.name);else t!=null&&(yield t)}async function*hG(n,e){const t=await Promise.all(Array.from(n.items,async i=>{let s;return s??=FR(typeof i.getAsEntry=="function"?i.getAsEntry():i.webkitGetAsEntry(),e),{fileSystemHandle:s,lastResortFile:i.getAsFile()}}));for(const{lastResortFile:i,fileSystemHandle:s}of t)if(s!=null)try{yield*jR(s,"",i)}catch(r){i!=null?yield i:e(r)}else i!=null&&(yield i)}async function fG(n,e){const t=e?.logDropError??Function.prototype;try{const i=[];for await(const s of hG(n,t))i.push(s);return i}catch{return uG(n)}}const pG={__proto__:null,"audio/mp3":"mp3","audio/mp4":"mp4","audio/ogg":"ogg","audio/webm":"webm","image/gif":"gif","image/heic":"heic","image/heif":"heif","image/jpeg":"jpg","image/webp":"webp","image/png":"png","image/svg+xml":"svg","video/mp4":"mp4","video/ogg":"ogv","video/quicktime":"mov","video/webm":"webm","video/x-matroska":"mkv","video/x-msvideo":"avi"};function P0(n){return[n]=n.split(";",1),pG[n]||null}function mG(n){for(;n&&!n.dir;)n=n.parentNode;return n?.dir}function M0(n){return n<10?`0${n}`:n.toString()}function ff(){const n=new Date,e=M0(n.getHours()),t=M0(n.getMinutes()),i=M0(n.getSeconds());return`${e}:${t}:${i}`}function gG(){if(typeof window>"u")return!1;const n=document.body;return!(n==null||window==null||!("draggable"in n)||!("ondragstart"in n)||!("ondrop"in n)||!("FormData"in window)||!("FileReader"in window))}function bG(n){return n?n.readyState!==0&&n.readyState!==4||n.status===0:!1}function jk(n){return n.startsWith("blob:")}function Bk(n){return n?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(n):!1}function vG(n){const e=Math.floor(n/3600)%24,t=Math.floor(n/60)%60,i=Math.floor(n%60);return{hours:e,minutes:t,seconds:i}}function yG(n){const e=vG(n),t=e.hours===0?"":`${e.hours}h`,i=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,s=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${i}${s}`}function xG(n){return new Error("Cancelled",{cause:n})}function Uk(n){if(n!=null){const e=()=>this.abort(n.reason);n.addEventListener("abort",e,{once:!0});const t=()=>{n.removeEventListener("abort",e)};this.then?.(t,t)}return this}class wG{#e=0;#t=[];#n=!1;#i;#s=1;#r;#a;limit;constructor(e){typeof e!="number"||e===0?this.limit=1/0:this.limit=e}#o(e){this.#e+=1;let t=!1,i;try{i=e()}catch(s){throw this.#e-=1,s}return{abort:s=>{t||(t=!0,this.#e-=1,i?.(s),this.#l())},done:()=>{t||(t=!0,this.#e-=1,this.#l())}}}#l(){queueMicrotask(()=>this.#f())}#f(){if(this.#n||this.#e>=this.limit||this.#t.length===0)return;const e=this.#t.shift();if(e==null)throw new Error("Invariant violation: next is null");const t=this.#o(e.fn);e.abort=t.abort,e.done=t.done}#c(e,t){const i={fn:e,priority:t?.priority||0,abort:()=>{this.#u(i)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},s=this.#t.findIndex(r=>i.priority>r.priority);return s===-1?this.#t.push(i):this.#t.splice(s,0,i),i}#u(e){const t=this.#t.indexOf(e);t!==-1&&this.#t.splice(t,1)}run(e,t){return!this.#n&&this.#e<this.limit?this.#o(e):this.#c(e,t)}wrapSyncFunction(e,t){return(...i)=>{const s=this.run(()=>(e(...i),queueMicrotask(()=>s.done()),()=>{}),t);return{abortOn:Uk,abort(){s.abort()}}}}wrapPromiseFunction(e,t){return(...i)=>{let s;const r=new Promise((o,l)=>{s=this.run(()=>{let d,u;try{u=Promise.resolve(e(...i))}catch(f){u=Promise.reject(f)}return u.then(f=>{d?l(d):(s.done(),o(f))},f=>{d?l(d):(s.done(),l(f))}),f=>{d=xG(f)}},t)});return r.abort=o=>{s.abort(o)},r.abortOn=Uk,r}}resume(){this.#n=!1,clearTimeout(this.#i);for(let e=0;e<this.limit;e++)this.#l()}#d=()=>this.resume();pause(e=null){this.#n=!0,clearTimeout(this.#i),e!=null&&(this.#i=setTimeout(this.#d,e))}rateLimit(e){clearTimeout(this.#a),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(this.#r=this.limit-1,this.limit=this.#s,this.#a=setTimeout(this.#h,e))}#h=()=>{if(this.#n){this.#a=setTimeout(this.#h,0);return}this.#s=this.limit,this.limit=Math.ceil((this.#r+this.#s)/2);for(let e=this.#s;e<=this.limit;e++)this.#l();this.#r-this.#s>3?this.#a=setTimeout(this.#h,2e3):this.#s=Math.floor(this.#s/2)};get isPaused(){return this.#n}}const $0=Symbol("__queue");function SG(n,e,t){const i=[];return n.forEach(s=>typeof s!="string"?i.push(s):e[Symbol.split](s).forEach((r,o,l)=>{r!==""&&i.push(r),o<l.length-1&&i.push(t)})),i}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function zk(n,e){const t=/\$/g,i="$$$$";let s=[n];if(e==null)return s;for(const r of Object.keys(e))if(r!=="_"){let o=e[r];typeof o=="string"&&(o=t[Symbol.replace](o,i)),s=SG(s,new RegExp(`%\\{${r}\\}`,"g"),o)}return s}const EG=n=>{throw new Error(`missing string: ${n}`)};class BR{locale;constructor(e,{onMissingKey:t=EG}={}){this.locale={strings:{},pluralize(i){return i===1?0:1}},Array.isArray(e)?e.forEach(this.#t,this):this.#t(e),this.#e=t}#e;#t(e){if(!e?.strings)return;const t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let i=this.locale.strings[e];if(i==null&&(this.#e(e),i=e),typeof i=="object"){if(t&&typeof t.smart_count<"u"){const r=this.locale.pluralize(t.smart_count);return zk(i[r],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof i!="string")throw new Error("string was not a string");return zk(i,t)}}const F0="...";function UR(n,e){if(e===0)return"";if(n.length<=e)return n;if(e<=F0.length+1)return`${n.slice(0,e-1)}`;const t=e-F0.length,i=Math.ceil(t/2),s=Math.floor(t/2);return n.slice(0,i)+F0+n.slice(-s)}var iu,hi,zR,ha,Hk,HR,GR,VR,ax,Dv,Ov,Rd={},qR=[],TG=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,nu=Array.isArray;function Qs(n,e){for(var t in e)n[t]=e[t];return n}function lx(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function cx(n,e,t){var i,s,r,o={};for(r in e)r=="key"?i=e[r]:r=="ref"?s=e[r]:o[r]=e[r];if(arguments.length>2&&(o.children=arguments.length>3?iu.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(r in n.defaultProps)o[r]===void 0&&(o[r]=n.defaultProps[r]);return pd(n,o,i,s,null)}function pd(n,e,t,i,s){var r={type:n,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++zR,__i:-1,__u:0};return s==null&&hi.vnode!=null&&hi.vnode(r),r}function kG(){return{current:null}}function Pr(n){return n.children}function Ms(n,e){this.props=n,this.context=e}function Yl(n,e){if(e==null)return n.__?Yl(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Yl(n):null}function WR(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return WR(n)}}function Gk(n){(!n.__d&&(n.__d=!0)&&ha.push(n)&&!ap.__r++||Hk!=hi.debounceRendering)&&((Hk=hi.debounceRendering)||HR)(ap)}function ap(){for(var n,e,t,i,s,r,o,l=1;ha.length;)ha.length>l&&ha.sort(GR),n=ha.shift(),l=ha.length,n.__d&&(t=void 0,i=void 0,s=(i=(e=n).__v).__e,r=[],o=[],e.__P&&((t=Qs({},i)).__v=i.__v+1,hi.vnode&&hi.vnode(t),dx(e.__P,t,i,e.__n,e.__P.namespaceURI,32&i.__u?[s]:null,r,s??Yl(i),!!(32&i.__u),o),t.__v=i.__v,t.__.__k[t.__i]=t,XR(r,t,o),i.__e=i.__=null,t.__e!=s&&WR(t)));ap.__r=0}function KR(n,e,t,i,s,r,o,l,d,u,f){var p,b,v,y,w,E,T,k=i&&i.__k||qR,_=e.length;for(d=_G(t,e,k,d,_),p=0;p<_;p++)(v=t.__k[p])!=null&&(b=v.__i==-1?Rd:k[v.__i]||Rd,v.__i=p,E=dx(n,v,b,s,r,o,l,d,u,f),y=v.__e,v.ref&&b.ref!=v.ref&&(b.ref&&ux(b.ref,null,v),f.push(v.ref,v.__c||y,v)),w==null&&y!=null&&(w=y),(T=!!(4&v.__u))||b.__k===v.__k?d=YR(v,d,n,T):typeof v.type=="function"&&E!==void 0?d=E:y&&(d=y.nextSibling),v.__u&=-7);return t.__e=w,d}function _G(n,e,t,i,s){var r,o,l,d,u,f=t.length,p=f,b=0;for(n.__k=new Array(s),r=0;r<s;r++)(o=e[r])!=null&&typeof o!="boolean"&&typeof o!="function"?(d=r+b,(o=n.__k[r]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?pd(null,o,null,null,null):nu(o)?pd(Pr,{children:o},null,null,null):o.constructor==null&&o.__b>0?pd(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=n,o.__b=n.__b+1,l=null,(u=o.__i=AG(o,t,d,p))!=-1&&(p--,(l=t[u])&&(l.__u|=2)),l==null||l.__v==null?(u==-1&&(s>f?b--:s<f&&b++),typeof o.type!="function"&&(o.__u|=4)):u!=d&&(u==d-1?b--:u==d+1?b++:(u>d?b--:b++,o.__u|=4))):n.__k[r]=null;if(p)for(r=0;r<f;r++)(l=t[r])!=null&&(2&l.__u)==0&&(l.__e==i&&(i=Yl(l)),ZR(l,l));return i}function YR(n,e,t,i){var s,r;if(typeof n.type=="function"){for(s=n.__k,r=0;s&&r<s.length;r++)s[r]&&(s[r].__=n,e=YR(s[r],e,t,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=Yl(n)),t.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function To(n,e){return e=e||[],n==null||typeof n=="boolean"||(nu(n)?n.some(function(t){To(t,e)}):e.push(n)),e}function AG(n,e,t,i){var s,r,o,l=n.key,d=n.type,u=e[t],f=u!=null&&(2&u.__u)==0;if(u===null&&n.key==null||f&&l==u.key&&d==u.type)return t;if(i>(f?1:0)){for(s=t-1,r=t+1;s>=0||r<e.length;)if((u=e[o=s>=0?s--:r++])!=null&&(2&u.__u)==0&&l==u.key&&d==u.type)return o}return-1}function Vk(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||TG.test(e)?t:t+"px"}function Lh(n,e,t,i,s){var r,o;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)t&&e in t||Vk(n.style,e,"");if(t)for(e in t)i&&t[e]==i[e]||Vk(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(VR,"$1")),o=e.toLowerCase(),e=o in n||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+r]=t,t?i?t.u=i.u:(t.u=ax,n.addEventListener(e,r?Ov:Dv,r)):n.removeEventListener(e,r?Ov:Dv,r);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function qk(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=ax++;else if(e.t<t.u)return;return t(hi.event?hi.event(e):e)}}}function dx(n,e,t,i,s,r,o,l,d,u){var f,p,b,v,y,w,E,T,k,_,O,R,M,P,N,L,D,$=e.type;if(e.constructor!=null)return null;128&t.__u&&(d=!!(32&t.__u),r=[l=e.__e=t.__e]),(f=hi.__b)&&f(e);e:if(typeof $=="function")try{if(T=e.props,k="prototype"in $&&$.prototype.render,_=(f=$.contextType)&&i[f.__c],O=f?_?_.props.value:f.__:i,t.__c?E=(p=e.__c=t.__c).__=p.__E:(k?e.__c=p=new $(T,O):(e.__c=p=new Ms(T,O),p.constructor=$,p.render=IG),_&&_.sub(p),p.props=T,p.state||(p.state={}),p.context=O,p.__n=i,b=p.__d=!0,p.__h=[],p._sb=[]),k&&p.__s==null&&(p.__s=p.state),k&&$.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=Qs({},p.__s)),Qs(p.__s,$.getDerivedStateFromProps(T,p.__s))),v=p.props,y=p.state,p.__v=e,b)k&&$.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),k&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(k&&$.getDerivedStateFromProps==null&&T!==v&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(T,O),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(T,p.__s,O)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(p.props=T,p.state=p.__s,p.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(U){U&&(U.__=e)}),R=0;R<p._sb.length;R++)p.__h.push(p._sb[R]);p._sb=[],p.__h.length&&o.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(T,p.__s,O),k&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(v,y,w)})}if(p.context=O,p.props=T,p.__P=n,p.__e=!1,M=hi.__r,P=0,k){for(p.state=p.__s,p.__d=!1,M&&M(e),f=p.render(p.props,p.state,p.context),N=0;N<p._sb.length;N++)p.__h.push(p._sb[N]);p._sb=[]}else do p.__d=!1,M&&M(e),f=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++P<25);p.state=p.__s,p.getChildContext!=null&&(i=Qs(Qs({},i),p.getChildContext())),k&&!b&&p.getSnapshotBeforeUpdate!=null&&(w=p.getSnapshotBeforeUpdate(v,y)),L=f,f!=null&&f.type===Pr&&f.key==null&&(L=QR(f.props.children)),l=KR(n,nu(L)?L:[L],e,t,i,s,r,o,l,d,u),p.base=e.__e,e.__u&=-161,p.__h.length&&o.push(p),E&&(p.__E=p.__=null)}catch(U){if(e.__v=null,d||r!=null)if(U.then){for(e.__u|=d?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;r[r.indexOf(l)]=null,e.__e=l}else{for(D=r.length;D--;)lx(r[D]);Nv(e)}else e.__e=t.__e,e.__k=t.__k,U.then||Nv(e);hi.__e(U,e,t)}else r==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):l=e.__e=CG(t.__e,e,t,i,s,r,o,d,u);return(f=hi.diffed)&&f(e),128&e.__u?void 0:l}function Nv(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(Nv)}function XR(n,e,t){for(var i=0;i<t.length;i++)ux(t[i],t[++i],t[++i]);hi.__c&&hi.__c(e,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(r){r.call(s)})}catch(r){hi.__e(r,s.__v)}})}function QR(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:nu(n)?n.map(QR):Qs({},n)}function CG(n,e,t,i,s,r,o,l,d){var u,f,p,b,v,y,w,E=t.props,T=e.props,k=e.type;if(k=="svg"?s="http://www.w3.org/2000/svg":k=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),r!=null){for(u=0;u<r.length;u++)if((v=r[u])&&"setAttribute"in v==!!k&&(k?v.localName==k:v.nodeType==3)){n=v,r[u]=null;break}}if(n==null){if(k==null)return document.createTextNode(T);n=document.createElementNS(s,k,T.is&&T),l&&(hi.__m&&hi.__m(e,r),l=!1),r=null}if(k==null)E===T||l&&n.data==T||(n.data=T);else{if(r=r&&iu.call(n.childNodes),E=t.props||Rd,!l&&r!=null)for(E={},u=0;u<n.attributes.length;u++)E[(v=n.attributes[u]).name]=v.value;for(u in E)if(v=E[u],u!="children"){if(u=="dangerouslySetInnerHTML")p=v;else if(!(u in T)){if(u=="value"&&"defaultValue"in T||u=="checked"&&"defaultChecked"in T)continue;Lh(n,u,null,v,s)}}for(u in T)v=T[u],u=="children"?b=v:u=="dangerouslySetInnerHTML"?f=v:u=="value"?y=v:u=="checked"?w=v:l&&typeof v!="function"||E[u]===v||Lh(n,u,v,E[u],s);if(f)l||p&&(f.__html==p.__html||f.__html==n.innerHTML)||(n.innerHTML=f.__html),e.__k=[];else if(p&&(n.innerHTML=""),KR(e.type=="template"?n.content:n,nu(b)?b:[b],e,t,i,k=="foreignObject"?"http://www.w3.org/1999/xhtml":s,r,o,r?r[0]:t.__k&&Yl(t,0),l,d),r!=null)for(u=r.length;u--;)lx(r[u]);l||(u="value",k=="progress"&&y==null?n.removeAttribute("value"):y!=null&&(y!==n[u]||k=="progress"&&!y||k=="option"&&y!=E[u])&&Lh(n,u,y,E[u],s),u="checked",w!=null&&w!=n[u]&&Lh(n,u,w,E[u],s))}return n}function ux(n,e,t){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(s){hi.__e(s,t)}}function ZR(n,e,t){var i,s;if(hi.unmount&&hi.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||ux(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){hi.__e(r,e)}i.base=i.__P=null}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&ZR(i[s],e,t||typeof n.type!="function");t||lx(n.__e),n.__c=n.__=n.__e=void 0}function IG(n,e,t){return this.constructor(n,t)}function Wk(n,e,t){var i,s,r,o;e==document&&(e=document.documentElement),hi.__&&hi.__(n,e),s=(i=!1)?null:e.__k,r=[],o=[],dx(e,n=e.__k=cx(Pr,null,[n]),s||Rd,Rd,e.namespaceURI,s?null:e.firstChild?iu.call(e.childNodes):null,r,s?s.__e:e.firstChild,i,o),XR(r,n,o)}function JR(n,e,t){var i,s,r,o,l=Qs({},n.props);for(r in n.type&&n.type.defaultProps&&(o=n.type.defaultProps),e)r=="key"?i=e[r]:r=="ref"?s=e[r]:l[r]=e[r]===void 0&&o!=null?o[r]:e[r];return arguments.length>2&&(l.children=arguments.length>3?iu.call(arguments,2):t),pd(n.type,l,i||n.key,s||n.ref,null)}iu=qR.slice,hi={__e:function(n,e,t,i){for(var s,r,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(n)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),o=s.__d),o)return s.__E=s}catch(l){n=l}throw n}},zR=0,Ms.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Qs({},this.state),typeof n=="function"&&(n=n(Qs({},t),this.props)),n&&Qs(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Gk(this))},Ms.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Gk(this))},Ms.prototype.render=Pr,ha=[],HR=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,GR=function(n,e){return n.__v.__b-e.__v.__b},ap.__r=0,VR=/(PointerCapture)$|Capture$/i,ax=0,Dv=qk(!1),Ov=qk(!0);var RG=0;function B(n,e,t,i,s,r){e||(e={});var o,l,d=e;if("ref"in d)for(l in d={},e)l=="ref"?o=e[l]:d[l]=e[l];var u={type:n,props:d,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--RG,__i:-1,__u:0,__source:s,__self:r};if(typeof n=="function"&&(o=n.defaultProps))for(l in o)d[l]===void 0&&(d[l]=o[l]);return hi.vnode&&hi.vnode(u),u}var Ld,Ni,j0,Kk,Dd=0,eL=[],zi=hi,Yk=zi.__b,Xk=zi.__r,Qk=zi.diffed,Zk=zi.__c,Jk=zi.unmount,e_=zi.__;function hx(n,e){zi.__h&&zi.__h(Ni,n,Dd||e),Dd=0;var t=Ni.__H||(Ni.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function Xl(n){return Dd=1,LG(iL,n)}function LG(n,e,t){var i=hx(Ld++,2);if(i.t=n,!i.__c&&(i.__=[iL(void 0,e),function(l){var d=i.__N?i.__N[0]:i.__[0],u=i.t(d,l);d!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=Ni,!Ni.__f)){var s=function(l,d,u){if(!i.__c.__H)return!0;var f=i.__c.__H.__.filter(function(b){return!!b.__c});if(f.every(function(b){return!b.__N}))return!r||r.call(this,l,d,u);var p=i.__c.props!==l;return f.forEach(function(b){if(b.__N){var v=b.__[0];b.__=b.__N,b.__N=void 0,v!==b.__[0]&&(p=!0)}}),r&&r.call(this,l,d,u)||p};Ni.__f=!0;var r=Ni.shouldComponentUpdate,o=Ni.componentWillUpdate;Ni.componentWillUpdate=function(l,d,u){if(this.__e){var f=r;r=void 0,s(l,d,u),r=f}o&&o.call(this,l,d,u)},Ni.shouldComponentUpdate=s}return i.__N||i.__}function lp(n,e){var t=hx(Ld++,3);!zi.__s&&tL(t.__H,e)&&(t.__=n,t.u=e,Ni.__H.__h.push(t))}function jl(n){return Dd=5,fx(function(){return{current:n}},[])}function fx(n,e){var t=hx(Ld++,7);return tL(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function cp(n,e){return Dd=8,fx(function(){return n},e)}function DG(){for(var n;n=eL.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(pf),n.__H.__h.forEach(Pv),n.__H.__h=[]}catch(e){n.__H.__h=[],zi.__e(e,n.__v)}}zi.__b=function(n){Ni=null,Yk&&Yk(n)},zi.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),e_&&e_(n,e)},zi.__r=function(n){Xk&&Xk(n),Ld=0;var e=(Ni=n.__c).__H;e&&(j0===Ni?(e.__h=[],Ni.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(pf),e.__h.forEach(Pv),e.__h=[],Ld=0)),j0=Ni},zi.diffed=function(n){Qk&&Qk(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(eL.push(e)!==1&&Kk===zi.requestAnimationFrame||((Kk=zi.requestAnimationFrame)||OG)(DG)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),j0=Ni=null},zi.__c=function(n,e){e.some(function(t){try{t.__h.forEach(pf),t.__h=t.__h.filter(function(i){return!i.__||Pv(i)})}catch(i){e.some(function(s){s.__h&&(s.__h=[])}),e=[],zi.__e(i,t.__v)}}),Zk&&Zk(n,e)},zi.unmount=function(n){Jk&&Jk(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{pf(i)}catch(s){e=s}}),t.__H=void 0,e&&zi.__e(e,t.__v))};var t_=typeof requestAnimationFrame=="function";function OG(n){var e,t=function(){clearTimeout(i),t_&&cancelAnimationFrame(e),setTimeout(n)},i=setTimeout(t,35);t_&&(e=requestAnimationFrame(t))}function pf(n){var e=Ni,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Ni=e}function Pv(n){var e=Ni;n.__c=n.__(),Ni=e}function tL(n,e){return!n||n.length!==e.length||e.some(function(t,i){return t!==n[i]})}function iL(n,e){return typeof e=="function"?e(n):e}const NG={position:"relative",width:"100%",minHeight:"100%"},PG={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};function MG({data:n,rowHeight:e,renderRow:t,overscanCount:i=10,padding:s=4,...r}){const o=jl(null),[l,d]=Xl(0),[u,f]=Xl(0);lp(()=>{function k(){o.current!=null&&u!==o.current.offsetHeight&&f(o.current.offsetHeight)}return k(),window.addEventListener("resize",k),()=>{window.removeEventListener("resize",k)}},[u]);const p=cp(()=>{o.current&&d(o.current.scrollTop)},[]);let b=Math.floor(l/e),v=Math.floor(u/e);i&&(b=Math.max(0,b-b%i),v+=i);const y=b+v+s,w=n.slice(b,y),E={...NG,height:n.length*e},T={...PG,top:b*e};return B("div",{onScroll:p,ref:o,...r,children:B("div",{role:"presentation",style:E,children:B("div",{role:"presentation",style:T,children:w.map(t)})})})}class nL{uppy;opts;id;defaultLocale;i18n;i18nArray;type;VERSION;constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new BR([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}class $G{#e;#t=[];constructor(e){this.#e=e}on(e,t){return this.#t.push([e,t]),this.#e.on(e,t)}remove(){for(const[e,t]of this.#t.splice(0))this.#e.off(e,t)}onFilePause(e,t){this.on("upload-pause",(i,s)=>{e===i?.id&&t(s)})}onFileRemove(e,t){this.on("file-removed",i=>{e===i.id&&t(i.id)})}onPause(e,t){this.on("upload-pause",(i,s)=>{e===i?.id&&t(s)})}onRetry(e,t){this.on("upload-retry",i=>{e===i?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{this.#e.getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{this.#e.getFile(e)&&t()})}onCancelAll(e,t){this.on("cancel-all",(...i)=>{this.#e.getFile(e)&&t(...i)})}onResumeAll(e,t){this.on("resume-all",()=>{this.#e.getFile(e)&&t()})}}const FG={debug:()=>{},warn:()=>{},error:(...n)=>console.error(`[Uppy] [${ff()}]`,...n)},jG={debug:(...n)=>console.debug(`[Uppy] [${ff()}]`,...n),warn:(...n)=>console.warn(`[Uppy] [${ff()}]`,...n),error:(...n)=>console.error(`[Uppy] [${ff()}]`,...n)};var B0,i_;function BG(){return i_||(i_=1,B0=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);const t=e<0;let i=Math.abs(e);if(t&&(i=-i),i===0)return"0 B";const s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.min(Math.floor(Math.log(i)/Math.log(1024)),s.length-1),o=Number(i/1024**r),l=s[r];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${l}`}),B0}var UG=BG();const pa=zr(UG);var U0,n_;function zG(){if(n_)return U0;n_=1;function n(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}return n.prototype.match=function(e){var t=!0,i=this.parts,s,r=i.length,o;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(o=(e||"").split(this.separator),s=0;t&&s<r;s++)i[s]!=="*"&&(s<o.length?t=i[s]===o[s]:t=!1);t=t&&o}else if(typeof e.splice=="function")for(t=[],s=e.length;s--;)this.match(e[s])&&(t[t.length]=e[s]);else if(typeof e=="object"){t={};for(var l in e)this.match(l)&&(t[l]=e[l])}return t},U0=function(e,t,i){var s=new n(e,i||/[\/\.]/);return typeof t<"u"?s.match(t):s},U0}var z0,s_;function HG(){if(s_)return z0;s_=1;var n=zG(),e=/[\/\+\.]/;return z0=function(t,i){function s(r){var o=n(r,t,e);return o&&o.length>=2}return i?s(i.split(";")[0]):s},z0}var GG=HG();const VG=zr(GG),qG={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class _s extends Error{isUserFacing;file;constructor(e,t){super(e),this.isUserFacing=t?.isUserFacing??!0,t?.file&&(this.file=t.file)}isRestriction=!0}class WG{getI18n;getOpts;constructor(e,t){this.getI18n=t,this.getOpts=()=>{const i=e();if(i.restrictions?.allowedFileTypes!=null&&!Array.isArray(i.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return i}}validateAggregateRestrictions(e,t){const{maxTotalFileSize:i,maxNumberOfFiles:s}=this.getOpts().restrictions;if(s&&e.filter(o=>!o.isGhost).length+t.length>s)throw new _s(`${this.getI18n()("youCanOnlyUploadX",{smart_count:s})}`);if(i){const r=[...e,...t].reduce((o,l)=>o+(l.size??0),0);if(r>i)throw new _s(this.getI18n()("aggregateExceedsSize",{sizeAllowed:pa(i),size:pa(r)}))}}validateSingleFile(e){const{maxFileSize:t,minFileSize:i,allowedFileTypes:s}=this.getOpts().restrictions;if(s&&!s.some(o=>o.includes("/")?e.type?VG(e.type.replace(/;.*?$/,""),o):!1:o[0]==="."&&e.extension?e.extension.toLowerCase()===o.slice(1).toLowerCase():!1)){const o=s.join(", ");throw new _s(this.getI18n()("youCanOnlyUploadFileTypes",{types:o}),{file:e})}if(t&&e.size!=null&&e.size>t)throw new _s(this.getI18n()("exceedsSize",{size:pa(t),file:e.name??this.getI18n()("unnamed")}),{file:e});if(i&&e.size!=null&&e.size<i)throw new _s(this.getI18n()("inferiorSize",{size:pa(i)}),{file:e})}validate(e,t){t.forEach(i=>{this.validateSingleFile(i)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new _s(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new _s(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name??this.getI18n()("unnamed")})),{requiredMetaFields:i}=this.getOpts().restrictions,s=[];for(const r of i)(!Object.hasOwn(e.meta,r)||e.meta[r]==="")&&s.push(r);return{missingFields:s,error:t}}}function KG(n){let e=null,t;return(...i)=>(t=i,e||(e=Promise.resolve().then(()=>(e=null,n(...t)))),e)}class Ql extends nL{#e;isTargetDOMEl;el;parent;title;getTargetPlugin(e){let t;if(typeof e?.addTarget=="function")t=e,t instanceof Ql||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:t,UIPlugin:Ql}}));else if(typeof e=="function"){const i=e;this.uppy.iteratePlugins(s=>{s instanceof i&&(t=s)})}return t}mount(e,t){const i=t.id,s=oG(e);if(s){this.isTargetDOMEl=!0;const l=document.createElement("div");return l.classList.add("uppy-Root"),this.#e=KG(d=>{this.uppy.getPlugin(this.id)&&(Wk(this.render(d,l),l),this.afterUpdate())}),this.uppy.log(`Installing ${i} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(s.innerHTML=""),Wk(this.render(this.uppy.getState(),l),l),this.el=l,s.appendChild(l),l.dir=this.opts.direction||mG(l)||"ltr",this.onMount(),this.el}const r=this.getTargetPlugin(e);if(r)return this.uppy.log(`Installing ${i} to ${r.id}`),this.parent=r,this.el=r.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${i}`);let o=`Invalid target option given to ${i}.`;throw typeof e=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(e,t){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){this.el!=null&&this.#e?.(e)}unmount(){this.isTargetDOMEl&&this.el?.remove(),this.onUnmount()}onMount(){}onUnmount(){}}const YG="5.0.0",XG={version:YG};class QG{static VERSION=XG.version;state={};#e=new Set;getState(){return this.state}setState(e){const t={...this.state},i={...this.state,...e};this.state=i,this.#t(t,i,e)}subscribe(e){return this.#e.add(e),()=>{this.#e.delete(e)}}#t(...e){this.#e.forEach(t=>{t(...e)})}}var H0,r_;function px(){if(r_)return H0;r_=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return H0=n,H0}var G0,o_;function ZG(){if(o_)return G0;o_=1;var n=typeof ph=="object"&&ph&&ph.Object===Object&&ph;return G0=n,G0}var V0,a_;function sL(){if(a_)return V0;a_=1;var n=ZG(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return V0=t,V0}var q0,l_;function JG(){if(l_)return q0;l_=1;var n=sL(),e=function(){return n.Date.now()};return q0=e,q0}var W0,c_;function eV(){if(c_)return W0;c_=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return W0=e,W0}var K0,d_;function tV(){if(d_)return K0;d_=1;var n=eV(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return K0=t,K0}var Y0,u_;function rL(){if(u_)return Y0;u_=1;var n=sL(),e=n.Symbol;return Y0=e,Y0}var X0,h_;function iV(){if(h_)return X0;h_=1;var n=rL(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,s=n?n.toStringTag:void 0;function r(o){var l=t.call(o,s),d=o[s];try{o[s]=void 0;var u=!0}catch{}var f=i.call(o);return u&&(l?o[s]=d:delete o[s]),f}return X0=r,X0}var Q0,f_;function nV(){if(f_)return Q0;f_=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return Q0=t,Q0}var Z0,p_;function sV(){if(p_)return Z0;p_=1;var n=rL(),e=iV(),t=nV(),i="[object Null]",s="[object Undefined]",r=n?n.toStringTag:void 0;function o(l){return l==null?l===void 0?s:i:r&&r in Object(l)?e(l):t(l)}return Z0=o,Z0}var J0,m_;function rV(){if(m_)return J0;m_=1;function n(e){return e!=null&&typeof e=="object"}return J0=n,J0}var eb,g_;function oV(){if(g_)return eb;g_=1;var n=sV(),e=rV(),t="[object Symbol]";function i(s){return typeof s=="symbol"||e(s)&&n(s)==t}return eb=i,eb}var tb,b_;function aV(){if(b_)return tb;b_=1;var n=tV(),e=px(),t=oV(),i=NaN,s=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function d(u){if(typeof u=="number")return u;if(t(u))return i;if(e(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=e(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=n(u);var p=r.test(u);return p||o.test(u)?l(u.slice(2),p?2:8):s.test(u)?i:+u}return tb=d,tb}var ib,v_;function oL(){if(v_)return ib;v_=1;var n=px(),e=JG(),t=aV(),i="Expected a function",s=Math.max,r=Math.min;function o(l,d,u){var f,p,b,v,y,w,E=0,T=!1,k=!1,_=!0;if(typeof l!="function")throw new TypeError(i);d=t(d)||0,n(u)&&(T=!!u.leading,k="maxWait"in u,b=k?s(t(u.maxWait)||0,d):b,_="trailing"in u?!!u.trailing:_);function O(G){var Z=f,se=p;return f=p=void 0,E=G,v=l.apply(se,Z),v}function R(G){return E=G,y=setTimeout(N,d),T?O(G):v}function M(G){var Z=G-w,se=G-E,z=d-Z;return k?r(z,b-se):z}function P(G){var Z=G-w,se=G-E;return w===void 0||Z>=d||Z<0||k&&se>=b}function N(){var G=e();if(P(G))return L(G);y=setTimeout(N,M(G))}function L(G){return y=void 0,_&&f?O(G):(f=p=void 0,v)}function D(){y!==void 0&&clearTimeout(y),E=0,f=w=p=y=void 0}function $(){return y===void 0?v:L(e())}function U(){var G=e(),Z=P(G);if(f=arguments,p=this,w=G,Z){if(y===void 0)return R(w);if(k)return clearTimeout(y),y=setTimeout(N,d),O(w)}return y===void 0&&(y=setTimeout(N,d)),v}return U.cancel=D,U.flush=$,U}return ib=o,ib}var nb,y_;function lV(){if(y_)return nb;y_=1;var n=oL(),e=px(),t="Expected a function";function i(s,r,o){var l=!0,d=!0;if(typeof s!="function")throw new TypeError(t);return e(o)&&(l="leading"in o?!!o.leading:l,d="trailing"in o?!!o.trailing:d),n(s,r,{leading:l,maxWait:r,trailing:d})}return nb=i,nb}var cV=lV();const dV=zr(cV);var sb,x_;function uV(){return x_||(x_=1,sb=function(){var e={},t=e._fns={};e.emit=function(o,l,d,u,f,p,b){var v=i(o);v.length&&s(o,v,[l,d,u,f,p,b])},e.on=function(o,l){t[o]||(t[o]=[]),t[o].push(l)},e.once=function(o,l){function d(){l.apply(this,arguments),e.off(o,d)}this.on(o,d)},e.off=function(o,l){var d=[];if(o&&l){var u=this._fns[o],f=0,p=u?u.length:0;for(f;f<p;f++)u[f]!==l&&d.push(u[f])}d.length?this._fns[o]=d:delete this._fns[o]};function i(r){var o=t[r]?t[r]:[],l=r.indexOf(":"),d=l===-1?[r]:[r.substring(0,l),r.substring(l+1)],u=Object.keys(t),f=0,p=u.length;for(f;f<p;f++){var b=u[f];if(b==="*"&&(o=o.concat(t[b])),d.length===2&&d[0]===b){o=o.concat(t[b]);break}}return o}function s(r,o,l){var d=0,u=o.length;for(d;d<u&&o[d];d++)o[d].event=r,o[d].apply(o[d],l)}return e}),sb}var hV=uV();const fV=zr(hV);let pV="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",mV=(n=21)=>{let e="",t=n|0;for(;t--;)e+=pV[Math.random()*64|0];return e};const gV="5.1.1",bV={version:gV};function vV(n,e){return e.name?e.name:n.split("/")[0]==="image"?`${n.split("/")[0]}.${n.split("/")[1]}`:"noname"}const yV={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};function xV(n){if(n==null&&typeof navigator<"u"&&(n=navigator.userAgent),!n)return!0;const e=/Edge\/(\d+\.\d+)/.exec(n);if(!e)return!0;const i=e[1].split(".",2),s=parseInt(i[0],10),r=parseInt(i[1],10);return s<15||s===15&&r<15063||s>18||s===18&&r>=18218}const Dh={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};class Bp{static VERSION=bV.version;#e=Object.create(null);#t;#n;#i=fV();#s=new Set;#r=new Set;#a=new Set;defaultLocale;locale;opts;store;i18n;i18nArray;scheduledAutoProceed=null;wasOffline=!1;constructor(e){this.defaultLocale=yV;const t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:qG,meta:{},onBeforeFileAdded:(s,r)=>!Object.hasOwn(r,s.id),onBeforeUpload:s=>s,store:new QG,logger:FG,infoTimeout:5e3},i={...t,...e};this.opts={...i,restrictions:{...t.restrictions,...e?.restrictions}},e?.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e?.debug&&(this.opts.logger=jG),this.log(`Using Core v${Bp.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...Dh,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:xV(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),this.#t=new WG(()=>this.opts,()=>this.i18n),this.#n=this.store.subscribe((s,r,o)=>{this.emit("state-update",s,r,o),this.updateAll(r)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),this.#k()}emit(e,...t){this.#i.emit(e,...t)}on(e,t){return this.#i.on(e,t),this}once(e,t){return this.#i.once(e,t),this}off(e,t){return this.#i.off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(([i,s])=>[i,{...t[i],...s}]))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Cant set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){const e=i=>this.log(`Missing i18n string: ${i}`,"error"),t=new BR([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e?.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},i=Object.create(null);Object.keys(t).forEach(s=>{i[s]={...t[s],progress:{...t[s].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:i,...Dh})}clear(){const{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...Dh,files:{}})}addPreProcessor(e){this.#s.add(e)}removePreProcessor(e){return this.#s.delete(e)}addPostProcessor(e){this.#a.add(e)}removePostProcessor(e){return this.#a.delete(e)}addUploader(e){this.#r.add(e)}removeUploader(e){return this.#r.delete(e)}setMeta(e){const t={...this.getState().meta,...e},i={...this.getState().files};Object.keys(i).forEach(s=>{i[s]={...i[s],meta:{...i[s].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:i})}setFileMeta(e,t){const i={...this.getState().files};if(!i[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}const s={...i[e].meta,...t};i[e]={...i[e],meta:s},this.setState({files:i})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:i}=this.getState(),s=Object.values(e),r=[],o=[],l=[],d=[],u=[],f=[],p=[],b=[],v=[];for(const y of s){const{progress:w}=y;!w.uploadComplete&&w.uploadStarted&&(r.push(y),y.isPaused||b.push(y)),w.uploadStarted||o.push(y),(w.uploadStarted||w.preprocess||w.postprocess)&&l.push(y),w.uploadStarted&&d.push(y),y.isPaused&&u.push(y),w.uploadComplete&&f.push(y),y.error&&p.push(y),(w.preprocess||w.postprocess)&&v.push(y)}return{newFiles:o,startedFiles:l,uploadStartedFiles:d,pausedFiles:u,completeFiles:f,erroredFiles:p,inProgressFiles:r,inProgressNotPausedFiles:b,processingFiles:v,isUploadStarted:d.length>0,isAllComplete:t===100&&f.length===s.length&&v.length===0,isAllErrored:!!i&&p.length===s.length,isAllPaused:r.length!==0&&u.length===r.length,isUploadInProgress:r.length>0,isSomeGhost:s.some(y=>y.isGhost)}}#o(e){for(const o of e)o.isRestriction?this.emit("restriction-failed",o.file,o):this.emit("error",o,o.file),this.log(o,"warning");const t=e.filter(o=>o.isUserFacing),i=4,s=t.slice(0,i),r=t.slice(i);s.forEach(({message:o,details:l=""})=>{this.info({message:o,details:l},"error",this.opts.infoTimeout)}),r.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:r.length})})}validateRestrictions(e,t=this.getFiles()){try{this.#t.validate(t,[e])}catch(i){return i}return null}validateSingleFile(e){try{this.#t.validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){const t=this.getFiles();try{this.#t.validateAggregateRestrictions(t,e)}catch(i){return i.message}return null}#l(e){const{missingFields:t,error:i}=this.#t.getMissingRequiredMetaFields(e);return t.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:t,error:i.message}),this.log(i.message),this.emit("restriction-failed",e,i),!1):(t.length===0&&e.missingRequiredMetaFields&&this.setFileState(e.id,{missingRequiredMetaFields:[]}),!0)}#f(e){let t=!0;for(const i of Object.values(e))this.#l(i)||(t=!1);return t}#c(e){const{allowNewUpload:t}=this.getState();if(t===!1){const i=new _s(this.i18n("noMoreFilesAllowed"),{file:e});throw this.#o([i]),i}}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}#u(e){const t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e,meta:{},isRemote:!1,source:void 0,preview:void 0}:e,i=MR(t),s=vV(i,t),r=PR(s).extension,o=dG(t,this.getID()),l={...t.meta,name:s,type:i},d=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:o,name:s,extension:r||"",meta:{...this.getState().meta,...l},type:i,progress:{percentage:0,bytesUploaded:!1,bytesTotal:d,uploadComplete:!1,uploadStarted:null},size:d,isGhost:!1,...t.isRemote?{isRemote:!0,remote:t.remote,data:t.data}:{isRemote:!1,data:t.data},preview:t.preview}}#d(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))}#h(e){let{files:t}=this.getState(),i={...t};const s=[],r=[];for(const o of e)try{let l=this.#u(o);this.#c(l);const d=t[l.id],u=d?.isGhost;if(u&&!l.isRemote){if(l.data==null)throw new Error("File data is missing");l={...d,isGhost:!1,data:l.data},this.log(`Replaced the blob in the restored ghost file: ${l.name}, ${l.id}`)}const f=this.opts.onBeforeFileAdded(l,i);if(t=this.getState().files,i={...t,...i},!f&&this.checkIfFileAlreadyExists(l.id))throw new _s(this.i18n("noDuplicates",{fileName:l.name??this.i18n("unnamed")}),{file:l});if(f===!1&&!u)throw new _s("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:l});typeof f=="object"&&f!==null&&(l=f),this.#t.validateSingleFile(l),i[l.id]=l,s.push(l)}catch(l){r.push(l)}try{this.#t.validateAggregateRestrictions(Object.values(t),s)}catch(o){return r.push(o),{nextFilesState:t,validFilesToAdd:[],errors:r}}return{nextFilesState:i,validFilesToAdd:s,errors:r}}addFile(e){const{nextFilesState:t,validFilesToAdd:i,errors:s}=this.#h([e]),r=s.filter(l=>l.isRestriction);if(this.#o(r),s.length>0)throw s[0];this.setState({files:t});const[o]=i;return this.emit("file-added",o),this.emit("files-added",i),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),this.#d(),o.id}addFiles(e){const{nextFilesState:t,validFilesToAdd:i,errors:s}=this.#h(e),r=s.filter(l=>l.isRestriction);this.#o(r);const o=s.filter(l=>!l.isRestriction);if(o.length>0){let l=`Multiple errors occurred while adding files:
`;if(o.forEach(d=>{l+=`
 * ${d.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:l},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,l);{const d=new Error(l);throw d.errors=o,d}}this.setState({files:t}),i.forEach(l=>{this.emit("file-added",l)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(l=>{this.log(`Added file: ${l.name}
 id: ${l.id}
 type: ${l.type}`)}),i.length>0&&this.#d()}removeFiles(e){const{files:t,currentUploads:i}=this.getState(),s={...t},r={...i},o=Object.create(null);e.forEach(f=>{t[f]&&(o[f]=t[f],delete s[f])});function l(f){return o[f]===void 0}Object.keys(r).forEach(f=>{const p=i[f].fileIDs.filter(l);if(p.length===0){delete r[f];return}const{capabilities:b}=this.getState();if(p.length!==i[f].fileIDs.length&&!b.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");r[f]={...i[f],fileIDs:p}});const d={currentUploads:r,files:s};Object.keys(s).length===0&&(d.allowNewUpload=!0,d.error=null,d.recoveredState=null),this.setState(d),this.#m();const u=Object.keys(o);u.forEach(f=>{this.emit("file-removed",o[f])}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const t=this.getFile(e),s=!(t.isPaused||!1);return this.setFileState(e,{isPaused:s}),this.emit("upload-pause",t,s),s}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{const s={...e[i],isPaused:!0};e[i]=s}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{const s={...e[i],isPaused:!1,error:null};e[i]=s}),this.setState({files:e}),this.emit("resume-all")}#v(){const{files:e}=this.getState();return Object.keys(e).filter(t=>{const i=e[t];return i.error&&(!i.missingRequiredMetaFields||i.missingRequiredMetaFields.length===0)})}async#y(){const e=this.#v(),t={...this.getState().files};if(e.forEach(s=>{t[s]={...t[s],isPaused:!1,error:null}}),this.setState({files:t,error:null}),this.emit("retry-all",this.getFilesByIds(e)),e.length===0)return{successful:[],failed:[]};const i=this.#g(e,{forceAllowNewUpload:!0});return this.#b(i)}async retryAll(){const e=await this.#y();return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(Dh)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));const t=this.#g([e],{forceAllowNewUpload:!0});return this.#b(t)}logout(){this.iteratePlugins(e=>{e.provider?.logout?.()})}#E=(e,t)=>{const i=e?this.getFile(e.id):void 0;if(e==null||!i){this.log(`Not setting progress for a file that has been removed: ${e?.id}`);return}if(i.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);return}const s={bytesTotal:t.bytesTotal,percentage:t.bytesTotal!=null&&Number.isFinite(t.bytesTotal)&&t.bytesTotal>0?Math.round(t.bytesUploaded/t.bytesTotal*100):void 0};i.progress.uploadStarted!=null?this.setFileState(e.id,{progress:{...i.progress,...s,bytesUploaded:t.bytesUploaded}}):this.setFileState(e.id,{progress:{...i.progress,...s}}),this.#m()};#x(){const e=this.#T();let t=null;e!=null&&(t=Math.round(e*100),t>100?t=100:t<0&&(t=0)),this.emit("progress",t??0),this.setState({totalProgress:t??0})}#m=dV(()=>this.#x(),500,{leading:!0,trailing:!0});[Symbol.for("uppy test: updateTotalProgress")](){return this.#x()}#T(){const t=this.getFiles().filter(d=>d.progress.uploadStarted||d.progress.preprocess||d.progress.postprocess);if(t.length===0)return 0;if(t.every(d=>d.progress.uploadComplete))return 1;const i=d=>d.progress.bytesTotal!=null&&d.progress.bytesTotal!==0,s=t.filter(i),r=t.filter(d=>!i(d));if(s.every(d=>d.progress.uploadComplete)&&r.length>0&&!r.every(d=>d.progress.uploadComplete))return null;const o=s.reduce((d,u)=>d+(u.progress.bytesTotal??0),0),l=s.reduce((d,u)=>d+(u.progress.bytesUploaded||0),0);return o===0?0:l/o}#k(){const e=(s,r,o)=>{let l=s.message||"Unknown error";s.details&&(l+=` ${s.details}`),this.setState({error:l}),r!=null&&r.id in this.getState().files&&this.setFileState(r.id,{error:l,response:o})};this.on("error",e),this.on("upload-error",(s,r,o)=>{if(e(r,s,o),typeof r=="object"&&r.message){this.log(r.message,"error");const l=new Error(this.i18n("failedToUpload",{file:s?.name??""}));l.isUserFacing=!0,l.details=r.message,r.details&&(l.details+=` ${r.details}`),this.#o([l])}else this.#o([r])});let t=null;this.on("upload-stalled",(s,r)=>{const{message:o}=s,l=r.map(d=>d.meta.name).join(", ");t||(this.info({message:o,details:l},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${o} ${l}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const i=s=>{const r=s.filter(l=>{const d=l!=null&&this.getFile(l.id);return d||this.log(`Not setting progress for a file that has been removed: ${l?.id}`),d}),o=Object.fromEntries(r.map(l=>[l.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:l.size}}]));this.patchFilesState(o)};this.on("upload-start",i),this.on("upload-progress",this.#E),this.on("upload-success",(s,r)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s?.id}`);return}const o=this.getFile(s.id).progress,l=this.#a.size>0;this.setFileState(s.id,{progress:{...o,postprocess:l?{mode:"indeterminate"}:void 0,uploadComplete:!0,...!l&&{complete:!0},percentage:100,bytesUploaded:o.bytesTotal},response:r,uploadURL:r.uploadURL,isPaused:!1}),s.size==null&&this.setFileState(s.id,{size:r.bytesUploaded||o.bytesTotal}),this.#m()}),this.on("preprocess-progress",(s,r)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s?.id}`);return}this.setFileState(s.id,{progress:{...this.getFile(s.id).progress,preprocess:r}})}),this.on("preprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s?.id}`);return}const r={...this.getState().files};r[s.id]={...r[s.id],progress:{...r[s.id].progress}},delete r[s.id].progress.preprocess,this.setState({files:r})}),this.on("postprocess-progress",(s,r)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s?.id}`);return}this.setFileState(s.id,{progress:{...this.getState().files[s.id].progress,postprocess:r}})}),this.on("postprocess-complete",s=>{const r=s&&this.getFile(s.id);if(r==null){this.log(`Not setting progress for a file that has been removed: ${s?.id}`);return}const{postprocess:o,...l}=r.progress;this.patchFilesState({[r.id]:{progress:{...l,complete:!0}}})}),this.on("restored",()=>{this.#m()}),this.on("dashboard:file-edit-complete",s=>{s&&this.#l(s)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",this.#p),window.addEventListener("offline",this.#p),setTimeout(this.#p,3e3))}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}#p=this.updateOnlineStatus.bind(this);getID(){return this.opts.id}use(e,...t){if(typeof e!="function"){const o=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(o)}const i=new e(this,...t),s=i.id;if(!s)throw new Error("Your plugin must have an id");if(!i.type)throw new Error("Your plugin must have a type");const r=this.getPlugin(s);if(r){const o=`Already found a plugin named '${r.id}'. Tried to use: '${s}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(o)}return e.VERSION&&this.log(`Using ${s} v${e.VERSION}`),i.type in this.#e?this.#e[i.type].push(i):this.#e[i.type]=[i],i.install(),this.emit("plugin-added",i),this}getPlugin(e){for(const t of Object.values(this.#e)){const i=t.find(s=>s.id===e);if(i!=null)return i}}[Symbol.for("uppy test: getPlugins")](e){return this.#e[e]}iteratePlugins(e){Object.values(this.#e).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=this.#e[e.type],i=t.findIndex(o=>o.id===e.id);i!==-1&&t.splice(i,1);const r={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(r)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),this.#n(),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",this.#p),window.removeEventListener("offline",this.#p))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t="info",i=3e3){const s=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:s?e.message:e,details:s?e.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(e,t){const{logger:i}=this.opts;switch(t){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e);break}}#w=new Map;registerRequestClient(e,t){this.#w.set(e,t)}getRequestClientForFile(e){if(!("remote"in e&&e.remote))throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const t=this.#w.get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}async restore(e){this.log(`Core: Running restored upload "${e}"`);const t=await this.#b(e);return this.emit("complete",t),t}#g(e,t={}){const{forceAllowNewUpload:i=!1}=t,{allowNewUpload:s,currentUploads:r}=this.getState();if(!s&&!i)throw new Error("Cannot create a new upload: already uploading.");const o=mV();return this.emit("upload",o,this.getFilesByIds(e)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...r,[o]:{fileIDs:e,step:0,result:{}}}}),o}[Symbol.for("uppy test: createUpload")](...e){return this.#g(...e)}#_(e){const{currentUploads:t}=this.getState();return t[e]}addResultData(e,t){if(!this.#_(e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:i}=this.getState(),s={...i[e],result:{...i[e].result,...t}};this.setState({currentUploads:{...i,[e]:s}})}#S(e){const{[e]:t,...i}=this.getState().currentUploads;this.setState({currentUploads:i})}async#b(e){const t=()=>{const{currentUploads:o}=this.getState();return o[e]};let i=t();if(!i)throw new Error("Nonexistent upload");const s=[...this.#s,...this.#r,...this.#a];try{for(let o=i.step||0;o<s.length&&i;o++){const l=s[o];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...i,step:o}}});const d=i.fileIDs.filter(u=>!this.getFile(u).progress.uploadComplete);await l(d,e),i=t()}}catch(o){throw this.#S(e),o}if(i){i.fileIDs.forEach(u=>{const f=this.getFile(u);f?.progress.postprocess&&this.emit("postprocess-complete",f)});const o=i.fileIDs.map(u=>this.getFile(u)),l=o.filter(u=>!u.error),d=o.filter(u=>u.error);this.addResultData(e,{successful:l,failed:d,uploadID:e}),i=t()}let r;return i&&(r=i.result,this.#S(e)),r==null&&(this.log(`Not setting result for an upload that has been removed: ${e}`),r={successful:[],failed:[],uploadID:e}),r}async upload(){this.#e.uploader?.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();if(this.#v().length>0){const s=await this.#y();if(!(this.getFiles().filter(o=>o.progress.uploadStarted==null).length>0))return this.emit("complete",s),s;({files:e}=this.getState())}const i=this.opts.onBeforeUpload(e);if(i===!1)throw new Error("Not starting the upload because onBeforeUpload returned false");i&&typeof i=="object"&&(e=i,this.setState({files:e}));try{if(this.#t.validateMinNumberOfFiles(e),!this.#f(e))throw new _s(this.i18n("missingRequiredMetaField"));const{currentUploads:s}=this.getState(),r=Object.values(s).flatMap(u=>u.fileIDs),o=Object.keys(e).filter(u=>{const f=this.getFile(u);return f&&!f.progress.uploadStarted&&!r.includes(u)}),l=this.#g(o),d=await this.#b(l);return this.emit("complete",d),d}catch(s){throw this.#o([s]),s}}}var rb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var w_;function wV(){return w_||(w_=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(r=s(r,i(l)))}return r}function i(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return t.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var o="";for(var l in r)e.call(r,l)&&r[l]&&(o=s(o,l));return o}function s(r,o){return o?r?r+" "+o:r+o:r}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(rb)),rb.exports}var SV=wV();const $s=zr(SV);var EV=oL();const TV=zr(EV);function kV(){return B("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:B("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function qt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var aL=typeof self<"u"?self:global;const Od=typeof navigator<"u",_V=Od&&typeof HTMLImageElement>"u",S_=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),lL=aL.Buffer,cL=!!lL,AV=n=>n!==void 0;function dL(n){return n===void 0||(n instanceof Map?n.size===0:Object.values(n).filter(AV).length===0)}function on(n){let e=new Error(n);throw delete e.stack,e}function E_(n){let e=(function(t){let i=0;return t.ifd0.enabled&&(i+=1024),t.exif.enabled&&(i+=2048),t.makerNote&&(i+=2048),t.userComment&&(i+=1024),t.gps.enabled&&(i+=512),t.interop.enabled&&(i+=100),t.ifd1.enabled&&(i+=1024),i+2048})(n);return n.jfif.enabled&&(e+=50),n.xmp.enabled&&(e+=2e4),n.iptc.enabled&&(e+=14e3),n.icc.enabled&&(e+=6e3),e}const ob=n=>String.fromCharCode.apply(null,n),T_=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class Rs{static from(e,t){return e instanceof this&&e.le===t?e:new Rs(e,void 0,void 0,t)}constructor(e,t=0,i,s){if(typeof s=="boolean"&&(this.le=s),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){i===void 0&&(i=e.byteLength-t);let r=new DataView(e,t,i);this._swapDataView(r)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Rs){i===void 0&&(i=e.byteLength-t),(t+=e.byteOffset)+i>e.byteOffset+e.byteLength&&on("Creating view outside of available memory in ArrayBuffer");let r=new DataView(e.buffer,t,i);this._swapDataView(r)}else if(typeof e=="number"){let r=new DataView(new ArrayBuffer(e));this._swapDataView(r)}else on("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,i=Rs){return e instanceof DataView||e instanceof Rs?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||on("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new i(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new Rs(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return s=this.getUint8Array(e,t),T_?T_.decode(s):cL?Buffer.from(s).toString("utf8"):decodeURIComponent(escape(ob(s)));var s}getLatin1String(e=0,t=this.byteLength){let i=this.getUint8Array(e,t);return ob(i)}getUnicodeString(e=0,t=this.byteLength){const i=[];for(let s=0;s<t&&e+s<this.byteLength;s+=2)i.push(this.getUint16(e+s));return ob(i)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,i){switch(t){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,t,i){switch(t){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function Mv(n,e){on(`${n} '${e}' was not loaded, try using full build of exifr.`)}class mx extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||Mv(this.kind,e),t&&(e in t||(function(i,s){on(`Unknown ${i} '${s}'.`)})(this.kind,e),t[e].enabled||Mv(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var uL=new mx("file parser"),As=new mx("segment parser"),gx=new mx("file reader");let CV=aL.fetch;function k_(n,e){return(t=n).startsWith("data:")||t.length>1e4?Fv(n,e,"base64"):S_&&n.includes("://")?$v(n,e,"url",__):S_?Fv(n,e,"fs"):Od?$v(n,e,"url",__):void on("Invalid input argument");var t}async function $v(n,e,t,i){return gx.has(t)?Fv(n,e,t):i?(async function(s,r){let o=await r(s);return new Rs(o)})(n,i):void on(`Parser ${t} is not loaded`)}async function Fv(n,e,t){let i=new(gx.get(t))(n,e);return await i.read(),i}const __=n=>CV(n).then((e=>e.arrayBuffer())),jv=n=>new Promise(((e,t)=>{let i=new FileReader;i.onloadend=()=>e(i.result||new ArrayBuffer),i.onerror=t,i.readAsArrayBuffer(n)})),bx=new Map,IV=new Map,RV=new Map,Oh=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],hL=["jfif","xmp","icc","iptc","ihdr"],Bv=["tiff",...hL],sn=["ifd0","ifd1","exif","gps","interop"],Nh=[...Bv,...sn],Ph=["makerNote","userComment"],fL=["translateKeys","translateValues","reviveValues","multiSegment"],Mh=[...fL,"sanitize","mergeOutput","silentErrors"];class pL{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Zc extends pL{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,i,s){if(super(),qt(this,"enabled",!1),qt(this,"skip",new Set),qt(this,"pick",new Set),qt(this,"deps",new Set),qt(this,"translateKeys",!1),qt(this,"translateValues",!1),qt(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(s),this.canBeFiltered=sn.includes(e),this.canBeFiltered&&(this.dict=bx.get(e)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:r,skip:o}=i;r&&r.length>0&&this.translateTagSet(r,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:on(`Invalid options argument: ${i}`)}applyInheritables(e){let t,i;for(t of fL)i=e[t],i!==void 0&&(this[t]=i)}translateTagSet(e,t){if(this.dict){let i,s,{tagKeys:r,tagValues:o}=this.dict;for(i of e)typeof i=="string"?(s=o.indexOf(i),s===-1&&(s=r.indexOf(Number(i))),s!==-1&&t.add(Number(r[s]))):t.add(i)}else for(let i of e)t.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,dp(this.pick,this.deps)):this.enabled&&this.pick.size>0&&dp(this.pick,this.deps)}}var Tn={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},A_=new Map;class vx extends pL{static useCached(e){let t=A_.get(e);return t!==void 0||(t=new this(e),A_.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):on(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Od?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Oh)this[e]=Tn[e];for(e of Mh)this[e]=Tn[e];for(e of Ph)this[e]=Tn[e];for(e of Nh)this[e]=new Zc(e,Tn[e],void 0,this)}setupFromTrue(){let e;for(e of Oh)this[e]=Tn[e];for(e of Mh)this[e]=Tn[e];for(e of Ph)this[e]=!0;for(e of Nh)this[e]=new Zc(e,!0,void 0,this)}setupFromArray(e){let t;for(t of Oh)this[t]=Tn[t];for(t of Mh)this[t]=Tn[t];for(t of Ph)this[t]=Tn[t];for(t of Nh)this[t]=new Zc(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,sn)}setupFromObject(e){let t;for(t of(sn.ifd0=sn.ifd0||sn.image,sn.ifd1=sn.ifd1||sn.thumbnail,Object.assign(this,e),Oh))this[t]=ab(e[t],Tn[t]);for(t of Mh)this[t]=ab(e[t],Tn[t]);for(t of Ph)this[t]=ab(e[t],Tn[t]);for(t of Bv)this[t]=new Zc(t,Tn[t],e[t],this);for(t of sn)this[t]=new Zc(t,Tn[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,sn,Nh),e.tiff===!0?this.batchEnableWithBool(sn,!0):e.tiff===!1?this.batchEnableWithUserValue(sn,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,sn):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,sn)}batchEnableWithBool(e,t){for(let i of e)this[i].enabled=t}batchEnableWithUserValue(e,t){for(let i of e){let s=t[i];this[i].enabled=s!==!1&&s!==void 0}}setupGlobalFilters(e,t,i,s=i){if(e&&e.length){for(let o of s)this[o].enabled=!1;let r=C_(e,i);for(let[o,l]of r)dp(this[o].pick,l),this[o].enabled=!0}else if(t&&t.length){let r=C_(t,i);for(let[o,l]of r)dp(this[o].skip,l)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:i,iptc:s,icc:r}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),i.enabled||e.skip.add(700),s.enabled||e.skip.add(33723),r.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:i,interop:s}=this;s.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=sn.some((r=>this[r].enabled===!0))||this.makerNote||this.userComment;for(let r of sn)this[r].finalizeFilters()}get onlyTiff(){return!hL.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Bv)this[e].enabled&&!As.has(e)&&Mv("segment parser",e)}}function C_(n,e){let t,i,s,r,o=[];for(s of e){for(r of(t=bx.get(s),i=[],t))(n.includes(r[0])||n.includes(r[1]))&&i.push(r[0]);i.length&&o.push([s,i])}return o}function ab(n,e){return n!==void 0?n:e!==void 0?e:void 0}function dp(n,e){for(let t of e)n.add(t)}qt(vx,"default",Tn);class LV{constructor(e){qt(this,"parsers",{}),qt(this,"output",{}),qt(this,"errors",[]),qt(this,"pushToErrors",(t=>this.errors.push(t))),this.options=vx.useCached(e)}async read(e){this.file=await(function(t,i){return typeof t=="string"?k_(t,i):Od&&!_V&&t instanceof HTMLImageElement?k_(t.src,i):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Rs(t):Od&&t instanceof Blob?$v(t,i,"blob",jv):void on("Invalid input argument")})(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[i,s]of uL)if(s.canHandle(e,t))return this.fileParser=new s(this.options,this.file,this.parsers),e[i]=!0;this.file.close&&this.file.close(),on("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),dL(i=e)?void 0:i;var i}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async i=>{let s=await i.parse();i.assignToOutput(e,s)}));this.options.silentErrors&&(t=t.map((i=>i.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,i=As.get("tiff",e);var s;if(t.tiff?s={start:0,type:"tiff"}:t.jpeg&&(s=await this.fileParser.getOrFindSegment("tiff")),s===void 0)return;let r=await this.fileParser.ensureSegmentChunk(s),o=this.parsers.tiff=new i(r,e,t),l=await o.extractThumbnail();return t.close&&t.close(),l}}class Al{static findPosition(e,t){let i=e.getUint16(t+2)+2,s=typeof this.headerLength=="function"?this.headerLength(e,t,i):this.headerLength,r=t+s,o=i-s;return{offset:t,length:i,headerLength:s,start:r,size:o,end:r+o}}static parse(e,t={}){return new this(e,new vx({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof Rs?e:new Rs(e)}constructor(e,t={},i){qt(this,"errors",[]),qt(this,"raw",new Map),qt(this,"handleError",(s=>{if(!this.options.silentErrors)throw s;this.errors.push(s.message)})),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let i=RV.get(t),s=IV.get(t),r=bx.get(t),o=this.options[t],l=o.reviveValues&&!!i,d=o.translateValues&&!!s,u=o.translateKeys&&!!r,f={};for(let[p,b]of e)l&&i.has(p)?b=i.get(p)(b):d&&s.has(p)&&(b=this.translateValue(b,s.get(p))),u&&r.has(p)&&(p=r.get(p)||p),f[p]=b;return f}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[t]?Object.assign(e[t],i):e[t]=i}}qt(Al,"headerLength",4),qt(Al,"type",void 0),qt(Al,"multiSegment",!1),qt(Al,"canHandle",(()=>!1));function DV(n){return n===192||n===194||n===196||n===219||n===221||n===218||n===254}function OV(n){return n>=224&&n<=239}function NV(n,e,t){for(let[i,s]of As)if(s.canHandle(n,e,t))return i}class I_ extends class{constructor(e,t,i){qt(this,"errors",[]),qt(this,"ensureSegmentChunk",(async s=>{let r=s.start,o=s.size||65536;if(this.file.chunked)if(this.file.available(r,o))s.chunk=this.file.subarray(r,o);else try{s.chunk=await this.file.readChunk(r,o)}catch(l){on(`Couldn't read segment: ${JSON.stringify(s)}. ${l.message}`)}else this.file.byteLength>r+o?s.chunk=this.file.subarray(r,o):s.size===void 0?s.chunk=this.file.subarray(r):on("Segment unreachable: "+JSON.stringify(s));return s.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let i=new(As.get(e))(t,this.options,this.file);return this.parsers[e]=i}createParsers(e){for(let t of e){let{type:i,chunk:s}=t,r=this.options[i];if(r&&r.enabled){let o=this.parsers[i];o&&o.append||o||this.createParser(i,s)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...e){super(...e),qt(this,"appSegments",[]),qt(this,"jpegSegments",[]),qt(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(As.keyList())):(e=e===void 0?As.keyList().filter((t=>this.options[t].enabled)):e.filter((t=>this.options[t].enabled&&As.has(t))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:i,findAll:s,wanted:r,remaining:o}=this;if(!s&&this.file.chunked&&(s=Array.from(r).some((l=>{let d=As.get(l),u=this.options[l];return d.multiSegment&&u.multiSegment})),s&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,i.byteLength),!this.options.onlyTiff&&i.chunked){let l=!1;for(;o.size>0&&!l&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=i,u=this.appSegments.some((f=>!this.file.available(f.offset||f.start,f.length||f.size)));if(l=e>d&&!u?!await i.readNextChunk(e):!await i.readNextChunk(d),(e=this.findAppSegmentsInRange(e,i.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let i,s,r,o,l,d,{file:u,findAll:f,wanted:p,remaining:b,options:v}=this;for(;e<t;e++)if(u.getUint8(e)===255){if(i=u.getUint8(e+1),OV(i)){if(s=u.getUint16(e+2),r=NV(u,e,s),r&&p.has(r)&&(o=As.get(r),l=o.findPosition(u,e),d=v[r],l.type=r,this.appSegments.push(l),!f&&(o.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=l.chunkNumber<l.chunkCount,this.unfinishedMultiSegment||b.delete(r)):b.delete(r),b.size===0)))break;v.recordUnknownSegments&&(l=Al.findPosition(u,e),l.marker=i,this.unknownSegments.push(l)),e+=s+1}else if(DV(i)){if(s=u.getUint16(e+2),i===218&&v.stopAfterSos!==!1)return;v.recordJpegSegments&&this.jpegSegments.push({offset:e,length:s,marker:i}),e+=s+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((t=>t.multiSegment)))return;let e=(function(t,i){let s,r,o,l=new Map;for(let d=0;d<t.length;d++)s=t[d],r=s[i],l.has(r)?o=l.get(r):l.set(r,o=[]),o.push(s);return Array.from(l)})(this.appSegments,"type");this.mergedAppSegments=e.map((([t,i])=>{let s=As.get(t,this.options);return s.handleMultiSegments?{type:t,chunk:s.handleMultiSegments(i)}:i[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}qt(I_,"type","jpeg"),uL.set("jpeg",I_);const PV=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class MV extends Al{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,i=new Map){let{pick:s,skip:r}=this.options[t];s=new Set(s);let o=s.size>0,l=r.size===0,d=this.chunk.getUint16(e);e+=2;for(let u=0;u<d;u++){let f=this.chunk.getUint16(e);if(o){if(s.has(f)&&(i.set(f,this.parseTag(e,f,t)),s.delete(f),s.size===0))break}else!l&&r.has(f)||i.set(f,this.parseTag(e,f,t));e+=12}return i}parseTag(e,t,i){let{chunk:s}=this,r=s.getUint16(e+2),o=s.getUint32(e+4),l=PV[r];if(l*o<=4?e+=8:e=s.getUint32(e+8),(r<1||r>13)&&on(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${r}, offset ${e}`),e>s.byteLength&&on(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${r}, offset ${e} is outside of chunk size ${s.byteLength}`),r===1)return s.getUint8Array(e,o);if(r===2)return(d=(function(u){for(;u.endsWith("\0");)u=u.slice(0,-1);return u})(d=s.getString(e,o)).trim())===""?void 0:d;var d;if(r===7)return s.getUint8Array(e,o);if(o===1)return this.parseTagValue(r,e);{let u=new((function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(r))(o),f=l;for(let p=0;p<o;p++)u[p]=this.parseTagValue(r,e),e+=f;return u}}parseTagValue(e,t){let{chunk:i}=this;switch(e){case 1:return i.getUint8(t);case 3:return i.getUint16(t);case 4:return i.getUint32(t);case 5:return i.getUint32(t)/i.getUint32(t+4);case 6:return i.getInt8(t);case 8:return i.getInt16(t);case 9:return i.getInt32(t);case 10:return i.getInt32(t)/i.getInt32(t+4);case 11:return i.getFloat(t);case 12:return i.getDouble(t);case 13:return i.getUint32(t);default:on(`Invalid tiff type ${e}`)}}}class lb extends MV{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let i=new Map;return this[t]=i,this.parseTags(e,t,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&on("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&on(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,E_(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,E_(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let i=e.get(t);i&&i.length===1&&e.set(t,i[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",R_(...e.get(2),e.get(1))),e.set("longitude",R_(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,i,s={};for(t of sn)if(e=this[t],!dL(e))if(i=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(s,i)}else s[t]=i;return this.makerNote&&(s.makerNote=this.makerNote),this.userComment&&(s.userComment=this.userComment),s}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[i,s]of Object.entries(t))this.assignObjectToOutput(e,i,s)}}function R_(n,e,t,i){var s=n+e/60+t/3600;return i!=="S"&&i!=="W"||(s*=-1),s}qt(lb,"type","tiff"),qt(lb,"headerLength",10),As.set("tiff",lb);const yx={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},yx,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},yx,{tiff:!1,ifd1:!0,mergeOutput:!1});const $V=Object.assign({},yx,{firstChunkSize:4e4,ifd0:[274]});async function FV(n){let e=new LV($V);await e.read(n);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}const jV=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let rd=!0,od=!0;if(typeof navigator=="object"){let n=navigator.userAgent;if(n.includes("iPad")||n.includes("iPhone")){let e=n.match(/OS (\d+)_(\d+)/);if(e){let[,t,i]=e;rd=Number(t)+.1*Number(i)<13.4,od=!1}}else if(n.includes("OS X 10")){let[,e]=n.match(/OS X 10[_.](\d+)/);rd=od=Number(e)<15}if(n.includes("Chrome/")){let[,e]=n.match(/Chrome\/(\d+)/);rd=od=Number(e)<81}else if(n.includes("Firefox/")){let[,e]=n.match(/Firefox\/(\d+)/);rd=od=Number(e)<77}}async function BV(n){let e=await FV(n);return Object.assign({canvas:rd,css:od},jV[e])}class UV extends Rs{constructor(...e){super(...e),qt(this,"ranges",new zV),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,i){if(e===0&&this.byteLength===0&&i){let s=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(s)}else{let s=e+t;if(s>this.byteLength){let{dataView:r}=this._extend(s);this._swapDataView(r)}}}_extend(e){let t;t=cL?lL.allocUnsafe(e):new Uint8Array(e);let i=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:i}}subarray(e,t,i=!1){return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,i=!1){i&&this._tryExtend(t,e.byteLength,e);let s=super.set(e,t);return this.ranges.add(t,s.byteLength),s}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class zV{constructor(){qt(this,"list",[])}get length(){return this.list.length}add(e,t,i=0){let s=e+t,r=this.list.filter((o=>L_(e,o.offset,s)||L_(e,o.end,s)));if(r.length>0){e=Math.min(e,...r.map((l=>l.offset))),s=Math.max(s,...r.map((l=>l.end))),t=s-e;let o=r.shift();o.offset=e,o.length=t,o.end=s,this.list=this.list.filter((l=>!r.includes(l)))}else this.list.push({offset:e,length:t,end:s})}available(e,t){let i=e+t;return this.list.some((s=>s.offset<=e&&i<=s.end))}}function L_(n,e,t){return n<=e&&e<=t}class HV extends UV{constructor(e,t){super(0),qt(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,i=await this.readChunk(e,t);return!!i&&i.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}gx.set("blob",class extends HV{async readWhole(){this.chunked=!1;let n=await jv(this.input);this._swapArrayBuffer(n)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(n,e){let t=e?n+e:void 0,i=this.input.slice(n,t),s=await jv(i);return this.set(s,n,!0)}});const GV="5.0.2",VV={version:GV},qV={strings:{generatingThumbnails:"Generating thumbnails..."}};function WV(n,e,t){try{n.getContext("2d").getImageData(0,0,1,1)}catch(i){if(i.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return n.toBlob?new Promise(i=>{n.toBlob(i,e,t)}).then(i=>{if(i===null)throw new Error("cannot read image, probably an svg with external resources");return i}):Promise.resolve().then(()=>tG(n.toDataURL(e,t),{})).then(i=>{if(i===null)throw new Error("could not extract blob, probably an old browser");return i})}function KV(n,e){let t=n.width,i=n.height;(e.deg===90||e.deg===270)&&(t=n.height,i=n.width);const s=document.createElement("canvas");s.width=t,s.height=i;const r=s.getContext("2d");return r.translate(t/2,i/2),e.canvas&&(r.rotate(e.rad),r.scale(e.scaleX,e.scaleY)),r.drawImage(n,-n.width/2,-n.height/2,n.width,n.height),s}function YV(n){const e=n.width/n.height,t=5e6,i=4096;let s=Math.floor(Math.sqrt(t*e)),r=Math.floor(t/Math.sqrt(t*e));if(s>i&&(s=i,r=Math.round(s/e)),r>i&&(r=i,s=Math.round(e*r)),n.width>s){const o=document.createElement("canvas");return o.width=s,o.height=r,o.getContext("2d").drawImage(n,0,0,s,r),o}return n}const XV={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class QV extends Ql{static VERSION=VV.version;queue;queueProcessing;defaultThumbnailDimension;thumbnailType;constructor(e,t){if(super(e,{...XV,...t}),this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=qV,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,i){if(e.data==null)throw new Error("File data is empty");const s=URL.createObjectURL(e.data),r=new Promise((l,d)=>{const u=new Image;u.src=s,u.addEventListener("load",()=>{URL.revokeObjectURL(s),l(u)}),u.addEventListener("error",f=>{URL.revokeObjectURL(s),d(f.error||new Error("Could not create thumbnail"))})}),o=BV(e.data).catch(()=>1);return Promise.all([r,o]).then(([l,d])=>{const u=this.getProportionalDimensions(l,t,i,d.deg),f=KV(l,d),p=this.resizeImage(f,u.width,u.height);return WV(p,this.thumbnailType,80)}).then(l=>URL.createObjectURL(l))}getProportionalDimensions(e,t,i,s){let r=e.width/e.height;if((s===90||s===270)&&(r=e.height/e.width),t!=null){let o=t;return e.width<t&&(o=e.width),{width:o,height:Math.round(o/r)}}if(i!=null){let o=i;return e.height<i&&(o=e.height),{width:Math.round(o*r),height:o}}return{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/r)}}resizeImage(e,t,i){let s=YV(e),r=Math.ceil(Math.log2(s.width/t));r<1&&(r=1);let o=t*2**(r-1),l=i*2**(r-1);const d=2;for(;r--;){const u=document.createElement("canvas");u.width=o,u.height=l,u.getContext("2d").drawImage(s,0,0,o,l),s=u,o=Math.round(o/d),l=Math.round(l/d)}return s}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return Bk(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)}).catch(t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)}):Promise.resolve()}onFileAdded=e=>{!e.preview&&e.data&&Bk(e.type)&&!e.isRemote&&this.addToQueue(e.id)};onCancelRequest=e=>{const t=this.queue.indexOf(e.id);t!==-1&&this.queue.splice(t,1)};onFileRemoved=e=>{const t=this.queue.indexOf(e.id);t!==-1&&this.queue.splice(t,1),e.preview&&jk(e.preview)&&URL.revokeObjectURL(e.preview)};onRestored=()=>{this.uppy.getFiles().filter(t=>t.isRestored).forEach(t=>{(!t.preview||jk(t.preview))&&this.addToQueue(t.id)})};onAllFilesRemoved=()=>{this.queue=[]};waitUntilAllProcessed=e=>{e.forEach(i=>{const s=this.uppy.getFile(i);this.uppy.emit("preprocess-progress",s,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const t=()=>{e.forEach(i=>{const s=this.uppy.getFile(i);this.uppy.emit("preprocess-complete",s)})};return new Promise(i=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{t(),i()}):(t(),i())})};install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}let ZV="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",mL=(n=21)=>{let e="",t=n|0;for(;t--;)e+=ZV[Math.random()*64|0];return e};const JV="5.0.4",eq={version:JV};class gL extends Ms{fileInput=null;folderInput=null;mobilePhotoFileInput=null;mobileVideoFileInput=null;triggerFileInputClick=()=>{this.fileInput?.click()};triggerFolderInputClick=()=>{this.folderInput?.click()};triggerVideoCameraInputClick=()=>{this.mobileVideoFileInput?.click()};triggerPhotoCameraInputClick=()=>{this.mobilePhotoFileInput?.click()};onFileInputChange=e=>{this.props.handleInputChange(e),e.currentTarget.value=""};renderHiddenInput=(e,t)=>B("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes?.join(", "),ref:t});renderHiddenCameraInput=(e,t,i)=>{const r={photo:"image/*",video:"video/*"}[e];return B("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:t===""?"environment":t,accept:r,ref:i})};renderMyDeviceAcquirer=()=>B("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[B("div",{className:"uppy-DashboardTab-inner",children:B("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:B("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),B("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})});renderPhotoCamera=()=>B("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[B("div",{className:"uppy-DashboardTab-inner",children:B("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:B("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),B("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})});renderVideoCamera=()=>B("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[B("div",{className:"uppy-DashboardTab-inner",children:B("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:B("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),B("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})});renderBrowseButton=(e,t)=>{const i=this.props.acquirers.length;return B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":i===0,children:e})};renderDropPasteBrowseTagline=e=>{const t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),i=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),s=this.props.fileManagerSelectionType,r=s.charAt(0).toUpperCase()+s.slice(1);return B("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${r}`,{browseFiles:t,browseFolders:i,browse:t}):this.props.i18nArray(`dropPaste${r}`,{browseFiles:t,browseFolders:i,browse:t})})};[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderAcquirer=e=>B("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id,children:B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":this.props.activePickerPanel?.id===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id),children:[B("div",{className:"uppy-DashboardTab-inner",children:e.icon()}),B("div",{className:"uppy-DashboardTab-name",children:e.name})]})});renderAcquirers=e=>{const t=[...e],i=t.splice(e.length-2,e.length);return B(Pr,{children:[t.map(s=>this.renderAcquirer(s)),B("span",{role:"presentation",style:{"white-space":"nowrap"},children:i.map(s=>this.renderAcquirer(s))})]})};renderSourcesList=(e,t)=>{const{showNativePhotoCameraButton:i,showNativeVideoCameraButton:s}=this.props;let r=[];const o="myDevice";t||r.push({key:o,elements:this.renderMyDeviceAcquirer()}),i&&r.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),s&&r.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),r.push(...e.map(f=>({key:f.id,elements:this.renderAcquirer(f)}))),r.length===1&&r[0].key===o&&(r=[]);const d=[...r],u=d.splice(r.length-2,r.length);return B(Pr,{children:[this.renderDropPasteBrowseTagline(r.length),B("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[d.map(({key:f,elements:p})=>B(Pr,{children:p},f)),B("span",{role:"presentation",style:{"white-space":"nowrap"},children:u.map(({key:f,elements:p})=>B(Pr,{children:p},f))})]})]})};renderPoweredByUppy(){const{i18nArray:e}=this.props,t=B("span",{children:[B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:B("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),B("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),i=e("poweredBy",{uppy:t});return B("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:i})}render(){const{showNativePhotoCameraButton:e,showNativeVideoCameraButton:t,nativeCameraFacingMode:i}=this.props;return B("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,s=>{this.fileInput=s}),this.renderHiddenInput(!0,s=>{this.folderInput=s}),e&&this.renderHiddenCameraInput("photo",i,s=>{this.mobilePhotoFileInput=s}),t&&this.renderHiddenCameraInput("video",i,s=>{this.mobileVideoFileInput=s}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),B("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&B("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const tq=n=>B("div",{className:$s("uppy-Dashboard-AddFilesPanel",n.className),"data-uppy-panelType":"AddFiles","aria-hidden":!n.showAddFilesPanel,children:[B("div",{className:"uppy-DashboardContent-bar",children:[B("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:n.i18n("addingMoreFiles")}),B("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>n.toggleAddFilesPanel(!1),children:n.i18n("back")})]}),B(gL,{...n})]});function iq(n){const e=n.files[n.fileCardFor],t=()=>{n.uppy.emit("file-editor:cancel",e),n.closeFileEditor()};return B("div",{className:$s("uppy-DashboardContent-panel",n.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[B("div",{className:"uppy-DashboardContent-bar",children:[B("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:n.i18nArray("editing",{file:B("span",{className:"uppy-DashboardContent-titleFile",children:e.meta?e.meta.name:e.name})})}),B("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:n.i18n("cancel")}),B("button",{className:"uppy-DashboardContent-save",type:"button",onClick:n.saveFileEditor,children:n.i18n("save")})]}),B("div",{className:"uppy-DashboardContent-panelBody",children:n.editors.map(i=>n.uppy.getPlugin(i.id).render(n.state))})]})}function nq(){return B("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:B("g",{fill:"#686DE0",fillRule:"evenodd",children:[B("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),B("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),B("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function sq(){return B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:B("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function rq(){return B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:B("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function oq(){return B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:B("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function aq(){return B("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:B("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function lq(){return B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:B("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[B("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),B("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function cq(){return B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:B("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function xx(n){const e={color:"#838999",icon:lq()};if(!n)return e;const t=n.split("/")[0],i=n.split("/")[1];return t==="text"?{color:"#5a5e69",icon:cq()}:t==="image"?{color:"#686de0",icon:nq()}:t==="audio"?{color:"#068dbb",icon:sq()}:t==="video"?{color:"#19af67",icon:rq()}:t==="application"&&i==="pdf"?{color:"#e25149",icon:oq()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(i)!==-1?{color:"#00C469",icon:aq()}:e}function Oo(n){const{tagName:e}=n.target;if(e==="INPUT"||e==="TEXTAREA"){n.stopPropagation();return}n.preventDefault(),n.stopPropagation()}function bL(n){const{file:e}=n;if(e.preview)return B("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});const{color:t,icon:i}=xx(e.type);return B("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[B("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t},children:i}),B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:B("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function dq(n){const{computedMetaFields:e,requiredMetaFields:t,updateMeta:i,form:s,formState:r}=n,o={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(l=>{const d=`uppy-Dashboard-FileCard-input-${l.id}`,u=t.includes(l.id);return B("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[B("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:d,children:l.name}),l.render!==void 0?l.render({value:r[l.id],onChange:f=>i(f,l.id),fieldCSSClasses:o,required:u,form:s.id},cx):B("input",{className:o.text,id:d,form:s.id,type:l.type||"text",required:u,value:r[l.id],placeholder:l.placeholder,onInput:f=>i(f.target.value,l.id),"data-uppy-super-focusable":!0})]},l.id)})}function uq(n){const{files:e,fileCardFor:t,toggleFileCard:i,saveFileCard:s,metaFields:r,requiredMetaFields:o,openFileEditor:l,i18n:d,i18nArray:u,className:f,canEditFile:p}=n,b=()=>typeof r=="function"?r(e[t]):r,v=e[t],y=b()??[],w=p(v),E={};y.forEach(N=>{E[N.id]=v.meta[N.id]??""});const[T,k]=Xl(E),_=cp(N=>{N.preventDefault(),s(T,t)},[s,T,t]),O=(N,L)=>{k({...T,[L]:N})},R=()=>{i(!1)},[M]=Xl(()=>{const N=document.createElement("form");return N.setAttribute("tabindex","-1"),N.id=mL(),N}),P=jl(null);return lp(()=>{const N=P.current?.getRootNode()??document;return N instanceof Document?N.body.appendChild(M):(N instanceof ShadowRoot,N.appendChild(M)),M.addEventListener("submit",_),()=>{M.removeEventListener("submit",_),M.parentNode&&M.parentNode.removeChild(M)}},[M,_]),B("div",{className:$s("uppy-Dashboard-FileCard",f),"data-uppy-panelType":"FileCard",onDragOver:Oo,onDragLeave:Oo,onDrop:Oo,onPaste:Oo,ref:P,children:[B("div",{className:"uppy-DashboardContent-bar",children:[B("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:u("editing",{file:B("span",{className:"uppy-DashboardContent-titleFile",children:v.meta?v.meta.name:v.name})})}),B("button",{className:"uppy-DashboardContent-back",type:"button",form:M.id,title:d("finishEditingFile"),onClick:R,children:d("cancel")})]}),B("div",{className:"uppy-Dashboard-FileCard-inner",children:[B("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:xx(v.type).color},children:[B(bL,{file:v}),w&&B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:N=>{_(N),l(v)},children:d("editImage")})]}),B("div",{className:"uppy-Dashboard-FileCard-info",children:B(dq,{computedMetaFields:y,requiredMetaFields:o,updateMeta:O,form:M,formState:T})}),B("div",{className:"uppy-Dashboard-FileCard-actions",children:[B("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:M.id,children:d("saveChanges")}),B("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:R,form:M.id,children:d("cancel")})]})]})]})}function hq(n,e){if(n===e)return!0;if(!n||!e)return!1;const t=Object.keys(n),i=Object.keys(e),s=t.length;if(i.length!==s)return!1;for(let r=0;r<s;r++){const o=t[r];if(n[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}function fq(n,e="Copy the URL below"){return new Promise(t=>{const i=document.createElement("textarea");i.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),i.value=n,document.body.appendChild(i),i.select();const s=()=>{document.body.removeChild(i),window.prompt(e,n),t()};try{return document.execCommand("copy")?(document.body.removeChild(i),t()):s()}catch{return document.body.removeChild(i),s()}})}function pq({file:n,uploadInProgressOrComplete:e,metaFields:t,canEditFile:i,i18n:s,onClick:r}){return!e&&t&&t.length>0||!e&&i(n)?B("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":s("editFileWithFilename",{file:n.meta.name}),title:s("editFileWithFilename",{file:n.meta.name}),onClick:()=>r(),children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:B("g",{fillRule:"evenodd",children:[B("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),B("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),B("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function mq({i18n:n,onClick:e,file:t}){return B("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":n("removeFile",{file:t.meta.name}),title:n("removeFile",{file:t.meta.name}),onClick:()=>e(),children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[B("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),B("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function gq({file:n,uppy:e,i18n:t}){const i=s=>{fq(n.uploadURL,t("copyLinkToClipboardFallback")).then(()=>{e.log("Link copied to clipboard."),e.info(t("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.log).then(()=>s.target.focus({preventScroll:!0}))};return B("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":t("copyLink"),title:t("copyLink"),onClick:s=>i(s),children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:B("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function bq(n){const{uppy:e,file:t,uploadInProgressOrComplete:i,canEditFile:s,metaFields:r,showLinkToFileUploadResult:o,showRemoveButton:l,i18n:d,toggleFileCard:u,openFileEditor:f}=n;return B("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[B(pq,{i18n:d,file:t,uploadInProgressOrComplete:i,canEditFile:s,metaFields:r,onClick:()=>{r&&r.length>0?u(!0,t.id):f(t)}}),o&&t.uploadURL?B(gq,{file:t,uppy:e,i18n:d}):null,l?B(mq,{i18n:d,file:t,onClick:()=>e.removeFile(t.id)}):null]})}const vq=(n,e)=>(typeof e=="function"?e():e).filter(s=>s.id===n)[0].name;function vL(n){const{file:e,toggleFileCard:t,i18n:i,metaFields:s}=n,{missingRequiredMetaFields:r}=e;if(!r?.length)return null;const o=r.map(l=>vq(l,s)).join(", ");return B("div",{className:"uppy-Dashboard-Item-errorMessage",children:[i("missingRequiredMetaFields",{smart_count:r.length,fields:o})," ",B("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id),children:i("editFile")})]})}const yq=n=>{const{author:e,name:t}=n.file.meta;function i(){return n.isSingleFile&&n.containerHeight>=350?90:n.containerWidth<=352?35:n.containerWidth<=576?60:e?20:30}return B("div",{className:"uppy-Dashboard-Item-name",title:t,children:UR(t,i())})},xq=n=>{const{author:e}=n.file.meta,t="remote"in n.file?n.file.remote?.providerName:void 0,i="";return e?B("div",{className:"uppy-Dashboard-Item-author",children:[B("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:UR(e.name,13)}),t?B(Pr,{children:[` ${i} `,t,` ${i} `]}):null]}):null},wq=n=>n.file.size&&B("div",{className:"uppy-Dashboard-Item-statusSize",children:pa(n.file.size)}),Sq=n=>n.file.isGhost&&B("span",{children:["  ",B("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>n.toggleAddFilesPanel(!0),children:n.i18n("reSelect")})]}),Eq=({file:n,onClick:e})=>n.error?B("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":n.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:e,type:"button",children:"?"}):null;function Tq(n){const{file:e,i18n:t,toggleFileCard:i,metaFields:s,toggleAddFilesPanel:r,isSingleFile:o,containerHeight:l,containerWidth:d}=n;return B("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source,children:[B("div",{className:"uppy-Dashboard-Item-fileName",children:[yq({file:e,isSingleFile:o,containerHeight:l,containerWidth:d}),B(Eq,{file:e,onClick:()=>alert(e.error)})]}),B("div",{className:"uppy-Dashboard-Item-status",children:[xq({file:e}),wq({file:e}),Sq({file:e,toggleAddFilesPanel:r,i18n:t})]}),B(vL,{file:e,i18n:t,toggleFileCard:i,metaFields:s})]})}function kq(n){const{file:e,i18n:t,toggleFileCard:i,metaFields:s,showLinkToFileUploadResult:r}=n,l=e.preview?"rgba(255, 255, 255, 0.5)":xx(e.type).color;return B("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:l},children:[r&&e.uploadURL&&B("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name,children:B("span",{hidden:!0,children:e.meta.name})}),B(bL,{file:e}),B(vL,{file:e,i18n:t,toggleFileCard:i,metaFields:s})]})}function _q(n){if(!n.isUploaded){if(n.error&&!n.hideRetryButton){n.uppy.retryUpload(n.file.id);return}n.resumableUploads&&!n.hidePauseResumeButton?n.uppy.pauseResume(n.file.id):n.individualCancellation&&!n.hideCancelButton&&n.uppy.removeFile(n.file.id)}}function D_(n){return n.isUploaded?n.i18n("uploadComplete"):n.error?n.i18n("retryUpload"):n.resumableUploads?n.file.isPaused?n.i18n("resumeUpload"):n.i18n("pauseUpload"):n.individualCancellation?n.i18n("cancelUpload"):""}function cb(n){return B("div",{className:"uppy-Dashboard-Item-progress",children:B("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":D_(n),title:D_(n),onClick:()=>_q(n),children:n.children})})}function $h({children:n}){return B("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:n})}function db({progress:n}){const e=2*Math.PI*15;return B("g",{children:[B("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),B("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":e,"stroke-dashoffset":e-e/100*n})]})}function Aq(n){return!n.file.progress.uploadStarted||n.file.progress.percentage===void 0?null:n.isUploaded?B("div",{className:"uppy-Dashboard-Item-progress",children:B("div",{className:"uppy-Dashboard-Item-progressIndicator",children:B($h,{children:[B("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),B("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):n.recoveredState?null:n.error&&!n.hideRetryButton?B(cb,{...n,children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[B("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),B("path",{d:"M7.9 3H10v2H7.9z"}),B("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),B("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):n.resumableUploads&&!n.hidePauseResumeButton?B(cb,{...n,children:B($h,{children:[B(db,{progress:n.file.progress.percentage}),n.file.isPaused?B("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):B("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[B("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),B("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!n.resumableUploads&&n.individualCancellation&&!n.hideCancelButton?B(cb,{...n,children:B($h,{children:[B(db,{progress:n.file.progress.percentage}),B("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):B("div",{className:"uppy-Dashboard-Item-progress",children:B("div",{className:"uppy-Dashboard-Item-progressIndicator",children:B($h,{children:B(db,{progress:n.file.progress.percentage})})})})}class Cq extends Ms{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!hq(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,i=!!e.progress.uploadComplete&&!t&&!e.error,s=!!e.progress.uploadStarted||!!t,r=e.progress.uploadStarted&&!e.progress.uploadComplete||t,o=e.error||!1,{isGhost:l}=e;let d=(this.props.individualCancellation||!r)&&!i;i&&this.props.showRemoveButtonAfterComplete&&(d=!0);const u=$s({"uppy-Dashboard-Item":!0,"is-inprogress":r&&!this.props.recoveredState,"is-processing":t,"is-complete":i,"is-error":!!o,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":l});return B("div",{className:u,id:`uppy_${e.id}`,role:this.props.role,children:[B("div",{className:"uppy-Dashboard-Item-preview",children:[B(kq,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),B(Aq,{uppy:this.props.uppy,file:e,error:o,isUploaded:i,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),B("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[B(Tq,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),B(bq,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:d,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:s,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function Iq(n,e){const t=[];let i=[];return n.forEach(s=>{i.length<e?i.push(s):(t.push(i),i=[s])}),i.length&&t.push(i),t}function Rq({id:n,i18n:e,uppy:t,files:i,resumableUploads:s,hideRetryButton:r,hidePauseResumeButton:o,hideCancelButton:l,showLinkToFileUploadResult:d,showRemoveButtonAfterComplete:u,metaFields:f,isSingleFile:p,toggleFileCard:b,handleRequestThumbnail:v,handleCancelThumbnail:y,recoveredState:w,individualCancellation:E,itemsPerRow:T,openFileEditor:k,canEditFile:_,toggleAddFilesPanel:O,containerWidth:R,containerHeight:M}){const P=T===1?71:200,N=fx(()=>{const D=(U,G)=>Number(i[G].isGhost)-Number(i[U].isGhost),$=Object.keys(i);return w&&$.sort(D),Iq($,T)},[i,T,w]),L=D=>B("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:D.map($=>B(Cq,{uppy:t,id:n,i18n:e,resumableUploads:s,individualCancellation:E,hideRetryButton:r,hidePauseResumeButton:o,hideCancelButton:l,showLinkToFileUploadResult:d,showRemoveButtonAfterComplete:u,metaFields:f,recoveredState:w,isSingleFile:p,containerWidth:R,containerHeight:M,toggleFileCard:b,handleRequestThumbnail:v,handleCancelThumbnail:y,role:"listitem",openFileEditor:k,canEditFile:_,toggleAddFilesPanel:O,file:i[$]},$))},D[0]);return p?B("div",{class:"uppy-Dashboard-files",children:L(N[0])}):B(MG,{class:"uppy-Dashboard-files",role:"list",data:N,renderRow:L,rowHeight:P})}const O_=300;class Lq extends Ms{ref=kG();componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,O_)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,O_)}render(){const{children:e}=this.props;return B("div",{className:"uppy-Informer-animated",ref:this.ref,children:e})}}function Dq(n,e){return Object.assign(n,e)}function Oq(n,e){return n?.key??e}function Nq(n,e){const t=n._ptgLinkedRefs||(n._ptgLinkedRefs={});return t[e]||(t[e]=i=>{n.refs[e]=i})}function Jc(n){const e={};for(let t=0;t<n.length;t++)if(n[t]!=null){const i=Oq(n[t],t.toString(36));e[i]=n[t]}return e}function Pq(n,e){n=n||{},e=e||{};const t=o=>Object.hasOwn(e,o)?e[o]:n[o],i={};let s=[];for(const o in n)Object.hasOwn(e,o)?s.length&&(i[o]=s,s=[]):s.push(o);const r={};for(const o in e){if(Object.hasOwn(i,o))for(let l=0;l<i[o].length;l++){const d=i[o][l];r[i[o][l]]=t(d)}r[o]=t(o)}for(let o=0;o<s.length;o++)r[s[o]]=t(s[o]);return r}const Mq=n=>n;class yL extends Ms{constructor(e,t){super(e,t),this.refs={},this.state={children:Jc(To(To(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){const t=Jc(To(e.children)||[]),i=this.state.children;this.setState(r=>({children:Pq(r.children,t)}));let s;for(s in t)if(Object.hasOwn(t,s)){const r=i&&Object.hasOwn(i,s);t[s]&&r&&this.currentlyTransitioningKeys[s]?(this.keysToEnter.push(s),this.keysToAbortLeave.push(s)):t[s]&&!r&&!this.currentlyTransitioningKeys[s]&&this.keysToEnter.push(s)}for(s in i)if(Object.hasOwn(i,s)){const r=t&&Object.hasOwn(t,s);i[s]&&!r&&!this.currentlyTransitioningKeys[s]&&this.keysToLeave.push(s)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){const t=this.keysToAbortLeave.indexOf(e);t!==-1&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t?.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const t=this.refs[e];t?.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const i=Jc(To(this.props.children)||[]);(!i||!Object.hasOwn(i,e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t?.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const t=this.refs[e];t?.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const i=Jc(To(this.props.children)||[]);(!i||!Object.hasOwn(i,e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;const i=this.refs[e];i?.componentWillLeave?i.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;const i=this.refs[e];i?.componentDidLeave&&i.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const s=Jc(To(this.props.children)||[]);if(s&&Object.hasOwn(s,e))this.performEnter(e);else{const r=Dq({},this.state.children);delete r[e],this.setState({children:r})}}render({childFactory:e,transitionLeave:t,transitionName:i,transitionAppear:s,transitionEnter:r,transitionLeaveTimeout:o,transitionEnterTimeout:l,transitionAppearTimeout:d,component:u,...f},{children:p}){const b=Object.entries(p).map(([v,y])=>{if(!y)return;const w=Nq(this,v);return JR(e(y),{ref:w,key:v})}).filter(Boolean);return cx(u,f,b)}}yL.defaultProps={component:"span",childFactory:Mq};class N_ extends Ms{render(){const{info:e}=this.props.uppy.getState();return B("div",{className:"uppy uppy-Informer",children:B(yL,{children:e.map(t=>B(Lq,{children:B("p",{role:"alert",children:[t.message," ",t.details&&B("span",{"aria-label":t.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${t.message} 

 ${t.details}`),children:"?"})]})},t.message))})})}}function $q({activePickerPanel:n,className:e,hideAllPanels:t,i18n:i,state:s,uppy:r}){const o=jl(null);return B("div",{className:$s("uppy-DashboardContent-panel",e),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${n.id}`,onDragOver:Oo,onDragLeave:Oo,onDrop:Oo,onPaste:Oo,children:[B("div",{className:"uppy-DashboardContent-bar",children:[B("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:i("importFrom",{name:n.name})}),B("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:i("cancel")})]}),B("div",{ref:o,className:"uppy-DashboardContent-panelBody",children:r.getPlugin(n.id).render(s,o.current)})]})}const Hs={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function Fq(n,e,t,i={}){if(n)return Hs.STATE_ERROR;if(e)return Hs.STATE_COMPLETE;if(t)return Hs.STATE_PAUSED;let s=Hs.STATE_WAITING;const r=Object.keys(i);for(let o=0;o<r.length;o++){const{progress:l}=i[r[o]];if(l.uploadStarted&&!l.uploadComplete)return Hs.STATE_UPLOADING;l.preprocess&&s!==Hs.STATE_UPLOADING&&(s=Hs.STATE_PREPROCESSING),l.postprocess&&s!==Hs.STATE_UPLOADING&&s!==Hs.STATE_PREPROCESSING&&(s=Hs.STATE_POSTPROCESSING)}return s}function jq({files:n,i18n:e,isAllComplete:t,isAllErrored:i,isAllPaused:s,inProgressNotPausedFiles:r,newFiles:o,processingFiles:l}){switch(Fq(i,t,s,n)){case"uploading":return e("uploadingXFiles",{smart_count:r.length});case"preprocessing":case"postprocessing":return e("processingXFiles",{smart_count:l.length});case"paused":return e("uploadPaused");case"waiting":return e("xFilesSelected",{smart_count:o.length});case"complete":return e("uploadComplete");case"error":return e("error")}}function Bq(n){const{i18n:e,isAllComplete:t,hideCancelButton:i,maxNumberOfFiles:s,toggleAddFilesPanel:r,uppy:o}=n;let{allowNewUpload:l}=n;return l&&s&&(l=n.totalFileCount<n.maxNumberOfFiles),B("div",{className:"uppy-DashboardContent-bar",children:[!t&&!i?B("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>o.cancelAll(),children:e("cancel")}):B("div",{}),B("div",{className:"uppy-DashboardContent-title",children:B(jq,{...n})}),l?B("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>r(!0),children:[B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:B("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),B("span",{className:"uppy-DashboardContent-addMoreCaption",children:e("addMore")})]}):B("div",{})]})}const ml="uppy-transition-slideDownUp",P_=250;function Fh({children:n}){const[e,t]=Xl(null),[i,s]=Xl(""),r=jl(),o=jl(),l=jl(),d=cp(()=>{s(`${ml}-enter`),cancelAnimationFrame(l.current),clearTimeout(o.current),o.current=void 0,l.current=requestAnimationFrame(()=>{s(`${ml}-enter ${ml}-enter-active`),r.current=setTimeout(()=>{s("")},P_)})},[]),u=cp(()=>{s(`${ml}-leave`),cancelAnimationFrame(l.current),clearTimeout(r.current),r.current=void 0,l.current=requestAnimationFrame(()=>{s(`${ml}-leave ${ml}-leave-active`),o.current=setTimeout(()=>{t(null),s("")},P_)})},[]);return lp(()=>{const f=To(n)[0];e!==f&&(f&&!e?d():e&&!f&&!o.current&&u(),t(f))},[n,e,d,u]),lp(()=>()=>{clearTimeout(r.current),clearTimeout(o.current),cancelAnimationFrame(l.current)},[]),e?JR(e,{className:$s(i,e.props.className)}):null}const qs={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"},Uq="",M_=()=>` ${Uq} `;function zq(n){const{newFiles:e,isUploadStarted:t,recoveredState:i,i18n:s,uploadState:r,isSomeGhost:o,startUpload:l}=n,d=$s("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":r===qs.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),u=e&&t&&!i?s("uploadXNewFiles",{smart_count:e}):s("uploadXFiles",{smart_count:e});return B("button",{type:"button",className:d,"aria-label":s("uploadXFiles",{smart_count:e}),onClick:l,disabled:o,"data-uppy-super-focusable":!0,children:u})}function Hq(n){const{i18n:e,uppy:t}=n;return B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:B("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),e("retry")]})}function Gq(n){const{i18n:e,uppy:t}=n;return B("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:B("g",{fill:"none",fillRule:"evenodd",children:[B("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),B("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function Vq(n){const{isAllPaused:e,i18n:t,isAllComplete:i,resumableUploads:s,uppy:r}=n,o=t(e?"resume":"pause");function l(){if(!i){if(!s){r.cancelAll();return}if(e){r.resumeAll();return}r.pauseAll()}}return B("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:l,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:B("g",{fill:"none",fillRule:"evenodd",children:[B("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),B("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function qq(n){const{i18n:e,doneButtonHandler:t}=n;return B("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0,children:e("done")})}function xL(){return B("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:B("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function Wq(n){const{progress:e}=n,{value:t,mode:i,message:s}=e;return B("div",{className:"uppy-StatusBar-content",children:[B(xL,{}),i==="determinate"?`${Math.round(t*100)}%  `:"",s]})}function Kq(n){const{numUploads:e,complete:t,totalUploadedSize:i,totalSize:s,totalETA:r,i18n:o}=n,l=e>1,d=pa(i);return B("div",{className:"uppy-StatusBar-statusSecondary",children:[l&&o("filesUploadedOfTotal",{complete:t,smart_count:e}),B("span",{className:"uppy-StatusBar-additionalInfo",children:[l&&M_(),s!=null?o("dataUploadedOfTotal",{complete:d,total:pa(s)}):o("dataUploadedOfUnknown",{complete:d}),M_(),r!=null&&o("xTimeLeft",{time:yG(r)})]})]})}function wL(n){const{i18n:e,complete:t,numUploads:i}=n;return B("div",{className:"uppy-StatusBar-statusSecondary",children:e("filesUploadedOfTotal",{complete:t,smart_count:i})})}function Yq(n){const{i18n:e,newFiles:t,startUpload:i}=n,s=$s("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return B("div",{className:"uppy-StatusBar-statusSecondary",children:[B("div",{className:"uppy-StatusBar-statusSecondaryHint",children:e("xMoreFilesAdded",{smart_count:t})}),B("button",{type:"button",className:s,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:i,children:e("upload")})]})}function Xq(n){const{i18n:e,supportsUploadProgress:t,totalProgress:i,hideProgressDetails:s,isUploadStarted:r,isAllComplete:o,isAllPaused:l,newFiles:d,numUploads:u,complete:f,totalUploadedSize:p,totalSize:b,totalETA:v,startUpload:y}=n,w=d&&r;if(!r||o)return null;const E=e(l?"paused":"uploading");function T(){return!l&&!w&&!s?t?B(Kq,{numUploads:u,complete:f,totalUploadedSize:p,totalSize:b,totalETA:v,i18n:e}):B(wL,{i18n:e,complete:f,numUploads:u}):null}return B("div",{className:"uppy-StatusBar-content",title:E,children:[l?null:B(xL,{}),B("div",{className:"uppy-StatusBar-status",children:[B("div",{className:"uppy-StatusBar-statusPrimary",children:t&&i!==0?`${E}: ${i}%`:E}),T(),w?B(Yq,{i18n:e,newFiles:d,startUpload:y}):null]})]})}function Qq(n){const{i18n:e}=n;return B("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete"),children:B("div",{className:"uppy-StatusBar-status",children:B("div",{className:"uppy-StatusBar-statusPrimary",children:[B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:B("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),e("complete")]})})})}function Zq(n){const{error:e,i18n:t,complete:i,numUploads:s}=n;function r(){const o=`${t("uploadFailed")} 

 ${e}`;alert(o)}return B("div",{className:"uppy-StatusBar-content",title:t("uploadFailed"),children:[B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:B("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),B("div",{className:"uppy-StatusBar-status",children:[B("div",{className:"uppy-StatusBar-statusPrimary",children:[t("uploadFailed"),B("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:r,type:"button",children:"?"})]}),B(wL,{i18n:t,complete:i,numUploads:s})]})]})}function ub(n){const e=[];let t="indeterminate",i;for(const{progress:r}of Object.values(n)){const{preprocess:o,postprocess:l}=r;i==null&&(o||l)&&({mode:t,message:i}=o||l),o?.mode==="determinate"&&e.push(o.value),l?.mode==="determinate"&&e.push(l.value)}const s=e.reduce((r,o)=>r+o/e.length,0);return{mode:t,message:i,value:s}}const{STATE_ERROR:$_,STATE_WAITING:Jq,STATE_PREPROCESSING:hb,STATE_UPLOADING:jh,STATE_POSTPROCESSING:fb,STATE_COMPLETE:Bh}=qs;function eW({newFiles:n,allowNewUpload:e,isUploadInProgress:t,isAllPaused:i,resumableUploads:s,error:r,hideUploadButton:o=void 0,hidePauseResumeButton:l=!1,hideCancelButton:d=!1,hideRetryButton:u=!1,recoveredState:f,uploadState:p,totalProgress:b,files:v,supportsUploadProgress:y,hideAfterFinish:w=!1,isSomeGhost:E,doneButtonHandler:T=void 0,isUploadStarted:k,i18n:_,startUpload:O,uppy:R,isAllComplete:M,hideProgressDetails:P=void 0,numUploads:N,complete:L,totalSize:D,totalETA:$,totalUploadedSize:U}){function G(){switch(p){case fb:case hb:{const Se=ub(v);return Se.mode==="determinate"?Se.value*100:b}case $_:return null;case jh:return y?b:null;default:return b}}function Z(){switch(p){case fb:case hb:{const{mode:Se}=ub(v);return Se==="indeterminate"}case jh:return!y;default:return!1}}const se=G(),z=se??100,Y=!r&&n&&(!t&&!i||f)&&e&&!o,V=!d&&p!==Jq&&p!==Bh,q=s&&!l&&p===jh,ie=r&&!M&&!u,j=T&&p===Bh,H=$s("uppy-StatusBar-progress",{"is-indeterminate":Z()}),K=$s("uppy-StatusBar",`is-${p}`,{"has-ghosts":E}),X=(()=>{switch(p){case hb:case fb:return B(Wq,{progress:ub(v)});case Bh:return B(Qq,{i18n:_});case $_:return B(Zq,{error:r,i18n:_,numUploads:N,complete:L});case jh:return B(Xq,{i18n:_,supportsUploadProgress:y,totalProgress:b,hideProgressDetails:P,isUploadStarted:k,isAllComplete:M,isAllPaused:i,newFiles:n,numUploads:N,complete:L,totalUploadedSize:U,totalSize:D,totalETA:$,startUpload:O});default:return null}})();return!(Y||ie||q||V||j)&&!X||p===Bh&&w?null:B("div",{className:K,children:[B("div",{className:H,style:{width:`${z}%`},role:"progressbar","aria-label":`${z}%`,"aria-valuetext":`${z}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":se}),X,B("div",{className:"uppy-StatusBar-actions",children:[Y?B(zq,{newFiles:n,isUploadStarted:k,recoveredState:f,i18n:_,isSomeGhost:E,startUpload:O,uploadState:p}):null,ie?B(Hq,{i18n:_,uppy:R}):null,q?B(Vq,{isAllPaused:i,i18n:_,isAllComplete:M,resumableUploads:s,uppy:R}):null,V?B(Gq,{i18n:_,uppy:R}):null,j?B(qq,{i18n:_,doneButtonHandler:T}):null]})]})}const tW=2e3,iW=2e3;function nW(n,e,t,i){if(n)return qs.STATE_ERROR;if(e)return qs.STATE_COMPLETE;if(t)return qs.STATE_WAITING;let s=qs.STATE_WAITING;const r=Object.keys(i);for(let o=0;o<r.length;o++){const{progress:l}=i[r[o]];if(l.uploadStarted&&!l.uploadComplete)return qs.STATE_UPLOADING;l.preprocess&&(s=qs.STATE_PREPROCESSING),l.postprocess&&s!==qs.STATE_PREPROCESSING&&(s=qs.STATE_POSTPROCESSING)}return s}class sW extends Ms{#e;#t;#n;#i;componentDidMount(){this.#e=performance.now(),this.#t=this.props.uppy.getFiles().reduce((e,t)=>e+(t.progress.bytesUploaded||0),0),this.props.uppy.on("upload",this.#s)}componentWillUnmount(){this.props.uppy.off("upload",this.#s)}#s=()=>{const{recoveredState:e}=this.props.uppy.getState();if(this.#n=null,this.#i=null,e){this.#t=Object.values(e.files).reduce((t,{progress:i})=>t+(i.bytesUploaded||0),0);return}this.#e=performance.now(),this.#t=0};#r(e){if(e.total==null||e.total===0)return null;const t=e.total-e.uploaded;if(t<=0)return null;this.#e??=performance.now();const i=performance.now()-this.#e;if(i===0)return Math.round((this.#i??0)/100)/10;if(this.#t==null)return this.#t=e.uploaded,null;const s=e.uploaded-this.#t;if(this.#t=e.uploaded,s<=0)return Math.round((this.#i??0)/100)/10;const r=s/i;if(!Number.isFinite(r)||r<=0)return null;const o=this.#n==null?r:Pk(r,this.#n,tW,i);if(!Number.isFinite(o)||o<=0)return null;this.#n=o;const l=t/o;if(!Number.isFinite(l)||l<0)return null;const d=Math.max((this.#i??0)-i,0),u=this.#i==null?l:Pk(l,d,iW,i);return!Number.isFinite(u)||u<0?null:(this.#i=u,this.#e=performance.now(),Math.round(u/100)/10)}startUpload=()=>{const{recoveredState:e}=this.props.uppy.getState();e?this.props.uppy.emit("restore-confirmed"):this.props.uppy.upload().catch((()=>{}))};render(){const{capabilities:e,files:t,allowNewUpload:i,totalProgress:s,error:r,recoveredState:o}=this.props.uppy.getState(),{newFiles:l,startedFiles:d,completeFiles:u,isUploadStarted:f,isAllComplete:p,isAllPaused:b,isUploadInProgress:v,isSomeGhost:y}=this.props.uppy.getObjectOfFilesPerState(),w=o?Object.values(t):l,E=!!e.resumableUploads,T=e.uploadProgress!==!1;let k=null,_=0;d.every(R=>R.progress.bytesTotal!=null&&R.progress.bytesTotal!==0)?(k=0,d.forEach(R=>{k+=R.progress.bytesTotal||0,_+=R.progress.bytesUploaded||0})):d.forEach(R=>{_+=R.progress.bytesUploaded||0});const O=this.#r({uploaded:_,total:k});return B(eW,{error:r,uploadState:nW(r,p,o,t||{}),allowNewUpload:i,totalProgress:s,totalSize:k,totalUploadedSize:_,isAllComplete:p,isAllPaused:b,isUploadStarted:f,isUploadInProgress:v,isSomeGhost:y,recoveredState:o,complete:u.length,newFiles:w.length,numUploads:d.length,totalETA:O,files:t,i18n:this.props.i18n,uppy:this.props.uppy,startUpload:this.startUpload,doneButtonHandler:this.props.doneButtonHandler,resumableUploads:E,supportsUploadProgress:T,hideProgressDetails:this.props.hideProgressDetails,hideUploadButton:this.props.hideUploadButton,hideRetryButton:this.props.hideRetryButton,hidePauseResumeButton:this.props.hidePauseResumeButton,hideCancelButton:this.props.hideCancelButton,hideAfterFinish:this.props.hideAfterFinish})}}const F_=900,j_=700,pb=576,B_=330;function rW(n){const e=n.totalFileCount===0,t=n.totalFileCount===1,i=n.containerWidth>pb,s=n.containerHeight>B_,r=$s({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":n.disabled,"uppy-Dashboard--animateOpenClose":n.animateOpenClose,"uppy-Dashboard--isClosing":n.isClosing,"uppy-Dashboard--isDraggingOver":n.isDraggingOver,"uppy-Dashboard--modal":!n.inline,"uppy-size--md":n.containerWidth>pb,"uppy-size--lg":n.containerWidth>j_,"uppy-size--xl":n.containerWidth>F_,"uppy-size--height-md":n.containerHeight>B_,"uppy-Dashboard--isAddFilesPanelVisible":n.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":n.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":n.singleFileFullScreen&&t&&s});let o=1;n.containerWidth>F_?o=5:n.containerWidth>j_?o=4:n.containerWidth>pb&&(o=3);const l=n.showSelectedFiles&&!e,d=n.recoveredState?Object.keys(n.recoveredState.files).length:null,u=n.files?Object.keys(n.files).filter(b=>n.files[b].isGhost).length:0,f=()=>u>0?n.i18n("recoveredXFiles",{smart_count:u}):n.i18n("recoveredAllFiles");return B("div",{className:r,"data-uppy-theme":n.theme,"data-uppy-num-acquirers":n.acquirers.length,"data-uppy-drag-drop-supported":!n.disableLocalFiles&&gG(),"aria-hidden":n.inline?"false":n.isHidden,"aria-disabled":n.disabled,"aria-label":n.inline?n.i18n("dashboardTitle"):n.i18n("dashboardWindowTitle"),onPaste:n.handlePaste,onDragOver:n.handleDragOver,onDragLeave:n.handleDragLeave,onDrop:n.handleDrop,children:[B("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:n.handleClickOutside}),B("div",{className:"uppy-Dashboard-inner",role:n.inline?void 0:"dialog",style:{width:n.inline&&n.width?n.width:"",height:n.inline&&n.height?n.height:""},children:[n.inline?null:B("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":n.i18n("closeModal"),title:n.i18n("closeModal"),onClick:n.closeModal,children:B("span",{"aria-hidden":"true",children:""})}),B("div",{className:"uppy-Dashboard-innerWrap",children:[B("div",{className:"uppy-Dashboard-dropFilesHereHint",children:n.i18n("dropHint")}),l&&B(Bq,{...n}),d&&B("div",{className:"uppy-Dashboard-serviceMsg",children:[B("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:B("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[B("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),B("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),B("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),B("strong",{className:"uppy-Dashboard-serviceMsg-title",children:n.i18n("sessionRestored")}),B("div",{className:"uppy-Dashboard-serviceMsg-text",children:f()})]}),l?B(Rq,{id:n.id,i18n:n.i18n,uppy:n.uppy,files:n.files,resumableUploads:n.resumableUploads,hideRetryButton:n.hideRetryButton,hidePauseResumeButton:n.hidePauseResumeButton,hideCancelButton:n.hideCancelButton,showLinkToFileUploadResult:n.showLinkToFileUploadResult,showRemoveButtonAfterComplete:n.showRemoveButtonAfterComplete,metaFields:n.metaFields,toggleFileCard:n.toggleFileCard,handleRequestThumbnail:n.handleRequestThumbnail,handleCancelThumbnail:n.handleCancelThumbnail,recoveredState:n.recoveredState,individualCancellation:n.individualCancellation,openFileEditor:n.openFileEditor,canEditFile:n.canEditFile,toggleAddFilesPanel:n.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:o,containerWidth:n.containerWidth,containerHeight:n.containerHeight}):B(gL,{i18n:n.i18n,i18nArray:n.i18nArray,acquirers:n.acquirers,handleInputChange:n.handleInputChange,maxNumberOfFiles:n.maxNumberOfFiles,allowedFileTypes:n.allowedFileTypes,showNativePhotoCameraButton:n.showNativePhotoCameraButton,showNativeVideoCameraButton:n.showNativeVideoCameraButton,nativeCameraFacingMode:n.nativeCameraFacingMode,showPanel:n.showPanel,activePickerPanel:n.activePickerPanel,disableLocalFiles:n.disableLocalFiles,fileManagerSelectionType:n.fileManagerSelectionType,note:n.note,proudlyDisplayPoweredByUppy:n.proudlyDisplayPoweredByUppy}),B(Fh,{children:n.showAddFilesPanel?B(tq,{...n,isSizeMD:i},"AddFiles"):null}),B(Fh,{children:n.fileCardFor?B(uq,{...n},"FileCard"):null}),B(Fh,{children:n.activePickerPanel?B($q,{...n},"Picker"):null}),B(Fh,{children:n.showFileEditor?B(iq,{...n},"Editor"):null}),B("div",{className:"uppy-Dashboard-progressindicators",children:[!n.disableInformer&&B(N_,{uppy:n.uppy}),!n.disableStatusBar&&B(sW,{uppy:n.uppy,i18n:n.i18n,hideProgressDetails:n.hideProgressDetails,hideUploadButton:n.hideUploadButton,hideRetryButton:n.hideRetryButton,hidePauseResumeButton:n.hidePauseResumeButton,hideCancelButton:n.hideCancelButton,hideAfterFinish:n.hideProgressAfterFinish,doneButtonHandler:n.doneButtonHandler}),!n.disableInformer&&B(N_,{uppy:n.uppy}),n.progressindicators.map(b=>n.uppy.getPlugin(b.id).render(n.state))]})]})]})]})}const oW={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video",uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function SL(n,e){if(e){const t=n.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return n}function aW(){let n=!1;return TV((t,i)=>{const s=SL(t,i),r=s.contains(document.activeElement);if(r&&n)return;const o=s.querySelector("[data-uppy-super-focusable]");r&&!o||(o?(o.focus({preventScroll:!0}),n=!0):(s.querySelector(OR)?.focus({preventScroll:!0}),n=!1))},260)}function U_(n,e){const t=e[0];t&&(t.focus(),n.preventDefault())}function lW(n,e){const t=e[e.length-1];t&&(t.focus(),n.preventDefault())}function cW(n){return n.contains(document.activeElement)}function EL(n,e,t){const i=SL(t,e),s=fd(i.querySelectorAll(OR)),r=s.indexOf(document.activeElement);cW(i)?n.shiftKey&&r===0?lW(n,s):!n.shiftKey&&r===s.length-1&&U_(n,s):U_(n,s)}function dW(n,e,t){e===null||EL(n,e,t)}const z_=9,uW=27;function H_(){const n={};return n.promise=new Promise((e,t)=>{n.resolve=e,n.reject=t}),n}const hW={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:kV,showLinkToFileUploadResult:!1,hideProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};class up extends Ql{static VERSION=eq.version;#e;modalName=`uppy-Dashboard-${mL()}`;superFocus=aW();ifFocusedOnUppyRecently=!1;dashboardIsDisabled;savedScrollPosition;savedActiveElement;resizeObserver;darkModeMediaQuery;makeDashboardInsidesVisibleAnywayTimeout;constructor(e,t){const i=t?.autoOpen??null;super(e,{...hW,...t,autoOpen:i}),this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=oW,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),this.opts.onRequestCloseModal??=()=>this.closeModal(),this.i18nInit()}removeTarget=e=>{const i=this.getPluginState().targets.filter(s=>s.id!==e.id);this.setPluginState({targets:i})};addTarget=e=>{const t=e.id||e.constructor.name,i=e.title||t,s=e.type;if(s!=="acquirer"&&s!=="progressindicator"&&s!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const r={id:t,name:i,type:s},l=this.getPluginState().targets.slice();return l.push(r),this.setPluginState({targets:l}),this.el};hideAllPanels=()=>{const e=this.getPluginState(),t={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};e.activePickerPanel===t.activePickerPanel&&e.showAddFilesPanel===t.showAddFilesPanel&&e.showFileEditor===t.showFileEditor&&e.activeOverlayType===t.activeOverlayType||(this.setPluginState(t),this.uppy.emit("dashboard:close-panel",e.activePickerPanel?.id))};showPanel=e=>{const{targets:t}=this.getPluginState(),i=t.find(s=>s.type==="acquirer"&&s.id===e);this.setPluginState({activePickerPanel:i,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",e)};canEditFile=e=>{const{targets:t}=this.getPluginState();return this.#o(t).some(s=>this.uppy.getPlugin(s.id).canEditFile(e))};openFileEditor=e=>{const{targets:t}=this.getPluginState(),i=this.#o(t);this.setPluginState({showFileEditor:!0,fileCardFor:e.id||null,activeOverlayType:"FileEditor"}),i.forEach(s=>{this.uppy.getPlugin(s.id).selectFile(e)})};closeFileEditor=()=>{const{metaFields:e}=this.getPluginState();e&&e.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})};saveFileEditor=()=>{const{targets:e}=this.getPluginState();this.#o(e).forEach(i=>{this.uppy.getPlugin(i.id).save()}),this.closeFileEditor()};openModal=()=>{const{promise:e,resolve:t}=H_();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const i=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",i,!1),t()};this.el.addEventListener("animationend",i,!1)}else this.setPluginState({isHidden:!1}),t();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),e};closeModal=e=>{const t=e?.manualClose??!0,{isHidden:i,isClosing:s}=this.getPluginState();if(i||s)return;const{promise:r,resolve:o}=H_();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const l=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",l,!1),o()};this.el.addEventListener("animationend",l,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),o();return document.removeEventListener("keydown",this.handleKeyDownInModal),t&&this.opts.browserBackButtonClose&&history.state?.[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),r};isModalOpen=()=>!this.getPluginState().isHidden||!1;requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal();setDarkModeCapability=e=>{const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,darkMode:e}})};handleSystemDarkModeChange=e=>{const t=e.matches;this.uppy.log(`[Dashboard] Dark mode is ${t?"on":"off"}`),this.setDarkModeCapability(t)};toggleFileCard=(e,t)=>{const i=this.uppy.getFile(t);e?this.uppy.emit("dashboard:file-edit-start",i):this.uppy.emit("dashboard:file-edit-complete",i),this.setPluginState({fileCardFor:e?t:null,activeOverlayType:e?"FileCard":null})};toggleAddFilesPanel=e=>{this.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})};addFiles=e=>{const t=e.map(i=>({source:this.id,name:i.name,type:i.type,data:i,meta:{relativePath:i.relativePath||i.webkitRelativePath||null}}));try{this.uppy.addFiles(t)}catch(i){this.uppy.log(i)}};startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(e=>{const t=e[0],{width:i,height:s}=t.contentRect;this.setPluginState({containerWidth:i,containerHeight:s,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const e=this.getPluginState(),t=!this.opts.inline&&e.isHidden;!e.areInsidesReadyToBeVisible&&!t&&(this.uppy.log("[Dashboard] resize event didnt fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)};stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)};recordIfFocusedOnUppyRecently=e=>{this.el.contains(e.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())};disableInteractiveElements=e=>{const t=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],i=this.#e??fd(this.el.querySelectorAll(t)).filter(s=>!s.classList.contains("uppy-Dashboard-close"));for(const s of i)s.tagName==="A"?s.setAttribute("aria-disabled",e):s.disabled=e;e?this.#e=i:this.#e=null,this.dashboardIsDisabled=e};updateBrowserHistory=()=>{history.state?.[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)};handlePopState=e=>{this.isModalOpen()&&(!e.state||!e.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&e.state?.[this.modalName]&&history.back()};handleKeyDownInModal=e=>{e.keyCode===uW&&this.requestCloseModal(),e.keyCode===z_&&EL(e,this.getPluginState().activeOverlayType,this.el)};handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()};handlePaste=e=>{this.uppy.iteratePlugins(i=>{i.type==="acquirer"&&i.handleRootPaste?.(e)});const t=fd(e.clipboardData.files);t.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(t))};handleInputChange=e=>{e.preventDefault();const t=fd(e.currentTarget.files||[]);t.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(t))};handleDragOver=e=>{e.preventDefault(),e.stopPropagation();const t=()=>{let o=!0;return this.uppy.iteratePlugins(l=>{l.canHandleRootDrop?.(e)&&(o=!0)}),o},i=()=>{const{types:o}=e.dataTransfer;return o.some(l=>l==="Files")},s=t(),r=i();if(!s&&!r||this.opts.disabled||this.opts.disableLocalFiles&&(r||!s)||!this.uppy.getState().allowNewUpload){e.dataTransfer.dropEffect="none";return}e.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(e)};handleDragLeave=e=>{e.preventDefault(),e.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(e)};handleDrop=async e=>{e.preventDefault(),e.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(r=>{r.type==="acquirer"&&r.handleRootDrop?.(e)});let t=!1;const i=r=>{this.uppy.log(r,"error"),t||(this.uppy.info(r.message,"error"),t=!0)};this.uppy.log("[Dashboard] Processing dropped files");const s=await fG(e.dataTransfer,{logDropError:i});s.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(s)),this.opts.onDrop(e)};handleRequestThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",e)};handleCancelThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",e)};handleKeyDownInInline=e=>{e.keyCode===z_&&dW(e,this.getPluginState().activeOverlayType,this.el)};handlePasteOnBody=e=>{this.el.contains(document.activeElement)&&this.handlePaste(e)};handleComplete=({failed:e})=>{this.opts.closeAfterFinish&&!e?.length&&this.requestCloseModal()};#t=()=>{if(this.opts.disableThumbnailGenerator)return;const e=600,t=this.uppy.getFiles();if(t.length===1){const i=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);i?.setOptions({thumbnailWidth:e});const s={...t[0],preview:void 0};i?.requestThumbnail(s).then(()=>{i?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}};#n=e=>{const t=e[0],{metaFields:i}=this.getPluginState(),s=i&&i.length>0,r=this.canEditFile(t);s&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,t.id):r&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(t)};initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const e=Mk(this.opts.trigger);e?e.forEach(t=>t.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",this.#c),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",this.#t),this.uppy.on("file-removed",this.#t),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",this.#n)};removeEvents=()=>{const e=Mk(this.opts.trigger);!this.opts.inline&&e&&e.forEach(t=>t.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",this.#c),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",this.#t),this.uppy.off("file-removed",this.#t),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",this.#n)};superFocusOnEachUpdate=()=>{const e=this.el.contains(document.activeElement),t=document.activeElement===document.body||document.activeElement===null,i=this.uppy.getState().info.length===0,s=!this.opts.inline;i&&(s||e||t&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()};afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()};saveFileCard=(e,t)=>{this.uppy.setFileMeta(t,e),this.toggleFileCard(!1,t)};#i=e=>{const t=this.uppy.getPlugin(e.id);return{...e,icon:t.icon||this.opts.defaultPickerIcon,render:t.render}};#s=e=>{const t=this.uppy.getPlugin(e.id);return typeof t.isSupported!="function"?!0:t.isSupported()};#r=e=>e.filter(t=>t.type==="acquirer"&&this.#s(t)).map(this.#i);#a=e=>e.filter(t=>t.type==="progressindicator").map(this.#i);#o=e=>e.filter(t=>t.type==="editor").map(this.#i);render=e=>{const t=this.getPluginState(),{files:i,capabilities:s,allowNewUpload:r}=e,{newFiles:o,uploadStartedFiles:l,completeFiles:d,erroredFiles:u,inProgressFiles:f,inProgressNotPausedFiles:p,processingFiles:b,isUploadStarted:v,isAllComplete:y,isAllPaused:w}=this.uppy.getObjectOfFilesPerState(),E=this.#r(t.targets),T=this.#a(t.targets),k=this.#o(t.targets);let _;return this.opts.theme==="auto"?_=s.darkMode?"dark":"light":_=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),rW({state:e,isHidden:t.isHidden,files:i,newFiles:o,uploadStartedFiles:l,completeFiles:d,erroredFiles:u,inProgressFiles:f,inProgressNotPausedFiles:p,processingFiles:b,isUploadStarted:v,isAllComplete:y,isAllPaused:w,totalFileCount:Object.keys(i).length,totalProgress:e.totalProgress,allowNewUpload:r,acquirers:E,theme:_,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:t.activePickerPanel,showFileEditor:t.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:t.isClosing,progressindicators:T,editors:k,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:e.recoveredState,metaFields:t.metaFields,resumableUploads:s.resumableUploads||!1,individualCancellation:s.individualCancellation,isMobileDevice:s.isMobileDevice,fileCardFor:t.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:t.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:t.containerWidth,containerHeight:t.containerHeight,areInsidesReadyToBeVisible:t.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:t.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop,disableInformer:this.opts.disableInformer,disableStatusBar:this.opts.disableStatusBar,hideProgressDetails:this.opts.hideProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideProgressAfterFinish:this.opts.hideProgressAfterFinish,doneButtonHandler:this.opts.doneButtonHandler})};#l=()=>{const{plugins:e}=this.opts;e.forEach(t=>{const i=this.uppy.getPlugin(t);i?i.mount(this,i):this.uppy.log(`[Uppy] Dashboard could not find plugin '${t}', make sure to uppy.use() the plugins you are specifying`,"warning")})};#f=()=>{this.uppy.iteratePlugins(this.#c)};#c=e=>{const t=["acquirer","editor"];e&&!e.opts?.target&&t.includes(e.type)&&(this.getPluginState().targets.some(s=>e.id===s.id)||e.mount(this,e))};#u(){const{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:i,waitForThumbnailsBeforeUpload:s}=this.opts;return{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:i,waitForThumbnailsBeforeUpload:s,lazy:!s}}setOptions(e){super.setOptions(e),this.uppy.getPlugin(this.#d())?.setOptions(this.#u())}#d(){return`${this.id}:ThumbnailGenerator`}install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:e,closeAfterFinish:t}=this.opts;if(e&&t)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:i,allowMultipleUploadBatches:s}=this.uppy.opts;(i||s)&&t&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:r}=this.opts;r&&this.mount(r,this),this.opts.disableThumbnailGenerator||this.uppy.use(QV,{id:this.#d(),...this.#u()}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const o=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${o?"on":"off"}`),this.setDarkModeCapability(o),this.opts.theme==="auto"&&this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange),this.#l(),this.#f(),this.initEvents()};uninstall=()=>{if(!this.opts.disableThumbnailGenerator){const t=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);t&&this.uppy.removePlugin(t)}const{plugins:e}=this.opts;e.forEach(t=>{const i=this.uppy.getPlugin(t);i&&i.unmount()}),this.opts.theme==="auto"&&this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()}}var ed={exports:{}},G_;function fW(){if(G_)return ed.exports;G_=1,ed.exports=i,ed.exports.isMobile=i,ed.exports.default=i;const n=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,t=/android|ipad|playbook|silk/i;function i(s){s||(s={});let r=s.ua;if(!r&&typeof navigator<"u"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),typeof r!="string")return!1;let o=n.test(r)&&!e.test(r)||!!s.tablet&&t.test(r);return!o&&s.tablet&&s.featureDetect&&navigator&&navigator.maxTouchPoints>1&&r.indexOf("Macintosh")!==-1&&r.indexOf("Safari")!==-1&&(o=!0),o}return ed.exports}var pW=fW();const mW="5.0.2",gW={version:mW};function TL(){return B("svg",{"aria-hidden":"true",focusable:"false",fill:"#0097DC",width:"66",height:"55",viewBox:"0 0 66 55",children:B("path",{d:"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z",fillRule:"evenodd"})})}function bW({onDiscard:n,i18n:e}){return B("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--discard",type:"button",title:e("discardRecordedFile"),"aria-label":e("discardRecordedFile"),onClick:n,"data-uppy-super-focusable":!0,children:B("svg",{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon",children:B("g",{fill:"#FFF",fillRule:"evenodd",children:[B("path",{d:"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z"}),B("path",{d:"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z"})]})})})}function vW({recording:n,onStartRecording:e,onStopRecording:t,i18n:i}){return n?B("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:i("stopRecording"),"aria-label":i("stopRecording"),onClick:t,"data-uppy-super-focusable":!0,children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100",children:B("rect",{x:"15",y:"15",width:"70",height:"70"})})}):B("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:i("startRecording"),"aria-label":i("startRecording"),onClick:e,"data-uppy-super-focusable":!0,children:B("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100",children:B("circle",{cx:"50",cy:"50",r:"40"})})})}function yW(n){return`${Math.floor(n/60)}:${String(n%60).padStart(2,"0")}`}function xW({recordingLengthSeconds:n}){const e=yW(n);return B("span",{children:e})}function wW({onSnapshot:n,i18n:e}){return B("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture",type:"button",title:e("takePicture"),"aria-label":e("takePicture"),onClick:n,"data-uppy-super-focusable":!0,children:TL()})}function SW({onSubmit:n,i18n:e}){return B("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--submit",type:"button",title:e("submitRecordedFile"),"aria-label":e("submitRecordedFile"),onClick:n,"data-uppy-super-focusable":!0,children:B("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon",children:B("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"})})})}function EW({currentDeviceId:n,videoSources:e,onChangeVideoSource:t}){return B("div",{className:"uppy-Webcam-videoSource",children:B("select",{className:"uppy-u-reset uppy-Webcam-videoSource-select",onChange:i=>{t(i.target.value)},children:e.map(i=>B("option",{value:i.deviceId,selected:i.deviceId===n,children:i.label},i.deviceId))})})}function Uh(n,e){return n.includes(e)}class TW extends Ms{videoElement;refs;componentDidMount(){const{onFocus:e}=this.props;e()}componentWillUnmount(){const{onStop:e}=this.props;e()}render(){const{src:e,recordedVideo:t,capturedSnapshot:i,recording:s,modes:r,supportsRecording:o,videoSources:l,showVideoSourceDropdown:d,showRecordingLength:u,onSubmit:f,i18n:p,mirror:b,onSnapshot:v,onStartRecording:y,onStopRecording:w,onDiscardRecordedMedia:E,recordingLengthSeconds:T}=this.props,k=!!t,_=!!i,O=k||_,R=!O&&o&&(Uh(r,"video-only")||Uh(r,"audio-only")||Uh(r,"video-audio")),M=!O&&Uh(r,"picture"),P=o&&u&&!k,N=d&&l&&l.length>1,L={playsInline:!0};return t?(L.muted=!1,L.controls=!0,L.src=t,this.videoElement&&(this.videoElement.srcObject=null)):(L.muted=!0,L.autoPlay=!0,L.srcObject=e),B("div",{className:"uppy uppy-Webcam-container",children:[B("div",{className:"uppy-Webcam-videoContainer",children:i&&!s&&!t?B("div",{className:"uppy-Webcam-imageContainer",children:B("img",{src:i,className:"uppy-Webcam-video",alt:"capturedSnapshot"})}):B("video",{ref:D=>{this.videoElement=D},className:`uppy-Webcam-video  ${b?"uppy-Webcam-video--mirrored":""}`,...L})}),B("div",{className:"uppy-Webcam-footer",children:[B("div",{className:"uppy-Webcam-videoSourceContainer",children:N?EW(this.props):null}),B("div",{className:"uppy-Webcam-buttonContainer",children:[M&&B(wW,{onSnapshot:v,i18n:p}),R&&B(vW,{recording:s,onStartRecording:y,onStopRecording:w,i18n:p}),(k||_)&&B(SW,{onSubmit:f,i18n:p}),(k||_)&&B(bW,{onDiscard:E,i18n:p})]}),B("div",{className:"uppy-Webcam-recordingLength",children:P&&B(xW,{recordingLengthSeconds:T})})]})]})}}const kW={strings:{pluginNameCamera:"Camera",noCameraTitle:"Camera Not Available",noCameraDescription:"In order to take pictures or record video, please connect a camera device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",submitRecordedFile:"Submit recorded file",discardRecordedFile:"Discard recorded file",smile:"Smile!",takePicture:"Take a picture",startRecording:"Begin video recording",stopRecording:"Stop video recording",recordingLength:"Recording length %{recording_length}",allowAccessTitle:"Please allow access to your camera",allowAccessDescription:"In order to take pictures or record video with your camera, please allow camera access for this site."}};function _W({icon:n,i18n:e,hasCamera:t}){return B("div",{className:"uppy-Webcam-permissons",children:[B("div",{className:"uppy-Webcam-permissonsIcon",children:n()}),B("div",{className:"uppy-Webcam-title",children:e(t?"allowAccessTitle":"noCameraTitle")}),B("p",{children:e(t?"allowAccessDescription":"noCameraDescription")})]})}function AW(){return typeof MediaRecorder=="function"&&!!MediaRecorder.prototype&&typeof MediaRecorder.prototype.start=="function"}function V_(n){return n[0]==="."?Lv[n.slice(1)]:n}function CW(n){return/^video\/[^*]+$/.test(n)}function IW(n){return/^image\/[^*]+$/.test(n)}function RW(){return navigator.mediaDevices}function mb(n,e){return n.includes(e)}const LW={onBeforeSnapshot:()=>Promise.resolve(),countdown:!1,modes:["video-audio","video-only","audio-only","picture"],mirror:!0,showVideoSourceDropdown:!1,preferredImageMimeType:null,preferredVideoMimeType:null,showRecordingLength:!1,mobileNativeCamera:pW.isMobile({tablet:!0})};class kL extends Ql{static VERSION=gW.version;#e;mediaDevices;supportsUserMedia;protocol;capturedMediaFile;icon;webcamActive;stream=null;recorder=null;recordingChunks=null;recordingLengthTimer;captureInProgress=!1;constructor(e,t){super(e,{...LW,...t}),this.mediaDevices=RW(),this.supportsUserMedia=!!this.mediaDevices,this.protocol=location.protocol.match(/https/i)?"https":"http",this.id=this.opts.id||"Webcam",this.type="acquirer",this.capturedMediaFile=null,this.icon=()=>B("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:B("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383",fillRule:"nonzero"})}),this.defaultLocale=kW,this.i18nInit(),this.title=this.i18n("pluginNameCamera"),this.#e=this.opts.mirror,this.install=this.install.bind(this),this.setPluginState=this.setPluginState.bind(this),this.render=this.render.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.takeSnapshot=this.takeSnapshot.bind(this),this.startRecording=this.startRecording.bind(this),this.stopRecording=this.stopRecording.bind(this),this.discardRecordedMedia=this.discardRecordedMedia.bind(this),this.submit=this.submit.bind(this),this.oneTwoThreeSmile=this.oneTwoThreeSmile.bind(this),this.focus=this.focus.bind(this),this.changeVideoSource=this.changeVideoSource.bind(this),this.webcamActive=!1,this.opts.countdown&&(this.opts.onBeforeSnapshot=this.oneTwoThreeSmile),this.setPluginState({hasCamera:!1,cameraReady:!1,cameraError:null,recordingLengthSeconds:0,videoSources:[],currentDeviceId:null,capturedSnapshot:null})}getStatus(){const{recordedVideo:e,capturedSnapshot:t,isRecording:i,cameraReady:s,cameraError:r}=this.getPluginState();return i?"recording":e!=null||t!=null?"captured":s?"ready":r?"error":"init"}setOptions(e){super.setOptions({...e,videoConstraints:{...this.opts.videoConstraints,...e?.videoConstraints}})}hasCameraCheck(){return this.mediaDevices?this.mediaDevices.enumerateDevices().then(e=>e.some(t=>t.kind==="videoinput")):Promise.resolve(!1)}isAudioOnly(){return this.opts.modes.length===1&&this.opts.modes[0]==="audio-only"}getConstraints(e=null){const t=this.opts.modes.indexOf("video-audio")!==-1||this.opts.modes.indexOf("audio-only")!==-1,i=!this.isAudioOnly()&&(this.opts.modes.indexOf("video-audio")!==-1||this.opts.modes.indexOf("video-only")!==-1||this.opts.modes.indexOf("picture")!==-1),s={...this.opts.videoConstraints||{},...e!=null&&{deviceId:e}};return{audio:t,video:i?s:!1}}start(e=null){if(!this.supportsUserMedia)return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0,this.opts.mirror&&(this.#e=!0);const t=this.getConstraints(e?.deviceId);this.hasCameraCheck().then(i=>(this.setPluginState({hasCamera:i}),this.mediaDevices.getUserMedia(t).then(s=>{this.stream=s;let r=null;const o=this.isAudioOnly()?s.getAudioTracks():s.getVideoTracks();!e||!e.deviceId?r=o[0].getSettings().deviceId:o.forEach(l=>{l.getSettings().deviceId===e.deviceId&&(r=l.getSettings().deviceId)}),this.updateVideoSources(),this.setPluginState({currentDeviceId:r,cameraReady:!0})}).catch(s=>{this.setPluginState({cameraReady:!1,cameraError:s}),this.uppy.info(s.message,"error")})))}getMediaRecorderOptions(){const e={};if(MediaRecorder.isTypeSupported){const{restrictions:t}=this.uppy.opts;let i=[];this.opts.preferredVideoMimeType?i=[this.opts.preferredVideoMimeType]:t.allowedFileTypes&&(i=t.allowedFileTypes.map(V_).filter(CW));const s=o=>MediaRecorder.isTypeSupported(o)&&P0(o),r=i.filter(s);r.length>0&&(e.mimeType=r[0])}return e}startRecording(){this.recorder=new MediaRecorder(this.stream,this.getMediaRecorderOptions()),this.recordingChunks=[];let e=!1;this.recorder.addEventListener("dataavailable",t=>{this.recordingChunks.push(t.data);const{restrictions:i}=this.uppy.opts;if(this.recordingChunks.length>1&&i.maxFileSize!=null&&!e){const s=this.recordingChunks.reduce((d,u)=>d+u.size,0),o=(s-this.recordingChunks[0].size)/(this.recordingChunks.length-1)*3,l=Math.max(0,i.maxFileSize-o);s>l&&(e=!0,this.uppy.info(this.i18n("recordingStoppedMaxSize"),"warning",4e3),this.stopRecording())}}),this.recorder.start(500),this.opts.showRecordingLength&&(this.recordingLengthTimer=setInterval(()=>{const t=this.getPluginState().recordingLengthSeconds;this.setPluginState({recordingLengthSeconds:t+1})},1e3)),this.setPluginState({isRecording:!0})}stopRecording(){return new Promise(t=>{this.recorder.addEventListener("stop",()=>{t()}),this.recorder.stop(),this.opts.showRecordingLength&&(clearInterval(this.recordingLengthTimer),this.setPluginState({recordingLengthSeconds:0}))}).then(()=>(this.setPluginState({isRecording:!1}),this.getVideo())).then(t=>{try{this.capturedMediaFile=t,this.setPluginState({recordedVideo:URL.createObjectURL(t.data)}),this.#e=!1}catch(i){i.isRestriction||this.uppy.log(i)}}).then(()=>{this.recordingChunks=null,this.recorder=null},t=>{throw this.recordingChunks=null,this.recorder=null,t})}discardRecordedMedia(){const{recordedVideo:e,capturedSnapshot:t}=this.getPluginState();e&&URL.revokeObjectURL(e),t&&URL.revokeObjectURL(t),this.setPluginState({recordedVideo:null,capturedSnapshot:null}),this.opts.mirror&&(this.#e=!0),this.capturedMediaFile=null}submit(){try{this.capturedMediaFile&&this.uppy.addFile(this.capturedMediaFile)}catch(e){e.isRestriction||this.uppy.log(e,"error")}}async stop(){if(this.stream){const e=this.stream.getAudioTracks(),t=this.stream.getVideoTracks();e.concat(t).forEach(i=>i.stop())}this.recorder&&await new Promise(e=>{this.recorder.addEventListener("stop",e,{once:!0}),this.recorder.stop(),this.opts.showRecordingLength&&clearInterval(this.recordingLengthTimer)}),this.recordingChunks=null,this.recorder=null,this.webcamActive=!1,this.stream=null,this.setPluginState({recordedVideo:null,capturedSnapshot:null,isRecording:!1,recordingLengthSeconds:0})}getVideoElement(){return this.el.querySelector(".uppy-Webcam-video")}oneTwoThreeSmile(){return new Promise((e,t)=>{let i=this.opts.countdown;const s=setInterval(()=>{if(!this.webcamActive)return clearInterval(s),this.captureInProgress=!1,t(new Error("Webcam is not active"));i?(this.uppy.info(`${i}...`,"warning",800),i--):(clearInterval(s),this.uppy.info(this.i18n("smile"),"success",1500),setTimeout(()=>e(),1500))},1e3)})}async takeSnapshot(){if(!this.captureInProgress){this.captureInProgress=!0;try{await this.opts.onBeforeSnapshot()}catch(e){const t=typeof e=="object"?e.message:e;throw this.uppy.info(t,"error",5e3),new Error(`onBeforeSnapshot: ${t}`)}try{const e=await this.getImage();if(this.capturedMediaFile=e,e.data==null)throw new Error("File data is empty");const t=URL.createObjectURL(e.data);this.setPluginState({capturedSnapshot:t}),this.captureInProgress=!1}catch(e){this.captureInProgress=!1,e.isRestriction||this.uppy.log(e)}}}async getImage(){const e=this.getVideoElement();if(!e)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));const t=e.videoWidth,i=e.videoHeight,s=document.createElement("canvas");s.width=t,s.height=i,s.getContext("2d").drawImage(e,0,0);const{restrictions:o}=this.uppy.opts;let l=[];this.opts.preferredImageMimeType?l=[this.opts.preferredImageMimeType]:o.allowedFileTypes&&(l=o.allowedFileTypes.map(V_).filter(IW));const d=l[0]||"image/jpeg",u=P0(d)||"jpg",f=`cam-${Date.now()}.${u}`;return JH(s,d).then(p=>({source:this.id,name:f,data:new Blob([p],{type:d}),type:d}))}getVideo(){const e=this.recordingChunks.find(o=>o.type?.length>0).type,t=P0(e);if(!t)return Promise.reject(new Error(`Could not retrieve recording: Unsupported media type "${e}"`));const i=`webcam-${Date.now()}.${t}`,s=new Blob(this.recordingChunks,{type:e}),r={source:this.id,name:i,data:new Blob([s],{type:e}),type:e};return Promise.resolve(r)}focus(){this.opts.countdown&&setTimeout(()=>{this.uppy.info(this.i18n("smile"),"success",1500)},1e3)}changeVideoSource(e){this.stop(),this.start({deviceId:e})}updateVideoSources(){this.mediaDevices.enumerateDevices().then(e=>{this.setPluginState({videoSources:e.filter(t=>t.kind==="videoinput")})})}render(){this.webcamActive||this.start();const e=this.getPluginState();return!e.cameraReady||!e.hasCamera?B(_W,{icon:TL,i18n:this.i18n,hasCamera:e.hasCamera}):B(TW,{...e,onChangeVideoSource:this.changeVideoSource,onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onDiscardRecordedMedia:this.discardRecordedMedia,onSubmit:this.submit,onFocus:this.focus,onStop:this.stop,i18n:this.i18n,modes:this.opts.modes,showRecordingLength:this.opts.showRecordingLength,showVideoSourceDropdown:this.opts.showVideoSourceDropdown,supportsRecording:AW(),recording:e.isRecording,mirror:this.#e,src:this.stream})}install(){const{mobileNativeCamera:e,modes:t,videoConstraints:i}=this.opts,{target:s}=this.opts;if(e&&s){this.getTargetPlugin(s)?.setOptions({showNativeVideoCameraButton:mb(t,"video-only")||mb(t,"video-audio"),showNativePhotoCameraButton:mb(t,"picture"),nativeCameraFacingMode:i?.facingMode});return}this.setPluginState({cameraReady:!1,recordingLengthSeconds:0}),s&&this.mount(s,this),this.mediaDevices&&(this.updateVideoSources(),this.mediaDevices.ondevicechange=()=>{if(this.updateVideoSources(),this.stream){let r=!0;const{videoSources:o,currentDeviceId:l}=this.getPluginState();o.forEach(d=>{l===d.deviceId&&(r=!1)}),r&&(this.stop(),this.start())}})}uninstall(){this.stop(),this.unmount()}onUnmount(){this.stop()}}const DW="5.0.2",OW={version:DW},NW={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function PW(n,e){let t=e;return t||(t=new Error("Upload error")),typeof t=="string"&&(t=new Error(t)),t instanceof Error||(t=Object.assign(new Error("Upload error"),{data:t})),bG(n)?(t=new Rv(t,n),t):(t.request=n,t)}function q_(n){return n.data.slice(0,n.data.size,n.meta.type)}const MW={formData:!0,fieldName:"file",method:"post",allowedMetaFields:!0,bundle:!1,headers:{},timeout:30*1e3,limit:5,withCredentials:!1,responseType:""};class _L extends nL{static VERSION=OW.version;#e;requests;uploaderEvents;constructor(e,t){if(super(e,{...MW,fieldName:t.bundle?"files[]":"file",...t}),this.type="uploader",this.id=this.opts.id||"XHRUpload",this.defaultLocale=NW,this.i18nInit(),$0 in this.opts?this.requests=this.opts[$0]:this.requests=new wG(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if(this.opts.bundle&&typeof this.opts.headers=="function")throw new Error("`opts.headers` can not be a function when the `bundle: true` option is set.");if(t?.allowedMetaFields===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null),this.#e=i=>async(s,r)=>{try{const o=await nG(s,{...r,onBeforeRequest:(u,f)=>this.opts.onBeforeRequest?.(u,f,i),shouldRetry:this.opts.shouldRetry,onAfterResponse:this.opts.onAfterResponse,onTimeout:u=>{const f=Math.ceil(u/1e3),p=new Error(this.i18n("uploadStalled",{seconds:f}));this.uppy.emit("upload-stalled",p,i)},onUploadProgress:u=>{if(u.lengthComputable)for(const{id:f}of i){const p=this.uppy.getFile(f);this.uppy.emit("upload-progress",p,{uploadStarted:p.progress.uploadStarted??0,bytesUploaded:u.loaded/u.total*p.size,bytesTotal:p.size})}}});let l=await this.opts.getResponseData?.(o);if(o.responseType==="json")l??=o.response;else try{l??=JSON.parse(o.responseText)}catch(u){throw new Error("@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.",{cause:u})}const d=typeof l?.url=="string"?l.url:void 0;for(const{id:u}of i)this.uppy.emit("upload-success",this.uppy.getFile(u),{status:o.status,body:l,uploadURL:d});return o}catch(o){if(o.name==="AbortError")return;const l=o.request;for(const d of i)this.uppy.emit("upload-error",this.uppy.getFile(d.id),PW(l,o),l);throw o}}}getOptions(e){const t=this.uppy.getState().xhrUpload,{headers:i}=this.opts,s={...this.opts,...t||{},...e.xhrUpload||{},headers:{}};return typeof i=="function"?s.headers=i(e):Object.assign(s.headers,this.opts.headers),t&&Object.assign(s.headers,t.headers),e.xhrUpload&&Object.assign(s.headers,e.xhrUpload.headers),s}addMetadata(e,t,i){Fk(i.allowedMetaFields,t).forEach(r=>{const o=t[r];Array.isArray(o)?o.forEach(l=>e.append(r,l)):e.append(r,o)})}createFormDataUpload(e,t){const i=new FormData;this.addMetadata(i,e.meta,t);const s=q_(e);return e.name?i.append(t.fieldName,s,e.meta.name):i.append(t.fieldName,s),i}createBundledUpload(e,t){const i=new FormData,{meta:s}=this.uppy.getState();return this.addMetadata(i,s,t),e.forEach(r=>{const o=this.getOptions(r),l=q_(r);r.name?i.append(o.fieldName,l,r.name):i.append(o.fieldName,l)}),i}async#t(e){const t=new $G(this.uppy),i=new AbortController,s=this.requests.wrapPromiseFunction(async()=>{const r=this.getOptions(e),o=this.#e([e]),l=r.formData?this.createFormDataUpload(e,r):e.data,d=typeof r.endpoint=="string"?r.endpoint:await r.endpoint(e);return o(d,{...r,body:l,signal:i.signal})});t.onFileRemove(e.id,()=>i.abort()),t.onCancelAll(e.id,()=>{i.abort()});try{await s().abortOn(i.signal)}catch(r){if(r.message!=="Cancelled")throw r}finally{t.remove()}}async#n(e){const t=new AbortController,i=this.requests.wrapPromiseFunction(async()=>{const r=this.uppy.getState().xhrUpload??{},o=this.#e(e),l=this.createBundledUpload(e,{...this.opts,...r}),d=typeof this.opts.endpoint=="string"?this.opts.endpoint:await this.opts.endpoint(e);return o(d,{...this.opts,body:l,signal:t.signal})});function s(){t.abort()}this.uppy.once("cancel-all",s);try{await i().abortOn(t.signal)}catch(r){if(r.message!=="Cancelled")throw r}finally{this.uppy.off("cancel-all",s)}}#i(e){const t=this.getOptions(e),i=Fk(t.allowedMetaFields,e.meta);return{...e.remote?.body,protocol:"multipart",endpoint:t.endpoint,size:e.data.size,fieldname:t.fieldName,metadata:Object.fromEntries(i.map(s=>[s,e.meta[s]])),httpMethod:t.method,useFormData:t.formData,headers:t.headers}}async#s(e){await Promise.allSettled(e.map(t=>{if(t.isRemote){const i=()=>this.requests,s=new AbortController,r=l=>{l.id===t.id&&s.abort()};this.uppy.on("file-removed",r);const o=this.uppy.getRequestClientForFile(t).uploadRemoteFile(t,this.#i(t),{signal:s.signal,getQueue:i});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",r)},{priority:-1})(),o}return this.#t(t)}))}#r=async e=>{if(e.length===0){this.uppy.log("[XHRUpload] No files to upload!");return}this.opts.limit===0&&!this.opts[$0]&&this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");const t=this.uppy.getFilesByIds(e),i=sG(t),s=rG(i);if(this.uppy.emit("upload-start",s),this.opts.bundle){if(i.some(o=>o.isRemote))throw new Error("Cant upload remote files when the `bundle: true` option is set");if(typeof this.opts.headers=="function")throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");await this.#n(i)}else await this.#s(i)};install(){if(this.opts.bundle){const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!1}})}this.uppy.addUploader(this.#r)}uninstall(){if(this.opts.bundle){const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!0}})}this.uppy.removeUploader(this.#r)}}const Uv=30,W_=52428800;async function $W(n){return new Promise(e=>{const t=document.createElement("video");t.preload="metadata",t.src=URL.createObjectURL(n),t.onloadedmetadata=()=>{URL.revokeObjectURL(t.src),t.duration>Uv?e(!1):e(!0)},t.onerror=()=>{URL.revokeObjectURL(t.src),e(!0)}})}async function FW(n,e){if(window.uppyInstance)return console.log("Uppy already initialized, reusing instance"),window.uppyInstance;const t=`${n}/assets/sources/upload.php`,i=new Bp({debug:!1,autoProceed:!1,restrictions:{maxNumberOfFiles:1,minNumberOfFiles:1,maxFileSize:W_,maxTotalFileSize:W_,allowedFileTypes:["video/mp4","video/webm","video/ogg"]}});return i.on("file-added",async s=>{if(s.data instanceof File&&!await $W(s.data)){i.removeFile(s.id);try{const d=i.getPlugin("Dashboard");d&&typeof d.closeModal=="function"?d.closeModal():d&&typeof d.close=="function"&&d.close(),setTimeout(()=>{const u=document.querySelector('.uppy-Dashboard-close, [aria-label*="close" i], button[aria-label*="Close"]');u&&u.click()},50)}catch(d){console.error("Error closing Dashboard:",d)}const l=`Video must be ${Uv} seconds or less. Your video is too long.`;setTimeout(()=>{window.dispatchEvent(new CustomEvent("uppy-upload-error",{detail:{message:l,useSuccessStyle:!0}}))},300);return}const r=URL.createObjectURL(s.data);window.dispatchEvent(new CustomEvent("uppy-file-selected",{detail:{fileUrl:r,fileType:s.type}}))}),i.use(up,{trigger:"#uppyModalOpener",theme:"dark",showProgressDetails:!0,proudlyDisplayPoweredByUppy:!1,closeAfterFinish:!1,note:`Upload only short video up to ${Uv}s, 50MB or less`,browserBackButtonClose:!0}),i.use(kL,{target:up,showVideoSourceDropdown:!0,showRecordingLength:!0,preferredVideoMimeType:"video/webm"}),i.use(_L,{endpoint:t,fieldName:"file",getResponseData(s){const r=s.responseText||s.response;console.log(r);try{const o=JSON.parse(r);return o.contetnerror?(window.dispatchEvent(new CustomEvent("uppy-upload-error",{detail:{message:o.contetnerror}})),{}):(window.dispatchEvent(new CustomEvent("uppy-upload-success",{detail:{path:o.path}})),o)}catch(o){return console.error("Error parsing upload response:",o),{}}},getResponseError(s){const r=s.responseText||s.response;return console.error("Upload error:",r),window.dispatchEvent(new CustomEvent("uppy-upload-error",{detail:{message:"Upload failed. Please try again."}})),new Error("Upload failed")}}),i.on("upload-progress",(s,r)=>{if(r&&r.bytesUploaded&&r.bytesTotal){const o=Math.round(r.bytesUploaded/r.bytesTotal*100);window.dispatchEvent(new CustomEvent("uppy-upload-progress",{detail:{percent:o}}))}}),i.on("upload-success",(s,r)=>{console.log("File uploaded successfully:",s.name)}),i.on("upload-error",(s,r,o)=>{console.error("Upload error:",r,o);const l=r?.message||"Upload failed. Please try again.";window.dispatchEvent(new CustomEvent("uppy-upload-error",{detail:{message:l}}))}),window.uppyInstance=i,i}function jW(){return window.uppyInstance||null}function BW(){return!!window.uppyInstance}const Oe=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},UW=Number.isSafeInteger||function(n){return typeof n=="number"&&Math.abs(n)<=zW},zW=Number.MAX_SAFE_INTEGER||9007199254740991;let qe=(function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n})({}),le=(function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",n.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",n.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.ASSET_LIST_LOAD_ERROR="assetListLoadError",n.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",n.ASSET_LIST_PARSING_ERROR="assetListParsingError",n.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.ATTACH_MEDIA_ERROR="attachMediaError",n.UNKNOWN="unknown",n})({}),I=(function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.MEDIA_ENDED="hlsMediaEnded",n.STALL_RESOLVED="hlsStallResolved",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFERED_TO_END="hlsBufferedToEnd",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",n.ASSET_LIST_LOADING="hlsAssetListLoading",n.ASSET_LIST_LOADED="hlsAssetListLoaded",n.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",n.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",n.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",n.INTERSTITIAL_STARTED="hlsInterstitialStarted",n.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",n.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",n.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",n.INTERSTITIAL_ENDED="hlsInterstitialEnded",n.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",n.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",n.EVENT_CUE_ENTER="hlsEventCueEnter",n})({});var At={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Fe={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class gl{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class HW{constructor(e,t,i,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new gl(e),this.fast_=new gl(t),this.defaultTTFB_=s,this.ttfb_=new gl(e)}update(e,t){const{slow_:i,fast_:s,ttfb_:r}=this;i.halfLife!==e&&(this.slow_=new gl(e,i.getEstimate(),i.getTotalWeight())),s.halfLife!==t&&(this.fast_=new gl(t,s.getEstimate(),s.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new gl(e,r.getEstimate(),r.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const i=8*t,s=e/1e3,r=i/s;this.fast_.sample(s,r),this.slow_.sample(s,r)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function GW(n,e,t){return(e=qW(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ai(){return ai=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ai.apply(null,arguments)}function K_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function ei(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?K_(Object(t),!0).forEach(function(i){GW(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):K_(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function VW(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qW(n){var e=VW(n,"string");return typeof e=="symbol"?e:e+""}class ys{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const i=`[${e}]:`;this.trace=ko,this.debug=t.debug.bind(null,i),this.log=t.log.bind(null,i),this.warn=t.warn.bind(null,i),this.info=t.info.bind(null,i),this.error=t.error.bind(null,i)}}const ko=function(){},WW={trace:ko,debug:ko,log:ko,warn:ko,info:ko,error:ko};function zv(){return ai({},WW)}function KW(n,e){const t=self.console[n];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${n}] >`):ko}function Y_(n,e,t){return e[n]?e[n].bind(e):KW(n,t)}const Hv=zv();function YW(n,e,t){const i=zv();if(typeof console=="object"&&n===!0||typeof n=="object"){const s=["debug","log","info","warn","error"];s.forEach(r=>{i[r]=Y_(r,n,t)});try{i.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return zv()}s.forEach(r=>{Hv[r]=Y_(r,n)})}else ai(Hv,i);return i}const ti=Hv;function Bo(n=!0){return typeof self>"u"?void 0:(n||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function XW(n){return typeof self<"u"&&n===self.ManagedMediaSource}function AL(n,e){const t=Object.keys(n),i=Object.keys(e),s=t.length,r=i.length;return!s||!r||s===r&&!t.some(o=>i.indexOf(o)===-1)}function ns(n,e=!1){if(typeof TextDecoder<"u"){const u=new TextDecoder("utf-8").decode(n);if(e){const f=u.indexOf("\0");return f!==-1?u.substring(0,f):u}return u.replace(/\0/g,"")}const t=n.length;let i,s,r,o="",l=0;for(;l<t;){if(i=n[l++],i===0&&e)return o;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:s=n[l++],o+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=n[l++],r=n[l++],o+=String.fromCharCode((i&15)<<12|(s&63)<<6|(r&63)<<0);break}}return o}function fn(n){let e="";for(let t=0;t<n.length;t++){let i=n[t].toString(16);i.length<2&&(i="0"+i),e+=i}return e}function CL(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function QW(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gb={exports:{}},X_;function ZW(){return X_||(X_=1,(function(n,e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,l={buildAbsoluteURL:function(d,u,f){if(f=f||{},d=d.trim(),u=u.trim(),!u){if(!f.alwaysNormalize)return d;var p=l.parseURL(d);if(!p)throw new Error("Error trying to parse base URL.");return p.path=l.normalizePath(p.path),l.buildURLFromParts(p)}var b=l.parseURL(u);if(!b)throw new Error("Error trying to parse relative URL.");if(b.scheme)return f.alwaysNormalize?(b.path=l.normalizePath(b.path),l.buildURLFromParts(b)):u;var v=l.parseURL(d);if(!v)throw new Error("Error trying to parse base URL.");if(!v.netLoc&&v.path&&v.path[0]!=="/"){var y=s.exec(v.path);v.netLoc=y[1],v.path=y[2]}v.netLoc&&!v.path&&(v.path="/");var w={scheme:v.scheme,netLoc:b.netLoc,path:null,params:b.params,query:b.query,fragment:b.fragment};if(!b.netLoc&&(w.netLoc=v.netLoc,b.path[0]!=="/"))if(!b.path)w.path=v.path,b.params||(w.params=v.params,b.query||(w.query=v.query));else{var E=v.path,T=E.substring(0,E.lastIndexOf("/")+1)+b.path;w.path=l.normalizePath(T)}return w.path===null&&(w.path=f.alwaysNormalize?l.normalizePath(b.path):b.path),l.buildURLFromParts(w)},parseURL:function(d){var u=i.exec(d);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(d){for(d=d.split("").reverse().join("").replace(r,"");d.length!==(d=d.replace(o,"")).length;);return d.split("").reverse().join("")},buildURLFromParts:function(d){return d.scheme+d.netLoc+d.path+d.params+d.query+d.fragment}};n.exports=l})()})(gb)),gb.exports}var wx=ZW();class Sx{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var ui={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class IL{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,eK(this,"stats")}setByteRange(e,t){const i=e.split("@",2);let s;i.length===1?s=t?.byteRangeEndOffset||0:s=parseInt(i[1]),this._byteRange=[s,parseInt(i[0])+s]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[ui.AUDIO]:null,[ui.VIDEO]:null,[ui.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Sx),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=wx.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[ui.AUDIO]=null,e[ui.VIDEO]=null,e[ui.AUDIOVIDEO]=null}}function Pi(n){return n.sn!=="initSegment"}class bb extends IL{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(Oe(e)&&Oe(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const i=Object.keys(t);if(i.length===1){const s=this._decryptdata=t[i[0]]||null;s&&(this._decryptdata=s.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Oe(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const i=Object.keys(this.levelkeys),s=i.length;if(s>1||s===1&&(t=this.levelkeys[i[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Oe(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return Pi(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var i;const s=t[e];s&&!((i=this._decryptdata)!=null&&i.keyId)&&(this._decryptdata=s.getDecryptData(this.sn,t))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,i,s,r,o=!1){const{elementaryStreams:l}=this,d=l[e];if(!d){l[e]={startPTS:t,endPTS:i,startDTS:s,endDTS:r,partial:o};return}d.startPTS=Math.min(d.startPTS,t),d.endPTS=Math.max(d.endPTS,i),d.startDTS=Math.min(d.startDTS,s),d.endDTS=Math.max(d.endDTS,r)}}class JW extends IL{constructor(e,t,i,s,r){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=s;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function RL(n,e){const t=Object.getPrototypeOf(n);if(t){const i=Object.getOwnPropertyDescriptor(t,e);return i||RL(t,e)}}function eK(n,e){const t=RL(n,e);t&&(t.enumerable=!0,Object.defineProperty(n,e,t))}const Q_=Math.pow(2,32)-1,tK=[].push,LL={video:1,audio:2,id3:3,text:4};function Vi(n){return String.fromCharCode.apply(null,n)}function DL(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function dt(n,e){const t=OL(n,e);return t<0?4294967296+t:t}function Z_(n,e){let t=dt(n,e);return t*=Math.pow(2,32),t+=dt(n,e+4),t}function OL(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function iK(n){const e=n.byteLength;for(let t=0;t<e;){const i=dt(n,t);if(i>8&&n[t+4]===109&&n[t+5]===111&&n[t+6]===111&&n[t+7]===102)return!0;t=i>1?t+i:e}return!1}function _t(n,e){const t=[];if(!e.length)return t;const i=n.byteLength;for(let s=0;s<i;){const r=dt(n,s),o=Vi(n.subarray(s+4,s+8)),l=r>1?s+r:i;if(o===e[0])if(e.length===1)t.push(n.subarray(s+8,l));else{const d=_t(n.subarray(s+8,l),e.slice(1));d.length&&tK.apply(t,d)}s=l}return t}function nK(n){const e=[],t=n[0];let i=8;const s=dt(n,i);i+=4;let r=0,o=0;t===0?(r=dt(n,i),o=dt(n,i+4),i+=8):(r=Z_(n,i),o=Z_(n,i+8),i+=16),i+=2;let l=n.length+o;const d=DL(n,i);i+=2;for(let u=0;u<d;u++){let f=i;const p=dt(n,f);f+=4;const b=p&2147483647;if((p&2147483648)>>>31===1)return ti.warn("SIDX has hierarchical references (not supported)"),null;const y=dt(n,f);f+=4,e.push({referenceSize:b,subsegmentDuration:y,info:{duration:y/s,start:l,end:l+b-1}}),l+=b,f+=4,i=f}return{earliestPresentationTime:r,timescale:s,version:t,referencesCount:d,references:e}}function NL(n){const e=[],t=_t(n,["moov","trak"]);for(let s=0;s<t.length;s++){const r=t[s],o=_t(r,["tkhd"])[0];if(o){let l=o[0];const d=dt(o,l===0?12:20),u=_t(r,["mdia","mdhd"])[0];if(u){l=u[0];const f=dt(u,l===0?12:20),p=_t(r,["mdia","hdlr"])[0];if(p){const b=Vi(p.subarray(8,12)),v={soun:ui.AUDIO,vide:ui.VIDEO}[b],y=_t(r,["mdia","minf","stbl","stsd"])[0],w=sK(y);v?(e[d]={timescale:f,type:v,stsd:w},e[v]=ei({timescale:f,id:d},w)):e[d]={timescale:f,type:b,stsd:w}}}}}return _t(n,["moov","mvex","trex"]).forEach(s=>{const r=dt(s,4),o=e[r];o&&(o.default={duration:dt(s,12),flags:dt(s,20)})}),e}function sK(n){const e=n.subarray(8),t=e.subarray(86),i=Vi(e.subarray(4,8));let s=i,r;const o=i==="enca"||i==="encv";if(o){const u=_t(e,[i])[0].subarray(i==="enca"?28:78);_t(u,["sinf"]).forEach(p=>{const b=_t(p,["schm"])[0];if(b){const v=Vi(b.subarray(4,8));if(v==="cbcs"||v==="cenc"){const y=_t(p,["frma"])[0];y&&(s=Vi(y))}}})}const l=s;switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const d=_t(t,["avcC"])[0];d&&d.length>3&&(s+="."+Hh(d[1])+Hh(d[2])+Hh(d[3]),r=zh(l==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const d=_t(e,[i])[0],u=_t(d.subarray(28),["esds"])[0];if(u&&u.length>7){let f=4;if(u[f++]!==3)break;f=vb(u,f),f+=2;const p=u[f++];if(p&128&&(f+=2),p&64&&(f+=u[f++]),u[f++]!==4)break;f=vb(u,f);const b=u[f++];if(b===64)s+="."+Hh(b);else break;if(f+=12,u[f++]!==5)break;f=vb(u,f);const v=u[f++];let y=(v&248)>>3;y===31&&(y+=1+((v&7)<<3)+((u[f]&224)>>5)),s+="."+y}break}case"hvc1":case"hev1":{const d=_t(t,["hvcC"])[0];if(d&&d.length>12){const u=d[1],f=["","A","B","C"][u>>6],p=u&31,b=dt(d,2),v=(u&32)>>5?"H":"L",y=d[12],w=d.subarray(6,12);s+="."+f+p,s+="."+rK(b).toString(16).toUpperCase(),s+="."+v+y;let E="";for(let T=w.length;T--;){const k=w[T];(k||E)&&(E="."+k.toString(16).toUpperCase()+E)}s+=E}r=zh(l=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{s=zh(s,t)||s;break}case"vp09":{const d=_t(t,["vpcC"])[0];if(d&&d.length>6){const u=d[4],f=d[5],p=d[6]>>4&15;s+="."+Ws(u)+"."+Ws(f)+"."+Ws(p)}break}case"av01":{const d=_t(t,["av1C"])[0];if(d&&d.length>2){const u=d[1]>>>5,f=d[1]&31,p=d[2]>>>7?"H":"M",b=(d[2]&64)>>6,v=(d[2]&32)>>5,y=u===2&&b?v?12:10:b?10:8,w=(d[2]&16)>>4,E=(d[2]&8)>>3,T=(d[2]&4)>>2,k=d[2]&3;s+="."+u+"."+Ws(f)+p+"."+Ws(y)+"."+w+"."+E+T+k+"."+Ws(1)+"."+Ws(1)+"."+Ws(1)+"."+0,r=zh("dav1",t)}break}}return{codec:s,encrypted:o,supplemental:r}}function zh(n,e){const t=_t(e,["dvvC"]),i=t.length?t[0]:_t(e,["dvcC"])[0];if(i){const s=i[2]>>1&127,r=i[2]<<5&32|i[3]>>3&31;return n+"."+Ws(s)+"."+Ws(r)}}function rK(n){let e=0;for(let t=0;t<32;t++)e|=(n>>t&1)<<31-t;return e>>>0}function vb(n,e){const t=e+5;for(;n[e++]&128&&e<t;);return e}function Hh(n){return("0"+n.toString(16).toUpperCase()).slice(-2)}function Ws(n){return(n<10?"0":"")+n}function oK(n,e){if(!n||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&PL(n,(i,s)=>{const r=i.subarray(8,24);r.some(o=>o!==0)||(ti.log(`[eme] Patching keyId in 'enc${s?"a":"v"}>sinf>>tenc' box: ${fn(r)} -> ${fn(t)}`),i.set(t,8))})}function aK(n){const e=[];return PL(n,t=>e.push(t.subarray(8,24))),e}function PL(n,e){_t(n,["moov","trak"]).forEach(i=>{const s=_t(i,["mdia","minf","stbl","stsd"])[0];if(!s)return;const r=s.subarray(8);let o=_t(r,["enca"]);const l=o.length>0;l||(o=_t(r,["encv"])),o.forEach(d=>{const u=l?d.subarray(28):d.subarray(78);_t(u,["sinf"]).forEach(p=>{const b=ML(p);b&&e(b,l)})})})}function ML(n){const e=_t(n,["schm"])[0];if(e){const t=Vi(e.subarray(4,8));if(t==="cbcs"||t==="cenc"){const i=_t(n,["schi","tenc"])[0];if(i)return i}}}function lK(n,e,t){const i={},s=_t(n,["moof","traf"]);for(let r=0;r<s.length;r++){const o=s[r],l=_t(o,["tfhd"])[0],d=dt(l,4),u=e[d];if(!u)continue;i[d]||(i[d]={start:NaN,duration:0,sampleCount:0,timescale:u.timescale,type:u.type});const f=i[d],p=_t(o,["tfdt"])[0];if(p){const _=p[0];let O=dt(p,4);_===1&&(O===Q_?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(O*=Q_+1,O+=dt(p,8))),Oe(O)&&(!Oe(f.start)||O<f.start)&&(f.start=O)}const b=u.default,v=dt(l,0)|b?.flags;let y=b?.duration||0;v&8&&(v&2?y=dt(l,12):y=dt(l,8));const w=_t(o,["trun"]);let E=f.start||0,T=0,k=y;for(let _=0;_<w.length;_++){const O=w[_],R=dt(O,4),M=f.sampleCount;f.sampleCount+=R;const P=O[3]&1,N=O[3]&4,L=O[2]&1,D=O[2]&2,$=O[2]&4,U=O[2]&8;let G=8,Z=R;for(P&&(G+=4),N&&R&&(!(O[G+1]&1)&&f.keyFrameIndex===void 0&&(f.keyFrameIndex=M),G+=4,L?(k=dt(O,G),G+=4):k=y,D&&(G+=4),U&&(G+=4),E+=k,T+=k,Z--);Z--;)L?(k=dt(O,G),G+=4):k=y,D&&(G+=4),$&&(O[G+1]&1||f.keyFrameIndex===void 0&&(f.keyFrameIndex=f.sampleCount-(Z+1),f.keyFrameStart=E),G+=4),U&&(G+=4),E+=k,T+=k;!T&&y&&(T+=y*R)}f.duration+=T}if(!Object.keys(i).some(r=>i[r].duration)){let r=1/0,o=0;const l=_t(n,["sidx"]);for(let d=0;d<l.length;d++){const u=nK(l[d]);if(u!=null&&u.references){r=Math.min(r,u.earliestPresentationTime/u.timescale);const f=u.references.reduce((p,b)=>p+b.info.duration||0,0);o=Math.max(o,f+u.earliestPresentationTime/u.timescale)}}o&&Oe(o)&&Object.keys(i).forEach(d=>{i[d].duration||(i[d].duration=o*i[d].timescale-i[d].start)})}return i}function cK(n){const e={valid:null,remainder:null},t=_t(n,["moof"]);if(t.length<2)return e.remainder=n,e;const i=t[t.length-1];return e.valid=n.slice(0,i.byteOffset-8),e.remainder=n.slice(i.byteOffset-8),e}function bs(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function J_(n,e){const t=[],i=e.samples,s=e.timescale,r=e.id;let o=!1;return _t(i,["moof"]).map(d=>{const u=d.byteOffset-8;_t(d,["traf"]).map(p=>{const b=_t(p,["tfdt"]).map(v=>{const y=v[0];let w=dt(v,4);return y===1&&(w*=Math.pow(2,32),w+=dt(v,8)),w/s})[0];return b!==void 0&&(n=b),_t(p,["tfhd"]).map(v=>{const y=dt(v,4),w=dt(v,0)&16777215,E=(w&1)!==0,T=(w&2)!==0,k=(w&8)!==0;let _=0;const O=(w&16)!==0;let R=0;const M=(w&32)!==0;let P=8;y===r&&(E&&(P+=8),T&&(P+=4),k&&(_=dt(v,P),P+=4),O&&(R=dt(v,P),P+=4),M&&(P+=4),e.type==="video"&&(o=Up(e.codec)),_t(p,["trun"]).map(N=>{const L=N[0],D=dt(N,0)&16777215,$=(D&1)!==0;let U=0;const G=(D&4)!==0,Z=(D&256)!==0;let se=0;const z=(D&512)!==0;let Y=0;const V=(D&1024)!==0,q=(D&2048)!==0;let ie=0;const j=dt(N,4);let H=8;$&&(U=dt(N,H),H+=4),G&&(H+=4);let K=U+u;for(let X=0;X<j;X++){if(Z?(se=dt(N,H),H+=4):se=_,z?(Y=dt(N,H),H+=4):Y=R,V&&(H+=4),q&&(L===0?ie=dt(N,H):ie=OL(N,H),H+=4),e.type===ui.VIDEO){let ae=0;for(;ae<Y;){const re=dt(i,K);if(K+=4,dK(o,i[K])){const ge=i.subarray(K,K+re);Ex(ge,o?2:1,n+ie/s,t)}K+=re,ae+=re+4}}n+=se/s}}))})})}),t}function Up(n){if(!n)return!1;const e=n.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function dK(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function Ex(n,e,t,i){const s=$L(n);let r=0;r+=e;let o=0,l=0,d=0;for(;r<s.length;){o=0;do{if(r>=s.length)break;d=s[r++],o+=d}while(d===255);l=0;do{if(r>=s.length)break;d=s[r++],l+=d}while(d===255);const u=s.length-r;let f=r;if(l<u)r+=l;else if(l>u){ti.error(`Malformed SEI payload. ${l} is too small, only ${u} bytes left to parse.`);break}if(o===4){if(s[f++]===181){const b=DL(s,f);if(f+=2,b===49){const v=dt(s,f);if(f+=4,v===1195456820){const y=s[f++];if(y===3){const w=s[f++],E=31&w,T=64&w,k=T?2+E*3:0,_=new Uint8Array(k);if(T){_[0]=w;for(let O=1;O<k;O++)_[O]=s[f++]}i.push({type:y,payloadType:o,pts:t,bytes:_})}}}}}else if(o===5&&l>16){const p=[];for(let y=0;y<16;y++){const w=s[f++].toString(16);p.push(w.length==1?"0"+w:w),(y===3||y===5||y===7||y===9)&&p.push("-")}const b=l-16,v=new Uint8Array(b);for(let y=0;y<b;y++)v[y]=s[f++];i.push({payloadType:o,pts:t,uuid:p.join(""),userData:ns(v),userDataBytes:v})}}}function $L(n){const e=n.byteLength,t=[];let i=1;for(;i<e-2;)n[i]===0&&n[i+1]===0&&n[i+2]===3?(t.push(i+2),i+=2):i++;if(t.length===0)return n;const s=e-t.length,r=new Uint8Array(s);let o=0;for(i=0;i<s;o++,i++)o===t[0]&&(o++,t.shift()),r[i]=n[o];return r}function uK(n){const e=n[0];let t="",i="",s=0,r=0,o=0,l=0,d=0,u=0;if(e===0){for(;Vi(n.subarray(u,u+1))!=="\0";)t+=Vi(n.subarray(u,u+1)),u+=1;for(t+=Vi(n.subarray(u,u+1)),u+=1;Vi(n.subarray(u,u+1))!=="\0";)i+=Vi(n.subarray(u,u+1)),u+=1;i+=Vi(n.subarray(u,u+1)),u+=1,s=dt(n,12),r=dt(n,16),l=dt(n,20),d=dt(n,24),u=28}else if(e===1){u+=4,s=dt(n,u),u+=4;const p=dt(n,u);u+=4;const b=dt(n,u);for(u+=4,o=2**32*p+b,UW(o)||(o=Number.MAX_SAFE_INTEGER,ti.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),l=dt(n,u),u+=4,d=dt(n,u),u+=4;Vi(n.subarray(u,u+1))!=="\0";)t+=Vi(n.subarray(u,u+1)),u+=1;for(t+=Vi(n.subarray(u,u+1)),u+=1;Vi(n.subarray(u,u+1))!=="\0";)i+=Vi(n.subarray(u,u+1)),u+=1;i+=Vi(n.subarray(u,u+1)),u+=1}const f=n.subarray(u,n.byteLength);return{schemeIdUri:t,value:i,timeScale:s,presentationTime:o,presentationTimeDelta:r,eventDuration:l,id:d,payload:f}}function hK(n,...e){const t=e.length;let i=8,s=t;for(;s--;)i+=e[s].byteLength;const r=new Uint8Array(i);for(r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(n,4),s=0,i=8;s<t;s++)r.set(e[s],i),i+=e[s].byteLength;return r}function fK(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let i,s;i=0,s=new Uint8Array;let r;i>0?(r=new Uint8Array(4),e.length>0&&new DataView(r.buffer).setUint32(0,e.length,!1)):r=new Uint8Array;const o=new Uint8Array(4);return t.byteLength>0&&new DataView(o.buffer).setUint32(0,t.byteLength,!1),hK([112,115,115,104],new Uint8Array([i,0,0,0]),n,r,s,o,t)}function pK(n){const e=[];if(n instanceof ArrayBuffer){const t=n.byteLength;let i=0;for(;i+32<t;){const s=new DataView(n,i),r=mK(s);e.push(r),i+=r.size}}return e}function mK(n){const e=n.getUint32(0),t=n.byteOffset,i=n.byteLength;if(i<e)return{offset:t,size:i};if(n.getUint32(4)!==1886614376)return{offset:t,size:e};const r=n.getUint32(8)>>>24;if(r!==0&&r!==1)return{offset:t,size:e};const o=n.buffer,l=fn(new Uint8Array(o,t+12,16));let d=null,u=null,f=0;if(r===0)f=28;else{const b=n.getUint32(28);if(!b||i<32+b*16)return{offset:t,size:e};d=[];for(let v=0;v<b;v++)d.push(new Uint8Array(o,t+32+v*16,16));f=32+b*16}if(!f)return{offset:t,size:e};const p=n.getUint32(f);return e-32<p?{offset:t,size:e}:(u=new Uint8Array(o,t+f+4,p),{version:r,systemId:l,kids:d,data:u,offset:t,size:e})}const FL=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Zl={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Tx(n,e){const t=Zl[e];return!!t&&!!t[n.slice(0,4)]}function Nd(n,e,t=!0){return!n.split(",").some(i=>!kx(i,e,t))}function kx(n,e,t=!0){var i;const s=Bo(t);return(i=s?.isTypeSupported(Pd(n,e)))!=null?i:!1}function Pd(n,e){return`${e}/mp4;codecs=${n}`}function eA(n){if(n){const e=n.substring(0,4);return Zl.video[e]}return 2}function hp(n){const e=FL();return n.split(",").reduce((t,i)=>{const r=e&&Up(i)?9:Zl.video[i];return r?(r*2+t)/(t?3:2):(Zl.audio[i]+t)/(t?2:1)},0)}const yb={};function gK(n,e=!0){if(yb[n])return yb[n];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[n];for(let s=0;s<t.length;s++){var i;if(kx(t[s],"audio",e))return yb[n]=t[s],t[s];if(t[s]==="mp3"&&(i=Bo(e))!=null&&i.isTypeSupported("audio/mpeg"))return""}return n}const bK=/flac|opus|mp4a\.40\.34/i;function fp(n,e=!0){return n.replace(bK,t=>gK(t.toLowerCase(),e))}function vK(n,e){const t=[];if(n){const i=n.split(",");for(let s=0;s<i.length;s++)Tx(i[s],"video")||t.push(i[s])}return e&&t.push(e),t.join(",")}function mf(n,e){if(n&&(n.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(n)!==-1)&&(tA(n,"audio")||tA(n,"video")))return n;if(e){const t=e.split(",");if(t.length>1){if(n){for(let i=t.length;i--;)if(t[i].substring(0,4)===n.substring(0,4))return t[i]}return t[0]}}return e||n}function tA(n,e){return Tx(n,e)&&kx(n,e)}function yK(n){const e=n.split(",");for(let t=0;t<e.length;t++){const i=e[t].split(".");i.length>2&&i[0]==="avc1"&&(e[t]=`avc1.${parseInt(i[1]).toString(16)}${("000"+parseInt(i[2]).toString(16)).slice(-4)}`)}return e.join(",")}function xK(n){if(n.startsWith("av01.")){const e=n.split("."),t=["0","111","01","01","01","0"];for(let i=e.length;i>4&&i<10;i++)e[i]=t[i-4];return e.join(".")}return n}function iA(n){const e=Bo(n)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function Gv(n){return n.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const wK={supported:!0,powerEfficient:!0,smooth:!0},SK={supported:!1,smooth:!1,powerEfficient:!1},jL={supported:!0,configurations:[],decodingInfoResults:[wK]};function BL(n,e){return{supported:!1,configurations:e,decodingInfoResults:[SK],error:n}}function EK(n,e,t,i,s,r){const o=n.videoCodec,l=n.audioCodec?n.audioGroups:null,d=r?.audioCodec,u=r?.channels,f=u?parseInt(u):d?1/0:2;let p=null;if(l!=null&&l.length)try{l.length===1&&l[0]?p=e.groups[l[0]].channels:p=l.reduce((b,v)=>{if(v){const y=e.groups[v];if(!y)throw new Error(`Audio track group ${v} not found`);Object.keys(y.channels).forEach(w=>{b[w]=(b[w]||0)+y.channels[w]})}return b},{2:0})}catch{return!0}return o!==void 0&&(o.split(",").some(b=>Up(b))||n.width>1920&&n.height>1088||n.height>1920&&n.width>1088||n.frameRate>Math.max(i,30)||n.videoRange!=="SDR"&&n.videoRange!==t||n.bitrate>Math.max(s,8e6))||!!p&&Oe(f)&&Object.keys(p).some(b=>parseInt(b)>f)}function UL(n,e,t,i={}){const s=n.videoCodec;if(!s&&!n.audioCodec||!t)return Promise.resolve(jL);const r=[],o=TK(n),l=o.length,d=kK(n,e,l>0),u=d.length;for(let f=l||1*u||1;f--;){const p={type:"media-source"};if(l&&(p.video=o[f%l]),u){p.audio=d[f%u];const b=p.audio.bitrate;p.video&&b&&(p.video.bitrate-=b)}r.push(p)}if(s){const f=navigator.userAgent;if(s.split(",").some(p=>Up(p))&&FL())return Promise.resolve(BL(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${f})`),r))}return Promise.all(r.map(f=>{const p=AK(f);return i[p]||(i[p]=t.decodingInfo(f))})).then(f=>({supported:!f.some(p=>!p.supported),configurations:r,decodingInfoResults:f})).catch(f=>({supported:!1,configurations:r,decodingInfoResults:[],error:f}))}function TK(n){var e;const t=(e=n.videoCodec)==null?void 0:e.split(","),i=zL(n),s=n.width||640,r=n.height||480,o=n.frameRate||30,l=n.videoRange.toLowerCase();return t?t.map(d=>{const u={contentType:Pd(xK(d),"video"),width:s,height:r,bitrate:i,framerate:o};return l!=="sdr"&&(u.transferFunction=l),u}):[]}function kK(n,e,t){var i;const s=(i=n.audioCodec)==null?void 0:i.split(","),r=zL(n);return s&&n.audioGroups?n.audioGroups.reduce((o,l)=>{var d;const u=l?(d=e.groups[l])==null?void 0:d.tracks:null;return u?u.reduce((f,p)=>{if(p.groupId===l){const b=parseFloat(p.channels||"");s.forEach(v=>{const y={contentType:Pd(v,"audio"),bitrate:t?_K(v,r):r};b&&(y.channels=""+b),f.push(y)})}return f},o):o},[]):[]}function _K(n,e){if(e<=1)return 1;let t=128e3;return n==="ec-3"?t=768e3:n==="ac-3"&&(t=64e4),Math.min(e/2,t)}function zL(n){return Math.ceil(Math.max(n.bitrate*.9,n.averageBitrate)/1e3)*1e3||1}function AK(n){let e="";const{audio:t,video:i}=n;if(i){const s=Gv(i.contentType);e+=`${s}_r${i.height}x${i.width}f${Math.ceil(i.framerate)}${i.transferFunction||"sd"}_${Math.ceil(i.bitrate/1e5)}`}if(t){const s=Gv(t.contentType);e+=`${i?"_":""}${s}_c${t.channels}`}return e}const Vv=["NONE","TYPE-0","TYPE-1",null];function CK(n){return Vv.indexOf(n)>-1}const pp=["SDR","PQ","HLG"];function IK(n){return!!n&&pp.indexOf(n)>-1}var gf={No:"",Yes:"YES",v2:"v2"};function nA(n){const{canSkipUntil:e,canSkipDateRanges:t,age:i}=n,s=i<e/2;return e&&s?t?gf.v2:gf.Yes:gf.No}class sA{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Md{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(i=>!!i).map(i=>i.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const i=(t=e.supplemental)==null?void 0:t.videoCodec;i&&i!==e.videoCodec&&(this.codecSet+=`,${i.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return rA(this._audioGroups,e)}hasSubtitleGroup(e){return rA(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let i=this._audioGroups;i||(i=this._audioGroups=[]),i.indexOf(t)===-1&&i.push(t)}else if(e==="text"){let i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),i.indexOf(t)===-1&&i.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function rA(n,e){return!e||!n?!1:n.indexOf(e)!==-1}function RK(){if(typeof matchMedia=="function"){const n=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(n.media!==e.media)return n.matches===!0}return!1}function LK(n,e){let t=!1,i=[];if(n&&(t=n!=="SDR",i=[n]),e){i=e.allowedVideoRanges||pp.slice(0);const s=i.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:s&&RK(),t||(i=["SDR"])}return{preferHDR:t,allowedVideoRanges:i}}const DK=n=>{const e=new WeakSet;return(t,i)=>{if(n&&(i=n(t,i)),typeof i=="object"&&i!==null){if(e.has(i))return;e.add(i)}return i}},fi=(n,e)=>JSON.stringify(n,DK(e));function OK(n,e,t,i,s){const r=Object.keys(n),o=i?.channels,l=i?.audioCodec,d=s?.videoCodec,u=o&&parseInt(o)===2;let f=!1,p=!1,b=1/0,v=1/0,y=1/0,w=1/0,E=0,T=[];const{preferHDR:k,allowedVideoRanges:_}=LK(e,s);for(let N=r.length;N--;){const L=n[r[N]];f||(f=L.channels[2]>0),b=Math.min(b,L.minHeight),v=Math.min(v,L.minFramerate),y=Math.min(y,L.minBitrate),_.filter($=>L.videoRanges[$]>0).length>0&&(p=!0)}b=Oe(b)?b:0,v=Oe(v)?v:0;const O=Math.max(1080,b),R=Math.max(30,v);y=Oe(y)?y:t,t=Math.max(y,t),p||(e=void 0);const M=r.length>1;return{codecSet:r.reduce((N,L)=>{const D=n[L];if(L===N)return N;if(T=p?_.filter($=>D.videoRanges[$]>0):[],M){if(D.minBitrate>t)return Gs(L,`min bitrate of ${D.minBitrate} > current estimate of ${t}`),N;if(!D.hasDefaultAudio)return Gs(L,"no renditions with default or auto-select sound found"),N;if(l&&L.indexOf(l.substring(0,4))%5!==0)return Gs(L,`audio codec preference "${l}" not found`),N;if(o&&!u){if(!D.channels[o])return Gs(L,`no renditions with ${o} channel sound found (channels options: ${Object.keys(D.channels)})`),N}else if((!l||u)&&f&&D.channels[2]===0)return Gs(L,"no renditions with stereo sound found"),N;if(D.minHeight>O)return Gs(L,`min resolution of ${D.minHeight} > maximum of ${O}`),N;if(D.minFramerate>R)return Gs(L,`min framerate of ${D.minFramerate} > maximum of ${R}`),N;if(!T.some($=>D.videoRanges[$]>0))return Gs(L,`no variants with VIDEO-RANGE of ${fi(T)} found`),N;if(d&&L.indexOf(d.substring(0,4))%5!==0)return Gs(L,`video codec preference "${d}" not found`),N;if(D.maxScore<E)return Gs(L,`max score of ${D.maxScore} < selected max of ${E}`),N}return N&&(hp(L)>=hp(N)||D.fragmentError>n[N].fragmentError)?N:(w=D.minIndex,E=D.maxScore,L)},void 0),videoRanges:T,preferHDR:k,minFramerate:v,minBitrate:y,minIndex:w}}function Gs(n,e){ti.log(`[abr] start candidates with "${n}" ignored because ${e}`)}function HL(n){return n.reduce((e,t)=>{let i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(t);const s=t.channels||"2";return i.channels[s]=(i.channels[s]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function NK(n,e,t,i){return n.slice(t,i+1).reduce((s,r,o)=>{if(!r.codecSet)return s;const l=r.audioGroups;let d=s[r.codecSet];d||(s[r.codecSet]=d={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:o,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!l,fragmentError:0}),d.minBitrate=Math.min(d.minBitrate,r.bitrate);const u=Math.min(r.height,r.width);return d.minHeight=Math.min(d.minHeight,u),d.minFramerate=Math.min(d.minFramerate,r.frameRate),d.minIndex=Math.min(d.minIndex,o),d.maxScore=Math.max(d.maxScore,r.score),d.fragmentError+=r.fragmentError,d.videoRanges[r.videoRange]=(d.videoRanges[r.videoRange]||0)+1,l&&l.forEach(f=>{if(!f)return;const p=e.groups[f];p&&(d.hasDefaultAudio=d.hasDefaultAudio||e.hasDefaultAudio?p.hasDefault:p.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(p.channels).forEach(b=>{d.channels[b]=(d.channels[b]||0)+p.channels[b]}))}),s},{})}function oA(n){if(!n)return n;const{lang:e,assocLang:t,characteristics:i,channels:s,audioCodec:r}=n;return{lang:e,assocLang:t,characteristics:i,channels:s,audioCodec:r}}function Zs(n,e,t){if("attrs"in n){const i=e.indexOf(n);if(i!==-1)return i}for(let i=0;i<e.length;i++){const s=e[i];if(ba(n,s,t))return i}return-1}function ba(n,e,t){const{groupId:i,name:s,lang:r,assocLang:o,default:l}=n,d=n.forced;return(i===void 0||e.groupId===i)&&(s===void 0||e.name===s)&&(r===void 0||PK(r,e.lang))&&(r===void 0||e.assocLang===o)&&(l===void 0||e.default===l)&&(d===void 0||e.forced===d)&&(!("characteristics"in n)||MK(n.characteristics||"",e.characteristics))&&(t===void 0||t(n,e))}function PK(n,e="--"){return n.length===e.length?n===e:n.startsWith(e)||e.startsWith(n)}function MK(n,e=""){const t=n.split(","),i=e.split(",");return t.length===i.length&&!t.some(s=>i.indexOf(s)===-1)}function ua(n,e){const{audioCodec:t,channels:i}=n;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(i===void 0||i===(e.channels||"2"))}function $K(n,e,t,i,s){const r=e[i],l=e.reduce((b,v,y)=>{const w=v.uri;return(b[w]||(b[w]=[])).push(y),b},{})[r.uri];l.length>1&&(i=Math.max.apply(Math,l));const d=r.videoRange,u=r.frameRate,f=r.codecSet.substring(0,4),p=aA(e,i,b=>{if(b.videoRange!==d||b.frameRate!==u||b.codecSet.substring(0,4)!==f)return!1;const v=b.audioGroups,y=t.filter(w=>!v||v.indexOf(w.groupId)!==-1);return Zs(n,y,s)>-1});return p>-1?p:aA(e,i,b=>{const v=b.audioGroups,y=t.filter(w=>!v||v.indexOf(w.groupId)!==-1);return Zs(n,y,s)>-1})}function aA(n,e,t){for(let i=e;i>-1;i--)if(t(n[i]))return i;for(let i=e+1;i<n.length;i++)if(t(n[i]))return i;return-1}function mp(n,e){var t;return!!n&&n!==((t=e.loadLevelObj)==null?void 0:t.uri)}class FK extends ys{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var i;const{fragCurrent:s,partCurrent:r,hls:o}=this,{autoLevelEnabled:l,media:d}=o;if(!s||!d)return;const u=performance.now(),f=r?r.stats:s.stats,p=r?r.duration:s.duration,b=u-f.loading.start,v=o.minAutoLevel,y=s.level,w=this._nextAutoLevel;if(f.aborted||f.loaded&&f.loaded===f.total||y<=v){this.clearTimer(),this._nextAutoLevel=-1;return}if(!l)return;const E=w>-1&&w!==y,T=!!t||E;if(!T&&(d.paused||!d.playbackRate||!d.readyState))return;const k=o.mainForwardBufferInfo;if(!T&&k===null)return;const _=this.bwEstimator.getEstimateTTFB(),O=Math.abs(d.playbackRate);if(b<=Math.max(_,1e3*(p/(O*2))))return;const R=k?k.len/O:0,M=f.loading.first?f.loading.first-f.loading.start:-1,P=f.loaded&&M>-1,N=this.getBwEstimate(),L=o.levels,D=L[y],$=Math.max(f.loaded,Math.round(p*(s.bitrate||D.averageBitrate)/8));let U=P?b-M:b;U<1&&P&&(U=Math.min(b,f.loaded*8/N));const G=P?f.loaded*1e3/U:0,Z=_/1e3,se=G?($-f.loaded)/G:$*8/N+Z;if(se<=R)return;const z=G?G*8:N,Y=((i=t?.details||this.hls.latestLevelDetails)==null?void 0:i.live)===!0,V=this.hls.config.abrBandWidthUpFactor;let q=Number.POSITIVE_INFINITY,ie;for(ie=y-1;ie>v;ie--){const X=L[ie].maxBitrate,ae=!L[ie].details||Y;if(q=this.getTimeToLoadFrag(Z,z,p*X,ae),q<Math.min(R,p+Z))break}if(q>=se||q>p*10)return;P?this.bwEstimator.sample(b-Math.min(_,M),f.loaded):this.bwEstimator.sampleTTFB(b);const j=L[ie].maxBitrate;this.getBwEstimate()*V>j&&this.resetEstimator(j);const H=this.findBestLevel(j,v,ie,0,R,1,1);H>-1&&(ie=H),this.warn(`Fragment ${s.sn}${r?" part "+r.index:""} of level ${y} is loading too slowly;
      Fragment duration: ${s.duration.toFixed(3)}
      Time to underbuffer: ${R.toFixed(3)} s
      Estimated load time for current fragment: ${se.toFixed(3)} s
      Estimated load time for down switch fragment: ${q.toFixed(3)} s
      TTFB estimate: ${M|0} ms
      Current BW estimate: ${Oe(N)?N|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${ie} @ ${j|0} bps`),o.nextLoadLevel=o.nextAutoLevel=ie,this.clearTimer();const K=()=>{if(this.clearTimer(),this.fragCurrent===s&&this.hls.loadLevel===ie&&ie>0){const X=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${ie>0?"and switching down":""}
      Fragment duration: ${s.duration.toFixed(3)} s
      Time to underbuffer: ${X.toFixed(3)} s`),s.abortRequests(),this.fragCurrent=this.partCurrent=null,ie>v){let ae=this.findBestLevel(this.hls.levels[v].bitrate,v,ie,0,X,1,1);ae===-1&&(ae=v),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ae,this.resetEstimator(this.hls.levels[ae].bitrate)}}};E||se>q*2?K():this.timer=self.setInterval(K,q*1e3),o.trigger(I.FRAG_LOAD_EMERGENCY_ABORTED,{frag:s,part:r,stats:f})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new HW(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.FRAG_LOADING,this.onFragLoading,this),e.on(I.FRAG_LOADED,this.onFragLoaded,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this),e.on(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.FRAG_LOADING,this.onFragLoading,this),e.off(I.FRAG_LOADED,this.onFragLoaded,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this),e.off(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(I.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const i=t.frag;if(!this.ignoreFragment(i)){if(!i.bitrateTest){var s;this.fragCurrent=i,this.partCurrent=(s=t.part)!=null?s:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case le.BUFFER_ADD_CODEC_ERROR:case le.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case le.FRAG_LOAD_TIMEOUT:{const i=t.frag,{fragCurrent:s,partCurrent:r}=this;if(i&&s&&i.sn===s.sn&&i.level===s.level){const o=performance.now(),l=r?r.stats:i.stats,d=o-l.loading.start,u=l.loading.first?l.loading.first-l.loading.start:-1;if(l.loaded&&u>-1){const p=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(d-Math.min(p,u),l.loaded)}else this.bwEstimator.sampleTTFB(d)}break}}}getTimeToLoadFrag(e,t,i,s){const r=e+i/t,o=s?e+this.lastLevelLoadSec:0;return r+o}onLevelLoaded(e,t){const i=this.hls.config,{loading:s}=t.stats,r=s.end-s.first;Oe(r)&&(this.lastLevelLoadSec=r/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:i}){const s=i?i.stats:t.stats;if(t.type===Fe.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const r=i?i.duration:t.duration,o=this.hls.levels[t.level],l=(o.loaded?o.loaded.bytes:0)+s.loaded,d=(o.loaded?o.loaded.duration:0)+r;o.loaded={bytes:l,duration:d},o.realBitrate=Math.round(8*l/d)}if(t.bitrateTest){const r={stats:s,frag:t,part:i,id:t.type};this.onFragBuffered(I.FRAG_BUFFERED,r),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:i,part:s}=t,r=s!=null&&s.stats.loaded?s.stats:i.stats;if(r.aborted||this.ignoreFragment(i))return;const o=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,r.loaded),r.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Fe.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,i=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,r=this.findBestLevel(i,t,e,0,s,1,1);if(r>-1)return r;const o=this.hls.firstLevel,l=Math.min(Math.max(o,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${l}`),l}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,i=this.bwEstimator.canEstimate(),s=this.lastLoadedFragLevel>-1;if(e!==-1&&(!i||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=i&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,r)&&o[e].loadError<=o[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this;if(i.levels.length<=1)return i.loadLevel;const{maxAutoLevel:s,config:r,minAutoLevel:o}=i,l=t?t.duration:e?e.duration:0,d=this.getBwEstimate(),u=this.getStarvationDelay();let f=r.abrBandWidthFactor,p=r.abrBandWidthUpFactor;if(u){const E=this.findBestLevel(d,o,s,u,0,f,p);if(E>=0)return this.rebufferNotice=-1,E}let b=l?Math.min(l,r.maxStarvationDelay):r.maxStarvationDelay;if(!u){const E=this.bitrateTestDelay;E&&(b=(l?Math.min(l,r.maxLoadingDelay):r.maxLoadingDelay)-E,this.info(`bitrate test took ${Math.round(1e3*E)}ms, set first fragment max fetchDuration to ${Math.round(1e3*b)} ms`),f=p=1)}const v=this.findBestLevel(d,o,s,u,b,f,p);if(this.rebufferNotice!==v&&(this.rebufferNotice=v,this.info(`${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${v}`)),v>-1)return v;const y=i.levels[o],w=i.loadLevelObj;return w&&y?.bitrate<w.bitrate?o:i.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const i=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,i,s,r,o,l){var d;const u=s+r,f=this.lastLoadedFragLevel,p=f===-1?this.hls.firstLevel:f,{fragCurrent:b,partCurrent:v}=this,{levels:y,allAudioTracks:w,loadLevel:E,config:T}=this.hls;if(y.length===1)return 0;const k=y[p],_=!!((d=this.hls.latestLevelDetails)!=null&&d.live),O=E===-1||f===-1;let R,M="SDR",P=k?.frameRate||0;const{audioPreference:N,videoPreference:L}=T,D=this.audioTracksByGroup||(this.audioTracksByGroup=HL(w));let $=-1;if(O){if(this.firstSelection!==-1)return this.firstSelection;const z=this.codecTiers||(this.codecTiers=NK(y,D,t,i)),Y=OK(z,M,e,N,L),{codecSet:V,videoRanges:q,minFramerate:ie,minBitrate:j,minIndex:H,preferHDR:K}=Y;$=H,R=V,M=K?q[q.length-1]:q[0],P=ie,e=Math.max(e,j),this.log(`picked start tier ${fi(Y)}`)}else R=k?.codecSet,M=k?.videoRange;const U=v?v.duration:b?b.duration:0,G=this.bwEstimator.getEstimateTTFB()/1e3,Z=[];for(let z=i;z>=t;z--){var se;const Y=y[z],V=z>p;if(!Y)continue;if(T.useMediaCapabilities&&!Y.supportedResult&&!Y.supportedPromise){const ae=navigator.mediaCapabilities;typeof ae?.decodingInfo=="function"&&EK(Y,D,M,P,e,N)?(Y.supportedPromise=UL(Y,D,ae,this.supportedCache),Y.supportedPromise.then(re=>{if(!this.hls)return;Y.supportedResult=re;const ge=this.hls.levels,Se=ge.indexOf(Y);re.error?this.warn(`MediaCapabilities decodingInfo error: "${re.error}" for level ${Se} ${fi(re)}`):re.supported?re.decodingInfoResults.some(De=>De.smooth===!1||De.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${Se} not smooth or powerEfficient: ${fi(re)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${Se} ${fi(re)}`),Se>-1&&ge.length>1&&(this.log(`Removing unsupported level ${Se}`),this.hls.removeLevel(Se),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(re=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${re}`)})):Y.supportedResult=jL}if((R&&Y.codecSet!==R||M&&Y.videoRange!==M||V&&P>Y.frameRate||!V&&P>0&&P<Y.frameRate||(se=Y.supportedResult)!=null&&(se=se.decodingInfoResults)!=null&&se.some(ae=>ae.smooth===!1))&&(!O||z!==$)){Z.push(z);continue}const q=Y.details,ie=(v?q?.partTarget:q?.averagetargetduration)||U;let j;V?j=l*e:j=o*e;const H=U&&s>=U*2&&r===0?Y.averageBitrate:Y.maxBitrate,K=this.getTimeToLoadFrag(G,j,H*ie,q===void 0);if(j>=H&&(z===f||Y.loadError===0&&Y.fragmentError===0)&&(K<=G||!Oe(K)||_&&!this.bitrateTestDelay||K<u)){const ae=this.forcedAutoLevel;return z!==E&&(ae===-1||ae!==E)&&(Z.length&&this.trace(`Skipped level(s) ${Z.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${y[Z[0]].codecs}" ${y[Z[0]].videoRange}; not compatible with "${R}" ${M}`),this.info(`switch candidate:${p}->${z} adjustedbw(${Math.round(j)})-bitrate=${Math.round(j-H)} ttfb:${G.toFixed(1)} avgDuration:${ie.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${K.toFixed(1)} firstSelection:${O} codecSet:${Y.codecSet} videoRange:${Y.videoRange} hls.loadLevel:${E}`)),O&&(this.firstSelection=z),z}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:i}=this.hls;return Math.min(Math.max(e,i),t)}}const GL={search:function(n,e){let t=0,i=n.length-1,s=null,r=null;for(;t<=i;){s=(t+i)/2|0,r=n[s];const o=e(r);if(o>0)t=s+1;else if(o<0)i=s-1;else return r}return null}};function jK(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!Oe(e))return null;const i=n[0].programDateTime;if(e<(i||0))return null;const s=n[n.length-1].endProgramDateTime;if(e>=(s||0))return null;for(let r=0;r<n.length;++r){const o=n[r];if(UK(e,t,o))return o}return null}function Aa(n,e,t=0,i=0,s=.005){let r=null;if(n){r=e[1+n.sn-e[0].sn]||null;const l=n.endDTS-t;l>0&&l<15e-7&&(t+=15e-7),r&&n.level!==r.level&&r.end<=n.end&&(r=e[2+n.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(r=e[0]);if(r&&((!n||n.level===r.level)&&lA(t,i,r)===0||BK(r,n,Math.min(s,i))))return r;const o=GL.search(e,lA.bind(null,t,i));return o&&(o!==n||!r)?o:r}function BK(n,e,t){if(e&&e.start===0&&e.level<n.level&&(e.endPTS||0)>0){const i=e.tagList.reduce((s,r)=>(r[0]==="INF"&&(s+=parseFloat(r[1])),s),t);return n.start<=i}return!1}function lA(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-i<=n?1:t.start-i>n&&t.start?-1:0}function UK(n,e,t){const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-i>n}function VL(n,e,t){if(n&&n.startCC<=e&&n.endCC>=e){let i=n.fragments;const{fragmentHint:s}=n;s&&(i=i.concat(s));let r;return GL.search(i,o=>o.cc<e?1:o.cc>e?-1:(r=o,o.end<=t?1:o.start>t?-1:0)),r||null}return null}function gp(n){switch(n.details){case le.FRAG_LOAD_TIMEOUT:case le.KEY_LOAD_TIMEOUT:case le.LEVEL_LOAD_TIMEOUT:case le.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function qL(n){return n.details.startsWith("key")}function WL(n){return qL(n)&&!!n.frag&&!n.frag.decryptdata}function cA(n,e){const t=gp(e);return n.default[`${t?"timeout":"error"}Retry`]}function _x(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function dA(n){return ei(ei({},n),{errorRetry:null,timeoutRetry:null})}function bp(n,e,t,i){if(!n)return!1;const s=i?.code,r=e<n.maxNumRetry&&(zK(s)||!!t);return n.shouldRetry?n.shouldRetry(n,e,t,i,r):r}function zK(n){return qv(n)||!!n&&(n<400||n>499)}function qv(n){return n===0&&navigator.onLine===!1}var hn={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Qn={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class HK extends ys{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(I.ERROR,this.onError,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(I.ERROR,this.onError,this),e.off(I.ERROR,this.onErrorOut,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===Fe.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,i=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||i===-1?t.loadLevel:i}variantHasKey(e,t){if(e){var i;if((i=e.details)!=null&&i.hasKey(t))return!0;const s=e.audioGroups;if(s)return this.hls.allAudioTracks.filter(o=>s.indexOf(o.groupId)>=0).some(o=>{var l;return(l=o.details)==null?void 0:l.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var i;if(t.fatal)return;const s=this.hls,r=t.context;switch(t.details){case le.FRAG_LOAD_ERROR:case le.FRAG_LOAD_TIMEOUT:case le.KEY_LOAD_ERROR:case le.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case le.FRAG_PARSING_ERROR:if((i=t.frag)!=null&&i.gap){t.errorAction=Bl();return}case le.FRAG_GAP:case le.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=hn.SendAlternateToPenaltyBox;return}case le.LEVEL_EMPTY_ERROR:case le.LEVEL_PARSING_ERROR:{var o;const d=t.parent===Fe.MAIN?t.level:s.loadLevel;t.details===le.LEVEL_EMPTY_ERROR&&((o=t.context)!=null&&(o=o.levelDetails)!=null&&o.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,d):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,d))}return;case le.LEVEL_LOAD_ERROR:case le.LEVEL_LOAD_TIMEOUT:typeof r?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.level));return;case le.AUDIO_TRACK_LOAD_ERROR:case le.AUDIO_TRACK_LOAD_TIMEOUT:case le.SUBTITLE_LOAD_ERROR:case le.SUBTITLE_TRACK_LOAD_TIMEOUT:if(r){const d=s.loadLevelObj;if(d&&(r.type===At.AUDIO_TRACK&&d.hasAudioGroup(r.groupId)||r.type===At.SUBTITLE_TRACK&&d.hasSubtitleGroup(r.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=hn.SendAlternateToPenaltyBox,t.errorAction.flags=Qn.MoveAllAlternatesMatchingHost;return}}return;case le.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:hn.SendAlternateToPenaltyBox,flags:Qn.MoveAllAlternatesMatchingHDCP};return;case le.KEY_SYSTEM_SESSION_UPDATE_FAILED:case le.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case le.KEY_SYSTEM_NO_SESSION:t.errorAction={action:hn.SendAlternateToPenaltyBox,flags:Qn.MoveAllAlternatesMatchingKey};return;case le.BUFFER_ADD_CODEC_ERROR:case le.REMUX_ALLOC_ERROR:case le.BUFFER_APPEND_ERROR:if(!t.errorAction){var l;t.errorAction=this.getLevelSwitchAction(t,(l=t.level)!=null?l:s.loadLevel)}return;case le.INTERNAL_EXCEPTION:case le.BUFFER_APPENDING_ERROR:case le.BUFFER_FULL_ERROR:case le.LEVEL_SWITCH_ERROR:case le.BUFFER_STALLED_ERROR:case le.BUFFER_SEEK_OVER_HOLE:case le.BUFFER_NUDGE_ON_STALL:t.errorAction=Bl();return}t.type===qe.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=Bl())}getPlaylistRetryOrSwitchAction(e,t){const i=this.hls,s=cA(i.config.playlistLoadPolicy,e),r=this.playlistError++;if(bp(s,r,gp(e),e.response))return{action:hn.RetryRequest,flags:Qn.None,retryConfig:s,retryCount:r};const l=this.getLevelSwitchAction(e,t);return s&&(l.retryConfig=s,l.retryCount=r),l}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),s=t.levels[i],{fragLoadPolicy:r,keyLoadPolicy:o}=t.config,l=cA(qL(e)?o:r,e),d=t.levels.reduce((f,p)=>f+p.fragmentError,0);if(s&&(e.details!==le.FRAG_GAP&&s.fragmentError++,!WL(e)&&bp(l,d,gp(e),e.response)))return{action:hn.RetryRequest,flags:Qn.None,retryConfig:l,retryCount:d};const u=this.getLevelSwitchAction(e,i);return l&&(u.retryConfig=l,u.retryCount=d),u}getLevelSwitchAction(e,t){const i=this.hls;t==null&&(t=i.loadLevel);const s=this.hls.levels[t];if(s){var r,o;const u=e.details;s.loadError++,u===le.BUFFER_APPEND_ERROR&&s.fragmentError++;let f=-1;const{levels:p,loadLevel:b,minAutoLevel:v,maxAutoLevel:y}=i;!i.autoLevelEnabled&&!i.config.preserveManualLevelOnError&&(i.loadLevel=-1);const w=(r=e.frag)==null?void 0:r.type,T=(w===Fe.AUDIO&&u===le.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===le.BUFFER_ADD_CODEC_ERROR||u===le.BUFFER_APPEND_ERROR))&&p.some(({audioCodec:M})=>s.audioCodec!==M),_=e.sourceBufferName==="video"&&(u===le.BUFFER_ADD_CODEC_ERROR||u===le.BUFFER_APPEND_ERROR)&&p.some(({codecSet:M,audioCodec:P})=>s.codecSet!==M&&s.audioCodec===P),{type:O,groupId:R}=(o=e.context)!=null?o:{};for(let M=p.length;M--;){const P=(M+b)%p.length;if(P!==b&&P>=v&&P<=y&&p[P].loadError===0){var l,d;const N=p[P];if(u===le.FRAG_GAP&&w===Fe.MAIN&&e.frag){const L=p[P].details;if(L){const D=Aa(e.frag,L.fragments,e.frag.start);if(D!=null&&D.gap)continue}}else{if(O===At.AUDIO_TRACK&&N.hasAudioGroup(R)||O===At.SUBTITLE_TRACK&&N.hasSubtitleGroup(R))continue;if(w===Fe.AUDIO&&(l=s.audioGroups)!=null&&l.some(L=>N.hasAudioGroup(L))||w===Fe.SUBTITLE&&(d=s.subtitleGroups)!=null&&d.some(L=>N.hasSubtitleGroup(L))||T&&s.audioCodec===N.audioCodec||_&&s.codecSet===N.codecSet||!T&&s.codecSet!==N.codecSet)continue}f=P;break}}if(f>-1&&i.loadLevel!==f)return e.levelRetry=!0,this.playlistError=0,{action:hn.SendAlternateToPenaltyBox,flags:Qn.None,nextAutoLevel:f}}return{action:hn.SendAlternateToPenaltyBox,flags:Qn.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var i;switch((i=t.errorAction)==null?void 0:i.action){case hn.DoNothing:break;case hn.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==le.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:s}=i,r=i.nextAutoLevel;switch(s){case Qn.None:this.switchLevel(e,r);break;case Qn.MoveAllAlternatesMatchingHDCP:{const d=this.getVariantLevelIndex(e.frag),u=t.levels[d],f=u?.attrs["HDCP-LEVEL"];if(i.hdcpLevel=f,f==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(f){t.maxHdcpLevel=Vv[Vv.indexOf(f)-1],i.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case Qn.MoveAllAlternatesMatchingKey:{const d=e.decryptdata;if(d){const u=this.hls.levels,f=u.length;for(let b=f;b--;)if(this.variantHasKey(u[b],d)){var o,l;this.log(`Banned key found in level ${b} (${u[b].bitrate}bps) or audio group "${(o=u[b].audioGroups)==null?void 0:o.join(",")}" (${(l=e.frag)==null?void 0:l.type} fragment) ${fn(d.keyId||[])}`),u[b].fragmentError++,u[b].loadError++,this.log(`Removing level ${b} with key error (${e.error})`),this.hls.removeLevel(b)}const p=e.frag;if(this.hls.levels.length<f)i.resolved=!0;else if(p&&p.type!==Fe.MAIN){const b=p.decryptdata;b&&!d.matches(b)&&(i.resolved=!0)}}break}}i.resolved||this.switchLevel(e,r)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===le.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const i=Gv(e.mimeType),s=this.hls.levels;for(let r=s.length;r--;)s[r][`${e.sourceBufferName}Codec`]===i&&(this.log(`Removing level ${r} for ${e.details} ("${i}" not supported)`),this.hls.removeLevel(r))}}}function Bl(n){const e={action:hn.DoNothing,flags:Qn.None};return n&&(e.resolved=!0),e}var qi={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class GK{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.BUFFER_APPENDED,this.onBufferAppended,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this),e.on(I.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.BUFFER_APPENDED,this.onBufferAppended,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this),e.off(I.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let s=i.length;s--;){const r=i[s];if(!r)break;if(r.start<=e&&e<=r.end&&r.loaded)return r}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,i){const{fragments:s}=this,r=Object.keys(s);for(let o=r.length;o--;){const l=s[r[o]];if(l?.body.type===t&&(!i||l.buffered)){const d=l.body;if(d.start<=e&&e<=d.end)return d}}return null}detectEvictedFragments(e,t,i,s,r){this.timeRanges&&(this.timeRanges[e]=t);const o=s?.fragment.sn||-1;Object.keys(this.fragments).forEach(l=>{const d=this.fragments[l];if(!d||o>=d.body.sn)return;if(!d.buffered&&(!d.loaded||r)){d.body.type===i&&this.removeFragment(d.body);return}const u=d.range[e];if(u){if(u.time.length===0){this.removeFragment(d.body);return}u.time.some(f=>{const p=!this.isTimeBuffered(f.startPTS,f.endPTS,t);return p&&this.removeFragment(d.body),p})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const i=e.frag,s=bl(i),r=this.fragments[s];if(!r||r.buffered&&i.gap)return;const o=!i.relurl;Object.keys(t).forEach(l=>{const d=i.elementaryStreams[l];if(!d)return;const u=t[l],f=o||d.partial===!0;r.range[l]=this.getBufferedTimes(i,e.part,f,u)}),r.loaded=null,Object.keys(r.range).length?(this.bufferedEnd(r,i),Gh(r)||this.removeParts(i.sn-1,i.type)):this.removeFragment(r.body)}bufferedEnd(e,t){e.buffered=!0,(e.body.endList=t.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=uA(i,s=>s.fragment.sn>=e))}fragBuffered(e,t){const i=bl(e);let s=this.fragments[i];!s&&t&&(s=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,this.bufferedEnd(s,e))}getBufferedTimes(e,t,i,s){const r={time:[],partial:i},o=e.start,l=e.end,d=e.minEndPTS||l,u=e.maxStartPTS||o;for(let f=0;f<s.length;f++){const p=s.start(f)-this.bufferPadding,b=s.end(f)+this.bufferPadding;if(u>=p&&d<=b){r.time.push({startPTS:Math.max(o,s.start(f)),endPTS:Math.min(l,s.end(f))});break}else if(o<b&&l>p){const v=Math.max(o,s.start(f)),y=Math.min(l,s.end(f));y>v&&(r.partial=!0,r.time.push({startPTS:v,endPTS:y}))}else if(l<=p)break}return r}getPartialFragment(e){let t=null,i,s,r,o=0;const{bufferPadding:l,fragments:d}=this;return Object.keys(d).forEach(u=>{const f=d[u];f&&Gh(f)&&(s=f.body.start-l,r=f.body.end+l,e>=s&&e<=r&&(i=Math.min(e-s,r-e),o<=i&&(t=f.body,o=i)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||Gh(t))}getState(e){const t=bl(e),i=this.fragments[t];return i?i.buffered?Gh(i)?qi.PARTIAL:qi.OK:qi.APPENDING:qi.NOT_LOADED}isTimeBuffered(e,t,i){let s,r;for(let o=0;o<i.length;o++){if(s=i.start(o)-this.bufferPadding,r=i.end(o)+this.bufferPadding,e>=s&&t<=r)return!0;if(t<=s)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const i=t.frag,s=t.part?null:t,r=bl(i);this.fragments[r]={body:i,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:s,timeRanges:r,type:o}=t;if(i.sn==="initSegment")return;const l=i.type;if(s){let u=this.activePartLists[l];u||(this.activePartLists[l]=u=[]),u.push(s)}this.timeRanges=r;const d=r[o];this.detectEvictedFragments(o,d,l,s)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=bl(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,i=Object.keys(t);if(!e)return i.length>0;for(let s=i.length;s--;){const r=t[i[s]];if(r?.body.type===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,i,s,r){s&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const l=this.fragments[o];if(!l)return;const d=l.body;d.type!==i||s&&!d.gap||d.start<t&&d.end>e&&(l.buffered||r)&&this.removeFragment(d)})}removeFragment(e){const t=bl(e);e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const s=e.sn;this.activePartLists[e.type]=uA(i,r=>r.fragment.sn!==s)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(i=>i.clearElementaryStreamInfo())}}function Gh(n){var e,t,i;return n.buffered&&!!(n.body.gap||(e=n.range.video)!=null&&e.partial||(t=n.range.audio)!=null&&t.partial||(i=n.range.audiovideo)!=null&&i.partial)}function bl(n){return`${n.type}_${n.level}_${n.sn}`}function uA(n,e){return n.filter(t=>{const i=e(t);return i||t.clearElementaryStreamInfo(),i})}var Uo={cbc:0,ctr:1};class VK{constructor(e,t,i){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=i}decrypt(e,t){switch(this.aesMode){case Uo.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Uo.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function qK(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?n.slice(0,e-t):n}class WK{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let s=0;s<4;s++)i[s]=t.getUint32(s*4);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,s=i[0],r=i[1],o=i[2],l=i[3],d=this.invSubMix,u=d[0],f=d[1],p=d[2],b=d[3],v=new Uint32Array(256);let y=0,w=0,E=0;for(E=0;E<256;E++)E<128?v[E]=E<<1:v[E]=E<<1^283;for(E=0;E<256;E++){let T=w^w<<1^w<<2^w<<3^w<<4;T=T>>>8^T&255^99,e[y]=T,t[T]=y;const k=v[y],_=v[k],O=v[_];let R=v[T]*257^T*16843008;s[y]=R<<24|R>>>8,r[y]=R<<16|R>>>16,o[y]=R<<8|R>>>24,l[y]=R,R=O*16843009^_*65537^k*257^y*16843008,u[T]=R<<24|R>>>8,f[T]=R<<16|R>>>16,p[T]=R<<8|R>>>24,b[T]=R,y?(y=k^v[v[v[O^k]]],w^=v[v[w]]):y=w=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,s=0;for(;s<t.length&&i;)i=t[s]===this.key[s],s++;if(i)return;this.key=t;const r=this.keySize=t.length;if(r!==4&&r!==6&&r!==8)throw new Error("Invalid aes key size="+r);const o=this.ksRows=(r+6+1)*4;let l,d;const u=this.keySchedule=new Uint32Array(o),f=this.invKeySchedule=new Uint32Array(o),p=this.sBox,b=this.rcon,v=this.invSubMix,y=v[0],w=v[1],E=v[2],T=v[3];let k,_;for(l=0;l<o;l++){if(l<r){k=u[l]=t[l];continue}_=k,l%r===0?(_=_<<8|_>>>24,_=p[_>>>24]<<24|p[_>>>16&255]<<16|p[_>>>8&255]<<8|p[_&255],_^=b[l/r|0]<<24):r>6&&l%r===4&&(_=p[_>>>24]<<24|p[_>>>16&255]<<16|p[_>>>8&255]<<8|p[_&255]),u[l]=k=(u[l-r]^_)>>>0}for(d=0;d<o;d++)l=o-d,d&3?_=u[l]:_=u[l-4],d<4||l<=4?f[d]=_:f[d]=y[p[_>>>24]]^w[p[_>>>16&255]]^E[p[_>>>8&255]]^T[p[_&255]],f[d]=f[d]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,i){const s=this.keySize+6,r=this.invKeySchedule,o=this.invSBox,l=this.invSubMix,d=l[0],u=l[1],f=l[2],p=l[3],b=this.uint8ArrayToUint32Array_(i);let v=b[0],y=b[1],w=b[2],E=b[3];const T=new Int32Array(e),k=new Int32Array(T.length);let _,O,R,M,P,N,L,D,$,U,G,Z,se,z;const Y=this.networkToHostOrderSwap;for(;t<T.length;){for($=Y(T[t]),U=Y(T[t+1]),G=Y(T[t+2]),Z=Y(T[t+3]),P=$^r[0],N=Z^r[1],L=G^r[2],D=U^r[3],se=4,z=1;z<s;z++)_=d[P>>>24]^u[N>>16&255]^f[L>>8&255]^p[D&255]^r[se],O=d[N>>>24]^u[L>>16&255]^f[D>>8&255]^p[P&255]^r[se+1],R=d[L>>>24]^u[D>>16&255]^f[P>>8&255]^p[N&255]^r[se+2],M=d[D>>>24]^u[P>>16&255]^f[N>>8&255]^p[L&255]^r[se+3],P=_,N=O,L=R,D=M,se=se+4;_=o[P>>>24]<<24^o[N>>16&255]<<16^o[L>>8&255]<<8^o[D&255]^r[se],O=o[N>>>24]<<24^o[L>>16&255]<<16^o[D>>8&255]<<8^o[P&255]^r[se+1],R=o[L>>>24]<<24^o[D>>16&255]<<16^o[P>>8&255]<<8^o[N&255]^r[se+2],M=o[D>>>24]<<24^o[P>>16&255]<<16^o[N>>8&255]<<8^o[L&255]^r[se+3],k[t]=Y(_^v),k[t+1]=Y(M^y),k[t+2]=Y(R^w),k[t+3]=Y(O^E),v=$,y=U,w=G,E=Z,t=t+4}return k.buffer}}class KK{constructor(e,t,i){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=i}expandKey(){const e=YK(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function YK(n){switch(n){case Uo.cbc:return"AES-CBC";case Uo.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${n}`)}}const XK=16;class Ax{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?qK(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i,s){return this.useSoftware?new Promise((r,o)=>{const l=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(l,t,i,s);const d=this.flush();d?r(d.buffer):o(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,i,s)}softwareDecrypt(e,t,i,s){const{currentIV:r,currentResult:o,remainderData:l}=this;if(s!==Uo.cbc||t.byteLength!==16)return ti.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),l&&(e=bs(l,e),this.remainderData=null);const d=this.getValidChunk(e);if(!d.length)return null;r&&(i=r);let u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new WK),u.expandKey(t);const f=o;return this.currentResult=u.decrypt(d.buffer,0,i),this.currentIV=d.slice(-16).buffer,f||null}webCryptoDecrypt(e,t,i,s){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,i,s));this.key=t,this.fastAesKey=new KK(this.subtle,t,s)}return this.fastAesKey.expandKey().then(r=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new VK(this.subtle,new Uint8Array(i),s).decrypt(e.buffer,r)):Promise.reject(new Error("web crypto not initialized"))).catch(r=>(ti.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,t,i,s)))}onWebCryptoError(e,t,i,s){const r=this.enableSoftwareAES;if(r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i,s);const o=this.flush();if(o)return o.buffer}throw new Error("WebCrypto"+(r?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%XK;return i!==e.length&&(t=e.slice(0,i),this.remainderData=e.slice(i)),t}logOnce(e){this.logEnabled&&(ti.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const hA=Math.pow(2,17);class QK{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new _r({type:qe.NETWORK_ERROR,details:le.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${i?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,r=s.fLoader,o=s.loader;return new Promise((l,d)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(y=>y[0]==="GAP")){d(pA(e));return}else e.gap=!1;const u=this.loader=r?new r(s):new o(s),f=fA(e);e.loader=u;const p=dA(s.fragLoadPolicy.default),b={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:hA};e.stats=u.stats;const v={onSuccess:(y,w,E,T)=>{this.resetLoader(e,u);let k=y.data;E.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(k.slice(0,16)),k=k.slice(16)),l({frag:e,part:null,payload:k,networkDetails:T})},onError:(y,w,E,T)=>{this.resetLoader(e,u),d(new _r({type:qe.NETWORK_ERROR,details:le.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:ei({url:i,data:void 0},y),error:new Error(`HTTP Error ${y.code} ${y.text}`),networkDetails:E,stats:T}))},onAbort:(y,w,E)=>{this.resetLoader(e,u),d(new _r({type:qe.NETWORK_ERROR,details:le.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:E,stats:y}))},onTimeout:(y,w,E)=>{this.resetLoader(e,u),d(new _r({type:qe.NETWORK_ERROR,details:le.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${b.timeout}ms`),networkDetails:E,stats:y}))}};t&&(v.onProgress=(y,w,E,T)=>t({frag:e,part:null,payload:E,networkDetails:T})),u.load(f,b,v)})}loadPart(e,t,i){this.abort();const s=this.config,r=s.fLoader,o=s.loader;return new Promise((l,d)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){d(pA(e,t));return}const u=this.loader=r?new r(s):new o(s),f=fA(e,t);e.loader=u;const p=dA(s.fragLoadPolicy.default),b={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:hA};t.stats=u.stats,u.load(f,b,{onSuccess:(v,y,w,E)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,t);const T={frag:e,part:t,payload:v.data,networkDetails:E};i(T),l(T)},onError:(v,y,w,E)=>{this.resetLoader(e,u),d(new _r({type:qe.NETWORK_ERROR,details:le.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:ei({url:f.url,data:void 0},v),error:new Error(`HTTP Error ${v.code} ${v.text}`),networkDetails:w,stats:E}))},onAbort:(v,y,w)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,u),d(new _r({type:qe.NETWORK_ERROR,details:le.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:w,stats:v}))},onTimeout:(v,y,w)=>{this.resetLoader(e,u),d(new _r({type:qe.NETWORK_ERROR,details:le.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${b.timeout}ms`),networkDetails:w,stats:v}))}})})}updateStatsFromPart(e,t){const i=e.stats,s=t.stats,r=s.total;if(i.loaded+=s.loaded,r){const d=Math.round(e.duration/t.duration),u=Math.min(Math.round(i.loaded/r),d),p=(d-u)*Math.round(i.loaded/u);i.total=i.loaded+p}else i.total=Math.max(i.loaded,i.total);const o=i.loading,l=s.loading;o.start?o.first+=l.first-l.start:(o.start=l.start,o.first=l.first),o.end=l.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function fA(n,e=null){const t=e||n,i={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},s=t.byteRangeStartOffset,r=t.byteRangeEndOffset;if(Oe(s)&&Oe(r)){var o;let l=s,d=r;if(n.sn==="initSegment"&&ZK((o=n.decryptdata)==null?void 0:o.method)){const u=r-s;u%16&&(d=r+(16-u%16)),s!==0&&(i.resetIV=!0,l=s-16)}i.rangeStart=l,i.rangeEnd=d}return i}function pA(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),i={type:qe.MEDIA_ERROR,details:le.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(i.part=e),(e||n).stats.aborted=!0,new _r(i)}function ZK(n){return n==="AES-128"||n==="AES-256"}class _r extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class KL extends ys{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class Cx{constructor(e,t,i,s=0,r=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Vh(),this.buffering={audio:Vh(),video:Vh(),audiovideo:Vh()},this.level=e,this.sn=t,this.id=i,this.size=s,this.part=r,this.partial=o}}function Vh(){return{start:0,executeStart:0,executeEnd:0,end:0}}const mA={length:0,start:()=>0,end:()=>0};class ft{static isBuffered(e,t){if(e){const i=ft.getBuffered(e);for(let s=i.length;s--;)if(t>=i.start(s)&&t<=i.end(s))return!0}return!1}static bufferedRanges(e){if(e){const t=ft.getBuffered(e);return ft.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}static bufferInfo(e,t,i){if(e){const s=ft.bufferedRanges(e);if(s.length)return ft.bufferedInfo(s,t,i)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.length>1&&e.sort((f,p)=>f.start-p.start||p.end-f.end);let s=-1,r=[];if(i)for(let f=0;f<e.length;f++){t>=e[f].start&&t<=e[f].end&&(s=f);const p=r.length;if(p){const b=r[p-1].end;e[f].start-b<i?e[f].end>b&&(r[p-1].end=e[f].end):r.push(e[f])}else r.push(e[f])}else r=e;let o=0,l,d=t,u=t;for(let f=0;f<r.length;f++){const p=r[f].start,b=r[f].end;if(s===-1&&t>=p&&t<=b&&(s=f),t+i>=p&&t<b)d=p,u=b,o=u-t;else if(t+i<p){l=p;break}}return{len:o,start:d||0,end:u||0,nextStart:l,buffered:e,bufferedIndex:s}}static getBuffered(e){try{return e.buffered||mA}catch(t){return ti.log("failed to get media.buffered",t),mA}}}const YL=/\{\$([a-zA-Z0-9-_]+)\}/g;function gA(n){return YL.test(n)}function Wv(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(YL,i=>{const s=i.substring(2,i.length-1),r=t?.[s];return r===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),i):r})}return e}function bA(n,e,t){let i=n.variableList;i||(n.variableList=i={});let s,r;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const o=new self.URL(t).searchParams;if(o.has(s))r=o.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${t}"`)}catch(o){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else s=e.NAME,r=e.VALUE;s in i?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):i[s]=r||""}function JK(n,e,t){const i=e.IMPORT;if(t&&i in t){let s=n.variableList;s||(n.variableList=s={}),s[i]=t[i]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}const eY=/^(\d+)x(\d+)$/,vA=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Si{constructor(e,t){typeof e=="string"&&(e=Si.parseAttrList(e,t)),ai(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const i=new Uint8Array(t.length/2);for(let s=0;s<t.length/2;s++)i[s]=parseInt(t.slice(s*2,s*2+2),16);return i}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const i=this[e];return(i?i.split(/[ ,]+/):[]).reduce((s,r)=>(s[r.toLowerCase()]=!0,s),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=eY.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let i;const s={};for(vA.lastIndex=0;(i=vA.exec(e))!==null;){const o=i[1].trim();let l=i[2];const d=l.indexOf('"')===0&&l.lastIndexOf('"')===l.length-1;let u=!1;if(d)l=l.slice(1,-1);else switch(o){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":u=!0}if(t&&(d||u))l=Wv(t,l);else if(!u&&!d)switch(o){case"CLOSED-CAPTIONS":if(l==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":ti.warn(`${e}: attribute ${o} is missing quotes`)}s[o]=l}return s}}const tY="com.apple.hls.interstitial";function iY(n){return n!=="ID"&&n!=="CLASS"&&n!=="CUE"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function nY(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"||n==="SCTE35-CMD"}class XL{constructor(e,t,i=0){var s;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=t?.tagAnchor||null,this.tagOrder=(s=t?.tagOrder)!=null?s:i,t){const r=t.attr;for(const o in r)if(Object.prototype.hasOwnProperty.call(e,o)&&e[o]!==r[o]){ti.warn(`DATERANGE tag attribute: "${o}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=o;break}e=ai(new Si({}),r,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const r=t?.endDate||new Date(this.attr["END-DATE"]);Oe(r.getTime())&&(this._endDate=r)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(ti.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Oe(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===tY}get isValid(){return!!this.id&&!this._badValueForSameId&&Oe(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const sY=10;class rY{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let i=t.decryptdata;return i||(t.setKeyFormat(e.keyFormat),i=t.decryptdata),!!i&&e.matches(i)})}get hasProgramDateTime(){return this.fragments.length?Oe(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||sY}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let i=e.length;i--;)if(e[i].index>t)return e[i].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function vp(n,e){return n.length===e.length?!n.some((t,i)=>t!==e[i]):!1}function yA(n,e){return!n&&!e?!0:!n||!e?!1:vp(n,e)}function Ul(n){return n==="AES-128"||n==="AES-256"||n==="AES-256-CTR"}function Ix(n){switch(n){case"AES-128":case"AES-256":return Uo.cbc;case"AES-256-CTR":return Uo.ctr;default:throw new Error(`invalid full segment method ${n}`)}}function Rx(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function Kv(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}function oY(n){const e=Kv(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function QL(n){const e=function(i,s,r){const o=i[s];i[s]=i[r],i[r]=o};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function ZL(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const i=e[1].split(";"),s=i[i.length-1].split(",");if(s.length===2){const r=s[0]==="base64",o=s[1];r?(i.splice(-1,1),t=Rx(o)):t=oY(o)}}return t}const yp=typeof self<"u"?self:void 0;var Ei={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},pn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function bf(n){switch(n){case pn.FAIRPLAY:return Ei.FAIRPLAY;case pn.PLAYREADY:return Ei.PLAYREADY;case pn.WIDEVINE:return Ei.WIDEVINE;case pn.CLEARKEY:return Ei.CLEARKEY}}function xb(n){switch(n){case Ei.FAIRPLAY:return pn.FAIRPLAY;case Ei.PLAYREADY:return pn.PLAYREADY;case Ei.WIDEVINE:return pn.WIDEVINE;case Ei.CLEARKEY:return pn.CLEARKEY}}function ad(n){const{drmSystems:e,widevineLicenseUrl:t}=n,i=e?[Ei.FAIRPLAY,Ei.WIDEVINE,Ei.PLAYREADY,Ei.CLEARKEY].filter(s=>!!e[s]):[];return!i[Ei.WIDEVINE]&&t&&i.push(Ei.WIDEVINE),i}const JL=(function(n){return yp!=null&&(n=yp.navigator)!=null&&n.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function aY(n,e,t,i){let s;switch(n){case Ei.FAIRPLAY:s=["cenc","sinf"];break;case Ei.WIDEVINE:case Ei.PLAYREADY:s=["cenc"];break;case Ei.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return lY(s,e,t,i)}function lY(n,e,t,i){return[{initDataTypes:n,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(r=>({contentType:`audio/mp4; codecs=${r}`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:t.map(r=>({contentType:`video/mp4; codecs=${r}`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}function cY(n){var e;return!!n&&(n.sessionType==="persistent-license"||!!((e=n.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function eD(n){const e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),i=t.substring(t.indexOf("<"),t.length),o=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("KID")[0];if(o){const l=o.childNodes[0]?o.childNodes[0].nodeValue:o.getAttribute("VALUE");if(l){const d=Rx(l).subarray(0,16);return QL(d),d}}return null}let vl={};class $o{static clearKeyUriToKeyIdMap(){vl={}}static setKeyIdForUri(e,t){vl[e]=t}static addKeyIdForUri(e){const t=Object.keys(vl).length%Number.MAX_SAFE_INTEGER,i=new Uint8Array(16);return new DataView(i.buffer,12,4).setUint32(0,t),vl[e]=i,i}constructor(e,t,i,s=[1],r=null,o){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=s,this.iv=r,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Ul(e),o!=null&&o.startsWith("0x")&&(this.keyId=new Uint8Array(CL(o)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&vp(e.keyFormatVersions,this.keyFormatVersions)&&yA(e.iv,this.iv)&&yA(e.keyId,this.keyId)}isSupported(){if(this.method){if(Ul(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case pn.FAIRPLAY:case pn.WIDEVINE:case pn.PLAYREADY:case pn.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(Ul(this.method)){let r=this.iv;return r||(typeof e!="number"&&(ti.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),r=uY(e)),new $o(this.method,this.uri,"identity",this.keyFormatVersions,r)}if(this.keyId){const r=vl[this.uri];if(r&&!vp(this.keyId,r)&&$o.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const i=ZL(this.uri);if(i)switch(this.keyFormat){case pn.WIDEVINE:if(this.pssh=i,!this.keyId){const r=pK(i.buffer);if(r.length){var s;const o=r[0];this.keyId=(s=o.kids)!=null&&s.length?o.kids[0]:null}}this.keyId||(this.keyId=xA(t));break;case pn.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=fK(r,null,i),this.keyId=eD(i);break}default:{let r=i.subarray(0,16);if(r.length!==16){const o=new Uint8Array(16);o.set(r,16-r.length),r=o}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r;r=dY(t),r||(r=xA(t),r||(r=vl[this.uri])),r&&(this.keyId=r,$o.setKeyIdForUri(this.uri,r))}return this}}function dY(n){const e=n?.[pn.WIDEVINE];return e?e.keyId:null}function xA(n){const e=n?.[pn.PLAYREADY];if(e){const t=ZL(e.uri);if(t)return eD(t)}return null}function uY(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const wA=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,SA=/#EXT-X-MEDIA:(.*)/g,hY=/^#EXT(?:INF|-X-TARGETDURATION):/m,wb=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),fY=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Js{static findGroup(e,t){for(let i=0;i<e.length;i++){const s=e[i];if(s.id===t)return s}}static resolve(e,t){return wx.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return hY.test(e)}static parseMasterPlaylist(e,t){const i=gA(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},r=[];if(wA.lastIndex=0,!e.startsWith("#EXTM3U"))return s.playlistParsingError=new Error("no EXTM3U delimiter"),s;let o;for(;(o=wA.exec(e))!=null;)if(o[1]){var l;const u=new Si(o[1],s),f=Wv(s,o[2]),p={attrs:u,bitrate:u.decimalInteger("BANDWIDTH")||u.decimalInteger("AVERAGE-BANDWIDTH"),name:u.NAME,url:Js.resolve(f,t)},b=u.decimalResolution("RESOLUTION");b&&(p.width=b.width,p.height=b.height),kA(u.CODECS,p);const v=u["SUPPLEMENTAL-CODECS"];v&&(p.supplemental={},kA(v,p.supplemental)),(l=p.unknownCodecs)!=null&&l.length||r.push(p),s.levels.push(p)}else if(o[3]){const u=o[3],f=o[4];switch(u){case"SESSION-DATA":{const p=new Si(f,s),b=p["DATA-ID"];b&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[b]=p);break}case"SESSION-KEY":{const p=EA(f,t,s);p.encrypted&&p.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(p)):ti.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${f}"`);break}case"DEFINE":{{const p=new Si(f,s);bA(s,p,t)}break}case"CONTENT-STEERING":{const p=new Si(f,s);s.contentSteering={uri:Js.resolve(p["SERVER-URI"],t),pathwayId:p["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=TA(f);break}}}const d=r.length>0&&r.length<s.levels.length;return s.levels=d?r:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,t,i){let s;const r={},o=i.levels,l={AUDIO:o.map(u=>({id:u.attrs.AUDIO,audioCodec:u.audioCodec})),SUBTITLES:o.map(u=>({id:u.attrs.SUBTITLES,textCodec:u.textCodec})),"CLOSED-CAPTIONS":[]};let d=0;for(SA.lastIndex=0;(s=SA.exec(e))!==null;){const u=new Si(s[1],i),f=u.TYPE;if(f){const p=l[f],b=r[f]||[];r[f]=b;const v=u.LANGUAGE,y=u["ASSOC-LANGUAGE"],w=u.CHANNELS,E=u.CHARACTERISTICS,T=u["INSTREAM-ID"],k={attrs:u,bitrate:0,id:d++,groupId:u["GROUP-ID"]||"",name:u.NAME||v||"",type:f,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:v,url:u.URI?Js.resolve(u.URI,t):""};if(y&&(k.assocLang=y),w&&(k.channels=w),E&&(k.characteristics=E),T&&(k.instreamId=T),p!=null&&p.length){const _=Js.findGroup(p,k.groupId)||p[0];_A(k,_,"audioCodec"),_A(k,_,"textCodec")}b.push(k)}}return r}static parseLevelPlaylist(e,t,i,s,r,o){var l;const d={url:t},u=new rY(t),f=u.fragments,p=[];let b=null,v=0,y=0,w=0,E=0,T=0,k=null,_=new bb(s,d),O,R,M,P=-1,N=!1,L=null,D;if(wb.lastIndex=0,u.m3u8=e,u.hasVariableRefs=gA(e),((l=wb.exec(e))==null?void 0:l[0])!=="#EXTM3U")return u.playlistParsingError=new Error("Missing format identifier #EXTM3U"),u;for(;(O=wb.exec(e))!==null;){N&&(N=!1,_=new bb(s,d),_.playlistOffset=w,_.setStart(w),_.sn=v,_.cc=E,T&&(_.bitrate=T),_.level=i,b&&(_.initSegment=b,b.rawProgramDateTime&&(_.rawProgramDateTime=b.rawProgramDateTime,b.rawProgramDateTime=null),L&&(_.setByteRange(L),L=null)));const Z=O[1];if(Z){_.duration=parseFloat(Z);const se=(" "+O[2]).slice(1);_.title=se||null,_.tagList.push(se?["INF",Z,se]:["INF",Z])}else if(O[3]){if(Oe(_.duration)){_.playlistOffset=w,_.setStart(w),M&&CA(_,M,u),_.sn=v,_.level=i,_.cc=E,f.push(_);const se=(" "+O[3]).slice(1);_.relurl=Wv(u,se),Yv(_,k,p),k=_,w+=_.duration,v++,y=0,N=!0}}else{if(O=O[0].match(fY),!O){ti.warn("No matches on slow regex match for level playlist!");continue}for(R=1;R<O.length&&O[R]===void 0;R++);const se=(" "+O[R]).slice(1),z=(" "+O[R+1]).slice(1),Y=O[R+2]?(" "+O[R+2]).slice(1):null;switch(se){case"BYTERANGE":k?_.setByteRange(z,k):_.setByteRange(z);break;case"PROGRAM-DATE-TIME":_.rawProgramDateTime=z,_.tagList.push(["PROGRAM-DATE-TIME",z]),P===-1&&(P=f.length);break;case"PLAYLIST-TYPE":u.type&&Er(u,se,O),u.type=z.toUpperCase();break;case"MEDIA-SEQUENCE":u.startSN!==0?Er(u,se,O):f.length>0&&IA(u,se,O),v=u.startSN=parseInt(z);break;case"SKIP":{u.skippedSegments&&Er(u,se,O);const V=new Si(z,u),q=V.decimalInteger("SKIPPED-SEGMENTS");if(Oe(q)){u.skippedSegments+=q;for(let j=q;j--;)f.push(null);v+=q}const ie=V.enumeratedString("RECENTLY-REMOVED-DATERANGES");ie&&(u.recentlyRemovedDateranges=(u.recentlyRemovedDateranges||[]).concat(ie.split("	")));break}case"TARGETDURATION":u.targetduration!==0&&Er(u,se,O),u.targetduration=Math.max(parseInt(z),1);break;case"VERSION":u.version!==null&&Er(u,se,O),u.version=parseInt(z);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":u.live||Er(u,se,O),u.live=!1;break;case"#":(z||Y)&&_.tagList.push(Y?[z,Y]:[z]);break;case"DISCONTINUITY":E++,_.tagList.push(["DIS"]);break;case"GAP":_.gap=!0,_.tagList.push([se]);break;case"BITRATE":_.tagList.push([se,z]),T=parseInt(z)*1e3,Oe(T)?_.bitrate=T:T=0;break;case"DATERANGE":{const V=new Si(z,u),q=new XL(V,u.dateRanges[V.ID],u.dateRangeTagCount);u.dateRangeTagCount++,q.isValid||u.skippedSegments?u.dateRanges[q.id]=q:ti.warn(`Ignoring invalid DATERANGE tag: "${z}"`),_.tagList.push(["EXT-X-DATERANGE",z]);break}case"DEFINE":{{const V=new Si(z,u);"IMPORT"in V?JK(u,V,o):bA(u,V,t)}break}case"DISCONTINUITY-SEQUENCE":u.startCC!==0?Er(u,se,O):f.length>0&&IA(u,se,O),u.startCC=E=parseInt(z);break;case"KEY":{const V=EA(z,t,u);if(V.isSupported()){if(V.method==="NONE"){M=void 0;break}M||(M={});const q=M[V.keyFormat];q!=null&&q.matches(V)||(q&&(M=ai({},M)),M[V.keyFormat]=V)}else ti.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${z}"`);break}case"START":u.startTimeOffset=TA(z);break;case"MAP":{const V=new Si(z,u);if(_.duration){const q=new bb(s,d);AA(q,V,i,M),b=q,_.initSegment=b,b.rawProgramDateTime&&!_.rawProgramDateTime&&(_.rawProgramDateTime=b.rawProgramDateTime)}else{const q=_.byteRangeEndOffset;if(q){const ie=_.byteRangeStartOffset;L=`${q-ie}@${ie}`}else L=null;AA(_,V,i,M),b=_,N=!0}b.cc=E;break}case"SERVER-CONTROL":{D&&Er(u,se,O),D=new Si(z),u.canBlockReload=D.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=D.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=u.canSkipUntil>0&&D.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=D.optionalFloat("PART-HOLD-BACK",0),u.holdBack=D.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{u.partTarget&&Er(u,se,O);const V=new Si(z);u.partTarget=V.decimalFloatingPoint("PART-TARGET");break}case"PART":{let V=u.partList;V||(V=u.partList=[]);const q=y>0?V[V.length-1]:void 0,ie=y++,j=new Si(z,u),H=new JW(j,_,d,ie,q);V.push(H),_.duration+=H.duration;break}case"PRELOAD-HINT":{const V=new Si(z,u);u.preloadHint=V;break}case"RENDITION-REPORT":{const V=new Si(z,u);u.renditionReports=u.renditionReports||[],u.renditionReports.push(V);break}default:ti.warn(`line parsed but not handled: ${O}`);break}}}k&&!k.relurl?(f.pop(),w-=k.duration,u.partList&&(u.fragmentHint=k)):u.partList&&(Yv(_,k,p),_.cc=E,u.fragmentHint=_,M&&CA(_,M,u)),u.targetduration||(u.playlistParsingError=new Error("Missing Target Duration"));const $=f.length,U=f[0],G=f[$-1];if(w+=u.skippedSegments*u.targetduration,w>0&&$&&G){u.averagetargetduration=w/$;const Z=G.sn;u.endSN=Z!=="initSegment"?Z:0,u.live||(G.endList=!0),P>0&&(mY(f,P),U&&p.unshift(U))}return u.fragmentHint&&(w+=u.fragmentHint.duration),u.totalduration=w,p.length&&u.dateRangeTagCount&&U&&tD(p,u),u.endCC=E,u}}function tD(n,e){let t=n.length;if(!t)if(e.hasProgramDateTime){const l=e.fragments[e.fragments.length-1];n.push(l),t++}else return;const i=n[t-1],s=e.live?1/0:e.totalduration,r=Object.keys(e.dateRanges);for(let l=r.length;l--;){const d=e.dateRanges[r[l]],u=d.startDate.getTime();d.tagAnchor=i.ref;for(let f=t;f--;){var o;if(((o=n[f])==null?void 0:o.sn)<e.startSN)break;const p=pY(e,u,n,f,s);if(p!==-1){d.tagAnchor=e.fragments[p].ref;break}}}}function pY(n,e,t,i,s){const r=t[i];if(r){const l=r.programDateTime;if(e>=l||i===0){var o;const d=(((o=t[i+1])==null?void 0:o.start)||s)-r.start;if(e<=l+d*1e3){const u=t[i].sn-n.startSN;if(u<0)return-1;const f=n.fragments;if(f.length>t.length){const b=(t[i+1]||f[f.length-1]).sn-n.startSN;for(let v=b;v>u;v--){const y=f[v].programDateTime;if(e>=y&&e<y+f[v].duration*1e3)return v}}return u}}}return-1}function EA(n,e,t){var i,s;const r=new Si(n,t),o=(i=r.METHOD)!=null?i:"",l=r.URI,d=r.hexadecimalInteger("IV"),u=r.KEYFORMATVERSIONS,f=(s=r.KEYFORMAT)!=null?s:"identity";l&&r.IV&&!d&&ti.error(`Invalid IV: ${r.IV}`);const p=l?Js.resolve(l,e):"",b=(u||"1").split("/").map(Number).filter(Number.isFinite);return new $o(o,p,f,b,d,r.KEYID)}function TA(n){const t=new Si(n).decimalFloatingPoint("TIME-OFFSET");return Oe(t)?t:null}function kA(n,e){let t=(n||"").split(/[ ,]+/).filter(i=>i);["video","audio","text"].forEach(i=>{const s=t.filter(r=>Tx(r,i));s.length&&(e[`${i}Codec`]=s.map(r=>r.split("/")[0]).join(","),t=t.filter(r=>s.indexOf(r)===-1))}),e.unknownCodecs=t}function _A(n,e,t){const i=e[t];i&&(n[t]=i)}function mY(n,e){let t=n[e];for(let i=e;i--;){const s=n[i];if(!s)return;s.programDateTime=t.programDateTime-s.duration*1e3,t=s}}function Yv(n,e,t){n.rawProgramDateTime?t.push(n):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime)}function AA(n,e,t,i){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",i&&(n.levelkeys=i),n.initSegment=null}function CA(n,e,t){n.levelkeys=e;const{encryptedFragments:i}=t;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&i.push(n)}function Er(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function IA(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function Sb(n,e){const t=e.startPTS;if(Oe(t)){let i=0,s;e.sn>n.sn?(i=t-n.start,s=n):(i=n.start-t,s=e),s.duration!==i&&s.setDuration(i)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.setStart(n.start+(n.minEndPTS-n.start)):e.setStart(n.start+n.duration):e.setStart(Math.max(n.start-e.duration,0))}function iD(n,e,t,i,s,r,o){i-t<=0&&(o.warn("Fragment should have a positive duration",e),i=t+e.duration,r=s+e.duration);let d=t,u=i;const f=e.startPTS,p=e.endPTS;if(Oe(f)){const T=Math.abs(f-t);n&&T>n.totalduration?o.warn(`media timestamps and playlist times differ by ${T}s for level ${e.level} ${n.url}`):Oe(e.deltaPTS)?e.deltaPTS=Math.max(T,e.deltaPTS):e.deltaPTS=T,d=Math.max(t,f),t=Math.min(t,f),s=e.startDTS!==void 0?Math.min(s,e.startDTS):s,u=Math.min(i,p),i=Math.max(i,p),r=e.endDTS!==void 0?Math.max(r,e.endDTS):r}const b=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(i-e.start),e.startPTS=t,e.maxStartPTS=d,e.startDTS=s,e.endPTS=i,e.minEndPTS=u,e.endDTS=r;const v=e.sn;if(!n||v<n.startSN||v>n.endSN)return 0;let y;const w=v-n.startSN,E=n.fragments;for(E[w]=e,y=w;y>0;y--)Sb(E[y],E[y-1]);for(y=w;y<E.length-1;y++)Sb(E[y],E[y+1]);return n.fragmentHint&&Sb(E[E.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,b}function gY(n,e,t){if(n===e)return;let i=null;const s=n.fragments;for(let f=s.length-1;f>=0;f--){const p=s[f].initSegment;if(p){i=p;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let r;yY(n,e,(f,p,b,v)=>{if((!e.startCC||e.skippedSegments)&&p.cc!==f.cc){const y=f.cc-p.cc;for(let w=b;w<v.length;w++)v[w].cc+=y;e.endCC=v[v.length-1].cc}Oe(f.startPTS)&&Oe(f.endPTS)&&(p.setStart(p.startPTS=f.startPTS),p.startDTS=f.startDTS,p.maxStartPTS=f.maxStartPTS,p.endPTS=f.endPTS,p.endDTS=f.endDTS,p.minEndPTS=f.minEndPTS,p.setDuration(f.endPTS-f.startPTS),p.duration&&(r=p),e.PTSKnown=e.alignedSliding=!0),f.hasStreams&&(p.elementaryStreams=f.elementaryStreams),p.loader=f.loader,f.hasStats&&(p.stats=f.stats),f.initSegment&&(p.initSegment=f.initSegment,i=f.initSegment)});const o=e.fragments,l=e.fragmentHint?o.concat(e.fragmentHint):o;if(i&&l.forEach(f=>{var p;f&&(!f.initSegment||f.initSegment.relurl===((p=i)==null?void 0:p.relurl))&&(f.initSegment=i)}),e.skippedSegments){if(e.deltaUpdateFailed=o.some(f=>!f),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let f=e.skippedSegments;f--;)o.shift();e.startSN=o[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=bY(n.dateRanges,e,t));const f=n.fragments.filter(p=>p.rawProgramDateTime);if(n.hasProgramDateTime&&!e.hasProgramDateTime)for(let p=1;p<l.length;p++)l[p].programDateTime===null&&Yv(l[p],l[p-1],f);tD(f,e)}e.endCC=o[o.length-1].cc}if(!e.startCC){var d;const f=rD(n,e.startSN-1);e.startCC=(d=f?.cc)!=null?d:o[0].cc}vY(n.partList,e.partList,(f,p)=>{p.elementaryStreams=f.elementaryStreams,p.stats=f.stats}),r?iD(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS,t):nD(n,e),o.length&&(e.totalduration=e.edge-o[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const u=e.advancedDateTime;if(e.advanced&&u){const f=e.edge;e.driftStart||(e.driftStartTime=u,e.driftStart=f),e.driftEndTime=u,e.driftEnd=f}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=n.requestScheduled)}function bY(n,e,t){const{dateRanges:i,recentlyRemovedDateranges:s}=e,r=ai({},n);s&&s.forEach(d=>{delete r[d]});const l=Object.keys(r).length;return l?(Object.keys(i).forEach(d=>{const u=r[d],f=new XL(i[d].attr,u);f.isValid?(r[d]=f,u||(f.tagOrder+=l)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${fi(i[d].attr)}"`)}),r):i}function vY(n,e,t){if(n&&e){let i=0;for(let s=0,r=n.length;s<=r;s++){const o=n[s],l=e[s+i];o&&l&&o.index===l.index&&o.fragment.sn===l.fragment.sn?t(o,l):i--}}}function yY(n,e,t){const i=e.skippedSegments,s=Math.max(n.startSN,e.startSN)-e.startSN,r=(n.fragmentHint?1:0)+(i?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,o=e.startSN-n.startSN,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,d=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let u=s;u<=r;u++){const f=d[o+u];let p=l[u];if(i&&!p&&f&&(p=e.fragments[u]=f),f&&p){t(f,p,u,l);const b=f.relurl,v=p.relurl;if(b&&xY(b,v)){e.playlistParsingError=RA(`media sequence mismatch ${p.sn}:`,n,e,f,p);return}else if(f.cc!==p.cc){e.playlistParsingError=RA(`discontinuity sequence mismatch (${f.cc}!=${p.cc})`,n,e,f,p);return}}}}function RA(n,e,t,i,s){return new Error(`${n} ${s.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function nD(n,e,t=!0){const i=e.startSN+e.skippedSegments-n.startSN,s=n.fragments,r=i>=0;let o=0;if(r&&i<s.length)o=s[i].start;else if(r&&e.startSN===n.endSN+1)o=n.fragmentEnd;else if(r&&t)o=n.fragmentStart+i*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)o=n.fragmentStart;else return;Xv(e,o)}function Xv(n,e){if(e){const t=n.fragments;for(let i=n.skippedSegments;i<t.length;i++)t[i].addStart(e);n.fragmentHint&&n.fragmentHint.addStart(e)}}function sD(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const i=n.fragments;if(i.length&&t*4>e){const r=i[i.length-1].duration*1e3;r<t&&(t=r)}}else t/=2;return Math.round(t)}function rD(n,e,t){if(!n)return null;let i=n.fragments[e-n.startSN];return i||(i=n.fragmentHint,i&&i.sn===e)?i:e<n.startSN&&t&&t.sn===e?t:null}function LA(n,e,t){return n?oD(n.partList,e,t):null}function oD(n,e,t){if(n)for(let i=n.length;i--;){const s=n[i];if(s.index===t&&s.fragment.sn===e)return s}return null}function aD(n){n.forEach((e,t)=>{var i;(i=e.details)==null||i.fragments.forEach(s=>{s.level=t,s.initSegment&&(s.initSegment.level=t)})})}function xY(n,e){return n!==e&&e?DA(n)!==DA(e):!1}function DA(n){return n.replace(/\?[^?]*$/,"")}function md(n,e){for(let i=0,s=n.length;i<s;i++){var t;if(((t=n[i])==null?void 0:t.cc)===e)return n[i]}return null}function wY(n,e){return!!(n&&e.startCC<n.endCC&&e.endCC>n.startCC)}function OA(n,e){const t=n.start+e;n.startPTS=t,n.setStart(t),n.endPTS=t+n.duration}function lD(n,e){const t=e.fragments;for(let i=0,s=t.length;i<s;i++)OA(t[i],n);e.fragmentHint&&OA(e.fragmentHint,n),e.alignedSliding=!0}function SY(n,e){n&&(cD(e,n),e.alignedSliding||xp(e,n),!e.alignedSliding&&!e.skippedSegments&&nD(n,e,!1))}function cD(n,e){if(!wY(e,n))return;const t=Math.min(e.endCC,n.endCC),i=md(e.fragments,t),s=md(n.fragments,t);if(!i||!s)return;ti.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const r=i.start-s.start;lD(r,n)}function xp(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,i=e.fragments;if(!t.length||!i.length)return;let s,r;const o=Math.min(e.endCC,n.endCC);e.startCC<o&&n.startCC<o&&(s=md(i,o),r=md(t,o)),(!s||!r)&&(s=i[Math.floor(i.length/2)],r=md(t,s.cc)||t[Math.floor(t.length/2)]);const l=s.programDateTime,d=r.programDateTime;if(!l||!d)return;const u=(d-l)/1e3-(r.start-s.start);lD(u,n)}function kn(n,e,t){Un(n,e,t),n.addEventListener(e,t)}function Un(n,e,t){n.removeEventListener(e,t)}const EY={toString:function(n){let e="";const t=n.length;for(let i=0;i<t;i++)e+=`[${n.start(i).toFixed(3)}-${n.end(i).toFixed(3)}]`;return e}},ve={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Lx extends KL{constructor(e,t,i,s,r){super(s,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ve.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:o,fragCurrent:l,media:d,mediaBuffer:u,state:f}=this,p=d?d.currentTime:0,b=ft.bufferInfo(u||d,p,o.maxBufferHole),v=!b.len;if(this.log(`Media seeking to ${Oe(p)?p.toFixed(3):p}, state: ${f}, ${v?"out of":"in"} buffer`),this.state===ve.ENDED)this.resetLoadingState();else if(l){const y=o.maxFragLookUpTolerance,w=l.start-y,E=l.start+l.duration+y;if(v||E<b.start||w>b.end){const T=p>E;(p<w||T)&&(T&&l.loader&&(this.log(`Cancelling fragment load for seek (sn: ${l.sn})`),l.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(d){this.fragmentTracker.removeFragmentsInRange(p,1/0,this.playlistType,!0);const y=this.lastCurrentTime;if(p>y&&(this.lastCurrentTime=p),!this.loadingParts){const w=Math.max(b.end,p),E=this.shouldLoadParts(this.getLevelDetails(),w);E&&(this.log(`LL-Part loading ON after seeking to ${p.toFixed(2)} with buffer @${w.toFixed(2)}`),this.loadingParts=E)}}this.hls.hasEnoughToStart||(this.log(`Setting ${v?"startPosition":"nextLoadPosition"} to ${p} for seek without enough to start`),this.nextLoadPosition=p,v&&(this.startPosition=p)),v&&this.state===ve.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=r,this.hls=e,this.fragmentLoader=new QK(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Ax(e.config)}registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===ve.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ve.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const i=e.end||0,s=this.config.timelineOffset||0;if(i<=s)return!1;const r=e.buffered;this.config.maxBufferHole&&r&&r.length>1&&(e=ft.bufferedInfo(r,e.start,0));const o=e.nextStart;if(o&&o>s&&o<t.edge||this.media.currentTime<e.start)return!1;const d=t.partList;if(d!=null&&d.length){const f=d[d.length-1];return ft.isBuffered(this.media,f.start+f.duration/2)}const u=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(u)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;kn(i,"seeking",this.onMediaSeeking),kn(i,"ended",this.onMediaEnded);const s=this.config;this.levels&&s.autoStartLoad&&this.state===ve.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(e,t){const i=!!t.transferMedia,s=this.media;if(s!==null){if(s.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Un(s,"seeking",this.onMediaSeeking),Un(s,"ended",this.onMediaEnded),this.keyLoader&&!i&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,i){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=ve.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this.startFragRequested=!0,this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){const s=r=>{const o=r.frag;if(this.fragContextChanged(o)){this.warn(`${o.type} sn: ${o.sn}${r.part?" part: "+r.part.index:""} of ${this.fragInfo(o,!1,r.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(o);return}o.stats.chunkCount++,this._handleFragmentLoadProgress(r)};this._doFragLoad(e,t,i,s).then(r=>{if(!r)return;const o=this.state,l=r.frag;if(this.fragContextChanged(l)){(o===ve.FRAG_LOADING||!this.fragCurrent&&o===ve.PARSING)&&(this.fragmentTracker.removeFragment(l),this.state=ve.IDLE);return}"payload"in r&&(this.log(`Loaded ${l.type} sn: ${l.sn} of ${this.playlistLabel()} ${l.level}`),this.hls.trigger(I.FRAG_LOADED,r)),this._handleFragmentLoadComplete(r)}).catch(r=>{this.state===ve.STOPPED||this.state===ve.ERROR||(this.warn(`Frag error: ${r?.message||r}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this;if(i.getState(e)===qi.APPENDING){const r=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,r),l=Math.max(e.duration,o?o.len:this.config.maxBufferLength),d=this.backtrackFragment;((d?e.sn-d.sn:0)===1||this.reduceMaxBufferLength(l,e.duration))&&i.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===qi.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return t?.live&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,i=null){if(!(e-t))return;const s={startOffset:e,endOffset:t,type:i};this.hls.trigger(I.BUFFER_FLUSHING,s)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(i=>{const s=i?.frag;if(!s||this.fragContextChanged(s)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{const{hls:s}=this,{frag:r,payload:o}=i,l=r.decryptdata;if(o&&o.byteLength>0&&l!=null&&l.key&&l.iv&&Ul(l.method)){const d=self.performance.now();return this.decrypter.decrypt(new Uint8Array(o),l.key.buffer,l.iv.buffer,Ix(l.method)).catch(u=>{throw s.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:r}),u}).then(u=>{const f=self.performance.now();return s.trigger(I.FRAG_DECRYPTED,{frag:r,payload:u,stats:{tstart:d,tdecrypt:f}}),i.payload=u,this.completeInitSegmentLoad(i)})}return this.completeInitSegmentLoad(i)}).catch(i=>{this.state===ve.STOPPED||this.state===ve.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state!==ve.STOPPED&&(this.state=ve.IDLE),e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var i,s;const r=e.tracks;if(r&&!t.encrypted&&((i=r.audio)!=null&&i.encrypted||(s=r.video)!=null&&s.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const o=this.media,l=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${o?"attached mediaKeys: "+o.mediaKeys:"detached"})`);return this.warn(l.message),!o||o.mediaKeys?!1:(this.hls.trigger(I.ERROR,{type:qe.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_NO_KEYS,fatal:!1,error:l,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const i=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${i?EY.toString(ft.getBuffered(i)):"(detached)"})`),Pi(e)){var s;if(e.type!==Fe.SUBTITLE){const o=e.elementaryStreams;if(!Object.keys(o).some(l=>!!o[l])){this.state=ve.IDLE;return}}const r=(s=this.levels)==null?void 0:s[e.level];r!=null&&r.fragmentError&&(this.log(`Resetting level fragment error count of ${r.fragmentError} on frag buffered`),r.fragmentError=0)}this.state=ve.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:s,partsLoaded:r}=e,o=!r||r.length===0||r.some(d=>!d),l=new Cx(i.level,i.sn,i.stats.chunkCount+1,0,s?s.index:-1,!o);t.flush(l)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,s){var r;this.fragCurrent=e;const o=t.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let l=null;if(e.encrypted&&!((r=e.decryptdata)!=null&&r.key)){if(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=ve.KEY_LOADING,this.fragCurrent=e,l=this.keyLoader.load(e).then(b=>{if(!this.fragContextChanged(b.frag))return this.hls.trigger(I.KEY_LOADED,b),this.state===ve.KEY_LOADING&&(this.state=ve.IDLE),b}),this.hls.trigger(I.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(l=this.keyLoader.loadClear(e,o.encryptedFragments,this.startFragRequested),l&&this.log("[eme] blocking frag load until media-keys acquired"));const d=this.fragPrevious;if(Pi(e)&&(!d||e.sn!==d.sn)){const b=this.shouldLoadParts(t.details,e.end);b!==this.loadingParts&&(this.log(`LL-Part loading ${b?"ON":"OFF"} loading sn ${d?.sn}->${e.sn}`),this.loadingParts=b)}if(i=Math.max(e.start,i||0),this.loadingParts&&Pi(e)){const b=o.partList;if(b&&s){i>o.fragmentEnd&&o.fragmentHint&&(e=o.fragmentHint);const v=this.getNextPart(b,e,i);if(v>-1){const y=b[v];e=this.fragCurrent=y.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${y.index} (${v}/${b.length-1}) of ${this.fragInfo(e,!1,y)}) cc: ${e.cc} [${o.startSN}-${o.endSN}], target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=y.start+y.duration,this.state=ve.FRAG_LOADING;let w;return l?w=l.then(E=>!E||this.fragContextChanged(E.frag)?null:this.doFragPartsLoad(e,y,t,s)).catch(E=>this.handleFragLoadError(E)):w=this.doFragPartsLoad(e,y,t,s).catch(E=>this.handleFragLoadError(E)),this.hls.trigger(I.FRAG_LOADING,{frag:e,part:y,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):w}else if(!e.url||this.loadedEndOfParts(b,i))return Promise.resolve(null)}}if(Pi(e)&&this.loadingParts){var u;this.log(`LL-Part loading OFF after next part miss @${i.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(u=o.partList)==null?void 0:u.filter(b=>b.loaded).map(b=>`[${b.start}-${b.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+o.startSN+"-"+o.endSN+"]"}, target: ${parseFloat(i.toFixed(3))}`),Oe(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=ve.FRAG_LOADING;const f=this.config.progressive&&e.type!==Fe.SUBTITLE;let p;return f&&l?p=l.then(b=>!b||this.fragContextChanged(b.frag)?null:this.fragmentLoader.load(e,s)).catch(b=>this.handleFragLoadError(b)):p=Promise.all([this.fragmentLoader.load(e,f?s:void 0),l]).then(([b])=>(!f&&s&&s(b),b)).catch(b=>this.handleFragLoadError(b)),this.hls.trigger(I.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):p}doFragPartsLoad(e,t,i,s){return new Promise((r,o)=>{var l;const d=[],u=(l=i.details)==null?void 0:l.partList,f=p=>{this.fragmentLoader.loadPart(e,p,s).then(b=>{d[p.index]=b;const v=b.part;this.hls.trigger(I.FRAG_LOADED,b);const y=LA(i.details,e.sn,p.index+1)||oD(u,e.sn,p.index+1);if(y)f(y);else return r({frag:e,part:v,partsLoaded:d})}).catch(o)};f(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===le.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===qe.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(I.ERROR,t)}else this.hls.trigger(I.ERROR,{type:qe.OTHER_ERROR,details:le.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==ve.PARSING){!this.fragCurrent&&this.state!==ve.STOPPED&&this.state!==ve.ERROR&&(this.state=ve.IDLE);return}const{frag:i,part:s,level:r}=t,o=self.performance.now();i.stats.parsing.end=o,s&&(s.stats.parsing.end=o);const l=this.getLevelDetails(),u=l&&i.sn>l.endSN||this.shouldLoadParts(l,i.end);u!==this.loadingParts&&(this.log(`LL-Part loading ${u?"ON":"OFF"} after parsing segment ending @${i.end.toFixed(2)}`),this.loadingParts=u),this.updateLevelTiming(i,s,r,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var i;const r=e.partList[0];if(r.fragment.type===Fe.SUBTITLE)return!1;const o=r.end+(((i=e.fragmentHint)==null?void 0:i.duration)||0);if(t>=o){var s;if((this.hls.hasEnoughToStart?((s=this.media)==null?void 0:s.currentTime)||this.lastCurrentTime:this.getLoadPosition())>r.start-r.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:s,sn:r,part:o}=e;if(!(t!=null&&t[s]))return this.warn(`Levels object was unset while buffering fragment ${r} of ${this.playlistLabel()} ${s}. The current chunk will not be buffered.`),null;const l=t[s],d=l.details,u=o>-1?LA(d,r,o):null,f=u?u.fragment:rD(d,r,i);return f?(i&&i!==f&&(f.stats=i.stats),{frag:f,part:u,level:l}):null}bufferFragmentData(e,t,i,s,r){if(this.state!==ve.PARSING)return;const{data1:o,data2:l}=e;let d=o;if(l&&(d=bs(o,l)),!d.length)return;const u=this.initPTS[t.cc],f=u?-u.baseTime/u.timescale:void 0,p={type:e.type,frag:t,part:i,chunkMeta:s,offset:f,parent:t.type,data:d};if(this.hls.trigger(I.BUFFER_APPENDING,p),e.dropped&&e.independent&&!i){if(r)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!ft.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const i=t.currentTime,s=ft.bufferInfo(t,i,0),r=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,r*.25),l=Math.max(Math.min(e.start-o,s.end-o),i+o);e.start-l>o&&this.flushMainBuffer(l,e.start)}getFwdBufferInfo(e,t){var i;const s=this.getLoadPosition();if(!Oe(s))return null;const o=this.lastCurrentTime>s||(i=this.media)!=null&&i.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,s,t,o)}getFwdBufferInfoAtPos(e,t,i,s){const r=ft.bufferInfo(e,t,s);if(r.len===0&&r.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(t,i);if(o&&(r.nextStart<=o.end||o.gap)){const l=Math.max(Math.min(r.nextStart,o.end)-t,s);return ft.bufferInfo(e,t,l)}}return r}getMaxBufferLength(e){const{config:t}=this;let i;return e?i=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):i=t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const i=this.config,s=Math.max(Math.min(e-t,i.maxBufferLength),t),r=Math.max(e-t*3,i.maxMaxBufferLength/2,s);return r>=s?(i.maxMaxBufferLength=r,this.warn(`Reduce max buffer length to ${r}s`),!0):!1}getAppendedFrag(e,t=Fe.MAIN){const i=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return i&&"fragment"in i?i.fragment:i}getNextFragment(e,t){const i=t.fragments,s=i.length;if(!s)return null;const{config:r}=this,o=i[0].start,l=r.lowLatencyMode&&!!t.partList;let d=null;if(t.live){const p=r.initialLiveManifestSize;if(s<p)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${p})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o){var u;l&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),d=this.getInitialLiveFragment(t);const b=this.hls.startPosition,v=this.hls.liveSyncPosition,y=d?(b!==-1&&b>=o?b:v)||d.start:e;this.log(`Setting startPosition to ${y} to match start frag at live edge. mainStart: ${b} liveSyncPosition: ${v} frag.start: ${(u=d)==null?void 0:u.start}`),this.startPosition=this.nextLoadPosition=y}}else e<=o&&(d=i[0]);if(!d){const p=this.loadingParts?t.partEnd:t.fragmentEnd;d=this.getFragmentAtPosition(e,p,t)}let f=this.filterReplacedPrimary(d,t);if(!f&&d){const p=d.sn-t.startSN;f=this.filterReplacedPrimary(i[p+1]||null,t)}return this.mapToInitFragWhenRequired(f)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return(i===qi.OK||i===qi.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,s,r){let o=null;if(e.gap&&(o=this.getNextFragment(this.nextLoadPosition,t),o&&!o.gap&&i.nextStart)){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,s,0);if(l!==null&&i.len+l.len>=r){const d=o.sn;return this.loopSn!==d&&(this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${d}`),this.loopSn=d),null}}return this.loopSn=void 0,o}get primaryPrefetch(){if(NA(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(NA(this.config)&&e.type!==Fe.SUBTITLE){const i=this.hls.interstitialsManager,s=i?.bufferingItem;if(s){const o=s.event;if(o){if(o.appendInPlace||Math.abs(e.start-s.start)>1||s.start===0)return null}else if(e.end<=s.start&&t?.live===!1||e.start>s.end&&s.nextEvent&&(s.nextEvent.appendInPlace||e.start-s.end>1))return null}const r=i?.playerQueue;if(r)for(let o=r.length;o--;){const l=r[o].interstitial;if(l.appendInPlace&&e.start>=l.startTime&&e.end<=l.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,i){let s=-1,r=!1,o=!0;for(let l=0,d=e.length;l<d;l++){const u=e[l];if(o=o&&!u.independent,s>-1&&i<u.start)break;const f=u.loaded;f?s=-1:(r||(u.independent||o)&&u.fragment===t)&&(u.fragment!==t&&this.warn(`Need buffer at ${i} but next unloaded part starts at ${u.start}`),s=l),r=f}return s}loadedEndOfParts(e,t){let i;for(let s=e.length;s--;){if(i=e[s],!i.loaded)return!1;if(t>i.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,i=this.fragPrevious;let s=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),s=jK(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const r=i.sn+1;if(r>=e.startSN&&r<=e.endSN){const o=t[r-e.startSN];i.cc===o.cc&&(s=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=VL(e,i.cc,i.end),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const r=this.hls.liveSyncPosition;r!==null&&(s=this.getFragmentAtPosition(r,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,t,i){const{config:s}=this;let{fragPrevious:r}=this,{fragments:o,endSN:l}=i;const{fragmentHint:d}=i,{maxFragLookUpTolerance:u}=s,f=i.partList,p=!!(this.loadingParts&&f!=null&&f.length&&d);p&&!this.bitrateTest&&f[f.length-1].fragment.sn===d.sn&&(o=o.concat(d),l=d.sn);let b;if(e<t){var v;const w=e<this.lastCurrentTime||e>t-u||(v=this.media)!=null&&v.paused||!this.startFragRequested?0:u;b=Aa(r,o,e,w)}else b=o[o.length-1];if(b){const y=b.sn-i.startSN,w=this.fragmentTracker.getState(b);if((w===qi.OK||w===qi.PARTIAL&&b.gap)&&(r=b),r&&b.sn===r.sn&&(!p||f[0].fragment.sn>b.sn||!i.live)&&b.level===r.level){const T=o[y+1];b.sn<l&&this.fragmentTracker.getState(T)!==qi.OK?b=T:b=null}}return b}alignPlaylists(e,t,i){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const r=e.fragmentStart,o=!t,l=e.alignedSliding&&Oe(r);if(o||!l&&!r){SY(i,e);const d=e.fragmentStart;return this.log(`Live playlist sliding: ${d.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${s}`),d}return r}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let i=this.startPosition;i<t&&(i=-1);const s=this.timelineOffset;if(i===-1){const r=this.startTimeOffset!==null,o=r?this.startTimeOffset:e.startTimeOffset;o!==null&&Oe(o)?(i=t+o,o<0&&(i+=e.edge),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Setting startPosition to ${i} for start time offset ${o} found in ${r?"multivariant":"media"} playlist`),this.startPosition=i):e.live?(i=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${i}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=i=0),this.lastCurrentTime=i+s}this.nextLoadPosition=i+s}getLoadPosition(){var e;const{media:t}=this;let i=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?i=t.currentTime:this.nextLoadPosition>=0&&(i=this.nextLoadPosition),i}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&Pi(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==ve.FRAG_LOADING_WAITING_RETRY)&&(this.state=ve.IDLE)}onFragmentOrKeyLoadError(e,t){var i;if(t.chunkMeta&&!t.frag){const T=this.getCurrentContext(t.chunkMeta);T&&(t.frag=T.frag)}const s=t.frag;if(!s||s.type!==e||!this.levels)return;if(this.fragContextChanged(s)){var r;this.warn(`Frag load error must match current frag to retry ${s.url} > ${(r=this.fragCurrent)==null?void 0:r.url}`);return}const o=t.details===le.FRAG_GAP;o&&this.fragmentTracker.fragBuffered(s,!0);const l=t.errorAction;if(!l){this.state=ve.ERROR;return}const{action:d,flags:u,retryCount:f=0,retryConfig:p}=l,b=!!p,v=b&&d===hn.RetryRequest,y=b&&!l.resolved&&u===Qn.MoveAllAlternatesMatchingHost,w=(i=this.hls.latestLevelDetails)==null?void 0:i.live;if(!v&&y&&Pi(s)&&!s.endList&&w&&!WL(t))this.resetFragmentErrors(e),this.treatAsGap(s),l.resolved=!0;else if((v||y)&&f<p.maxNumRetry){var E;const T=qv((E=t.response)==null?void 0:E.code),k=_x(p,f);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+k,this.state=ve.FRAG_LOADING_WAITING_RETRY,l.resolved=!0,T){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${s.sn} of ${e} ${s.level} errored with ${t.details}, retrying loading ${f+1}/${p.maxNumRetry} in ${k}ms`)}else if(p)if(this.resetFragmentErrors(e),f<p.maxNumRetry)!o&&d!==hn.RemoveAlternatePermanently&&(l.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${f})`);return}else d===hn.SendAlternateToPenaltyBox?this.state=ve.WAITING_LEVEL:this.state=ve.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,i=t===1/0;(!t||e>=t||i&&!qv(0))&&(i&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=ve.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===ve.PARSING||this.state===ve.PARSED){const t=e.frag,i=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,i),r=s&&s.len>.5;r&&this.reduceMaxBufferLength(s.len,t?.duration||10);const o=!r;return o&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${i} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===Fe.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==ve.STOPPED&&(this.state=ve.IDLE)}afterBufferFlushed(e,t,i){if(!e)return;const s=ft.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,s,i),this.state===ve.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==ve.STOPPED&&(this.state=ve.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,s){const r=i.details;if(!r){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((d,u)=>{const f=e.elementaryStreams[u];if(f){const p=f.endPTS-f.startPTS;if(p<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${p})`),d||!1;const b=s?0:iD(r,e,f.startPTS,f.endPTS,f.startDTS,f.endDTS,this);return this.hls.trigger(I.LEVEL_PTS_UPDATED,{details:r,level:i,drift:b,type:u,frag:e,start:f.startPTS,end:f.endPTS}),!0}return d},!1)){var l;const d=((l=this.transmuxer)==null?void 0:l.error)===null;if((i.fragmentError===0||d&&(i.fragmentError<2||e.endList))&&this.treatAsGap(e,i),d){const u=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(u.message),this.hls.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.FRAG_PARSING_ERROR,fatal:!1,error:u,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=ve.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(I.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Fe.MAIN?"level":"track"}fragInfo(e,t=!0,i){var s,r;return`${this.playlistLabel()} ${e.level} (${i?"part":"frag"}:[${((s=t&&!i?e.startPTS:(i||e).start)!=null?s:NaN).toFixed(3)}-${((r=t&&!i?e.endPTS:(i||e).end)!=null?r:NaN).toFixed(3)}]${i&&e.type==="main"?"INDEPENDENT="+(i.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function NA(n){return!!n.interstitialsController&&n.enableInterstitialPlayback!==!1}class dD{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;if(e.length)e.length===1?i=e[0]:i=TY(e,t);else return new Uint8Array(0);return this.reset(),i}reset(){this.chunks.length=0,this.dataLength=0}}function TY(n,e){const t=new Uint8Array(e);let i=0;for(let s=0;s<n.length;s++){const r=n[s];t.set(r,i),i+=r.length}return t}var Eb={exports:{}},PA;function kY(){return PA||(PA=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function s(d,u,f){this.fn=d,this.context=u,this.once=f||!1}function r(d,u,f,p,b){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new s(f,p||d,b),y=t?t+u:u;return d._events[y]?d._events[y].fn?d._events[y]=[d._events[y],v]:d._events[y].push(v):(d._events[y]=v,d._eventsCount++),d}function o(d,u){--d._eventsCount===0?d._events=new i:delete d._events[u]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)e.call(f,p)&&u.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=t?t+u:u,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var b=0,v=p.length,y=new Array(v);b<v;b++)y[b]=p[b].fn;return y},l.prototype.listenerCount=function(u){var f=t?t+u:u,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,f,p,b,v,y){var w=t?t+u:u;if(!this._events[w])return!1;var E=this._events[w],T=arguments.length,k,_;if(E.fn){switch(E.once&&this.removeListener(u,E.fn,void 0,!0),T){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,f),!0;case 3:return E.fn.call(E.context,f,p),!0;case 4:return E.fn.call(E.context,f,p,b),!0;case 5:return E.fn.call(E.context,f,p,b,v),!0;case 6:return E.fn.call(E.context,f,p,b,v,y),!0}for(_=1,k=new Array(T-1);_<T;_++)k[_-1]=arguments[_];E.fn.apply(E.context,k)}else{var O=E.length,R;for(_=0;_<O;_++)switch(E[_].once&&this.removeListener(u,E[_].fn,void 0,!0),T){case 1:E[_].fn.call(E[_].context);break;case 2:E[_].fn.call(E[_].context,f);break;case 3:E[_].fn.call(E[_].context,f,p);break;case 4:E[_].fn.call(E[_].context,f,p,b);break;default:if(!k)for(R=1,k=new Array(T-1);R<T;R++)k[R-1]=arguments[R];E[_].fn.apply(E[_].context,k)}}return!0},l.prototype.on=function(u,f,p){return r(this,u,f,p,!1)},l.prototype.once=function(u,f,p){return r(this,u,f,p,!0)},l.prototype.removeListener=function(u,f,p,b){var v=t?t+u:u;if(!this._events[v])return this;if(!f)return o(this,v),this;var y=this._events[v];if(y.fn)y.fn===f&&(!b||y.once)&&(!p||y.context===p)&&o(this,v);else{for(var w=0,E=[],T=y.length;w<T;w++)(y[w].fn!==f||b&&!y[w].once||p&&y[w].context!==p)&&E.push(y[w]);E.length?this._events[v]=E.length===1?E[0]:E:o(this,v)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=t?t+u:u,this._events[f]&&o(this,f)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,n.exports=l})(Eb)),Eb.exports}var _Y=kY(),Dx=QW(_Y);const $d="1.6.15",Jl={};function AY(){return typeof __HLS_WORKER_BUNDLE__=="function"}function CY(){const n=Jl[$d];if(n)return n.clientCount++,n;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),s={worker:new self.Worker(t),objectURL:t,clientCount:1};return Jl[$d]=s,s}function IY(n){const e=Jl[n];if(e)return e.clientCount++,e;const t=new self.URL(n,self.location.href).href,s={worker:new self.Worker(t),scriptURL:t,clientCount:1};return Jl[n]=s,s}function RY(n){const e=Jl[n||$d];if(e&&e.clientCount--===1){const{worker:i,objectURL:s}=e;delete Jl[n||$d],s&&self.URL.revokeObjectURL(s),i.terminate()}}function uD(n,e){return e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function Ox(n,e){return e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function zp(n,e){let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t}function Fd(n,e){const t=e;let i=0;for(;Ox(n,e);){i+=10;const s=zp(n,e+6);i+=s,uD(n,e+10)&&(i+=10),e+=i}if(i>0)return n.subarray(t,t+i)}function LY(n,e,t,i){const s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=e[t+2],o=r>>2&15;if(o>12){const v=new Error(`invalid ADTS sampling index:${o}`);n.emit(I.ERROR,I.ERROR,{type:qe.MEDIA_ERROR,details:le.FRAG_PARSING_ERROR,fatal:!0,error:v,reason:v.message});return}const l=(r>>6&3)+1,d=e[t+3]>>6&3|(r&1)<<2,u="mp4a.40."+l,f=s[o];let p=o;(l===5||l===29)&&(p-=3);const b=[l<<3|(p&14)>>1,(p&1)<<7|d<<3];return ti.log(`manifest codec:${i}, parsed codec:${u}, channels:${d}, rate:${f} (ADTS object type:${l} sampling index:${o})`),{config:b,samplerate:f,channelCount:d,codec:u,parsedCodec:u,manifestCodec:i}}function hD(n,e){return n[e]===255&&(n[e+1]&246)===240}function fD(n,e){return n[e+1]&1?7:9}function Nx(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function DY(n,e){return e+5<n.length}function wp(n,e){return e+1<n.length&&hD(n,e)}function OY(n,e){return DY(n,e)&&hD(n,e)&&Nx(n,e)<=n.length-e}function NY(n,e){if(wp(n,e)){const t=fD(n,e);if(e+t>=n.length)return!1;const i=Nx(n,e);if(i<=t)return!1;const s=e+i;return s===n.length||wp(n,s)}return!1}function pD(n,e,t,i,s){if(!n.samplerate){const r=LY(e,t,i,s);if(!r)return;ai(n,r)}}function mD(n){return 1024*9e4/n}function PY(n,e){const t=fD(n,e);if(e+t<=n.length){const i=Nx(n,e)-t;if(i>0)return{headerLength:t,frameLength:i}}}function gD(n,e,t,i,s){const r=mD(n.samplerate),o=i+s*r,l=PY(e,t);let d;if(l){const{frameLength:p,headerLength:b}=l,v=b+p,y=Math.max(0,t+v-e.length);y?(d=new Uint8Array(v-b),d.set(e.subarray(t+b,e.length),0)):d=e.subarray(t+b,t+v);const w={unit:d,pts:o};return y||n.samples.push(w),{sample:w,length:v,missing:y}}const u=e.length-t;return d=new Uint8Array(u),d.set(e.subarray(t,e.length),0),{sample:{unit:d,pts:o},length:u,missing:-1}}function MY(n,e){return Ox(n,e)&&zp(n,e+6)+10<=n.length-e}function $Y(n){return n instanceof ArrayBuffer?n:n.byteOffset==0&&n.byteLength==n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}function Tb(n,e=0,t=1/0){return FY(n,e,t,Uint8Array)}function FY(n,e,t,i){const s=jY(n);let r=1;"BYTES_PER_ELEMENT"in i&&(r=i.BYTES_PER_ELEMENT);const o=BY(n)?n.byteOffset:0,l=(o+n.byteLength)/r,d=(o+e)/r,u=Math.floor(Math.max(0,Math.min(d,l))),f=Math.floor(Math.min(u+Math.max(t,0),l));return new i(s,u,f-u)}function jY(n){return n instanceof ArrayBuffer?n:n.buffer}function BY(n){return n&&n.buffer instanceof ArrayBuffer&&n.byteLength!==void 0&&n.byteOffset!==void 0}function UY(n){const e={key:n.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(n.size<2)return;if(n.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const i=n.data.subarray(1).indexOf(0);if(i===-1)return;const s=ns(Tb(n.data,1,i)),r=n.data[2+i],o=n.data.subarray(3+i).indexOf(0);if(o===-1)return;const l=ns(Tb(n.data,3+i,o));let d;return s==="-->"?d=ns(Tb(n.data,4+i+o)):d=$Y(n.data.subarray(4+i+o)),e.mimeType=s,e.pictureType=r,e.description=l,e.data=d,e}function zY(n){if(n.size<2)return;const e=ns(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}}function HY(n){if(n.size<2)return;if(n.type==="TXXX"){let t=1;const i=ns(n.data.subarray(t),!0);t+=i.length+1;const s=ns(n.data.subarray(t));return{key:n.type,info:i,data:s}}const e=ns(n.data.subarray(1));return{key:n.type,info:"",data:e}}function GY(n){if(n.type==="WXXX"){if(n.size<2)return;let t=1;const i=ns(n.data.subarray(t),!0);t+=i.length+1;const s=ns(n.data.subarray(t));return{key:n.type,info:i,data:s}}const e=ns(n.data);return{key:n.type,info:"",data:e}}function VY(n){return n.type==="PRIV"?zY(n):n.type[0]==="W"?GY(n):n.type==="APIC"?UY(n):HY(n)}function qY(n){const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=zp(n,4),i=10;return{type:e,size:t,data:n.subarray(i,i+t)}}const qh=10,WY=10;function bD(n){let e=0;const t=[];for(;Ox(n,e);){const i=zp(n,e+6);n[e+5]>>6&1&&(e+=qh),e+=qh;const s=e+i;for(;e+WY<s;){const r=qY(n.subarray(e)),o=VY(r);o&&t.push(o),e+=r.size+qh}uD(n,e)&&(e+=qh)}return t}function vD(n){return n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp"}function KY(n){if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,t&&(i+=4772185884e-2),Math.round(i)}}function Px(n){const e=bD(n);for(let t=0;t<e.length;t++){const i=e[t];if(vD(i))return KY(i)}}let es=(function(n){return n.audioId3="org.id3",n.dateRange="com.apple.quicktime.HLS",n.emsg="https://aomedia.org/emsg/ID3",n.misbklv="urn:misb:KLV:bin:1910.1",n})({});function Ks(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Mx{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=bs(this.cachedData,e),this.cachedData=null);let i=Fd(e,0),s=i?i.length:0,r;const o=this._audioTrack,l=this._id3Track,d=i?Px(i):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&Oe(d))&&(this.basePTS=YY(d,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:es.audioId3,duration:Number.POSITIVE_INFINITY});s<u;){if(this.canParse(e,s)){const f=this.appendFrame(o,e,s);f?(this.frameIndex++,this.lastPTS=f.sample.pts,s+=f.length,r=s):s=u}else MY(e,s)?(i=Fd(e,s),l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:es.audioId3,duration:Number.POSITIVE_INFINITY}),s+=i.length,r=s):s++;if(s===u&&r!==u){const f=e.slice(r);this.cachedData?this.cachedData=bs(this.cachedData,f):this.cachedData=f}}return{audioTrack:o,videoTrack:Ks(),id3Track:l,textTrack:Ks()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Ks(),id3Track:this._id3Track,textTrack:Ks()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const YY=(n,e,t)=>{if(Oe(n))return n*90;const i=t?t.baseTime*9e4/t.timescale:0;return e*9e4+i};let Wh=null;const XY=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],QY=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],ZY=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],JY=[0,1,1,4];function yD(n,e,t,i,s){if(t+24>e.length)return;const r=xD(e,t);if(r&&t+r.frameLength<=e.length){const o=r.samplesPerFrame*9e4/r.sampleRate,l=i+s*o,d={unit:e.subarray(t,t+r.frameLength),pts:l,dts:l};return n.config=[],n.channelCount=r.channelCount,n.samplerate=r.sampleRate,n.samples.push(d),{sample:d,length:r.frameLength,missing:0}}}function xD(n,e){const t=n[e+1]>>3&3,i=n[e+1]>>1&3,s=n[e+2]>>4&15,r=n[e+2]>>2&3;if(t!==1&&s!==0&&s!==15&&r!==3){const o=n[e+2]>>1&1,l=n[e+3]>>6,d=t===3?3-i:i===3?3:4,u=XY[d*14+s-1]*1e3,p=QY[(t===3?0:t===2?1:2)*3+r],b=l===3?1:2,v=ZY[t][i],y=JY[i],w=v*8*y,E=Math.floor(v*u/p+o)*y;if(Wh===null){const _=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Wh=_?parseInt(_[1]):0}return!!Wh&&Wh<=87&&i===2&&u>=224e3&&l===0&&(n[e+3]=n[e+3]|128),{sampleRate:p,channelCount:b,frameLength:E,samplesPerFrame:w}}}function $x(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function wD(n,e){return e+1<n.length&&$x(n,e)}function eX(n,e){return $x(n,e)&&4<=n.length-e}function SD(n,e){if(e+1<n.length&&$x(n,e)){const i=xD(n,e);let s=4;i!=null&&i.frameLength&&(s=i.frameLength);const r=e+s;return r===n.length||wD(n,r)}return!1}class tX extends Mx{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const i=Fd(e,0);let s=i?.length||0;if(SD(e,s))return!1;for(let r=e.length;s<r;s++)if(NY(e,s))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return OY(e,t)}appendFrame(e,t,i){pD(e,this.observer,t,i,e.manifestCodec);const s=gD(e,t,i,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const ED=(n,e)=>{let t=0,i=5;e+=i;const s=new Uint32Array(1),r=new Uint32Array(1),o=new Uint8Array(1);for(;i>0;){o[0]=n[e];const l=Math.min(i,8),d=8-l;r[0]=4278190080>>>24+d<<d,s[0]=(o[0]&r[0])>>d,t=t?t<<l|s[0]:s[0],e+=1,i-=l}return t};class iX extends Mx{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,i){const s=TD(e,t,i,this.basePTS,this.frameIndex);if(s!==-1)return{sample:e.samples[e.samples.length-1],length:s,missing:0}}static probe(e){if(!e)return!1;const t=Fd(e,0);if(!t)return!1;const i=t.length;return e[i]===11&&e[i+1]===119&&Px(t)!==void 0&&ED(e,i)<16}}function TD(n,e,t,i,s){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const r=e[t+4]>>6;if(r>=3)return-1;const l=[48e3,44100,32e3][r],d=e[t+4]&63,f=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][d*3+r]*2;if(t+f>e.length)return-1;const p=e[t+6]>>5;let b=0;p===2?b+=2:(p&1&&p!==1&&(b+=2),p&4&&(b+=2));const v=(e[t+6]<<8|e[t+7])>>12-b&1,w=[2,1,2,3,3,4,4,5][p]+v,E=e[t+5]>>3,T=e[t+5]&7,k=new Uint8Array([r<<6|E<<1|T>>2,(T&3)<<6|p<<3|v<<2|d>>4,d<<4&224]),_=1536/l*9e4,O=i+s*_,R=e.subarray(t,t+f);return n.config=k,n.channelCount=w,n.samplerate=l,n.samples.push({unit:R,pts:O}),f}class nX extends Mx{resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Fd(e,0);let i=t?.length||0;if(t&&e[i]===11&&e[i+1]===119&&Px(t)!==void 0&&ED(e,i)<=16)return!1;for(let s=e.length;i<s;i++)if(SD(e,i))return ti.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return eX(e,t)}appendFrame(e,t,i){if(this.basePTS!==null)return yD(e,t,i,this.basePTS,this.frameIndex)}}const sX=/\/emsg[-/]ID3/i;class rX{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,s){const r=this.videoTrack=Ks("video",1),o=this.audioTrack=Ks("audio",1),l=this.txtTrack=Ks("text",1);if(this.id3Track=Ks("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const d=NL(e);if(d.video){const{id:u,timescale:f,codec:p,supplemental:b}=d.video;r.id=u,r.timescale=l.timescale=f,r.codec=p,r.supplemental=b}if(d.audio){const{id:u,timescale:f,codec:p}=d.audio;o.id=u,o.timescale=f,o.codec=p}l.id=LL.text,r.sampleDuration=0,r.duration=o.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return iK(e)}demux(e,t){this.timeOffset=t;let i=e;const s=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=bs(this.remainderData,e));const l=cK(i);this.remainderData=l.remainder,s.samples=l.valid||new Uint8Array}else s.samples=i;const o=this.extractID3Track(s,t);return r.samples=J_(t,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(t,this.timeOffset);return i.samples=J_(e,t),{videoTrack:t,audioTrack:Ks(),id3Track:s,textTrack:Ks()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const s=_t(e.samples,["emsg"]);s&&s.forEach(r=>{const o=uK(r);if(sX.test(o.schemeIdUri)){const l=MA(o,t);let d=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;d<=.001&&(d=Number.POSITIVE_INFINITY);const u=o.payload;i.samples.push({data:u,len:u.byteLength,dts:l,pts:l,type:es.emsg,duration:d})}else if(this.config.enableEmsgKLVMetadata&&o.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const l=MA(o,t);i.samples.push({data:o.payload,len:o.payload.byteLength,dts:l,pts:l,type:es.misbklv,duration:Number.POSITIVE_INFINITY})}})}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function MA(n,e){return Oe(n.presentationTime)?n.presentationTime/n.timeScale:e+n.presentationTimeDelta/n.timeScale}class oX{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new Ax(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Uo.cbc)}decryptAacSample(e,t,i){const s=e[t].unit;if(s.length<=16)return;const r=s.subarray(16,s.length-s.length%16),o=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(o).then(l=>{const d=new Uint8Array(l);s.set(d,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)}).catch(i)}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length){i();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,i=new Int8Array(t);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)i.set(e.subarray(r,r+16),s);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)e.set(i.subarray(s,s+16),r);return e}decryptAvcSample(e,t,i,s,r){const o=$L(r.data),l=this.getAvcEncryptedData(o);this.decryptBuffer(l.buffer).then(d=>{r.data=this.getAvcDecryptedUnit(o,d),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,s)}).catch(s)}decryptAvcSamples(e,t,i,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length){s();return}const r=e[t].units;for(;!(i>=r.length);i++){const o=r[i];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,t,i,s,o),!this.decrypter.isSync()))return}}}}class kD{constructor(){this.VideoSample=null}createVideoSample(e,t,i){return{key:e,frame:!1,pts:t,dts:i,units:[],length:0}}getLastNalUnit(e){var t;let i=this.VideoSample,s;if((!i||i.units.length===0)&&(i=e[e.length-1]),(t=i)!=null&&t.units){const r=i.units;s=r[r.length-1]}return s}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const i=t.samples,s=i.length;if(s){const r=i[s-1];e.pts=r.pts,e.dts=r.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,i){const s=t.byteLength;let r=e.naluState||0;const o=r,l=[];let d=0,u,f,p,b=-1,v=0;for(r===-1&&(b=0,v=this.getNALuType(t,0),r=0,d=1);d<s;){if(u=t[d++],!r){r=u?0:1;continue}if(r===1){r=u?0:2;continue}if(!u)r=3;else if(u===1){if(f=d-r-1,b>=0){const y={data:t.subarray(b,f),type:v};l.push(y)}else{const y=this.getLastNalUnit(e.samples);y&&(o&&d<=4-o&&y.state&&(y.data=y.data.subarray(0,y.data.byteLength-o)),f>0&&(y.data=bs(y.data,t.subarray(0,f)),y.state=0))}d<s?(p=this.getNALuType(t,d),b=d,v=p,r=0):r=-1}else r=0}if(b>=0&&r>=0){const y={data:t.subarray(b,s),type:v,state:r};l.push(y)}if(l.length===0){const y=this.getLastNalUnit(e.samples);y&&(y.data=bs(y.data,t))}return e.naluState=r,l}}class gd{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,s=new Uint8Array(4),r=Math.min(4,t);if(r===0)throw new Error("no bytes available");s.set(e.subarray(i,i+r)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=r*8,this.bytesAvailable-=r}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&ti.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class aX extends kD{parsePES(e,t,i,s){const r=this.parseNALu(e,i.data,s);let o=this.VideoSample,l,d=!1;i.data=null,o&&r.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),r.forEach(u=>{var f,p;switch(u.type){case 1:{let w=!1;l=!0;const E=u.data;if(d&&E.length>4){const T=this.readSliceType(E);(T===2||T===4||T===7||T===9)&&(w=!0)}if(w){var b;(b=o)!=null&&b.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),o.frame=!0,o.key=w;break}case 5:l=!0,(f=o)!=null&&f.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),o.key=!0,o.frame=!0;break;case 6:{l=!0,Ex(u.data,1,i.pts,t.samples);break}case 7:{var v,y;l=!0,d=!0;const w=u.data,E=this.readSPS(w);if(!e.sps||e.width!==E.width||e.height!==E.height||((v=e.pixelRatio)==null?void 0:v[0])!==E.pixelRatio[0]||((y=e.pixelRatio)==null?void 0:y[1])!==E.pixelRatio[1]){e.width=E.width,e.height=E.height,e.pixelRatio=E.pixelRatio,e.sps=[w];const T=w.subarray(1,4);let k="avc1.";for(let _=0;_<3;_++){let O=T[_].toString(16);O.length<2&&(O="0"+O),k+=O}e.codec=k}break}case 8:l=!0,e.pps=[u.data];break;case 9:l=!0,e.audFound=!0,(p=o)!=null&&p.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;case 12:l=!0;break;default:l=!1;break}o&&l&&o.units.push(u)}),s&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new gd(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let i=8,s=8,r;for(let o=0;o<e;o++)s!==0&&(r=t.readEG(),s=(i+r+256)%256),i=s===0?i:s}readSPS(e){const t=new gd(e);let i=0,s=0,r=0,o=0,l,d,u;const f=t.readUByte.bind(t),p=t.readBits.bind(t),b=t.readUEG.bind(t),v=t.readBoolean.bind(t),y=t.skipBits.bind(t),w=t.skipEG.bind(t),E=t.skipUEG.bind(t),T=this.skipScalingList.bind(this);f();const k=f();if(p(5),y(3),f(),E(),k===100||k===110||k===122||k===244||k===44||k===83||k===86||k===118||k===128){const N=b();if(N===3&&y(1),E(),E(),y(1),v())for(d=N!==3?8:12,u=0;u<d;u++)v()&&(u<6?T(16,t):T(64,t))}E();const _=b();if(_===0)b();else if(_===1)for(y(1),w(),w(),l=b(),u=0;u<l;u++)w();E(),y(1);const O=b(),R=b(),M=p(1);M===0&&y(1),y(1),v()&&(i=b(),s=b(),r=b(),o=b());let P=[1,1];if(v()&&v())switch(f()){case 1:P=[1,1];break;case 2:P=[12,11];break;case 3:P=[10,11];break;case 4:P=[16,11];break;case 5:P=[40,33];break;case 6:P=[24,11];break;case 7:P=[20,11];break;case 8:P=[32,11];break;case 9:P=[80,33];break;case 10:P=[18,11];break;case 11:P=[15,11];break;case 12:P=[64,33];break;case 13:P=[160,99];break;case 14:P=[4,3];break;case 15:P=[3,2];break;case 16:P=[2,1];break;case 255:{P=[f()<<8|f(),f()<<8|f()];break}}return{width:Math.ceil((O+1)*16-i*2-s*2),height:(2-M)*(R+1)*16-(M?2:4)*(r+o),pixelRatio:P}}}class lX extends kD{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,i,s){const r=this.parseNALu(e,i.data,s);let o=this.VideoSample,l,d=!1;i.data=null,o&&r.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),r.forEach(u=>{var f,p;switch(u.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:o||(o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),o.frame=!0,l=!0;break;case 16:case 17:case 18:case 21:if(l=!0,d){var b;(b=o)!=null&&b.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),o.key=!0,o.frame=!0;break;case 19:case 20:l=!0,(f=o)!=null&&f.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),o.key=!0,o.frame=!0;break;case 39:l=!0,Ex(u.data,2,i.pts,t.samples);break;case 32:l=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=ai(e.params,this.readVPS(u.data)),this.initVPS=u.data),e.vps=[u.data];break;case 33:if(l=!0,d=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],u.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const v=this.readSPS(u.data);e.width=v.width,e.height=v.height,e.pixelRatio=v.pixelRatio,e.codec=v.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const y in v.params)e.params[y]=v.params[y]}this.pushParameterSet(e.sps,u.data,e.vps),o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),o.key=!0;break;case 34:if(l=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const v=this.readPPS(u.data);for(const y in v)e.params[y]=v[y]}this.pushParameterSet(e.pps,u.data,e.vps)}break;case 35:l=!0,e.audFound=!0,(p=o)!=null&&p.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;default:l=!1;break}o&&l&&o.units.push(u)}),s&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}pushParameterSet(e,t,i){(i&&i[0]===this.initVPS||!i&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let i=0;for(let s=0;s<e.byteLength;s++)s>=2&&e[s]===3&&e[s-1]===0&&e[s-2]===0||(t[i]=e[s],i++);return new Uint8Array(t.buffer,0,i)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new gd(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const i=t.readBits(3),s=t.readBoolean();return{numTemporalLayers:i+1,temporalIdNested:s}}readSPS(e){const t=new gd(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const i=t.readBits(3);t.readBoolean();const s=t.readBits(2),r=t.readBoolean(),o=t.readBits(5),l=t.readUByte(),d=t.readUByte(),u=t.readUByte(),f=t.readUByte(),p=t.readUByte(),b=t.readUByte(),v=t.readUByte(),y=t.readUByte(),w=t.readUByte(),E=t.readUByte(),T=t.readUByte(),k=[],_=[];for(let Ie=0;Ie<i;Ie++)k.push(t.readBoolean()),_.push(t.readBoolean());if(i>0)for(let Ie=i;Ie<8;Ie++)t.readBits(2);for(let Ie=0;Ie<i;Ie++)k[Ie]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),_[Ie]&&t.readUByte();t.readUEG();const O=t.readUEG();O==3&&t.skipBits(1);const R=t.readUEG(),M=t.readUEG(),P=t.readBoolean();let N=0,L=0,D=0,$=0;P&&(N+=t.readUEG(),L+=t.readUEG(),D+=t.readUEG(),$+=t.readUEG());const U=t.readUEG(),G=t.readUEG(),Z=t.readUEG(),se=t.readBoolean();for(let Ie=se?0:i;Ie<=i;Ie++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let et=0;et<4;et++)for(let we=0;we<(et===3?2:6);we++)if(!t.readBoolean())t.readUEG();else{const _e=Math.min(64,1<<4+(et<<1));et>1&&t.readEG();for(let Be=0;Be<_e;Be++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const V=t.readUEG();let q=0;for(let Ie=0;Ie<V;Ie++){let et=!1;if(Ie!==0&&(et=t.readBoolean()),et){Ie===V&&t.readUEG(),t.readBoolean(),t.readUEG();let we=0;for(let ee=0;ee<=q;ee++){const _e=t.readBoolean();let Be=!1;_e||(Be=t.readBoolean()),(_e||Be)&&we++}q=we}else{const we=t.readUEG(),ee=t.readUEG();q=we+ee;for(let _e=0;_e<we;_e++)t.readUEG(),t.readBoolean();for(let _e=0;_e<ee;_e++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const Ie=t.readUEG();for(let et=0;et<Ie;et++){for(let we=0;we<Z+4;we++)t.readBits(1);t.readBits(1)}}let j=0,H=1,K=1,X=!0,ae=1,re=0;t.readBoolean(),t.readBoolean();let ge=!1;if(t.readBoolean()){if(t.readBoolean()){const Xe=t.readUByte(),tt=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],He=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Xe>0&&Xe<16?(H=tt[Xe-1],K=He[Xe-1]):Xe===255&&(H=t.readBits(16),K=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),ge=t.readBoolean(),ge&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(ae=t.readBits(32),re=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const He=t.readBoolean(),We=t.readBoolean();let vt=!1;(He||We)&&(vt=t.readBoolean(),vt&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),vt&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let Yt=0;Yt<=i;Yt++){X=t.readBoolean();const ii=X||t.readBoolean();let $t=!1;ii?t.readEG():$t=t.readBoolean();const Te=$t?1:t.readUEG()+1;if(He)for(let Me=0;Me<Te;Me++)t.readUEG(),t.readUEG(),vt&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(We)for(let Me=0;Me<Te;Me++)t.readUEG(),t.readUEG(),vt&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),j=t.readUEG())}let De=R,ze=M;if(P){let Ie=1,et=1;O===1?Ie=et=2:O==2&&(Ie=2),De=R-Ie*L-Ie*N,ze=M-et*$-et*D}const Qe=s?["A","B","C"][s]:"",nt=l<<24|d<<16|u<<8|f;let Pt=0;for(let Ie=0;Ie<32;Ie++)Pt=(Pt|(nt>>Ie&1)<<31-Ie)>>>0;let Ce=Pt.toString(16);return o===1&&Ce==="2"&&(Ce="6"),{codecString:`hvc1.${Qe}${o}.${Ce}.${r?"H":"L"}${T}.B0`,params:{general_tier_flag:r,general_profile_idc:o,general_profile_space:s,general_profile_compatibility_flags:[l,d,u,f],general_constraint_indicator_flags:[p,b,v,y,w,E],general_level_idc:T,bit_depth:U+8,bit_depth_luma_minus8:U,bit_depth_chroma_minus8:G,min_spatial_segmentation_idc:j,chroma_format_idc:O,frame_rate:{fixed:X,fps:re/ae}},width:De,height:ze,pixelRatio:[H,K]}}readPPS(e){const t=new gd(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const s=t.readBoolean(),r=t.readBoolean();let o=1;return r&&s?o=0:r?o=3:s&&(o=2),{parallelismType:o}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const tn=188;class _o{constructor(e,t,i,s){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.logger=s,this.videoParser=null}static probe(e,t){const i=_o.syncOffset(e);return i>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${i}`),i!==-1}static syncOffset(e){const t=e.length;let i=Math.min(tn*5,t-tn)+1,s=0;for(;s<i;){let r=!1,o=-1,l=0;for(let d=s;d<t;d+=tn)if(e[d]===71&&(t-d===tn||e[d+tn]===71)){if(l++,o===-1&&(o=d,o!==0&&(i=Math.min(o+tn*99,e.length-tn)+1)),r||(r=Qv(e,d)===0),r&&l>1&&(o===0&&l>2||d+tn>i))return o}else{if(l)return-1;break}s++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:LL[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,i,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=_o.createTrack("video"),this._videoTrack.duration=s,this._audioTrack=_o.createTrack("audio",s),this._id3Track=_o.createTrack("id3"),this._txtTrack=_o.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,i=!1,s=!1){i||(this.sampleAes=null);let r;const o=this._videoTrack,l=this._audioTrack,d=this._id3Track,u=this._txtTrack;let f=o.pid,p=o.pesData,b=l.pid,v=d.pid,y=l.pesData,w=d.pesData,E=null,T=this.pmtParsed,k=this._pmtId,_=e.length;if(this.remainderData&&(e=bs(this.remainderData,e),_=e.length,this.remainderData=null),_<tn&&!s)return this.remainderData=e,{audioTrack:l,videoTrack:o,id3Track:d,textTrack:u};const O=Math.max(0,_o.syncOffset(e));_-=(_-O)%tn,_<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,_,e.buffer.byteLength-_));let R=0;for(let P=O;P<_;P+=tn)if(e[P]===71){const N=!!(e[P+1]&64),L=Qv(e,P),D=(e[P+3]&48)>>4;let $;if(D>1){if($=P+5+e[P+4],$===P+tn)continue}else $=P+4;switch(L){case f:N&&(p&&(r=yl(p,this.logger))&&(this.readyVideoParser(o.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(o,u,r,!1)),p={data:[],size:0}),p&&(p.data.push(e.subarray($,P+tn)),p.size+=P+tn-$);break;case b:if(N){if(y&&(r=yl(y,this.logger)))switch(l.segmentCodec){case"aac":this.parseAACPES(l,r);break;case"mp3":this.parseMPEGPES(l,r);break;case"ac3":this.parseAC3PES(l,r);break}y={data:[],size:0}}y&&(y.data.push(e.subarray($,P+tn)),y.size+=P+tn-$);break;case v:N&&(w&&(r=yl(w,this.logger))&&this.parseID3PES(d,r),w={data:[],size:0}),w&&(w.data.push(e.subarray($,P+tn)),w.size+=P+tn-$);break;case 0:N&&($+=e[$]+1),k=this._pmtId=cX(e,$);break;case k:{N&&($+=e[$]+1);const U=dX(e,$,this.typeSupported,i,this.observer,this.logger);f=U.videoPid,f>0&&(o.pid=f,o.segmentCodec=U.segmentVideoCodec),b=U.audioPid,b>0&&(l.pid=b,l.segmentCodec=U.segmentAudioCodec),v=U.id3Pid,v>0&&(d.pid=v),E!==null&&!T&&(this.logger.warn(`MPEG-TS PMT found at ${P} after unknown PID '${E}'. Backtracking to sync byte @${O} to parse all TS packets.`),E=null,P=O-188),T=this.pmtParsed=!0;break}case 17:case 8191:break;default:E=L;break}}else R++;R>0&&Zv(this.observer,new Error(`Found ${R} TS packet/s that do not start with 0x47`),void 0,this.logger),o.pesData=p,l.pesData=y,d.pesData=w;const M={audioTrack:l,videoTrack:o,id3Track:d,textTrack:u};return s&&this.extractRemainingSamples(M),M}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:s,textTrack:r}=e,o=i.pesData,l=t.pesData,d=s.pesData;let u;if(o&&(u=yl(o,this.logger))?(this.readyVideoParser(i.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(i,r,u,!0),i.pesData=null)):i.pesData=o,l&&(u=yl(l,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,u);break;case"mp3":this.parseMPEGPES(t,u);break;case"ac3":this.parseAC3PES(t,u);break}t.pesData=null}else l!=null&&l.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=l;d&&(u=yl(d,this.logger))?(this.parseID3PES(s,u),s.pesData=null):s.pesData=d}demuxSampleAes(e,t,i){const s=this.demux(e,i,!0,!this.config.progressive),r=this.sampleAes=new oX(this.observer,this.config,t);return this.decrypt(s,r)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new aX:e==="hevc"&&(this.videoParser=new lX))}decrypt(e,t){return new Promise(i=>{const{audioTrack:s,videoTrack:r}=e;s.samples&&s.segmentCodec==="aac"?t.decryptAacSamples(s.samples,0,()=>{r.samples?t.decryptAvcSamples(r.samples,0,0,()=>{i(e)}):i(e)}):r.samples&&t.decryptAvcSamples(r.samples,0,0,()=>{i(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let i=0;const s=this.aacOverFlow;let r=t.data;if(s){this.aacOverFlow=null;const p=s.missing,b=s.sample.unit.byteLength;if(p===-1)r=bs(s.sample.unit,r);else{const v=b-p;s.sample.unit.set(r.subarray(0,p),v),e.samples.push(s.sample),i=s.missing}}let o,l;for(o=i,l=r.length;o<l-1&&!wp(r,o);o++);if(o!==i){let p;const b=o<l-1;if(b?p=`AAC PES did not start with ADTS header,offset:${o}`:p="No ADTS header found in AAC PES",Zv(this.observer,new Error(p),b,this.logger),!b)return}pD(e,this.observer,r,o,this.audioCodec);let d;if(t.pts!==void 0)d=t.pts;else if(s){const p=mD(e.samplerate);d=s.sample.pts+p}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,f;for(;o<l;)if(f=gD(e,r,o,d,u),o+=f.length,f.missing){this.aacOverFlow=f;break}else for(u++;o<l-1&&!wp(r,o);o++);}parseMPEGPES(e,t){const i=t.data,s=i.length;let r=0,o=0;const l=t.pts;if(l===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<s;)if(wD(i,o)){const d=yD(e,i,o,l,r);if(d)o+=d.length,r++;else break}else o++}parseAC3PES(e,t){{const i=t.data,s=t.pts;if(s===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const r=i.length;let o=0,l=0,d;for(;l<r&&(d=TD(e,i,l,s,o++))>0;)l+=d}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const i=ai({},t,{type:this._videoTrack?es.emsg:es.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function Qv(n,e){return((n[e+1]&31)<<8)+n[e+2]}function cX(n,e){return(n[e+10]&31)<<8|n[e+11]}function dX(n,e,t,i,s,r){const o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},l=(n[e+1]&15)<<8|n[e+2],d=e+3+l-4,u=(n[e+10]&15)<<8|n[e+11];for(e+=12+u;e<d;){const f=Qv(n,e),p=(n[e+3]&15)<<8|n[e+4];switch(n[e]){case 207:if(!i){kb("ADTS AAC",r);break}case 15:o.audioPid===-1&&(o.audioPid=f);break;case 21:o.id3Pid===-1&&(o.id3Pid=f);break;case 219:if(!i){kb("H.264",r);break}case 27:o.videoPid===-1&&(o.videoPid=f);break;case 3:case 4:!t.mpeg&&!t.mp3?r.log("MPEG audio found, not supported in this browser"):o.audioPid===-1&&(o.audioPid=f,o.segmentAudioCodec="mp3");break;case 193:if(!i){kb("AC-3",r);break}case 129:t.ac3?o.audioPid===-1&&(o.audioPid=f,o.segmentAudioCodec="ac3"):r.log("AC-3 audio found, not supported in this browser");break;case 6:if(o.audioPid===-1&&p>0){let b=e+5,v=p;for(;v>2;){switch(n[b]){case 106:t.ac3!==!0?r.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=f,o.segmentAudioCodec="ac3");break}const w=n[b+1]+2;b+=w,v-=w}}break;case 194:case 135:return Zv(s,new Error("Unsupported EC-3 in M2TS found"),void 0,r),o;case 36:o.videoPid===-1&&(o.videoPid=f,o.segmentVideoCodec="hevc",r.log("HEVC in M2TS found"));break}e+=p+5}return o}function Zv(n,e,t,i){i.warn(`parsing error: ${e.message}`),n.emit(I.ERROR,I.ERROR,{type:qe.MEDIA_ERROR,details:le.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function kb(n,e){e.log(`${n} with AES-128-CBC encryption found in unencrypted stream`)}function yl(n,e){let t=0,i,s,r,o,l;const d=n.data;if(!n||n.size===0)return null;for(;d[0].length<19&&d.length>1;)d[0]=bs(d[0],d[1]),d.splice(1,1);if(i=d[0],(i[0]<<16)+(i[1]<<8)+i[2]===1){if(s=(i[4]<<8)+i[5],s&&s>n.size-6)return null;const f=i[7];f&192&&(o=(i[9]&14)*536870912+(i[10]&255)*4194304+(i[11]&254)*16384+(i[12]&255)*128+(i[13]&254)/2,f&64?(l=(i[14]&14)*536870912+(i[15]&255)*4194304+(i[16]&254)*16384+(i[17]&255)*128+(i[18]&254)/2,o-l>60*9e4&&(e.warn(`${Math.round((o-l)/9e4)}s delta between PTS and DTS, align them`),o=l)):l=o),r=i[8];let p=r+9;if(n.size<=p)return null;n.size-=p;const b=new Uint8Array(n.size);for(let v=0,y=d.length;v<y;v++){i=d[v];let w=i.byteLength;if(p)if(p>w){p-=w;continue}else i=i.subarray(p),w-=p,p=0;b.set(i,t),t+=w}return s&&(s-=r+3),{data:b,pts:o,dts:l,len:s}}return null}class uX{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const wo=Math.pow(2,32)-1;class oe{static init(){oe.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in oe.types)oe.types.hasOwnProperty(e)&&(oe.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);oe.HDLR_TYPES={video:t,audio:i};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);oe.STTS=oe.STSC=oe.STCO=r,oe.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),oe.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),oe.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),oe.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),l=new Uint8Array([97,118,99,49]),d=new Uint8Array([0,0,0,1]);oe.FTYP=oe.box(oe.types.ftyp,o,d,o,l),oe.DINF=oe.box(oe.types.dinf,oe.box(oe.types.dref,s))}static box(e,...t){let i=8,s=t.length;const r=s;for(;s--;)i+=t[s].byteLength;const o=new Uint8Array(i);for(o[0]=i>>24&255,o[1]=i>>16&255,o[2]=i>>8&255,o[3]=i&255,o.set(e,4),s=0,i=8;s<r;s++)o.set(t[s],i),i+=t[s].byteLength;return o}static hdlr(e){return oe.box(oe.types.hdlr,oe.HDLR_TYPES[e])}static mdat(e){return oe.box(oe.types.mdat,e)}static mdhd(e,t){t*=e;const i=Math.floor(t/(wo+1)),s=Math.floor(t%(wo+1));return oe.box(oe.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return oe.box(oe.types.mdia,oe.mdhd(e.timescale||0,e.duration||0),oe.hdlr(e.type),oe.minf(e))}static mfhd(e){return oe.box(oe.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?oe.box(oe.types.minf,oe.box(oe.types.smhd,oe.SMHD),oe.DINF,oe.stbl(e)):oe.box(oe.types.minf,oe.box(oe.types.vmhd,oe.VMHD),oe.DINF,oe.stbl(e))}static moof(e,t,i){return oe.box(oe.types.moof,oe.mfhd(e),oe.traf(i,t))}static moov(e){let t=e.length;const i=[];for(;t--;)i[t]=oe.trak(e[t]);return oe.box.apply(null,[oe.types.moov,oe.mvhd(e[0].timescale||0,e[0].duration||0)].concat(i).concat(oe.mvex(e)))}static mvex(e){let t=e.length;const i=[];for(;t--;)i[t]=oe.trex(e[t]);return oe.box.apply(null,[oe.types.mvex,...i])}static mvhd(e,t){t*=e;const i=Math.floor(t/(wo+1)),s=Math.floor(t%(wo+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return oe.box(oe.types.mvhd,r)}static sdtp(e){const t=e.samples||[],i=new Uint8Array(4+t.length);let s,r;for(s=0;s<t.length;s++)r=t[s].flags,i[s+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return oe.box(oe.types.sdtp,i)}static stbl(e){return oe.box(oe.types.stbl,oe.stsd(e),oe.box(oe.types.stts,oe.STTS),oe.box(oe.types.stsc,oe.STSC),oe.box(oe.types.stsz,oe.STSZ),oe.box(oe.types.stco,oe.STCO))}static avc1(e){let t=[],i=[],s,r,o;for(s=0;s<e.sps.length;s++)r=e.sps[s],o=r.byteLength,t.push(o>>>8&255),t.push(o&255),t=t.concat(Array.prototype.slice.call(r));for(s=0;s<e.pps.length;s++)r=e.pps[s],o=r.byteLength,i.push(o>>>8&255),i.push(o&255),i=i.concat(Array.prototype.slice.call(r));const l=oe.box(oe.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(i))),d=e.width,u=e.height,f=e.pixelRatio[0],p=e.pixelRatio[1];return oe.box(oe.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,d&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,oe.box(oe.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),oe.box(oe.types.pasp,new Uint8Array([f>>24,f>>16&255,f>>8&255,f&255,p>>24,p>>16&255,p>>8&255,p&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return oe.box(oe.types.mp4a,oe.audioStsd(e),oe.box(oe.types.esds,oe.esds(e)))}static mp3(e){return oe.box(oe.types[".mp3"],oe.audioStsd(e))}static ac3(e){return oe.box(oe.types["ac-3"],oe.audioStsd(e),oe.box(oe.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return oe.box(oe.types.stsd,oe.STSD,oe.mp4a(e));if(t==="ac3"&&e.config)return oe.box(oe.types.stsd,oe.STSD,oe.ac3(e));if(t==="mp3"&&e.codec==="mp3")return oe.box(oe.types.stsd,oe.STSD,oe.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return oe.box(oe.types.stsd,oe.STSD,oe.avc1(e));if(t==="hevc"&&e.vps)return oe.box(oe.types.stsd,oe.STSD,oe.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,i=(e.duration||0)*(e.timescale||0),s=e.width||0,r=e.height||0,o=Math.floor(i/(wo+1)),l=Math.floor(i%(wo+1));return oe.box(oe.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,l>>24,l>>16&255,l>>8&255,l&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,r>>8&255,r&255,0,0]))}static traf(e,t){const i=oe.sdtp(e),s=e.id,r=Math.floor(t/(wo+1)),o=Math.floor(t%(wo+1));return oe.box(oe.types.traf,oe.box(oe.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),oe.box(oe.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,o>>24,o>>16&255,o>>8&255,o&255])),oe.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,oe.box(oe.types.trak,oe.tkhd(e),oe.mdia(e))}static trex(e){const t=e.id;return oe.box(oe.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const i=e.samples||[],s=i.length,r=12+16*s,o=new Uint8Array(r);let l,d,u,f,p,b;for(t+=8+r,o.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),l=0;l<s;l++)d=i[l],u=d.duration,f=d.size,p=d.flags,b=d.cts,o.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,f>>>24&255,f>>>16&255,f>>>8&255,f&255,p.isLeading<<2|p.dependsOn,p.isDependedOn<<6|p.hasRedundancy<<4|p.paddingValue<<1|p.isNonSync,p.degradPrio&61440,p.degradPrio&15,b>>>24&255,b>>>16&255,b>>>8&255,b&255],12+16*l);return oe.box(oe.types.trun,o)}static initSegment(e){oe.types||oe.init();const t=oe.moov(e);return bs(oe.FTYP,t)}static hvc1(e){const t=e.params,i=[e.vps,e.sps,e.pps],s=4,r=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),s-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),i.length]);let o=r.length;for(let y=0;y<i.length;y+=1){o+=3;for(let w=0;w<i[y].length;w+=1)o+=2+i[y][w].length}const l=new Uint8Array(o);l.set(r,0),o=r.length;const d=i.length-1;for(let y=0;y<i.length;y+=1){l.set(new Uint8Array([32+y|(y===d?128:0),0,i[y].length]),o),o+=3;for(let w=0;w<i[y].length;w+=1)l.set(new Uint8Array([i[y][w].length>>8,i[y][w].length&255]),o),o+=2,l.set(i[y][w],o),o+=i[y][w].length}const u=oe.box(oe.types.hvcC,l),f=e.width,p=e.height,b=e.pixelRatio[0],v=e.pixelRatio[1];return oe.box(oe.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,f>>8&255,f&255,p>>8&255,p&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,oe.box(oe.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),oe.box(oe.types.pasp,new Uint8Array([b>>24,b>>16&255,b>>8&255,b&255,v>>24,v>>16&255,v>>8&255,v&255])))}}oe.types=void 0;oe.HDLR_TYPES=void 0;oe.STTS=void 0;oe.STSC=void 0;oe.STCO=void 0;oe.STSZ=void 0;oe.VMHD=void 0;oe.SMHD=void 0;oe.STSD=void 0;oe.FTYP=void 0;oe.DINF=void 0;const _D=9e4;function Fx(n,e,t=1,i=!1){const s=n*e*t;return i?Math.round(s):s}function hX(n,e,t=1,i=!1){return Fx(n,e,1/t,i)}function td(n,e=!1){return Fx(n,1e3,1/_D,e)}function fX(n,e=1){return Fx(n,_D,1/e)}function $A(n){const{baseTime:e,timescale:t,trackId:i}=n;return`${e/t} (${e}/${t}) trackId: ${i}`}const pX=10*1e3,mX=1024,gX=1152,bX=1536;let xl=null,_b=null;function FA(n,e,t,i){return{duration:e,size:t,cts:i,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:n?2:1,isNonSync:n?0:1}}}class vf extends ys{constructor(e,t,i,s){if(super("mp4-remuxer",s),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,xl===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);xl=o?parseInt(o[1]):0}if(_b===null){const r=navigator.userAgent.match(/Safari\/(\d+)/i);_b=r?parseInt(r[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;(!t||!e||e.trackId!==t.trackId||e.baseTime!==t.baseTime||e.timescale!==t.timescale)&&this.log(`Reset initPTS: ${t&&$A(t)} > ${e&&$A(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const i=e[0].pts,s=e.reduce((r,o)=>{let l=o.pts,d=l-r;return d<-4294967296&&(t=!0,l=Zn(l,i),d=l-r),d>0?r:l},i);return t&&this.debug("PTS rollover detected"),s}remux(e,t,i,s,r,o,l,d){let u,f,p,b,v,y,w=r,E=r;const T=e.pid>-1,k=t.pid>-1,_=t.samples.length,O=e.samples.length>0,R=l&&_>0||_>1;if((!T||O)&&(!k||R)||this.ISGenerated||l){if(this.ISGenerated){var P,N,L,D;const Z=this.videoTrackConfig;(Z&&(t.width!==Z.width||t.height!==Z.height||((P=t.pixelRatio)==null?void 0:P[0])!==((N=Z.pixelRatio)==null?void 0:N[0])||((L=t.pixelRatio)==null?void 0:L[1])!==((D=Z.pixelRatio)==null?void 0:D[1]))||!Z&&R||this.nextAudioTs===null&&O)&&this.resetInitSegment()}this.ISGenerated||(p=this.generateIS(e,t,r,o));const $=this.isVideoContiguous;let U=-1,G;if(R&&(U=vX(t.samples),!$&&this.config.forceKeyFrameOnDiscontinuity))if(y=!0,U>0){this.warn(`Dropped ${U} out of ${_} video samples due to a missing keyframe`);const Z=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(U),t.dropped+=U,E+=(t.samples[0].pts-Z)/t.inputTimeScale,G=E}else U===-1&&(this.warn(`No keyframe found out of ${_} video samples`),y=!1);if(this.ISGenerated){if(O&&R){const Z=this.getVideoStartPts(t.samples),z=(Zn(e.samples[0].pts,Z)-Z)/t.inputTimeScale;w+=Math.max(0,z),E+=Math.max(0,-z)}if(O){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),p=this.generateIS(e,t,r,o)),f=this.remuxAudio(e,w,this.isAudioContiguous,o,k||R||d===Fe.AUDIO?E:void 0),R){const Z=f?f.endPTS-f.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),p=this.generateIS(e,t,r,o)),u=this.remuxVideo(t,E,$,Z)}}else R&&(u=this.remuxVideo(t,E,$,0));u&&(u.firstKeyFrame=U,u.independent=U!==-1,u.firstKeyFramePTS=G)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(v=AD(i,r,this._initPTS,this._initDTS)),s.samples.length&&(b=CD(s,r,this._initPTS))),{audio:f,video:u,initSegment:p,independent:y,text:b,id3:v}}computeInitPts(e,t,i,s){const r=Math.round(i*t);let o=Zn(e,r);if(o<r+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(r-o)/t} ${s}`);o<r+t;)o+=8589934592;return o-r}generateIS(e,t,i,s){const r=e.samples,o=t.samples,l=this.typeSupported,d={},u=this._initPTS;let f=!u||s,p="audio/mp4",b,v,y,w=-1;if(f&&(b=v=1/0),e.config&&r.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":l.mpeg?(p="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}d.audio={id:"audio",container:p,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&l.mpeg?new Uint8Array(0):oe.initSegment([e]),metadata:{channelCount:e.channelCount}},f&&(w=e.id,y=e.inputTimeScale,!u||y!==u.timescale?b=v=this.computeInitPts(r[0].pts,y,i,"audio"):f=!1)}if(t.sps&&t.pps&&o.length){if(t.timescale=t.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:oe.initSegment([t]),metadata:{width:t.width,height:t.height}},f)if(w=t.id,y=t.inputTimeScale,!u||y!==u.timescale){const E=this.getVideoStartPts(o),T=Zn(o[0].dts,E),k=this.computeInitPts(T,y,i,"video"),_=this.computeInitPts(E,y,i,"video");v=Math.min(v,k),b=Math.min(b,_)}else f=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(d).length)return this.ISGenerated=!0,f?(u&&this.warn(`Timestamps at playlist time: ${s?"":"~"}${i} ${b/y} != initPTS: ${u.baseTime/u.timescale} (${u.baseTime}/${u.timescale}) trackId: ${u.trackId}`),this.log(`Found initPTS at playlist time: ${i} offset: ${b/y} (${b}/${y}) trackId: ${w}`),this._initPTS={baseTime:b,timescale:y,trackId:w},this._initDTS={baseTime:v,timescale:y,trackId:w}):b=y=void 0,{tracks:d,initPTS:b,timescale:y,trackId:w}}remuxVideo(e,t,i,s){const r=e.inputTimeScale,o=e.samples,l=[],d=o.length,u=this._initPTS,f=u.baseTime*r/u.timescale;let p=this.nextVideoTs,b=8,v=this.videoSampleDuration,y,w,E=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY,k=!1;if(!i||p===null){const j=f+t*r,H=o[0].pts-Zn(o[0].dts,o[0].pts);xl&&p!==null&&Math.abs(j-H-(p+f))<15e3?i=!0:p=j-H-f}const _=p+f;for(let j=0;j<d;j++){const H=o[j];H.pts=Zn(H.pts,_),H.dts=Zn(H.dts,_),H.dts<o[j>0?j-1:j].dts&&(k=!0)}k&&o.sort(function(j,H){const K=j.dts-H.dts,X=j.pts-H.pts;return K||X}),y=o[0].dts,w=o[o.length-1].dts;const O=w-y,R=O?Math.round(O/(d-1)):v||e.inputTimeScale/30;if(i){const j=y-_,H=j>R,K=j<-1;if((H||K)&&(H?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${td(j,!0)} ms (${j}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${td(-j,!0)} ms (${j}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!K||_>=o[0].pts||xl)){y=_;const X=o[0].pts-j;if(H)o[0].dts=y,o[0].pts=X;else{let ae=!0;for(let re=0;re<o.length&&!(o[re].dts>X&&ae);re++){const ge=o[re].pts;if(o[re].dts-=j,o[re].pts-=j,re<o.length-1){const Se=o[re+1].pts,De=o[re].pts,ze=Se<=De,Qe=Se<=ge;ae=ze==Qe}}}this.log(`Video: Initial PTS/DTS adjusted: ${td(X,!0)}/${td(y,!0)}, delta: ${td(j,!0)} ms`)}}y=Math.max(0,y);let M=0,P=0,N=y;for(let j=0;j<d;j++){const H=o[j],K=H.units,X=K.length;let ae=0;for(let re=0;re<X;re++)ae+=K[re].data.length;P+=ae,M+=X,H.length=ae,H.dts<N?(H.dts=N,N+=R/4|0||1):N=H.dts,E=Math.min(H.pts,E),T=Math.max(H.pts,T)}w=o[d-1].dts;const L=P+4*M+8;let D;try{D=new Uint8Array(L)}catch(j){this.observer.emit(I.ERROR,I.ERROR,{type:qe.MUX_ERROR,details:le.REMUX_ALLOC_ERROR,fatal:!1,error:j,bytes:L,reason:`fail allocating video mdat ${L}`});return}const $=new DataView(D.buffer);$.setUint32(0,L),D.set(oe.types.mdat,4);let U=!1,G=Number.POSITIVE_INFINITY,Z=Number.POSITIVE_INFINITY,se=Number.NEGATIVE_INFINITY,z=Number.NEGATIVE_INFINITY;for(let j=0;j<d;j++){const H=o[j],K=H.units;let X=0;for(let ge=0,Se=K.length;ge<Se;ge++){const De=K[ge],ze=De.data,Qe=De.data.byteLength;$.setUint32(b,Qe),b+=4,D.set(ze,b),b+=Qe,X+=4+Qe}let ae;if(j<d-1)v=o[j+1].dts-H.dts,ae=o[j+1].pts-H.pts;else{const ge=this.config,Se=j>0?H.dts-o[j-1].dts:R;if(ae=j>0?H.pts-o[j-1].pts:R,ge.stretchShortVideoTrack&&this.nextAudioTs!==null){const De=Math.floor(ge.maxBufferHole*r),ze=(s?E+s*r:this.nextAudioTs+f)-H.pts;ze>De?(v=ze-Se,v<0?v=Se:U=!0,this.log(`It is approximately ${ze/90} ms to the next segment; using duration ${v/90} ms for the last video frame.`)):v=Se}else v=Se}const re=Math.round(H.pts-H.dts);G=Math.min(G,v),se=Math.max(se,v),Z=Math.min(Z,ae),z=Math.max(z,ae),l.push(FA(H.key,v,X,re))}if(l.length){if(xl){if(xl<70){const j=l[0].flags;j.dependsOn=2,j.isNonSync=0}}else if(_b&&z-Z<se-G&&R/se<.025&&l[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let j=y;for(let H=0,K=l.length;H<K;H++){const X=j+l[H].duration,ae=j+l[H].cts;if(H<K-1){const re=X+l[H+1].cts;l[H].duration=re-ae}else l[H].duration=H?l[H-1].duration:R;l[H].cts=0,j=X}}}v=U||!v?R:v;const Y=w+v;this.nextVideoTs=p=Y-f,this.videoSampleDuration=v,this.isVideoContiguous=!0;const ie={data1:oe.moof(e.sequenceNumber++,y,ai(e,{samples:l})),data2:D,startPTS:(E-f)/r,endPTS:(T+v-f)/r,startDTS:(y-f)/r,endDTS:p/r,type:"video",hasAudio:!1,hasVideo:!0,nb:l.length,dropped:e.dropped};return e.samples=[],e.dropped=0,ie}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return gX;case"ac3":return bX;default:return mX}}remuxAudio(e,t,i,s,r){const o=e.inputTimeScale,l=e.samplerate?e.samplerate:o,d=o/l,u=this.getSamplesPerFrame(e),f=u*d,p=this._initPTS,b=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,v=[],y=r!==void 0;let w=e.samples,E=b?0:8,T=this.nextAudioTs||-1;const k=p.baseTime*o/p.timescale,_=k+t*o;if(this.isAudioContiguous=i=i||w.length&&T>0&&(s&&Math.abs(_-(T+k))<9e3||Math.abs(Zn(w[0].pts,_)-(T+k))<20*f),w.forEach(function(z){z.pts=Zn(z.pts,_)}),!i||T<0){const z=w.length;if(w=w.filter(Y=>Y.pts>=0),z!==w.length&&this.warn(`Removed ${w.length-z} of ${z} samples (initPTS ${k} / ${o})`),!w.length)return;r===0?T=0:s&&!y?T=Math.max(0,_-k):T=w[0].pts-k}if(e.segmentCodec==="aac"){const z=this.config.maxAudioFramesDrift;for(let Y=0,V=T+k;Y<w.length;Y++){const q=w[Y],ie=q.pts,j=ie-V,H=Math.abs(1e3*j/o);if(j<=-z*f&&y)Y===0&&(this.warn(`Audio frame @ ${(ie/o).toFixed(3)}s overlaps marker by ${Math.round(1e3*j/o)} ms.`),this.nextAudioTs=T=ie-k,V=ie);else if(j>=z*f&&H<pX&&y){let K=Math.round(j/f);for(V=ie-K*f;V<0&&K&&f;)K--,V+=f;Y===0&&(this.nextAudioTs=T=V-k),this.warn(`Injecting ${K} audio frames @ ${((V-k)/o).toFixed(3)}s due to ${Math.round(1e3*j/o)} ms gap.`);for(let X=0;X<K;X++){let ae=uX.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);ae||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),ae=q.unit.subarray()),w.splice(Y,0,{unit:ae,pts:V}),V+=f,Y++}}q.pts=V,V+=f}}let O=null,R=null,M,P=0,N=w.length;for(;N--;)P+=w[N].unit.byteLength;for(let z=0,Y=w.length;z<Y;z++){const V=w[z],q=V.unit;let ie=V.pts;if(R!==null){const H=v[z-1];H.duration=Math.round((ie-R)/d)}else if(i&&e.segmentCodec==="aac"&&(ie=T+k),O=ie,P>0){P+=E;try{M=new Uint8Array(P)}catch(H){this.observer.emit(I.ERROR,I.ERROR,{type:qe.MUX_ERROR,details:le.REMUX_ALLOC_ERROR,fatal:!1,error:H,bytes:P,reason:`fail allocating audio mdat ${P}`});return}b||(new DataView(M.buffer).setUint32(0,P),M.set(oe.types.mdat,4))}else return;M.set(q,E);const j=q.byteLength;E+=j,v.push(FA(!0,u,j,0)),R=ie}const L=v.length;if(!L)return;const D=v[v.length-1];T=R-k,this.nextAudioTs=T+d*D.duration;const $=b?new Uint8Array(0):oe.moof(e.sequenceNumber++,O/d,ai({},e,{samples:v}));e.samples=[];const U=(O-k)/o,G=this.nextAudioTs/o,se={data1:$,data2:M,startPTS:U,endPTS:G,startDTS:U,endDTS:G,type:"audio",hasAudio:!0,hasVideo:!1,nb:L};return this.isAudioContiguous=!0,se}}function Zn(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function vX(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function AD(n,e,t,i){const s=n.samples.length;if(!s)return;const r=n.inputTimeScale;for(let l=0;l<s;l++){const d=n.samples[l];d.pts=Zn(d.pts-t.baseTime*r/t.timescale,e*r)/r,d.dts=Zn(d.dts-i.baseTime*r/i.timescale,e*r)/r}const o=n.samples;return n.samples=[],{samples:o}}function CD(n,e,t){const i=n.samples.length;if(!i)return;const s=n.inputTimeScale;for(let o=0;o<i;o++){const l=n.samples[o];l.pts=Zn(l.pts-t.baseTime*s/t.timescale,e*s)/s}n.samples.sort((o,l)=>o.pts-l.pts);const r=n.samples;return n.samples=[],{samples:r}}class yX extends ys{constructor(e,t,i,s){super("passthrough-remuxer",s),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,i,s){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(e,s),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:i,videoCodec:s}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:r,video:o}=this.initData=NL(e);if(t)oK(e,t);else{const d=r||o;d!=null&&d.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${d.codec}")!`)}r&&(i=jA(r,ui.AUDIO,this)),o&&(s=jA(o,ui.VIDEO,this));const l={};r&&o?l.audiovideo={container:"video/mp4",codec:i+","+s,supplemental:o.supplemental,encrypted:o.encrypted,initSegment:e,id:"main"}:r?l.audio={container:"audio/mp4",codec:i,encrypted:r.encrypted,initSegment:e,id:"audio"}:o?l.video={container:"video/mp4",codec:s,supplemental:o.supplemental,encrypted:o.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=l}remux(e,t,i,s,r,o){var l,d;let{initPTS:u,lastEndTime:f}=this;const p={audio:void 0,video:void 0,text:s,id3:i,initSegment:void 0};Oe(f)||(f=this.lastEndTime=r||0);const b=t.samples;if(!b.length)return p;const v={initPTS:void 0,timescale:void 0,trackId:void 0};let y=this.initData;if((l=y)!=null&&l.length||(this.generateInitSegment(b),y=this.initData),!((d=y)!=null&&d.length))return this.warn("Failed to generate initSegment."),p;this.emitInitSegment&&(v.tracks=this.initTracks,this.emitInitSegment=!1);const w=lK(b,y,this),E=y.audio?w[y.audio.id]:null,T=y.video?w[y.video.id]:null,k=Kh(T,1/0),_=Kh(E,1/0),O=Kh(T,0,!0),R=Kh(E,0,!0);let M=r,P=0;const N=E&&(!T||!u&&_<k||u&&u.trackId===y.audio.id),L=N?E:T;if(L){const V=L.timescale,q=L.start-r*V,ie=N?y.audio.id:y.video.id;M=L.start/V,P=N?R-_:O-k,(o||!u)&&(xX(u,M,r,P)||V!==u.timescale)&&(u&&this.warn(`Timestamps at playlist time: ${o?"":"~"}${r} ${q/V} != initPTS: ${u.baseTime/u.timescale} (${u.baseTime}/${u.timescale}) trackId: ${u.trackId}`),this.log(`Found initPTS at playlist time: ${r} offset: ${M-r} (${q}/${V}) trackId: ${ie}`),u=null,v.initPTS=q,v.timescale=V,v.trackId=ie)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${r}`);u?(v.initPTS=u.baseTime,v.timescale=u.timescale,v.trackId=u.trackId):((!v.timescale||v.trackId===void 0||v.initPTS===void 0)&&(this.warn("Could not set initPTS"),v.initPTS=M,v.timescale=1,v.trackId=-1),this.initPTS=u={baseTime:v.initPTS,timescale:v.timescale,trackId:v.trackId});const D=M-u.baseTime/u.timescale,$=D+P;P>0?this.lastEndTime=$:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const U=!!y.audio,G=!!y.video;let Z="";U&&(Z+="audio"),G&&(Z+="video");const se=(y.audio?y.audio.encrypted:!1)||(y.video?y.video.encrypted:!1),z={data1:b,startPTS:D,startDTS:D,endPTS:$,endDTS:$,type:Z,hasAudio:U,hasVideo:G,nb:1,dropped:0,encrypted:se};p.audio=U&&!G?z:void 0,p.video=G?z:void 0;const Y=T?.sampleCount;if(Y){const V=T.keyFrameIndex,q=V!==-1;z.nb=Y,z.dropped=V===0||this.isVideoContiguous?0:q?V:Y,z.independent=q,z.firstKeyFrame=V,q&&T.keyFrameStart&&(z.firstKeyFramePTS=(T.keyFrameStart-u.baseTime)/u.timescale),this.isVideoContiguous||(p.independent=q),this.isVideoContiguous||(this.isVideoContiguous=q),z.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${V}/${Y} dropped: ${z.dropped} start: ${z.firstKeyFramePTS||"NA"}`)}return p.initSegment=v,p.id3=AD(i,r,u,u),s.samples.length&&(p.text=CD(s,r,u)),p}}function Kh(n,e,t=!1){return n?.start!==void 0?(n.start+(t?n.duration:0))/n.timescale:e}function xX(n,e,t,i){if(n===null)return!0;const s=Math.max(i,1),r=e-n.baseTime/n.timescale;return Math.abs(r-t)>s}function jA(n,e,t){const i=n.codec;return i&&i.length>4?i:e===ui.AUDIO?i==="ec-3"||i==="ac-3"||i==="alac"?i:i==="fLaC"||i==="Opus"?fp(i,!1):(t.warn(`Unhandled audio codec "${i}" in mp4 MAP`),i||"mp4a"):(t.warn(`Unhandled video codec "${i}" in mp4 MAP`),i||"avc1")}let Ar;try{Ar=self.performance.now.bind(self.performance)}catch{Ar=Date.now}const yf=[{demux:rX,remux:yX},{demux:_o,remux:vf},{demux:tX,remux:vf},{demux:nX,remux:vf}];yf.splice(2,0,{demux:iX,remux:vf});class BA{constructor(e,t,i,s,r,o){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.id=r,this.logger=o}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,s){const r=i.transmuxing;r.executeStart=Ar();let o=new Uint8Array(e);const{currentTransmuxState:l,transmuxConfig:d}=this;s&&(this.currentTransmuxState=s);const{contiguous:u,discontinuity:f,trackSwitch:p,accurateTimeOffset:b,timeOffset:v,initSegmentChange:y}=s||l,{audioCodec:w,videoCodec:E,defaultInitPts:T,duration:k,initSegmentData:_}=d,O=wX(o,t);if(O&&Ul(O.method)){const N=this.getDecrypter(),L=Ix(O.method);if(N.isSync()){let D=N.softwareDecrypt(o,O.key.buffer,O.iv.buffer,L);if(i.part>-1){const U=N.flush();D=U&&U.buffer}if(!D)return r.executeEnd=Ar(),Ab(i);o=new Uint8Array(D)}else return this.asyncResult=!0,this.decryptionPromise=N.webCryptoDecrypt(o,O.key.buffer,O.iv.buffer,L).then(D=>{const $=this.push(D,null,i);return this.decryptionPromise=null,$}),this.decryptionPromise}const R=this.needsProbing(f,p);if(R){const N=this.configureTransmuxer(o);if(N)return this.logger.warn(`[transmuxer] ${N.message}`),this.observer.emit(I.ERROR,I.ERROR,{type:qe.MEDIA_ERROR,details:le.FRAG_PARSING_ERROR,fatal:!1,error:N,reason:N.message}),r.executeEnd=Ar(),Ab(i)}(f||p||y||R)&&this.resetInitSegment(_,w,E,k,t),(f||y||R)&&this.resetInitialTimestamp(T),u||this.resetContiguity();const M=this.transmux(o,O,v,b,i);this.asyncResult=jd(M);const P=this.currentTransmuxState;return P.contiguous=!0,P.discontinuity=!1,P.trackSwitch=!1,r.executeEnd=Ar(),M}flush(e){const t=e.transmuxing;t.executeStart=Ar();const{decrypter:i,currentTransmuxState:s,decryptionPromise:r}=this;if(r)return this.asyncResult=!0,r.then(()=>this.flush(e));const o=[],{timeOffset:l}=s;if(i){const p=i.flush();p&&o.push(this.push(p.buffer,null,e))}const{demuxer:d,remuxer:u}=this;if(!d||!u){t.executeEnd=Ar();const p=[Ab(e)];return this.asyncResult?Promise.resolve(p):p}const f=d.flush(l);return jd(f)?(this.asyncResult=!0,f.then(p=>(this.flushRemux(o,p,e),o))):(this.flushRemux(o,f,e),this.asyncResult?Promise.resolve(o):o)}flushRemux(e,t,i){const{audioTrack:s,videoTrack:r,id3Track:o,textTrack:l}=t,{accurateTimeOffset:d,timeOffset:u}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${i.sn}${i.part>-1?" part: "+i.part:""} of ${this.id===Fe.MAIN?"level":"track"} ${i.level}`);const f=this.remuxer.remux(s,r,o,l,u,d,!0,this.id);e.push({remuxResult:f,chunkMeta:i}),i.transmuxing.executeEnd=Ar()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;!t||!i||(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,s,r){const{demuxer:o,remuxer:l}=this;!o||!l||(o.resetInitSegment(e,t,i,s),l.resetInitSegment(e,t,i,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,s,r){let o;return t&&t.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,t,i,s,r):o=this.transmuxUnencrypted(e,i,s,r),o}transmuxUnencrypted(e,t,i,s){const{audioTrack:r,videoTrack:o,id3Track:l,textTrack:d}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(r,o,l,d,t,i,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,t,i,s,r){return this.demuxer.demuxSampleAes(e,t,i).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,i,s,!1,this.id),chunkMeta:r}))}configureTransmuxer(e){const{config:t,observer:i,typeSupported:s}=this;let r;for(let p=0,b=yf.length;p<b;p++){var o;if((o=yf[p].demux)!=null&&o.probe(e,this.logger)){r=yf[p];break}}if(!r)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,d=this.remuxer,u=r.remux,f=r.demux;(!d||!(d instanceof u))&&(this.remuxer=new u(i,t,s,this.logger)),(!l||!(l instanceof f))&&(this.demuxer=new f(i,t,s,this.logger),this.probe=f.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Ax(this.config)),e}}function wX(n,e){let t=null;return n.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const Ab=n=>({remuxResult:{},chunkMeta:n});function jd(n){return"then"in n&&n.then instanceof Function}class SX{constructor(e,t,i,s,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=s,this.defaultInitPts=r||null}}class EX{constructor(e,t,i,s,r,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=s,this.timeOffset=r,this.initSegmentChange=o}}let UA=0;class ID{constructor(e,t,i,s){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=UA++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=d=>{const u=d.data,f=this.hls;if(!(!f||!(u!=null&&u.event)||u.instanceNo!==this.instanceNo))switch(u.event){case"init":{var p;const b=(p=this.workerContext)==null?void 0:p.objectURL;b&&self.URL.revokeObjectURL(b);break}case"transmuxComplete":{this.handleTransmuxComplete(u.data);break}case"flush":{this.onFlush(u.data);break}case"workerLog":{f.logger[u.data.logType]&&f.logger[u.data.logType](u.data.message);break}default:{u.data=u.data||{},u.data.frag=this.frag,u.data.part=this.part,u.data.id=this.id,f.trigger(u.event,u.data);break}}},this.onWorkerError=d=>{if(!this.hls)return;const u=new Error(`${d.message}  (${d.filename}:${d.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(I.ERROR,{type:qe.OTHER_ERROR,details:le.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:u})};const r=e.config;this.hls=e,this.id=t,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=i,this.onFlush=s;const o=(d,u)=>{u=u||{},u.frag=this.frag||void 0,d===I.ERROR&&(u=u,u.parent=this.id,u.part=this.part,this.error=u.error),this.hls.trigger(d,u)};this.observer=new Dx,this.observer.on(I.FRAG_DECRYPTED,o),this.observer.on(I.ERROR,o);const l=iA(r.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const d=this.hls.logger;if(r.workerPath||AY()){try{r.workerPath?(d.log(`loading Web Worker ${r.workerPath} for "${t}"`),this.workerContext=IY(r.workerPath)):(d.log(`injecting Web Worker for "${t}"`),this.workerContext=CY());const{worker:f}=this.workerContext;f.addEventListener("message",this.onWorkerMessage),f.addEventListener("error",this.onWorkerError),f.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:l,id:t,config:fi(r)})}catch(f){d.warn(`Error setting up "${t}" Web Worker, fallback to inline`,f),this.terminateWorker(),this.error=null,this.transmuxer=new BA(this.observer,l,r,"",t,e.logger)}return}}this.transmuxer=new BA(this.observer,l,r,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=UA++;const t=this.hls.config,i=iA(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:i,id:this.id,config:fi(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),RY(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,i,s,r,o,l,d,u,f){var p,b;u.transmuxing.start=self.performance.now();const{instanceNo:v,transmuxer:y}=this,w=o?o.start:r.start,E=r.decryptdata,T=this.frag,k=!(T&&r.cc===T.cc),_=!(T&&u.level===T.level),O=T?u.sn-T.sn:-1,R=this.part?u.part-this.part.index:-1,M=O===0&&u.id>1&&u.id===T?.stats.chunkCount,P=!_&&(O===1||O===0&&(R===1||M&&R<=0)),N=self.performance.now();(_||O||r.stats.parsing.start===0)&&(r.stats.parsing.start=N),o&&(R||!P)&&(o.stats.parsing.start=N);const L=!(T&&((p=r.initSegment)==null?void 0:p.url)===((b=T.initSegment)==null?void 0:b.url)),D=new EX(k,P,d,_,w,L);if(!P||k||L){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${r.type} sn: ${u.sn}${u.part>-1?" part: "+u.part:""} ${this.id===Fe.MAIN?"level":"track"}: ${u.level} id: ${u.id}
        discontinuity: ${k}
        trackSwitch: ${_}
        contiguous: ${P}
        accurateTimeOffset: ${d}
        timeOffset: ${w}
        initSegmentChange: ${L}`);const $=new SX(i,s,t,l,f);this.configureTransmuxer($)}if(this.frag=r,this.part=o,this.workerContext)this.workerContext.worker.postMessage({instanceNo:v,cmd:"demux",data:e,decryptdata:E,chunkMeta:u,state:D},e instanceof ArrayBuffer?[e]:[]);else if(y){const $=y.push(e,E,u,D);jd($)?$.then(U=>{this.handleTransmuxComplete(U)}).catch(U=>{this.transmuxerError(U,u,"transmuxer-interface push error")}):this.handleTransmuxComplete($)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:i}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(i){const s=i.flush(e);jd(s)?s.then(r=>{this.handleFlushResult(r,e)}).catch(r=>{this.transmuxerError(r,e,"transmuxer-interface flush error")}):this.handleFlushResult(s,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:i}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):i&&i.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const zA=100;class TX extends Lx{constructor(e,t,i){super(e,t,i,"audio-stream-controller",Fe.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(I.BUFFER_RESET,this.onBufferReset,this),e.on(I.BUFFER_CREATED,this.onBufferCreated,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(I.FRAG_LOADING,this.onFragLoading,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(I.BUFFER_RESET,this.onBufferReset,this),e.off(I.BUFFER_CREATED,this.onBufferCreated,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(I.FRAG_LOADING,this.onFragLoading,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:r,trackId:o}){if(i===Fe.MAIN){const l=t.cc,d=this.fragCurrent;if(this.initPTS[l]={baseTime:s,timescale:r,trackId:o},this.log(`InitPTS for cc: ${l} found from main: ${s/r} (${s}/${r}) trackId: ${o}`),this.mainAnchor=t,this.state===ve.WAITING_INIT_PTS){const u=this.waitingData;(!u&&!this.loadingParts||u&&u.frag.cc!==l)&&this.syncWithAnchor(t,u?.frag)}else!this.hls.hasEnoughToStart&&d&&d.cc!==l?(d.abortRequests(),this.syncWithAnchor(t,d)):this.state===ve.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var i;const s=((i=this.mainFragLoading)==null?void 0:i.frag)||null;if(t&&s?.cc===t.cc)return;const r=(s||e).cc,o=this.getLevelDetails(),l=this.getLoadPosition(),d=VL(o,r,l);d&&(this.log(`Syncing with main frag at ${d.start} cc ${d.cc}`),this.startFragRequested=!1,this.nextLoadPosition=d.start,this.resetLoadingState(),this.state===ve.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=ve.STOPPED;return}const i=this.lastCurrentTime;this.stopLoad(),this.setInterval(zA),i>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i,this.state=ve.IDLE):this.state=ve.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case ve.IDLE:this.doTickIdle();break;case ve.WAITING_TRACK:{const{levels:e,trackId:t}=this,i=e?.[t],s=i?.details;if(s&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(s))break;this.state=ve.WAITING_INIT_PTS}break}case ve.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case ve.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:i,cache:s,complete:r}=e,o=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=ve.FRAG_LOADING;const l=s.flush().buffer,d={frag:t,part:i,payload:l,networkDetails:null};this._handleFragmentLoadProgress(d),r&&super._handleFragmentLoadComplete(d)}else o&&o.cc!==e.frag.cc&&this.syncWithAnchor(o,e.frag)}else this.state=ve.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:i,media:s,trackId:r}=this,o=t.config;if(!this.buffering||!s&&!this.primaryPrefetch&&(this.startFragRequested||!o.startFragPrefetch)||!(i!=null&&i[r]))return;const l=i[r],d=l.details;if(!d||this.waitForLive(l)||this.waitForCdnTuneIn(d)){this.state=ve.WAITING_TRACK,this.startFragRequested=!1;return}const u=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&u&&(this.bufferFlushed=!1,this.afterBufferFlushed(u,ui.AUDIO,Fe.AUDIO));const f=this.getFwdBufferInfo(u,Fe.AUDIO);if(f===null)return;if(!this.switchingTrack&&this._streamEnded(f,d)){t.trigger(I.BUFFER_EOS,{type:"audio"}),this.state=ve.ENDED;return}const p=f.len,b=t.maxBufferLength,v=d.fragments,y=v[0].start,w=this.getLoadPosition(),E=this.flushing?w:f.end;if(this.switchingTrack&&s){const _=w;d.PTSKnown&&_<y&&(f.end>y||f.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=y+.05)}if(p>=b&&!this.switchingTrack&&E<v[v.length-1].start)return;let T=this.getNextFragment(E,d);if(T&&this.isLoopLoading(T,E)&&(T=this.getNextFragmentLoopLoading(T,d,f,Fe.MAIN,b)),!T){this.bufferFlushed=!0;return}let k=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&k&&Pi(T)&&!T.endList&&(!d.live||!this.loadingParts&&E<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(k)===qi.OK&&(this.mainFragLoading=k=null),k&&Pi(k))){if(T.start>k.end){const O=this.fragmentTracker.getFragAtPos(E,Fe.MAIN);O&&O.end>k.end&&(k=O,this.mainFragLoading={frag:O,targetBufferTime:null})}if(T.start>k.end)return}this.loadFragment(T,l,E)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(i=>new Md(i))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),i?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==ve.STOPPED&&(this.setInterval(zA),this.state=ve.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const i=this.cachedTrackLoadedData;i&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(I.AUDIO_TRACK_LOADED,i))}onAudioTrackLoaded(e,t){var i;const{levels:s}=this,{details:r,id:o,groupId:l,track:d}=t;if(!s){this.warn(`Audio tracks reset while loading track ${o} "${d.name}" of "${l}"`);return}const u=this.mainDetails;if(!u||r.endCC>u.endCC||u.expired){this.cachedTrackLoadedData=t,this.state!==ve.STOPPED&&(this.state=ve.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${o} "${d.name}" of "${l}" loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);const f=s[o];let p=0;if(r.live||(i=f.details)!=null&&i.live){if(this.checkLiveUpdate(r),r.deltaUpdateFailed)return;if(f.details){var b;p=this.alignPlaylists(r,f.details,(b=this.levelLastLoaded)==null?void 0:b.details)}r.alignedSliding||(cD(r,u),r.alignedSliding||xp(r,u),p=r.fragmentStart)}f.details=r,this.levelLastLoaded=f,this.startFragRequested||this.setStartPosition(u,p),this.hls.trigger(I.AUDIO_TRACK_UPDATED,{details:r,id:o,groupId:t.groupId}),this.state===ve.WAITING_TRACK&&!this.waitForCdnTuneIn(r)&&(this.state=ve.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:s,payload:r}=e,{config:o,trackId:l,levels:d}=this;if(!d){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const u=d[l];if(!u){this.warn("Audio track is undefined on fragment load progress");return}const f=u.details;if(!f){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(i.start);return}const p=o.defaultAudioCodec||u.audioCodec||"mp4a.40.2";let b=this.transmuxer;b||(b=this.transmuxer=new ID(this.hls,Fe.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const v=this.initPTS[i.cc],y=(t=i.initSegment)==null?void 0:t.data;if(v!==void 0){const E=s?s.index:-1,T=E!==-1,k=new Cx(i.level,i.sn,i.stats.chunkCount,r.byteLength,E,T);b.push(r,y,p,"",i,s,f.totalduration,!1,k,v)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${f.startSN} ,${f.endSN}],track ${l}`);const{cache:w}=this.waitingData=this.waitingData||{frag:i,part:s,cache:new dD,complete:!1};w.push(new Uint8Array(r)),this.state!==ve.STOPPED&&(this.state=ve.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Fe.MAIN&&Pi(t.frag)&&(this.mainFragLoading=t,this.state===ve.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:i,part:s}=t;if(i.type!==Fe.AUDIO){!this.audioOnly&&i.type===Fe.MAIN&&!i.elementaryStreams.video&&!i.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Pi(i)){this.fragPrevious=i;const r=this.switchingTrack;r&&(this.bufferedTrack=r,this.switchingTrack=null,this.hls.trigger(I.AUDIO_TRACK_SWITCHED,ei({},r)))}this.fragBufferedComplete(i,s),this.media&&this.tick()}onError(e,t){var i;if(t.fatal){this.state=ve.ERROR;return}switch(t.details){case le.FRAG_GAP:case le.FRAG_PARSING_ERROR:case le.FRAG_DECRYPT_ERROR:case le.FRAG_LOAD_ERROR:case le.FRAG_LOAD_TIMEOUT:case le.KEY_LOAD_ERROR:case le.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Fe.AUDIO,t);break;case le.AUDIO_TRACK_LOAD_ERROR:case le.AUDIO_TRACK_LOAD_TIMEOUT:case le.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===ve.WAITING_TRACK&&((i=t.context)==null?void 0:i.type)===At.AUDIO_TRACK&&(this.state=ve.IDLE);break;case le.BUFFER_ADD_CODEC_ERROR:case le.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case le.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case le.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==ui.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==ui.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===ve.ENDED&&(this.state=ve.IDLE);const i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,t,Fe.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const i="audio",{hls:s}=this,{remuxResult:r,chunkMeta:o}=e,l=this.getCurrentContext(o);if(!l){this.resetWhenMissingContext(o);return}const{frag:d,part:u,level:f}=l,{details:p}=f,{audio:b,text:v,id3:y,initSegment:w}=r;if(this.fragContextChanged(d)||!p){this.fragmentTracker.removeFragment(d);return}if(this.state=ve.PARSING,this.switchingTrack&&b&&this.completeAudioSwitch(this.switchingTrack),w!=null&&w.tracks){const E=d.initSegment||d;if(this.unhandledEncryptionError(w,d))return;this._bufferInitSegment(f,w.tracks,E,o),s.trigger(I.FRAG_PARSING_INIT_SEGMENT,{frag:E,id:i,tracks:w.tracks})}if(b){const{startPTS:E,endPTS:T,startDTS:k,endDTS:_}=b;u&&(u.elementaryStreams[ui.AUDIO]={startPTS:E,endPTS:T,startDTS:k,endDTS:_}),d.setElementaryStreamInfo(ui.AUDIO,E,T,k,_),this.bufferFragmentData(b,d,u,o)}if(y!=null&&(t=y.samples)!=null&&t.length){const E=ai({id:i,frag:d,details:p},y);s.trigger(I.FRAG_PARSING_METADATA,E)}if(v){const E=ai({id:i,frag:d,details:p},v);s.trigger(I.FRAG_PARSING_USERDATA,E)}}_bufferInitSegment(e,t,i,s){if(this.state!==ve.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const r=t.audio;r.id=Fe.AUDIO;const o=e.audioCodec;this.log(`Init audio buffer, container:${r.container}, codecs[level/parsed]=[${o}/${r.codec}]`),o&&o.split(",").length===1&&(r.levelCodec=o),this.hls.trigger(I.BUFFER_CODECS,t);const l=r.initSegment;if(l!=null&&l.byteLength){const d={type:"audio",frag:i,part:null,chunkMeta:s,parent:i.type,data:l};this.hls.trigger(I.BUFFER_APPENDING,d)}this.tickImmediate()}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);if(this.switchingTrack||s===qi.NOT_LOADED||s===qi.PARTIAL){var r;if(!Pi(e))this._loadInitSegment(e,t);else if((r=t.details)!=null&&r.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=ve.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragmentStart!==t.details.fragmentStart&&xp(t.details,o)}else super.loadFragment(e,t,i)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:i,assocLang:s,characteristics:r,audioCodec:o,channels:l}=this.bufferedTrack;ba({name:t,lang:i,assocLang:s,characteristics:r,audioCodec:o,channels:l},e,ua)||(mp(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(I.AUDIO_TRACK_SWITCHED,ei({},e))}}class jx extends ys{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,i){const s=t?.renditionReports;if(s){let r=-1;for(let o=0;o<s.length;o++){const l=s[o];let d;try{d=new self.URL(l.URI,t.url).href}catch(u){this.warn(`Could not construct new URL for Rendition Report: ${u}`),d=l.URI||""}if(d===e){r=o;break}else d===e.substring(0,d.length)&&(r=o)}if(r!==-1){const o=s[r],l=parseInt(o["LAST-MSN"])||t.lastPartSn;let d=parseInt(o["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const f=Math.min(t.age-t.partTarget,t.targetduration);d>=0&&f>t.partTarget&&(d+=1)}const u=i&&nA(i);return new sA(l,d>=0?d:void 0,u)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}return e}playlistLoaded(e,t,i){const{details:s,stats:r}=t,o=self.performance.now(),l=r.loading.first?Math.max(0,o-r.loading.first):0;s.advancedDateTime=Date.now()-l;const d=this.hls.config.timelineOffset;if(d!==s.appliedTimelineOffset){const f=Math.max(d||0,0);s.appliedTimelineOffset=f,s.fragments.forEach(p=>{p.setStart(p.playlistOffset+f)})}if(s.live||i!=null&&i.live){const f="levelInfo"in t?t.levelInfo:t.track;if(s.reloaded(i),i&&s.fragments.length>0){gY(i,s,this);const k=s.playlistParsingError;if(k){this.warn(k);const _=this.hls;if(!_.config.ignorePlaylistParsingErrors){var u;const{networkDetails:O}=t;_.trigger(I.ERROR,{type:qe.NETWORK_ERROR,details:le.LEVEL_PARSING_ERROR,fatal:!1,url:s.url,error:k,reason:k.message,level:t.level||void 0,parent:(u=s.fragments[0])==null?void 0:u.type,networkDetails:O,stats:r});return}s.playlistParsingError=null}}s.requestScheduled===-1&&(s.requestScheduled=r.loading.start);const p=this.hls.mainForwardBufferInfo,b=p?p.end-p.len:0,v=(s.edge-b)*1e3,y=sD(s,v);if(s.requestScheduled+y<o?s.requestScheduled=o:s.requestScheduled+=y,this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),!this.canLoad||!s.live)return;let w,E,T;if(s.canBlockReload&&s.endSN&&s.advanced){const k=this.hls.config.lowLatencyMode,_=s.lastPartSn,O=s.endSN,R=s.lastPartIndex,M=R!==-1,P=_===O;M?P?(E=O+1,T=k?0:R):(E=_,T=k?R+1:s.maxPartIndex):E=O+1;const N=s.age,L=N+s.ageHeader;let D=Math.min(L-s.partTarget,s.targetduration*1.5);if(D>0){if(L>s.targetduration*3)this.log(`Playlist last advanced ${N.toFixed(2)}s ago. Omitting segment and part directives.`),E=void 0,T=void 0;else if(i!=null&&i.tuneInGoal&&L-s.partTarget>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${D} with playlist age: ${s.age}`),D=0;else{const $=Math.floor(D/s.targetduration);if(E+=$,T!==void 0){const U=Math.round(D%s.targetduration/s.partTarget);T+=U}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${N.toFixed(2)}s goal: ${D} skip sn ${$} to part ${T}`)}s.tuneInGoal=D}if(w=this.getDeliveryDirectives(s,t.deliveryDirectives,E,T),k||!P){s.requestScheduled=o,this.loadingPlaylist(f,w);return}}else(s.canBlockReload||s.canSkipUntil)&&(w=this.getDeliveryDirectives(s,t.deliveryDirectives,E,T));w&&E!==void 0&&s.canBlockReload&&(s.requestScheduled=r.loading.first+Math.max(y-l*2,y/2)),this.scheduleLoading(f,w,s)}else this.clearTimer()}scheduleLoading(e,t,i){const s=i||e.details;if(!s){this.loadingPlaylist(e,t);return}const r=self.performance.now(),o=s.requestScheduled;if(r>=o){this.loadingPlaylist(e,t);return}const l=o-r;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(l)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),l)}getDeliveryDirectives(e,t,i,s){let r=nA(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,s=t.part,r=gf.No),new sA(i,s,r)}checkRetry(e){const t=e.details,i=gp(e),s=e.errorAction,{action:r,retryCount:o=0,retryConfig:l}=s||{},d=!!s&&!!l&&(r===hn.RetryRequest||!s.resolved&&r===hn.SendAlternateToPenaltyBox);if(d){var u;if(o>=l.maxNumRetry)return!1;if(i&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${l.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const f=_x(l,o);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),f),this.warn(`Retrying playlist loading ${o+1}/${l.maxNumRetry} after "${t}" in ${f}ms`)}e.levelRetry=!0,s.resolved=!0}return d}}function RD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Bd(n[t].attrs,e[t].attrs))return!1;return!0}function Bd(n,e,t){const i=n["STABLE-RENDITION-ID"];return i&&!t?i===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(s=>n[s]!==e[s])}function Jv(n,e){return e.label.toLowerCase()===n.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(n.lang||"").toLowerCase())}class kX extends jx{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVEL_LOADING,this.onLevelLoading,this),e.off(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(I.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:s,details:r}=t,o=this.tracksInGroup[i];if(!o||o.groupId!==s){this.warn(`Audio track with id:${i} and group:${s} not found in active group ${o?.groupId}`);return}const l=o.details;o.details=t.details,this.log(`Audio track ${i} "${o.name}" lang:${o.lang} group:${s} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,l)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.audioGroups||null,s=this.groupIds;let r=this.currentTrack;if(!i||s?.length!==i?.length||i!=null&&i.some(l=>s?.indexOf(l)===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const l=this.tracks.filter(b=>!i||i.indexOf(b.groupId)!==-1);if(l.length)this.selectDefaultTrack&&!l.some(b=>b.default)&&(this.selectDefaultTrack=!1),l.forEach((b,v)=>{b.id=v});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=l;const d=this.hls.config.audioPreference;if(!r&&d){const b=Zs(d,l,ua);if(b>-1)r=l[b];else{const v=Zs(d,this.tracks);r=this.tracks[v]}}let u=this.findTrackId(r);u===-1&&r&&(u=this.findTrackId(null));const f={audioTracks:l};this.log(`Updating audio tracks, ${l.length} track(s) found in group(s): ${i?.join(",")}`),this.hls.trigger(I.AUDIO_TRACKS_UPDATED,f);const p=this.trackId;if(u!==-1&&p===-1)this.setAudioTrack(u);else if(l.length&&p===-1){var o;const b=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${l.length}`);this.warn(b.message),this.hls.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:b})}}}onError(e,t){t.fatal||!t.context||t.context.type===At.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const s=this.currentTrack;if(s&&ba(e,s,ua))return s;const r=Zs(e,this.tracksInGroup,ua);if(r>-1){const o=this.tracksInGroup[r];return this.setAudioTrack(r),o}else if(s){let o=t.loadLevel;o===-1&&(o=t.firstAutoLevel);const l=$K(e,t.levels,i,o,ua);if(l===-1)return null;t.nextLoadLevel=l}if(e.channels||e.audioCodec){const o=Zs(e,i);if(o>-1)return i[o]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e],r=s.details&&!s.details.live;if(e===this.trackId&&s===i&&r||(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(I.AUDIO_TRACK_SWITCHING,ei({},s)),r))return;const o=this.switchParams(s.url,i?.details,s.details);this.loadPlaylist(o)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if(!(this.selectDefaultTrack&&!s.default)&&(!e||ba(e,s,ua)))return i}if(e){const{name:i,lang:s,assocLang:r,characteristics:o,audioCodec:l,channels:d}=e;for(let u=0;u<t.length;u++){const f=t[u];if(ba({name:i,lang:s,assocLang:r,characteristics:o,audioCodec:l,channels:d},f,ua))return u}for(let u=0;u<t.length;u++){const f=t[u];if(Bd(e.attrs,f.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<t.length;u++){const f=t[u];if(Bd(e.attrs,f.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&mp(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,s=e.groupId,r=this.getUrlWithDirectives(e.url,t),o=e.details,l=o?.age;this.log(`Loading audio-track ${i} "${e.name}" lang:${e.lang} group:${s}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${l&&o.live?" age "+l.toFixed(1)+(o.type&&" "+o.type||""):""} ${r}`),this.hls.trigger(I.AUDIO_TRACK_LOADING,{url:r,id:i,groupId:s,deliveryDirectives:t||null,track:e})}}class _X{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,i){if(this.queues===null||this.tracks===null)return;const s=this.queues[t];s.push(e),s.length===1&&!i&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const i={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(i,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const i={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(i)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const i=(t=e[0])==null?void 0:t.label;(i==="async-blocker"||i==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const s=t[0];try{s.execute()}catch(r){var i;if(s.onError(r),this.queues===null||this.tracks===null)return;const o=(i=this.tracks[e])==null?void 0:i.buffer;o!=null&&o.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,i;return(t=this.queues)!=null&&t[e]||(i=this.tracks)!=null&&i[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const i=(t=this.tracks)==null?void 0:t[e],s=i?.buffer;return s?`SourceBuffer${s.updating?" updating":""}${i.ended?" ended":""}${i.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(i=>i.label).join(", "))||""}}const HA=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,LD="HlsJsTrackRemovedError";class AX extends Error{constructor(e){super(e),this.name=LD}}class CX extends ys{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=i=>{var s;this.hls&&((s=this.mediaSource)==null?void 0:s.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=i=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=i=>{const{media:s,mediaSource:r}=this;i&&this.log("Media source opened"),!(!s||!r)&&(r.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(I.MEDIA_ATTACHED,{media:s,mediaSource:r}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:i,_objectUrl:s}=this;i!==s&&this.error(`Media element src was set while attaching MediaSource (${s} > ${i})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=XW(Bo(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.BUFFER_RESET,this.onBufferReset,this),e.on(I.BUFFER_APPENDING,this.onBufferAppending,this),e.on(I.BUFFER_CODECS,this.onBufferCodecs,this),e.on(I.BUFFER_EOS,this.onBufferEos,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(I.FRAG_PARSED,this.onFragParsed,this),e.on(I.FRAG_CHANGED,this.onFragChanged,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.BUFFER_RESET,this.onBufferReset,this),e.off(I.BUFFER_APPENDING,this.onBufferAppending,this),e.off(I.BUFFER_CODECS,this.onBufferCodecs,this),e.off(I.BUFFER_EOS,this.onBufferEos,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(I.FRAG_PARSED,this.onFragParsed,this),e.off(I.FRAG_CHANGED,this.onFragChanged,this),e.off(I.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const i={};if(this.operationQueue){const r=this.isUpdating();r||this.operationQueue.removeBlockers();const o=this.isQueued();(r||o)&&this.warn(`Transfering MediaSource with${o?" operations in queue":""}${r?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const s=this.transferData;return!this.sourceBufferCount&&s&&s.mediaSource===t?ai(i,s.tracks):this.sourceBuffers.forEach(r=>{const[o]=r;o&&(i[o]=ai({},this.tracks[o]),this.removeBuffer(o)),r[0]=r[1]=null}),{media:e,mediaSource:t,tracks:i}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var i;let s=2;(t.audio&&!t.video||!t.altAudio)&&(s=1),this.bufferCodecEventsTotal=s,this.log(`${s} bufferCodec event(s) expected.`),(i=this.transferData)!=null&&i.mediaSource&&this.sourceBufferCount&&s&&this.bufferCreated()}onMediaAttaching(e,t){const i=this.media=t.media;this.transferData=this.overrides=void 0;const s=Bo(this.appendSource);if(s){const r=!!t.mediaSource;(r||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const o=this.mediaSource=t.mediaSource||new s;if(this.assignMediaSource(o),r)this._objectUrl=i.src,this.attachTransferred();else{const l=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{i.removeAttribute("src");const d=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||d&&o instanceof d,GA(i),IX(i,l),i.load()}catch{i.src=l}else i.src=l}i.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,i;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(i=e.constructor)==null?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const i=this.tracks,s=t.tracks,r=s?Object.keys(s):null,o=r?r.length:0,l=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(s&&r&&o){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${fi(i,(d,u)=>d==="initSegment"?void 0:u)};
transfer tracks: ${fi(s,(d,u)=>d==="initSegment"?void 0:u)}}`),!AL(s,i)){t.mediaSource=null,t.tracks=void 0;const d=e.currentTime,u=this.details,f=Math.max(d,u?.fragments[0].start||0);if(f-d>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${d} -> ${f}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(s)}"->"${Object.keys(i)}") start time: ${f} currentTime: ${d}`),this.onMediaDetaching(I.MEDIA_DETACHING,{}),this.onMediaAttaching(I.MEDIA_ATTACHING,t),e.currentTime=f;return}this.transferData=void 0,r.forEach(d=>{const u=d,f=s[u];if(f){const p=f.buffer;if(p){const b=this.fragmentTracker,v=f.id;if(b.hasFragments(v)||b.hasParts(v)){const E=ft.getBuffered(p);b.detectEvictedFragments(u,E,v,null,!0)}const y=Cb(u),w=[u,p];this.sourceBuffers[y]=w,p.updating&&this.operationQueue&&this.operationQueue.prependBlocker(u),this.trackSourceBuffer(u,f)}}}),l(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),l()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const i=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:s,mediaSource:r,_objectUrl:o}=this;if(r){if(this.log(`media source ${i?"transferring":"detaching"}`),i)this.sourceBuffers.forEach(([l])=>{l&&this.removeBuffer(l)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const l=r.readyState==="open";try{const d=r.sourceBuffers;for(let u=d.length;u--;)l&&d[u].abort(),r.removeSourceBuffer(d[u]);l&&r.endOfStream()}catch(d){this.warn(`onMediaDetaching: ${d.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}r.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("sourceended",this._onMediaSourceEnded),r.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(r.removeEventListener("startstreaming",this._onStartStreaming),r.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}s&&(s.removeEventListener("emptied",this._onMediaEmptied),i||(o&&self.URL.revokeObjectURL(o),this.mediaSrc===o?(s.removeAttribute("src"),this.appendSource&&GA(s),s.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(I.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const i=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),i)try{var s;(s=this.mediaSource)!=null&&s.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(i)}catch(r){this.warn(`onBufferReset ${e}`,r)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Cb(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new _X(this.tracks)}onBufferCodecs(e,t){var i;const s=this.tracks,r=Object.keys(t);this.log(`BUFFER_CODECS: "${r}" (current SB count ${this.sourceBufferCount})`);const o="audiovideo"in t&&(s.audio||s.video)||s.audiovideo&&("audio"in t||"video"in t),l=!o&&this.sourceBufferCount&&this.media&&r.some(d=>!s[d]);if(o||l){this.warn(`Unsupported transition between "${Object.keys(s)}" and "${r}" SourceBuffers`);return}r.forEach(d=>{var u,f;const p=t[d],{id:b,codec:v,levelCodec:y,container:w,metadata:E,supplemental:T}=p;let k=s[d];const _=(u=this.transferData)==null||(u=u.tracks)==null?void 0:u[d],O=_!=null&&_.buffer?_:k,R=O?.pendingCodec||O?.codec,M=O?.levelCodec;k||(k=s[d]={buffer:void 0,listeners:[],codec:v,supplemental:T,container:w,levelCodec:y,metadata:E,id:b});const P=mf(R,M),N=P?.replace(HA,"$1");let L=mf(v,y);const D=(f=L)==null?void 0:f.replace(HA,"$1");L&&P&&N!==D&&(d.slice(0,5)==="audio"&&(L=fp(L,this.appendSource)),this.log(`switching codec ${R} to ${L}`),L!==(k.pendingCodec||k.codec)&&(k.pendingCodec=L),k.container=w,this.appendChangeType(d,w,L))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&((i=t.audio)==null?void 0:i.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const i=this.tracks[t];return e[t]={id:i.id,container:i.container,codec:i.codec,levelCodec:i.levelCodec},e},{})}appendChangeType(e,t,i){const s=`${t};codecs=${i}`,r={label:`change-type=${s}`,execute:()=>{const o=this.tracks[e];if(o){const l=o.buffer;l!=null&&l.changeType&&(this.log(`changing ${e} sourceBuffer type to ${s}`),l.changeType(s),o.codec=i,o.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn(`Failed to change ${e} SourceBuffer type`,o)}};this.append(r,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const i=e.start,s=i+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(i,Fe.MAIN))==null?void 0:t.gap)===!0)return;const o={label:"block-audio",execute:()=>{var l;const d=this.tracks.video;(this.lastVideoAppendEnd>s||d!=null&&d.buffer&&ft.isBuffered(d.buffer,s)||((l=this.fragmentTracker.getAppendedFrag(s,Fe.MAIN))==null?void 0:l.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:l=>{this.warn("Error executing block-audio operation",l)}};this.blockedAudioAppend={op:o,frag:e},this.append(o,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:i}=this,{data:s,type:r,parent:o,frag:l,part:d,chunkMeta:u,offset:f}=t,p=u.buffering[r],{sn:b,cc:v}=l,y=self.performance.now();p.start=y;const w=l.stats.buffering,E=d?d.stats.buffering:null;w.start===0&&(w.start=y),E&&E.start===0&&(E.start=y);const T=i.audio;let k=!1;r==="audio"&&T?.container==="audio/mpeg"&&(k=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const _=i.video,O=_?.buffer;if(O&&b!=="initSegment"){const P=d||l,N=this.blockedAudioAppend;if(r==="audio"&&o!=="main"&&!this.blockedAudioAppend&&!(_.ending||_.ended)){const D=P.start+P.duration*.05,$=O.buffered,U=this.currentOp("video");!$.length&&!U?this.blockAudio(P):!U&&!ft.isBuffered(O,D)&&this.lastVideoAppendEnd<D&&this.blockAudio(P)}else if(r==="video"){const L=P.end;if(N){const D=N.frag.start;(L>D||L<this.lastVideoAppendEnd||ft.isBuffered(O,D))&&this.unblockAudio()}this.lastVideoAppendEnd=L}}const R=(d||l).start,M={label:`append-${r}`,execute:()=>{var P;p.executeStart=self.performance.now();const N=(P=this.tracks[r])==null?void 0:P.buffer;N&&(k?this.updateTimestampOffset(N,R,.1,r,b,v):f!==void 0&&Oe(f)&&this.updateTimestampOffset(N,f,1e-6,r,b,v)),this.appendExecutor(s,r)},onStart:()=>{},onComplete:()=>{const P=self.performance.now();p.executeEnd=p.end=P,w.first===0&&(w.first=P),E&&E.first===0&&(E.first=P);const N={};this.sourceBuffers.forEach(([L,D])=>{L&&(N[L]=ft.getBuffered(D))}),this.appendErrors[r]=0,r==="audio"||r==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(I.BUFFER_APPENDED,{type:r,frag:l,part:d,chunkMeta:u,parent:l.type,timeRanges:N})},onError:P=>{var N;const L={type:qe.MEDIA_ERROR,parent:l.type,details:le.BUFFER_APPEND_ERROR,sourceBufferName:r,frag:l,part:d,chunkMeta:u,error:P,err:P,fatal:!1},D=(N=this.media)==null?void 0:N.error;if(P.code===DOMException.QUOTA_EXCEEDED_ERR||P.name=="QuotaExceededError"||"quota"in P)L.details=le.BUFFER_FULL_ERROR;else if(P.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!D)L.errorAction=Bl(!0);else if(P.name===LD&&this.sourceBufferCount===0)L.errorAction=Bl(!0);else{const $=++this.appendErrors[r];this.warn(`Failed ${$}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${r}" sourceBuffer (${D||"no media error"})`),($>=this.hls.config.appendErrorMaxRetry||D)&&(L.fatal=!0)}this.hls.trigger(I.ERROR,L)}};this.log(`queuing "${r}" append sn: ${b}${d?" p: "+d.index:""} of ${l.type===Fe.MAIN?"level":"track"} ${l.level} cc: ${v}`),this.append(M,r,this.isPending(this.tracks[r]))}getFlushOp(e,t,i){return this.log(`queuing "${e}" remove ${t}-${i}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,i)},onStart:()=>{},onComplete:()=>{this.hls.trigger(I.BUFFER_FLUSHED,{type:e})},onError:s=>{this.warn(`Failed to remove ${t}-${i} from "${e}" SourceBuffer`,s)}}}onBufferFlushing(e,t){const{type:i,startOffset:s,endOffset:r}=t;i?this.append(this.getFlushOp(i,s,r),i):this.sourceBuffers.forEach(([o])=>{o&&this.append(this.getFlushOp(o,s,r),o)})}onFragParsed(e,t){const{frag:i,part:s}=t,r=[],o=s?s.elementaryStreams:i.elementaryStreams;o[ui.AUDIOVIDEO]?r.push("audiovideo"):(o[ui.AUDIO]&&r.push("audio"),o[ui.VIDEO]&&r.push("video"));const l=()=>{const d=self.performance.now();i.stats.buffering.end=d,s&&(s.stats.buffering.end=d);const u=s?s.stats:i.stats;this.hls.trigger(I.FRAG_BUFFERED,{frag:i,part:s,stats:u,id:i.type})};r.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(l,r).catch(d=>{this.warn(`Fragment buffered callback ${d}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var i;this.sourceBuffers.forEach(([o])=>{if(o){const l=this.tracks[o];(!t.type||t.type===o)&&(l.ending=!0,l.ended||(l.ended=!0,this.log(`${o} buffer reached EOS`)))}});const s=((i=this.overrides)==null?void 0:i.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([o])=>{var l;return o&&!((l=this.tracks[o])!=null&&l.ended)})?s?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:o}=this;if(!o||o.readyState!=="open"){o&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${o.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),o.endOfStream(),this.hls.trigger(I.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(I.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===le.BUFFER_APPEND_ERROR&&t.frag){var i;const s=(i=t.errorAction)==null?void 0:i.nextAutoLevel;Oe(s)&&s!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:i}=this;if(!i||t===null||!this.sourceBufferCount)return;const s=e.config,r=i.currentTime,o=t.levelTargetDuration,l=t.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(Oe(l)&&l>=0){const u=Math.max(l,o),f=Math.floor(r/o)*o-u;this.flushBackBuffer(r,o,f)}const d=s.frontBufferFlushThreshold;if(Oe(d)&&d>0){const u=Math.max(s.maxBufferLength,d),f=Math.max(u,o),p=Math.floor(r/o)*o+f;this.flushFrontBuffer(r,o,p)}}flushBackBuffer(e,t,i){this.sourceBuffers.forEach(([s,r])=>{if(r){const l=ft.getBuffered(r);if(l.length>0&&i>l.start(0)){var o;this.hls.trigger(I.BACK_BUFFER_REACHED,{bufferEnd:i});const d=this.tracks[s];if((o=this.details)!=null&&o.live)this.hls.trigger(I.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(d!=null&&d.ended){this.log(`Cannot flush ${s} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(I.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:s})}}})}flushFrontBuffer(e,t,i){this.sourceBuffers.forEach(([s,r])=>{if(r){const o=ft.getBuffered(r),l=o.length;if(l<2)return;const d=o.start(l-1),u=o.end(l-1);if(i>d||e>=d&&e<=u)return;this.hls.trigger(I.BUFFER_FLUSHING,{startOffset:d,endOffset:1/0,type:s})}})}getDurationAndRange(){var e;const{details:t,mediaSource:i}=this;if(!t||!this.media||i?.readyState!=="open")return null;const s=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&i.setLiveSeekableRange){const u=Math.max(0,t.fragmentStart),f=Math.max(u,s);return{duration:1/0,start:u,end:f}}return{duration:1/0}}const r=(e=this.overrides)==null?void 0:e.duration;if(r)return Oe(r)?{duration:r}:null;const o=this.media.duration,l=Oe(i.duration)?i.duration:0;return s>l&&s>o||!Oe(o)?{duration:s}:null}updateMediaSource({duration:e,start:t,end:i}){const s=this.mediaSource;!this.media||!s||s.readyState!=="open"||(s.duration!==e&&(Oe(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),s.duration=e),t!==void 0&&i!==void 0&&(this.log(`MediaSource duration is set to ${s.duration}. Setting seekable range to ${t}-${i}.`),s.setLiveSeekableRange(t,i)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:i}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${fi(i)}`),this.tracksReady){var s;const r=(s=this.transferData)==null?void 0:s.tracks;r&&Object.keys(r).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,i])=>{if(t){const s=this.tracks[t];e[t]={buffer:i,container:s.container,codec:s.codec,supplemental:s.supplemental,levelCodec:s.levelCodec,id:s.id,metadata:s.metadata}}}),this.hls.trigger(I.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:i}=this;if(!i)throw new Error("createSourceBuffers called when mediaSource was null");for(const r in e){const o=r,l=e[o];if(this.isPending(l)){const d=this.getTrackCodec(l,o),u=`${l.container};codecs=${d}`;l.codec=d,this.log(`creating sourceBuffer(${u})${this.currentOp(o)?" Queued":""} ${fi(l)}`);try{const f=i.addSourceBuffer(u),p=Cb(o),b=[o,f];t[p]=b,l.buffer=f}catch(f){var s;this.error(`error while trying to add sourceBuffer: ${f.message}`),this.shiftAndExecuteNext(o),(s=this.operationQueue)==null||s.removeBlockers(),delete this.tracks[o],this.hls.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:f,sourceBufferName:o,mimeType:u,parent:l.id});return}this.trackSourceBuffer(o,l)}}this.bufferCreated()}getTrackCodec(e,t){const i=e.supplemental;let s=e.codec;i&&(t==="video"||t==="audiovideo")&&Nd(i,"video")&&(s=vK(s,i));const r=mf(s,e.levelCodec);return r?t.slice(0,5)==="audio"?fp(r,this.appendSource):r:""}trackSourceBuffer(e,t){const i=t.buffer;if(!i)return;const s=this.getTrackCodec(t,e);this.tracks[e]={buffer:i,codec:s,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(r,o)=>{const l=o.removedRanges;l!=null&&l.length&&this.hls.trigger(I.BUFFER_FLUSHED,{type:r})})}get mediaSrc(){var e,t;const i=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return i?.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const i=this.currentOp(e);i&&(i.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var i;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(i=this.mediaSource)==null?void 0:i.readyState}`);this.error(`${s}`,t),this.hls.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const r=this.currentOp(e);r&&r.onError(s)}updateTimestampOffset(e,t,i,s,r,o){const l=t-e.timestampOffset;Math.abs(l)>=i&&(this.log(`Updating ${s} SourceBuffer timestampOffset to ${t} (sn: ${r} cc: ${o})`),e.timestampOffset=t)}removeExecutor(e,t,i){const{media:s,mediaSource:r}=this,o=this.tracks[e],l=o?.buffer;if(!s||!r||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const d=Oe(s.duration)?s.duration:1/0,u=Oe(r.duration)?r.duration:1/0,f=Math.max(0,t),p=Math.min(i,d,u);p>f&&(!o.ending||o.ended)?(o.ended=!1,this.log(`Removing [${f},${p}] from the ${e} SourceBuffer`),l.remove(f,p)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const i=this.tracks[t],s=i?.buffer;if(!s)throw new AX(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);i.ending=!1,i.ended=!1,s.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:i}=this,s=t.map(o=>this.appendBlocker(o));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(s).then(o=>{i===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var i;const s=(i=this.tracks[t])==null?void 0:i.buffer;!s||s.updating||this.shiftAndExecuteNext(t)})}append(e,t,i){this.operationQueue&&this.operationQueue.append(e,t,i)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,i){const s=this.tracks[e];if(!s)return;const r=s.buffer;if(!r)return;const o=i.bind(this,e);s.listeners.push({event:t,listener:o}),r.addEventListener(t,o)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const i=t.buffer;i&&(t.listeners.forEach(s=>{i.removeEventListener(s.event,s.listener)}),t.listeners.length=0)}}function GA(n){const e=n.querySelectorAll("source");[].slice.call(e).forEach(t=>{n.removeChild(t)})}function IX(n,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,n.appendChild(t)}function Cb(n){return n==="audio"?1:0}class Bx{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(I.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.BUFFER_CODECS,this.onBufferCodecs,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(I.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.BUFFER_CODECS,this.onBufferCodecs,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Oe(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=i,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter((s,r)=>this.isLevelAllowed(s)&&r<=e);return this.clientRect=null,Bx.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,!t.width&&!t.height&&(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,t,i){if(!(e!=null&&e.length))return-1;const s=(l,d)=>d?l.width!==d.width||l.height!==d.height:!0;let r=e.length-1;const o=Math.max(t,i);for(let l=0;l<e.length;l+=1){const d=e[l];if((d.width>=o||d.height>=o)&&s(d,e[l+1])){r=l;break}}return r}}const RX={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Mn=RX,LX={HLS:"h"},DX=LX;class ir{constructor(e,t){Array.isArray(e)&&(e=e.map(i=>i instanceof ir?i:new ir(i))),this.value=e,this.params=t}}const OX="Dict";function NX(n){return Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":typeof n=="object"?JSON.stringify(n):String(n)}function PX(n,e,t,i){return new Error(`failed to ${n} "${NX(e)}" as ${t}`,{cause:i})}function nr(n,e,t){return PX("serialize",n,e,t)}class DD{constructor(e){this.description=e}}const VA="Bare Item",MX="Boolean";function $X(n){if(typeof n!="boolean")throw nr(n,MX);return n?"?1":"?0"}function FX(n){return btoa(String.fromCharCode(...n))}const jX="Byte Sequence";function BX(n){if(ArrayBuffer.isView(n)===!1)throw nr(n,jX);return`:${FX(n)}:`}const UX="Integer";function zX(n){return n<-999999999999999||999999999999999<n}function OD(n){if(zX(n))throw nr(n,UX);return n.toString()}function HX(n){return`@${OD(n.getTime()/1e3)}`}function ND(n,e){if(n<0)return-ND(-n,e);const t=Math.pow(10,e);if(Math.abs(n*t%1-.5)<Number.EPSILON){const s=Math.floor(n*t);return(s%2===0?s:s+1)/t}else return Math.round(n*t)/t}const GX="Decimal";function VX(n){const e=ND(n,3);if(Math.floor(Math.abs(e)).toString().length>12)throw nr(n,GX);const t=e.toString();return t.includes(".")?t:`${t}.0`}const qX="String",WX=/[\x00-\x1f\x7f]+/;function KX(n){if(WX.test(n))throw nr(n,qX);return`"${n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function YX(n){return n.description||n.toString().slice(7,-1)}const XX="Token";function qA(n){const e=YX(n);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw nr(e,XX);return e}function ey(n){switch(typeof n){case"number":if(!Oe(n))throw nr(n,VA);return Number.isInteger(n)?OD(n):VX(n);case"string":return KX(n);case"symbol":return qA(n);case"boolean":return $X(n);case"object":if(n instanceof Date)return HX(n);if(n instanceof Uint8Array)return BX(n);if(n instanceof DD)return qA(n);default:throw nr(n,VA)}}const QX="Key";function ty(n){if(/^[a-z*][a-z0-9\-_.*]*$/.test(n)===!1)throw nr(n,QX);return n}function Ux(n){return n==null?"":Object.entries(n).map(([e,t])=>t===!0?`;${ty(e)}`:`;${ty(e)}=${ey(t)}`).join("")}function PD(n){return n instanceof ir?`${ey(n.value)}${Ux(n.params)}`:ey(n)}function ZX(n){return`(${n.value.map(PD).join(" ")})${Ux(n.params)}`}function JX(n,e={whitespace:!0}){if(typeof n!="object"||n==null)throw nr(n,OX);const t=n instanceof Map?n.entries():Object.entries(n),i=e?.whitespace?" ":"";return Array.from(t).map(([s,r])=>{r instanceof ir||(r=new ir(r));let o=ty(s);return r.value===!0?o+=Ux(r.params):(o+="=",Array.isArray(r.value)?o+=ZX(r):o+=PD(r)),o}).join(`,${i}`)}function MD(n,e){return JX(n,e)}const Vs="CMCD-Object",Ci="CMCD-Request",la="CMCD-Session",So="CMCD-Status",eQ={br:Vs,ab:Vs,d:Vs,ot:Vs,tb:Vs,tpb:Vs,lb:Vs,tab:Vs,lab:Vs,url:Vs,pb:Ci,bl:Ci,tbl:Ci,dl:Ci,ltc:Ci,mtp:Ci,nor:Ci,nrr:Ci,rc:Ci,sn:Ci,sta:Ci,su:Ci,ttfb:Ci,ttfbb:Ci,ttlb:Ci,cmsdd:Ci,cmsds:Ci,smrt:Ci,df:Ci,cs:Ci,ts:Ci,cid:la,pr:la,sf:la,sid:la,st:la,v:la,msd:la,bs:So,bsd:So,cdn:So,rtp:So,bg:So,pt:So,ec:So,e:So},tQ={REQUEST:Ci};function iQ(n){return Object.keys(n).reduce((e,t)=>{var i;return(i=n[t])===null||i===void 0||i.forEach(s=>e[s]=t),e},{})}function nQ(n,e){const t={};if(!n)return t;const i=Object.keys(n),s=e?iQ(e):{};return i.reduce((r,o)=>{var l;const d=eQ[o]||s[o]||tQ.REQUEST,u=(l=r[d])!==null&&l!==void 0?l:r[d]={};return u[o]=n[o],r},t)}function sQ(n){return["ot","sf","st","e","sta"].includes(n)}function rQ(n){return typeof n=="number"?Oe(n):n!=null&&n!==""&&n!==!1}const $D="event";function oQ(n,e){const t=new URL(n),i=new URL(e);if(t.origin!==i.origin)return n;const s=t.pathname.split("/").slice(1),r=i.pathname.split("/").slice(1,-1);for(;s[0]===r[0];)s.shift(),r.shift();for(;r.length;)r.shift(),s.unshift("..");return s.join("/")+t.search+t.hash}const xf=n=>Math.round(n),iy=(n,e)=>Array.isArray(n)?n.map(t=>iy(t,e)):n instanceof ir&&typeof n.value=="string"?new ir(iy(n.value,e),n.params):(e.baseUrl&&(n=oQ(n,e.baseUrl)),e.version===1?encodeURIComponent(n):n),Yh=n=>xf(n/100)*100,aQ=(n,e)=>{let t=n;return e.version>=2&&(n instanceof ir&&typeof n.value=="string"?t=new ir([n]):typeof n=="string"&&(t=[n])),iy(t,e)},lQ={br:xf,d:xf,bl:Yh,dl:Yh,mtp:Yh,nor:aQ,rtp:Yh,tb:xf},FD="request",jD="response",zx=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],cQ=["e"],dQ=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Hp(n){return dQ.test(n)}function uQ(n){return zx.includes(n)||cQ.includes(n)||Hp(n)}const BD=["d","dl","nor","ot","rtp","su"];function hQ(n){return zx.includes(n)||BD.includes(n)||Hp(n)}const fQ=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function pQ(n){return zx.includes(n)||BD.includes(n)||fQ.includes(n)||Hp(n)}const mQ=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function gQ(n){return mQ.includes(n)||Hp(n)}const bQ={[jD]:pQ,[$D]:uQ,[FD]:hQ};function UD(n,e={}){const t={};if(n==null||typeof n!="object")return t;const i=e.version||n.v||1,s=e.reportingMode||FD,r=i===1?gQ:bQ[s];let o=Object.keys(n).filter(r);const l=e.filter;typeof l=="function"&&(o=o.filter(l));const d=s===jD||s===$D;d&&!o.includes("ts")&&o.push("ts"),i>1&&!o.includes("v")&&o.push("v");const u=ai({},lQ,e.formatters),f={version:i,reportingMode:s,baseUrl:e.baseUrl};return o.sort().forEach(p=>{let b=n[p];const v=u[p];if(typeof v=="function"&&(b=v(b,f)),p==="v"){if(i===1)return;b=i}p=="pr"&&b===1||(d&&p==="ts"&&!Oe(b)&&(b=Date.now()),rQ(b)&&(sQ(p)&&typeof b=="string"&&(b=new DD(b)),t[p]=b))}),t}function vQ(n,e={}){const t={};if(!n)return t;const i=UD(n,e),s=nQ(i,e?.customHeaderMap);return Object.entries(s).reduce((r,[o,l])=>{const d=MD(l,{whitespace:!1});return d&&(r[o]=d),r},t)}function yQ(n,e,t){return ai(n,vQ(e,t))}const xQ="CMCD";function wQ(n,e={}){return n?MD(UD(n,e),{whitespace:!1}):""}function SQ(n,e={}){if(!n)return"";const t=wQ(n,e);return encodeURIComponent(t)}function EQ(n,e={}){if(!n)return"";const t=SQ(n,e);return`${xQ}=${t}`}const WA=/CMCD=[^&#]+/;function TQ(n,e,t){const i=EQ(e,t);if(!i)return n;if(WA.test(n))return n.replace(WA,i);const s=n.includes("?")?"&":"?";return`${n}${s}${i}`}class kQ{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:Mn.MANIFEST,su:!this.initialized})}catch(r){this.hls.logger.warn("Could not generate manifest CMCD data.",r)}},this.applyFragmentData=s=>{try{const{frag:r,part:o}=s,l=this.hls.levels[r.level],d=this.getObjectType(r),u={d:(o||r).duration*1e3,ot:d};(d===Mn.VIDEO||d===Mn.AUDIO||d==Mn.MUXED)&&(u.br=l.bitrate/1e3,u.tb=this.getTopBandwidth(d)/1e3,u.bl=this.getBufferLength(d));const f=o?this.getNextPart(o):this.getNextFrag(r);f!=null&&f.url&&f.url!==r.url&&(u.nor=f.url),this.apply(s,u)}catch(r){this.hls.logger.warn("Could not generate segment CMCD data.",r)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;i!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||e.sessionId,this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHED,this.onMediaDetached,this),e.on(I.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHED,this.onMediaDetached,this),e.off(I.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,s;this.audioBuffer=(i=t.tracks.audio)==null?void 0:i.buffer,this.videoBuffer=(s=t.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:1,sf:DX.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){ai(t,this.createData());const i=t.ot===Mn.INIT||t.ot===Mn.VIDEO||t.ot===Mn.MUXED;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:s}=this;s&&(t=Object.keys(t).reduce((o,l)=>(s.includes(l)&&(o[l]=t[l]),o),{}));const r={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),yQ(e.headers,t,r)):e.url=TQ(e.url,t,r)}getNextFrag(e){var t;const i=(t=this.hls.levels[e.level])==null?void 0:t.details;if(i){const s=e.sn-i.startSN;return i.fragments[s+1]}}getNextPart(e){var t;const{index:i,fragment:s}=e,r=(t=this.hls.levels[s.level])==null||(t=t.details)==null?void 0:t.partList;if(r){const{sn:o}=s;for(let l=r.length-1;l>=0;l--){const d=r[l];if(d.index===i&&d.fragment.sn===o)return r[l+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Mn.TIMED_TEXT;if(e.sn==="initSegment")return Mn.INIT;if(t==="audio")return Mn.AUDIO;if(t==="main")return this.hls.audioTracks.length?Mn.VIDEO:Mn.MUXED}getTopBandwidth(e){let t=0,i;const s=this.hls;if(e===Mn.AUDIO)i=s.audioTracks;else{const r=s.maxAutoLevel,o=r>-1?r+1:s.levels.length;i=s.levels.slice(0,o)}return i.forEach(r=>{r.bitrate>t&&(t=r.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,i=e===Mn.AUDIO?this.audioBuffer:this.videoBuffer;return!i||!t?NaN:ft.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new i(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,o,l){t(r),this.loader.load(r,o,l)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new i(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,o,l){t(r),this.loader.load(r,o,l)}}}}const _Q=3e5;class AQ extends ys{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;i!==null&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if(i?.action===hn.SendAlternateToPenaltyBox&&i.flags===Qn.MoveAllAlternatesMatchingHost){const s=this.levels;let r=this._pathwayPriority,o=this.pathwayId;if(t.context){const{groupId:l,pathwayId:d,type:u}=t.context;l&&s?o=this.getPathwayForGroupId(l,u,o):d&&(o=d)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!r&&s&&(r=this.pathways()),r&&r.length>1&&(this.updatePathwayPriority(r),i.resolved=this.pathwayId!==o),t.details===le.BUFFER_APPEND_ERROR&&!t.fatal?i.resolved=!0:i.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${o} levels: ${s&&s.length} priorities: ${fi(r)} penalized: ${fi(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const i=this.penalizedPathways,s=performance.now();Object.keys(i).forEach(r=>{s-i[r]>_Q&&delete i[r]});for(let r=0;r<e.length;r++){const o=e[r];if(o in i)continue;if(o===this.pathwayId)return;const l=this.hls.nextLoadLevel,d=this.hls.levels[l];if(t=this.getLevelsForPathway(o),t.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,aD(t),this.hls.trigger(I.LEVELS_UPDATED,{levels:t});const u=this.hls.levels[l];d&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==d.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==d.bitrate&&this.log(`Unstable Pathways change from bitrate ${d.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=l);break}}}getPathwayForGroupId(e,t,i){const s=this.getLevelsForPathway(i).concat(this.levels||[]);for(let r=0;r<s.length;r++)if(t===At.AUDIO_TRACK&&s[r].hasAudioGroup(e)||t===At.SUBTITLE_TRACK&&s[r].hasSubtitleGroup(e))return s[r].pathwayId;return i}clonePathways(e){const t=this.levels;if(!t)return;const i={},s={};e.forEach(r=>{const{ID:o,"BASE-ID":l,"URI-REPLACEMENT":d}=r;if(t.some(f=>f.pathwayId===o))return;const u=this.getLevelsForPathway(l).map(f=>{const p=new Si(f.attrs);p["PATHWAY-ID"]=o;const b=p.AUDIO&&`${p.AUDIO}_clone_${o}`,v=p.SUBTITLES&&`${p.SUBTITLES}_clone_${o}`;b&&(i[p.AUDIO]=b,p.AUDIO=b),v&&(s[p.SUBTITLES]=v,p.SUBTITLES=v);const y=zD(f.uri,p["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",d),w=new Md({attrs:p,audioCodec:f.audioCodec,bitrate:f.bitrate,height:f.height,name:f.name,url:y,videoCodec:f.videoCodec,width:f.width});if(f.audioGroups)for(let E=1;E<f.audioGroups.length;E++)w.addGroupId("audio",`${f.audioGroups[E]}_clone_${o}`);if(f.subtitleGroups)for(let E=1;E<f.subtitleGroups.length;E++)w.addGroupId("text",`${f.subtitleGroups[E]}_clone_${o}`);return w});t.push(...u),KA(this.audioTracks,i,d,o),KA(this.subtitleTracks,s,d,o)})}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;this.loader&&this.loader.destroy(),this.loader=new i(t);let s;try{s=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(s.protocol!=="data:"){const f=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+f)}const r={responseType:"json",url:s.href},o=t.steeringManifestLoadPolicy.default,l=o.errorRetry||o.timeoutRetry||{},d={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},u={onSuccess:(f,p,b,v)=>{this.log(`Loaded steering manifest: "${s}"`);const y=f.data;if(y?.VERSION!==1){this.log(`Steering VERSION ${y.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=y.TTL;const{"RELOAD-URI":w,"PATHWAY-CLONES":E,"PATHWAY-PRIORITY":T}=y;if(w)try{this.uri=new self.URL(w,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${w}`);return}this.scheduleRefresh(this.uri||b.url),E&&this.clonePathways(E);const k={steeringManifest:y,url:s.toString()};this.hls.trigger(I.STEERING_MANIFEST_LOADED,k),T&&this.updatePathwayPriority(T)},onError:(f,p,b,v)=>{if(this.log(`Error loading steering manifest: ${f.code} ${f.text} (${p.url})`),this.stopLoad(),f.code===410){this.enabled=!1,this.log(`Steering manifest ${p.url} no longer available`);return}let y=this.timeToLoad*1e3;if(f.code===429){const w=this.loader;if(typeof w?.getResponseHeader=="function"){const E=w.getResponseHeader("Retry-After");E&&(y=parseFloat(E)*1e3)}this.log(`Steering manifest ${p.url} rate limited`);return}this.scheduleRefresh(this.uri||p.url,y)},onTimeout:(f,p,b)=>{this.log(`Timeout loading steering manifest (${p.url})`),this.scheduleRefresh(this.uri||p.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(r,d,u)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var i;const s=(i=this.hls)==null?void 0:i.media;if(s&&!s.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function KA(n,e,t,i){n&&Object.keys(e).forEach(s=>{const r=n.filter(o=>o.groupId===s).map(o=>{const l=ai({},o);return l.details=void 0,l.attrs=new Si(l.attrs),l.url=l.attrs.URI=zD(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),l.groupId=l.attrs["GROUP-ID"]=e[s],l.attrs["PATHWAY-ID"]=i,l});n.push(...r)})}function zD(n,e,t,i){const{HOST:s,PARAMS:r,[t]:o}=i;let l;e&&(l=o?.[e],l&&(n=l));const d=new self.URL(n);return s&&!l&&(d.host=s),r&&Object.keys(r).sort().forEach(u=>{u&&d.searchParams.set(u,r[u])}),d.href}class zl extends ys{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=zl.CDMCleanupPromise?[zl.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:i,initData:s}=t,r=`"${t.type}" event: init data type: "${i}"`;if(this.debug(r),s!==null){if(!this.keyFormatPromise){let o=Object.keys(this.keySystemAccessPromises);o.length||(o=ad(this.config));const l=o.map(xb).filter(d=>!!d);this.keyFormatPromise=this.getKeyFormatPromise(l)}this.keyFormatPromise.then(o=>{const l=bf(o);if(i!=="sinf"||l!==Ei.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${i}" for selected key-system ${l}`);return}let d;try{const v=Vi(new Uint8Array(s)),y=Rx(JSON.parse(v).sinf),w=ML(y);if(!w)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");d=new Uint8Array(w.subarray(8,24))}catch(v){this.warn(`${r} Failed to parse sinf: ${v}`);return}const u=fn(d),{keyIdToKeySessionPromise:f,mediaKeySessions:p}=this;let b=f[u];for(let v=0;v<p.length;v++){const y=p[v],w=y.decryptdata;if(!w.keyId)continue;const E=fn(w.keyId);if(vp(d,w.keyId)||w.uri.replace(/-/g,"").indexOf(u)!==-1){if(b=f[E],!b)continue;if(w.pssh)break;delete f[E],w.pssh=new Uint8Array(s),w.keyId=d,b=f[u]=b.then(()=>this.generateRequestWithPreferredKeySession(y,i,s,"encrypted-event-key-match")),b.catch(T=>this.handleError(T));break}}b||this.handleError(new Error(`Key ID ${u} not encountered in playlist. Key-system sessions ${p.length}.`))}).catch(o=>this.handleError(o))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(I.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(I.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(I.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(I.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(I.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(I.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:i}=this.config,s=t?.[e];if(s)return s.licenseUrl;if(e===Ei.WIDEVINE&&i)return i}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,i=t?.[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,i=(o,l,d)=>!!o&&d.indexOf(o)===l,s=t.map(o=>o.audioCodec).filter(i),r=t.map(o=>o.videoCodec).filter(i);return s.length+r.length===0&&r.push("avc1.42e01e"),new Promise((o,l)=>{const d=u=>{const f=u.shift();this.getMediaKeysPromise(f,s,r).then(p=>o({keySystem:f,mediaKeys:p})).catch(p=>{u.length?d(u):p instanceof Xn?l(p):l(new Xn({type:qe.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_NO_ACCESS,error:p,fatal:!0},p.message))})};d(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:i}=this.config;if(typeof i!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${i}`;return JL===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return i(e,t)}getMediaKeysPromise(e,t,i){var s;const r=aY(e,t,i,this.config.drmSystemOptions||{});let o=this.keySystemAccessPromises[e],l=(s=o)==null?void 0:s.keySystemAccess;if(!l){this.log(`Requesting encrypted media "${e}" key-system access with config: ${fi(r)}`),l=this.requestMediaKeySystemAccess(e,r);const d=o=this.keySystemAccessPromises[e]={keySystemAccess:l};return l.catch(u=>{this.log(`Failed to obtain access to key-system "${e}": ${u}`)}),l.then(u=>{this.log(`Access for key-system "${u.keySystem}" obtained`);const f=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const p=d.mediaKeys=u.createMediaKeys().then(b=>(this.log(`Media-keys created for "${e}"`),d.hasMediaKeys=!0,f.then(v=>v?this.setMediaKeysServerCertificate(b,e,v):b)));return p.catch(b=>{this.error(`Failed to create media-keys for "${e}"}: ${b}`)}),p})}return l.then(()=>o.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log(`Creating key-system session "${t}" keyId: ${fn(e.keyId||[])} keyUri: ${e.uri}`);const s=i.createSession(),r={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const i=this.createMediaKeySessionContext(e),s=Xh(t),r="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(i,r,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyId ${fn(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),i.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>xb(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:i})=>this.attemptSetMediaKeys(t,i))}selectKeySystem(e){return new Promise((t,i)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:s})=>{const r=xb(s);r?t(r):i(new Error(`Unable to find format for key-system "${s}"`))}).catch(i)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=ad(this.config),i=e.map(bf).filter(s=>!!s&&t.indexOf(s)!==-1);return this.selectKeySystem(i)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let i=0;i<t.length;i++){const s=CQ(e,t[i]);if(s)return s}}loadKey(e){const t=e.keyInfo.decryptdata,i=Xh(t),s=this.bannedKeyIds[i];if(s||this.getKeyStatus(t)==="internal-error"){const l=YA(s||"internal-error",t);return this.handleError(l,e.frag),Promise.reject(l)}const r=`(keyId: ${i} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${r}`);const o=this.keyIdToKeySessionPromise[i];if(!o){const l=this.getKeySystemForKeyPromise(t).then(({keySystem:d,mediaKeys:u})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(d,u).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:d,mediaKeys:u,decryptdata:t}))))).then(d=>{const u="cenc",f=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(d,u,f,"playlist-key")});return l.catch(d=>this.handleError(d,e.frag)),this.keyIdToKeySessionPromise[i]=l,l}return o.catch(l=>{if(l instanceof Xn){const d=ei({},l.data);this.getKeyStatus(t)==="internal-error"&&(d.decryptdata=t);const u=new Xn(d,l.message);this.handleError(u,e.frag)}}),o}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof Xn){t&&(e.data.frag=t);const i=e.data.decryptdata;this.error(`${e.message}${i?` (${fn(i.keyId||[])})`:""}`),this.hls.trigger(I.ERROR,e.data)}else this.error(e.message),this.hls.trigger(I.ERROR,{type:qe.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=Xh(e),i=this.keyIdToKeySessionPromise[t];if(!i){const s=bf(e.keyFormat),r=s?[s]:ad(this.config);return this.attemptKeySystemAccess(r)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=ad(this.config)),e.length===0)throw new Xn({type:qe.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${fi({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaResolved=void 0,this.mediaKeys===t)return Promise.resolve();const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(i).then(()=>this.media?this.media.setMediaKeys(t):new Promise((r,o)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return o(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=t,this.media.setMediaKeys(t).then(r).catch(o)}}));return this.mediaKeys=t,this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),i.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(r=>i.indexOf(r)===-1)})}generateRequestWithPreferredKeySession(e,t,i,s){var r;const o=(r=this.config.drmSystems)==null||(r=r[e.keySystem])==null?void 0:r.generateRequest;if(o)try{const y=o.call(this.hls,t,i,e);if(!y)throw new Error("Invalid response from configured generateRequest filter");t=y.initDataType,i=y.initData?y.initData:null,e.decryptdata.pssh=i?new Uint8Array(i):null}catch(y){if(this.warn(y.message),this.hls&&this.hls.config.debug)throw y}if(i===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const l=Xh(e.decryptdata),d=e.decryptdata.uri;this.log(`Generating key-session request for "${s}" keyId: ${l} URI: ${d} (init data type: ${t} length: ${i.byteLength})`);const u=new Dx,f=e._onmessage=y=>{const w=e.mediaKeysSession;if(!w){u.emit("error",new Error("invalid state"));return}const{messageType:E,message:T}=y;this.log(`"${E}" message event for session "${w.sessionId}" message size: ${T.byteLength}`),E==="license-request"||E==="license-renewal"?this.renewLicense(e,T).catch(k=>{u.eventNames().length?u.emit("error",k):this.handleError(k)}):E==="license-release"?e.keySystem===Ei.FAIRPLAY&&this.updateKeySession(e,Kv("acknowledged")).then(()=>this.removeSession(e)).catch(k=>this.handleError(k)):this.warn(`unhandled media key message type "${E}"`)},p=(y,w)=>{w.keyStatus=y;let E;y.startsWith("usable")?u.emit("resolved"):y==="internal-error"||y==="output-restricted"||y==="output-downscaled"?E=YA(y,w.decryptdata):y==="expired"?E=new Error(`key expired (keyId: ${l})`):y==="released"?E=new Error("key released"):y==="status-pending"||this.warn(`unhandled key status change "${y}" (keyId: ${l})`),E&&(u.eventNames().length?u.emit("error",E):this.handleError(E))},b=e._onkeystatuseschange=y=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}const E=this.getKeyStatuses(e);if(!Object.keys(E).some(O=>E[O]!=="status-pending"))return;if(E[l]==="expired"){this.log(`Expired key ${fi(E)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let k=E[l];if(k)p(k,e);else{var _;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(_=e.keyStatusTimeouts)[l]||(_[l]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const R=this.getKeyStatus(e.decryptdata);if(R&&R!=="status-pending")return this.log(`No status for keyId ${l} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${R} from other session.`),p(R,e);this.log(`key status for ${l} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),k="internal-error",p(k,e)},1e3)),this.log(`No status for keyId ${l} (${fi(E)}).`)}};kn(e.mediaKeysSession,"message",f),kn(e.mediaKeysSession,"keystatuseschange",b);const v=new Promise((y,w)=>{u.on("error",w),u.on("resolved",y)});return e.mediaKeysSession.generateRequest(t,i).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${l} URI: ${d}`)}).catch(y=>{throw new Xn({type:qe.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_NO_SESSION,error:y,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${y}`)}).then(()=>v).catch(y=>(u.removeAllListeners(),this.removeSession(e).then(()=>{throw y}))).then(()=>(u.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((i,s)=>{if(typeof s=="string"&&typeof i=="object"){const l=s;s=i,i=l}const r="buffer"in s?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s);if(e.keySystem===Ei.PLAYREADY&&r.length===16){const l=fn(r);t[l]=i,QL(r)}const o=fn(r);i==="internal-error"&&(this.bannedKeyIds[o]=i),this.log(`key status change "${i}" for keyStatuses keyId: ${o} key-session "${e.mediaKeysSession.sessionId}"`),t[o]=i}),t}fetchServerCertificate(e){const t=this.config,i=t.loader,s=new i(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,l)=>{const d={responseType:"arraybuffer",url:r},u=t.certLoadPolicy.default,f={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(b,v,y,w)=>{o(b.data)},onError:(b,v,y,w)=>{l(new Xn({type:qe.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:ei({url:d.url,data:void 0},b)},`"${e}" certificate request failed (${r}). Status: ${b.code} (${b.text})`))},onTimeout:(b,v,y)=>{l(new Xn({type:qe.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:{url:d.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(b,v,y)=>{l(new Error("aborted"))}};s.load(d,f,p)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise((s,r)=>{e.setServerCertificate(i).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${i.byteLength}) on "${t}"`),s(e)}).catch(o=>{r(new Xn({type:qe.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(i=>this.updateKeySession(e,new Uint8Array(i)).catch(s=>{throw new Xn({type:qe.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:s,fatal:!1},s.message)}))}unpackPlayReadyKeyMessage(e,t){const i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const s=new DOMParser().parseFromString(i,"application/xml"),r=s.querySelectorAll("HttpHeader");if(r.length>0){let f;for(let p=0,b=r.length;p<b;p++){var o,l;f=r[p];const v=(o=f.querySelector("name"))==null?void 0:o.textContent,y=(l=f.querySelector("value"))==null?void 0:l.textContent;v&&y&&e.setRequestHeader(v,y)}}const d=s.querySelector("Challenge"),u=d?.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return Kv(atob(u))}setupLicenseXHR(e,t,i,s){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,t,i,s)}).catch(o=>{if(!i.decryptdata)throw o;return e.open("POST",t,!0),r.call(this.hls,e,t,i,s)}).then(o=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:o||s})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,t){const i=this.config.keyLoadPolicy.default;return new Promise((s,r)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const l=new XMLHttpRequest;l.responseType="arraybuffer",l.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(l.readyState===4)if(l.status===200){this._requestLicenseFailureCount=0;let d=l.response;this.log(`License received ${d instanceof ArrayBuffer?d.byteLength:d}`);const u=this.config.licenseResponseCallback;if(u)try{d=u.call(this.hls,l,o,e)}catch(f){this.error(f)}s(d)}else{const d=i.errorRetry,u=d?d.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||l.status>=400&&l.status<500)r(new Xn({type:qe.KEY_SYSTEM_ERROR,details:le.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:l,response:{url:o,data:void 0,code:l.status,text:l.statusText}},`License Request XHR failed (${o}). Status: ${l.status} (${l.statusText})`));else{const f=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${f} attempts left`),this.requestLicense(e,t).then(s,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=l,this.setupLicenseXHR(l,o,e,t).then(({xhr:d,licenseChallenge:u})=>{e.keySystem==Ei.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(d,u)),d.send(u)}).catch(r)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const i=t.media;this.media=i,kn(i,"encrypted",this.onMediaEncrypted),kn(i,"waitingforkey",this.onWaitingForKey);const s=this.mediaResolved;s?s():this.mediaKeys=i.mediaKeys}onMediaDetached(){const e=this.media;e&&(Un(e,"encrypted",this.onMediaEncrypted),Un(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const t=this.mediaResolved;if(t&&t(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const i=this.media,s=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,$o.clearKeyUriToKeyIdMap();const r=s.length;zl.CDMCleanupPromise=Promise.all(s.map(o=>this.removeSession(o)).concat((i==null||(e=i.setMediaKeys(null))==null?void 0:e.catch(o=>{this.log(`Could not clear media keys: ${o}`),this.hls&&this.hls.trigger(I.ERROR,{type:qe.OTHER_ERROR,details:le.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${o}`)})}))||Promise.resolve())).catch(o=>{this.log(`Could not close sessions and clear media keys: ${o}`),this.hls&&this.hls.trigger(I.ERROR,{type:qe.OTHER_ERROR,details:le.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${o}`)})}).then(()=>{r&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const i=t.reduce((s,r)=>(s.indexOf(r.keyFormat)===-1&&s.push(r.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:i,decryptdata:s}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${fn(s?.keyId||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);r>-1&&this.mediaKeySessions.splice(r,1);const{keyStatusTimeouts:o}=e;o&&Object.keys(o).forEach(u=>self.clearTimeout(o[u]));const{drmSystemOptions:l}=this.config;return(cY(l)?new Promise((u,f)=>{self.setTimeout(()=>f(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(u).catch(f)}):Promise.resolve()).catch(u=>{this.log(`Could not remove session: ${u}`),this.hls&&this.hls.trigger(I.ERROR,{type:qe.OTHER_ERROR,details:le.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${u}`)})}).then(()=>t.close()).catch(u=>{this.log(`Could not close session: ${u}`),this.hls&&this.hls.trigger(I.ERROR,{type:qe.OTHER_ERROR,details:le.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${u}`)})})}return Promise.resolve()}}zl.CDMCleanupPromise=void 0;function Xh(n){if(!n)throw new Error("Could not read keyId of undefined decryptdata");if(n.keyId===null)throw new Error("keyId is null");return fn(n.keyId)}function CQ(n,e){if(n.keyId&&e.mediaKeysSession.keyStatuses.has(n.keyId))return e.mediaKeysSession.keyStatuses.get(n.keyId);if(n.matches(e.decryptdata))return e.keyStatus}class Xn extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function YA(n,e){const t=n==="output-restricted",i=t?le.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:le.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new Xn({type:qe.KEY_SYSTEM_ERROR,details:i,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${n}"`)}class IQ{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(I.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(I.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const s=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,i){const s=performance.now();if(t){if(this.lastTime){const r=s-this.lastTime,o=i-this.lastDroppedFrames,l=t-this.lastDecodedFrames,d=1e3*o/r,u=this.hls;if(u.trigger(I.FPS_DROP,{currentDropped:o,currentDecoded:l,totalDroppedFrames:i}),d>0&&o>u.config.fpsDroppedMonitoringThreshold*l){let f=u.currentLevel;u.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=f)&&(f=f-1,u.trigger(I.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:u.currentLevel}),u.autoLevelCapping=f,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function HD(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function GD(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(i){ti.debug(`[texttrack-utils]: ${i}`);try{const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,n.addCue(s)}catch(s){ti.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}t==="disabled"&&(n.mode=t)}function Cl(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues)for(let i=n.cues.length;i--;)e&&n.cues[i].removeEventListener("enter",e),n.removeCue(n.cues[i]);t==="disabled"&&(n.mode=t)}function ny(n,e,t,i){const s=n.mode;if(s==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const r=LQ(n.cues,e,t);for(let o=0;o<r.length;o++)(!i||i(r[o]))&&n.removeCue(r[o])}s==="disabled"&&(n.mode=s)}function RQ(n,e){if(e<=n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let i=0,s=t,r;for(;i<=s;)if(r=Math.floor((s+i)/2),e<n[r].startTime)s=r-1;else if(e>n[r].startTime&&i<t)i=r+1;else return r;return n[i].startTime-e<e-n[s].startTime?i:s}function LQ(n,e,t){const i=[],s=RQ(n,e);if(s>-1)for(let r=s,o=n.length;r<o;r++){const l=n[r];if(l.startTime>=e&&l.endTime<=t)i.push(l);else if(l.startTime>t)return i}return i}function wf(n){const e=[];for(let t=0;t<n.length;t++){const i=n[t];(i.kind==="subtitles"||i.kind==="captions")&&i.label&&e.push(n[t])}return e}class DQ extends jx{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const i=wf(this.media.textTracks);for(let r=0;r<i.length;r++)if(i[r].mode==="hidden")t=i[r];else if(i[r].mode==="showing"){t=i[r];break}const s=this.findTrackForTextTrack(t);this.subtitleTrack!==s&&this.setSubtitleTrack(s)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVEL_LOADING,this.onLevelLoading,this),e.off(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(I.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const i=this.media;if(!i)return;const s=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||i.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,s)return;wf(i.textTracks).forEach(o=>{Cl(o)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,groupId:s,details:r}=t,o=this.tracksInGroup[i];if(!o||o.groupId!==s){this.warn(`Subtitle track with id:${i} and group:${s} not found in active group ${o?.groupId}`);return}const l=o.details;o.details=t.details,this.log(`Subtitle track ${i} "${o.name}" lang:${o.lang} group:${s} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,l)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.subtitleGroups||null,s=this.groupIds;let r=this.currentTrack;if(!i||s?.length!==i?.length||i!=null&&i.some(o=>s?.indexOf(o)===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(f=>!i||i.indexOf(f.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(f=>f.default)&&(this.selectDefaultTrack=!1),o.forEach((f,p)=>{f.id=p});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.subtitlePreference;if(!r&&l){this.selectDefaultTrack=!1;const f=Zs(l,o);if(f>-1)r=o[f];else{const p=Zs(l,this.tracks);r=this.tracks[p]}}let d=this.findTrackId(r);d===-1&&r&&(d=this.findTrackId(null));const u={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${i?.join(",")}" group-id`),this.hls.trigger(I.SUBTITLE_TRACKS_UPDATED,u),d!==-1&&this.trackId===-1&&this.setSubtitleTrack(d)}}findTrackId(e){const t=this.tracksInGroup,i=this.selectDefaultTrack;for(let s=0;s<t.length;s++){const r=t[s];if(!(i&&!r.default||!i&&!e)&&(!e||ba(r,e)))return s}if(e){for(let s=0;s<t.length;s++){const r=t[s];if(Bd(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<t.length;s++){const r=t[s];if(Bd(e.attrs,r.attrs,["LANGUAGE"]))return s}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if(Jv(s,e))return i}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===At.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const i=this.currentTrack;if(i&&ba(e,i))return i;const s=Zs(e,this.tracksInGroup);if(s>-1){const r=this.tracksInGroup[s];return this.setSubtitleTrack(s),r}else{if(i)return null;{const r=Zs(e,t);if(r>-1)return t[r]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,s=e.groupId,r=this.getUrlWithDirectives(e.url,t),o=e.details,l=o?.age;this.log(`Loading subtitle ${i} "${e.name}" lang:${e.lang} group:${s}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${l&&o.live?" age "+l.toFixed(1)+(o.type&&" "+o.type||""):""} ${r}`),this.hls.trigger(I.SUBTITLE_TRACK_LOADING,{url:r,id:i,groupId:s,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=wf(e.textTracks),i=this.currentTrack;let s;if(i&&(s=t.filter(r=>Jv(i,r))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(t).forEach(r=>{r.mode!=="disabled"&&r!==s&&(r.mode="disabled")}),s){const r=this.subtitleDisplay?"showing":"hidden";s.mode!==r&&(s.mode=r)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Oe(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s){this.hls.trigger(I.SUBTITLE_TRACK_SWITCH,{id:e});return}const r=!!s.details&&!s.details.live;if(e===this.trackId&&s===i&&r)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:o,groupId:l="",name:d,type:u,url:f}=s;this.hls.trigger(I.SUBTITLE_TRACK_SWITCH,{id:o,groupId:l,name:d,type:u,url:f});const p=this.switchParams(s.url,i?.details,s.details);this.loadPlaylist(p)}}function OQ(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(s=="x"?r:r&3|8).toString(16)})}}}function bd(n){let e=5381,t=n.length;for(;t;)e=e*33^n.charCodeAt(--t);return(e>>>0).toString()}const Hl=.025;let Sp=(function(n){return n[n.Point=0]="Point",n[n.Range=1]="Range",n})({});function NQ(n,e,t){return`${n.identifier}-${t+1}-${bd(e)}`}class PQ{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const i=this.playoutLimit;return e<=0||isNaN(i)?!1:i===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>i}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return Ib(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,i=Ib(t,e);return t-i<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=Oe(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return Ib(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Hl))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Sp.Range:Sp.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return MQ(this)}}function Ib(n,e){return n-e.start<e.duration/2&&!(Math.abs(n-(e.start+e.duration))<Hl)?e.start:e.start+e.duration}function VD(n,e,t){const i=new self.URL(n,t);return i.protocol!=="data:"&&i.searchParams.set("_HLS_primary_id",e),i}function Rb(n,e){for(;(t=n.assetList[++e])!=null&&t.error;)var t;return e}function MQ(n){return`["${n.identifier}" ${n.cue.pre?"<pre>":n.cue.post?"<post>":""}${n.timelineStart.toFixed(2)}-${n.resumeTime.toFixed(2)}]`}function Tl(n){const e=n.timelineStart,t=n.duration||0;return`["${n.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class $Q{constructor(e,t,i,s){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(I.PLAYOUT_LIMIT_REACHED,{})};const r=this.hls=new e(t);this.interstitial=i,this.assetItem=s;const o=()=>{this.hasDetails=!0};r.once(I.LEVEL_LOADED,o),r.once(I.AUDIO_TRACK_LOADED,o),r.once(I.SUBTITLE_TRACK_LOADED,o),r.on(I.MEDIA_ATTACHING,(l,{media:d})=>{this.removeMediaListeners(),this.mediaAttached=d,this.interstitial.playoutLimit&&(d.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&r.on(I.BUFFER_APPENDED,()=>{const f=this.bufferedEnd;this.reachedPlayout(f)&&(this._bufferedEosTime=f,r.trigger(I.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=VD(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const i=Math.min(this._bufferedEosTime||1/0,this.duration),s=this.timelineOffset,r=ft.bufferInfo(e,s,0);return this.getAssetTime(r.end)>=i-.02}reachedPlayout(e){const i=this.interstitial.playoutLimit;return this.startOffset+e>=i}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=ft.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const i=t-this.startOffset;if(i>0&&i<e)return i}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const i=e-t;if(Math.abs(i)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,i=this.duration;return Math.min(Math.max(0,e-t),i)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=i=>delete i.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,i){var s;(s=this.hls)==null||s.on(e,t)}once(e,t,i){var s;(s=this.hls)==null||s.once(e,t)}off(e,t,i){var s;(s=this.hls)==null||s.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${Tl(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const XA=.033;class FQ extends ys{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((i,s)=>e<=s.startOffset&&t>s.startOffset?(delete s.error,i+1):i,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let i=-1;e.nextEvent?i=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(i=this.findEventIndex(e.previousEvent.identifier)+1);const s=this.items;if(s)for(s[i]||(t===void 0&&(t=e.start),i=this.findItemIndexAtTime(t));i>=0&&(r=s[i])!=null&&r.event;){var r;i--}return i}findItemIndexAtTime(e,t){const i=this.items;if(i)for(let s=0;s<i.length;s++){let r=i[s];if(t&&t!=="primary"&&(r=r[t]),e===r.start||e>r.start&&e<r.end)return s}return-1}findJumpRestrictedIndex(e,t){const i=this.items;if(i)for(let s=e;s<=t&&i[s];s++){const r=i[s].event;if(r!=null&&r.restrictions.jump&&!r.appendInPlace)return s}return-1}findEventIndex(e){const t=this.items;if(t)for(let s=t.length;s--;){var i;if(((i=t[s].event)==null?void 0:i.identifier)===e)return s}return-1}findAssetIndex(e,t){const i=e.assetList,s=i.length;if(s>1)for(let r=0;r<s;r++){const o=i[r];if(!o.error){const l=o.timelineStart;if(t===l||t>l&&(t<l+(o.duration||0)||r===s-1))return r}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const i=t.assetList,s=i[i.length-1];if(s)return s.identifier}return null}parseInterstitialDateRanges(e,t){const i=e.main.details,{dateRanges:s}=i,r=this.events,o=this.parseDateRanges(s,{url:i.url},t),l=Object.keys(s),d=r?r.filter(u=>!l.includes(u.identifier)):[];o.length&&o.sort((u,f)=>{const p=u.cue.pre,b=u.cue.post,v=f.cue.pre,y=f.cue.post;if(p&&!v)return-1;if(v&&!p||b&&!y)return 1;if(y&&!b)return-1;if(!p&&!v&&!b&&!y){const w=u.startTime,E=f.startTime;if(w!==E)return w-E}return u.dateRange.tagOrder-f.dateRange.tagOrder}),this.events=o,d.forEach(u=>{this.removeEvent(u)}),this.updateSchedule(e,d)}updateSchedule(e,t=[],i=!1){const s=this.events||[];if(s.length||t.length||this.length<2){const r=this.items,o=this.parseSchedule(s,e);(i||t.length||r?.length!==o.length||o.some((d,u)=>Math.abs(d.playout.start-r[u].playout.start)>.005||Math.abs(d.playout.end-r[u].playout.end)>.005))&&(this.items=o,this.onScheduleUpdate(t,r))}}parseDateRanges(e,t,i){const s=[],r=Object.keys(e);for(let o=0;o<r.length;o++){const l=r[o],d=e[l];if(d.isInterstitial){let u=this.eventMap[l];u?u.setDateRange(d):(u=new PQ(d,t),this.eventMap[l]=u,i===!1&&(u.appendInPlace=i)),s.push(u)}}return s}parseSchedule(e,t){const i=[],s=t.main.details,r=s.live?1/0:s.edge;let o=0;if(e=e.filter(d=>!d.error&&!(d.cue.once&&d.hasPlayed)),e.length){this.resolveOffsets(e,t);let d=0,u=0;if(e.forEach((f,p)=>{const b=f.cue.pre,v=f.cue.post,y=e[p-1]||null,w=f.appendInPlace,E=v?r:f.startOffset,T=f.duration,k=f.timelineOccupancy===Sp.Range?T:0,_=f.resumptionOffset,O=y?.startTime===E,R=E+f.cumulativeDuration;let M=w?R+T:E+_;if(b||!v&&E<=0){const N=u;u+=k,f.timelineStart=R;const L=o;o+=T,i.push({event:f,start:R,end:M,playout:{start:L,end:o},integrated:{start:N,end:u}})}else if(E<=r){if(!O){const D=E-d;if(D>XA){const $=d,U=u;u+=D;const G=o;o+=D;const Z={previousEvent:e[p-1]||null,nextEvent:f,start:$,end:$+D,playout:{start:G,end:o},integrated:{start:U,end:u}};i.push(Z)}else D>0&&y&&(y.cumulativeDuration+=D,i[i.length-1].end=E)}v&&(M=R),f.timelineStart=R;const N=u;u+=k;const L=o;o+=T,i.push({event:f,start:R,end:M,playout:{start:L,end:o},integrated:{start:N,end:u}})}else return;const P=f.resumeTime;v||P>r?d=r:d=P}),d<r){var l;const f=d,p=u,b=r-d;u+=b;const v=o;o+=b,i.push({previousEvent:((l=i[i.length-1])==null?void 0:l.event)||null,nextEvent:null,start:d,end:f+b,playout:{start:v,end:o},integrated:{start:p,end:u}})}this.setDurations(r,o,u)}else i.push({previousEvent:null,nextEvent:null,start:0,end:r,playout:{start:0,end:r},integrated:{start:0,end:r}}),this.setDurations(r,r,r);return i}setDurations(e,t,i){this.durations={primary:e,playout:t,integrated:i}}resolveOffsets(e,t){const i=t.main.details,s=i.live?1/0:i.edge;let r=0,o=-1;e.forEach((l,d)=>{const u=l.cue.pre,f=l.cue.post,p=u?0:f?s:l.startTime;this.updateAssetDurations(l),o===p?l.cumulativeDuration=r:(r=0,o=p),!f&&l.snapOptions.in&&(l.resumeAnchor=Aa(null,i.fragments,l.startOffset+l.resumptionOffset,0,0)||void 0),l.appendInPlace&&!l.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(l,t)||(l.appendInPlace=!1)),!l.appendInPlace&&d+1<e.length&&e[d+1].startTime-e[d].resumeTime<XA&&(e[d+1].appendInPlace=!1,e[d+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${l}`));const v=Oe(l.resumeOffset)?l.resumeOffset:l.duration;r+=v})}primaryCanResumeInPlaceAt(e,t){const i=e.resumeTime,s=e.startTime+e.resumptionOffset;return Math.abs(i-s)>Hl?(this.log(`"${e.identifier}" resumption ${i} not aligned with estimated timeline end ${s}`),!1):!Object.keys(t).some(o=>{const l=t[o].details,d=l.edge;if(i>=d)return this.log(`"${e.identifier}" resumption ${i} past ${o} playlist end ${d}`),!1;const u=Aa(null,l.fragments,i);if(!u)return this.log(`"${e.identifier}" resumption ${i} does not align with any fragments in ${o} playlist (${l.fragStart}-${l.fragmentEnd})`),!0;const f=o==="audio"?.175:0;return Math.abs(u.start-i)<Hl+f||Math.abs(u.end-i)<Hl+f?!1:(this.log(`"${e.identifier}" resumption ${i} not aligned with ${o} fragment bounds (${u.start}-${u.end} sn: ${u.sn} cc: ${u.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let i=0,s=!1,r=!1;for(let o=0;o<e.assetList.length;o++){const l=e.assetList[o],d=t+i;l.startOffset=i,l.timelineStart=d,s||(s=l.duration===null),r||(r=!!l.error);const u=l.error?0:l.duration||0;i+=u}s&&!r?e.duration=Math.max(i,e.duration):e.duration=i}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Ts(n){return`[${n.event?'"'+n.event.identifier+'"':"primary"}: ${n.start.toFixed(2)}-${n.end.toFixed(2)}]`}class jQ{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const i=e.assetListUrl;let s;try{s=VD(i,this.hls.sessionId,e.baseUrl)}catch(b){const v=this.assignAssetListError(e,le.ASSET_LIST_LOAD_ERROR,b,i);this.hls.trigger(I.ERROR,v);return}t&&s.protocol!=="data:"&&s.searchParams.set("_HLS_start_offset",""+t);const r=this.hls.config,o=r.loader,l=new o(r),d={responseType:"json",url:s.href},u=r.interstitialAssetListLoadPolicy.default,f={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(b,v,y,w)=>{const E=b.data,T=E?.ASSETS;if(!Array.isArray(T)){const k=this.assignAssetListError(e,le.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),y.url,v,w);this.hls.trigger(I.ERROR,k);return}e.assetListResponse=E,this.hls.trigger(I.ASSET_LIST_LOADED,{event:e,assetListResponse:E,networkDetails:w})},onError:(b,v,y,w)=>{const E=this.assignAssetListError(e,le.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${b.code} ${b.text} (${v.url})`),v.url,w,y);this.hls.trigger(I.ERROR,E)},onTimeout:(b,v,y)=>{const w=this.assignAssetListError(e,le.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${v.url})`),v.url,b,y);this.hls.trigger(I.ERROR,w)}};return l.load(d,f,p),this.hls.trigger(I.ASSET_LIST_LOADING,{event:e}),l}assignAssetListError(e,t,i,s,r,o){return e.error=i,{type:qe.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:s,error:i,networkDetails:o,stats:r}}}function QA(n){var e;n==null||(e=n.play())==null||e.catch(()=>{})}function Qh(n,e){return`[${n}] Advancing timeline position to ${e}`}class BQ extends ys{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled||!this.schedule)return;const s=i-this.timelinePos;if(Math.abs(s)<1/7056e5)return;const o=s<=-.01;this.timelinePos=i,this.bufferedPos=i;const l=this.playingItem;if(!l){this.checkBuffer();return}if(o&&this.schedule.resetErrorsInRange(i,i-s)&&this.updateSchedule(!0),this.checkBuffer(),o&&i<l.start||i>=l.end){var d;const v=this.findItemIndex(l);let y=this.schedule.findItemIndexAtTime(i);if(y===-1&&(y=v+(o?-1:1),this.log(`seeked ${o?"back ":""}to position not covered by schedule ${i} (resolving from ${v} to ${y})`)),!this.isInterstitial(l)&&(d=this.media)!=null&&d.paused&&(this.shouldPlay=!1),!o&&y>v){const w=this.schedule.findJumpRestrictedIndex(v+1,y);if(w>v){this.setSchedulePosition(w);return}}this.setSchedulePosition(y);return}const u=this.playingAsset;if(!u){if(this.playingLastItem&&this.isInterstitial(l)){const v=l.event.assetList[0];v&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(i,v))}return}const f=u.timelineStart,p=u.duration||0;if(o&&i<f||i>=f+p){var b;(b=l.event)!=null&&b.appendInPlace&&(this.clearAssetPlayers(l.event,l),this.flushFrontBuffer(i)),this.setScheduleToAssetAtTime(i,u)}},this.onTimeupdate=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled)return;if(i>this.timelinePos)this.timelinePos=i,i>this.bufferedPos&&this.checkBuffer();else return;const s=this.playingItem;if(!s||this.playingLastItem)return;if(i>=s.end){this.timelinePos=s.end;const l=this.findItemIndex(s);this.setSchedulePosition(l+1)}const r=this.playingAsset;if(!r)return;const o=r.timelineStart+(r.duration||0);i>=o&&this.setScheduleToAssetAtTime(i,r)},this.onScheduleUpdate=(i,s)=>{const r=this.schedule;if(!r)return;const o=this.playingItem,l=r.events||[],d=r.items||[],u=r.durations,f=i.map(w=>w.identifier),p=!!(l.length||f.length);(p||s)&&this.log(`INTERSTITIALS_UPDATED (${l.length}): ${l}
Schedule: ${d.map(w=>Ts(w))} pos: ${this.timelinePos}`),f.length&&this.log(`Removed events ${f}`);let b=null,v=null;o&&(b=this.updateItem(o,this.timelinePos),this.itemsMatch(o,b)?this.playingItem=b:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const y=this.bufferingItem;if(y&&(v=this.updateItem(y,this.bufferedPos),this.itemsMatch(y,v)?this.bufferingItem=v:y.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(y.event,null))),i.forEach(w=>{w.assetList.forEach(E=>{this.clearAssetPlayer(E.identifier,null)})}),this.playerQueue.forEach(w=>{if(w.interstitial.appendInPlace){const E=w.assetItem.timelineStart,T=w.timelineOffset-E;if(T)try{w.timelineOffset=E}catch(k){Math.abs(T)>Hl&&this.warn(`${k} ("${w.assetId}" ${w.timelineOffset}->${E})`)}}}),p||s){if(this.hls.trigger(I.INTERSTITIALS_UPDATED,{events:l.slice(0),schedule:d.slice(0),durations:u,removedIds:f}),this.isInterstitial(o)&&f.includes(o.event.identifier)){this.warn(`Interstitial "${o.event.identifier}" removed while playing`),this.primaryFallback(o.event);return}o&&this.trimInPlace(b,o),y&&v!==b&&this.trimInPlace(v,y),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new jQ(e),this.schedule=new FQ(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(I.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(I.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(I.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(I.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(I.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(I.BUFFER_APPENDED,this.onBufferAppended,this),e.on(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(I.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(I.MEDIA_ENDED,this.onMediaEnded,this),e.on(I.ERROR,this.onError,this),e.on(I.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(I.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(I.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(I.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(I.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(I.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(I.BUFFER_CODECS,this.onBufferCodecs,this),e.off(I.BUFFER_APPENDED,this.onBufferAppended,this),e.off(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(I.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(I.MEDIA_ENDED,this.onMediaEnded,this),e.off(I.ERROR,this.onError,this),e.off(I.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Un(e,"play",this.onPlay),Un(e,"pause",this.onPause),Un(e,"seeking",this.onSeeking),Un(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const i=this.media=t.media;kn(i,"seeking",this.onSeeking),kn(i,"timeupdate",this.onTimeupdate),kn(i,"play",this.onPlay),kn(i,"pause",this.onPause)}onMediaAttached(e,t){const i=this.effectivePlayingItem,s=this.detachedData;if(this.detachedData=null,i===null)this.checkStart();else if(!s){this.clearScheduleState();const r=this.findItemIndex(i);this.setSchedulePosition(r)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const i=!!t.transferMedia,s=this.media;if(this.media=null,!i&&(s&&this.removeMediaListeners(s),this.detachedData)){const r=this.getBufferingPlayer();r&&(this.log(`Removing schedule state for detachedData and ${r}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,r.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,i=p=>p&&e.getAssetPlayer(p.identifier),s=(p,b,v,y,w)=>{if(p){let E=p[b].start;const T=p.event;if(T){if(b==="playout"||T.timelineOccupancy!==Sp.Point){const k=i(v);k?.interstitial===T&&(E+=k.assetItem.startOffset+k[w])}}else{const k=y==="bufferedPos"?o():e[y];E+=k-p.start}return E}return 0},r=(p,b)=>{var v;if(p!==0&&b!=="primary"&&(v=e.schedule)!=null&&v.length){var y;const w=e.schedule.findItemIndexAtTime(p),E=(y=e.schedule.items)==null?void 0:y[w];if(E){const T=E[b].start-E.start;return p+T}}return p},o=()=>{const p=e.bufferedPos;return p===Number.MAX_VALUE?l("primary"):Math.max(p,0)},l=p=>{var b,v;return(b=e.primaryDetails)!=null&&b.live?e.primaryDetails.edge:((v=e.schedule)==null?void 0:v.durations[p])||0},d=(p,b)=>{var v,y;const w=e.effectivePlayingItem;if(w!=null&&(v=w.event)!=null&&v.restrictions.skip||!e.schedule)return;e.log(`seek to ${p} "${b}"`);const E=e.effectivePlayingItem,T=e.schedule.findItemIndexAtTime(p,b),k=(y=e.schedule.items)==null?void 0:y[T],_=e.getBufferingPlayer(),O=_?.interstitial,R=O?.appendInPlace,M=E&&e.itemsMatch(E,k);if(E&&(R||M)){const P=i(e.playingAsset),N=P?.media||e.primaryMedia;if(N){const L=b==="primary"?N.currentTime:s(E,b,e.playingAsset,"timelinePos","currentTime"),D=p-L,$=(R?L:N.currentTime)+D;if($>=0&&(!P||R||$<=P.duration)){N.currentTime=$;return}}}if(k){let P=p;if(b!=="primary"){const L=k[b].start,D=p-L;P=k.start+D}const N=!e.isInterstitial(k);if((!e.isInterstitial(E)||E.event.appendInPlace)&&(N||k.event.appendInPlace)){const L=e.media||(R?_?.media:null);L&&(L.currentTime=P)}else if(E){const L=e.findItemIndex(E);if(T>L){const $=e.schedule.findJumpRestrictedIndex(L+1,T);if($>L){e.setSchedulePosition($);return}}let D=0;if(N)e.timelinePos=P,e.checkBuffer();else{const $=k.event.assetList,U=p-(k[b]||k).start;for(let G=$.length;G--;){const Z=$[G];if(Z.duration&&U>=Z.startOffset&&U<Z.startOffset+Z.duration){D=G;break}}}e.setSchedulePosition(T,D)}}},u=()=>{const p=e.effectivePlayingItem;if(e.isInterstitial(p))return p;const b=t();return e.isInterstitial(b)?b:null},f={get bufferedEnd(){const p=t(),b=e.bufferingItem;if(b&&b===p){var v;return s(b,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-b.playout.start||((v=e.bufferingAsset)==null?void 0:v.startOffset)||0}return 0},get currentTime(){const p=u(),b=e.effectivePlayingItem;return b&&b===p?s(b,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-b.playout.start:0},set currentTime(p){const b=u(),v=e.effectivePlayingItem;v&&v===b&&d(p+v.playout.start,"playout")},get duration(){const p=u();return p?p.playout.end-p.playout.start:0},get assetPlayers(){var p;const b=(p=u())==null?void 0:p.event.assetList;return b?b.map(v=>e.getAssetPlayer(v.identifier)):[]},get playingIndex(){var p;const b=(p=u())==null?void 0:p.event;return b&&e.effectivePlayingAsset?b.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return u()}};return this.manager={get events(){var p;return((p=e.schedule)==null||(p=p.events)==null?void 0:p.slice(0))||[]},get schedule(){var p;return((p=e.schedule)==null||(p=p.items)==null?void 0:p.slice(0))||[]},get interstitialPlayer(){return u()?f:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const p=t();return e.findItemIndex(p)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const p=e.effectivePlayingItem;return e.findItemIndex(p)},primary:{get bufferedEnd(){return o()},get currentTime(){const p=e.timelinePos;return p>0?p:0},set currentTime(p){d(p,"primary")},get duration(){return l("primary")},get seekableStart(){var p;return((p=e.primaryDetails)==null?void 0:p.fragmentStart)||0}},integrated:{get bufferedEnd(){return s(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return s(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(p){d(p,"integrated")},get duration(){return l("integrated")},get seekableStart(){var p;return r(((p=e.primaryDetails)==null?void 0:p.fragmentStart)||0,"integrated")}},skip:()=>{const p=e.effectivePlayingItem,b=p?.event;if(b&&!b.restrictions.skip){const v=e.findItemIndex(p);if(b.appendInPlace){const y=p.playout.start+p.event.duration;d(y+.001,"playout")}else e.advanceAfterAssetEnded(b,v,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,i=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!i?!1:this.findItemIndex(t)===i.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const i=this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&!i.event.appendInPlace)return;let s=this.media;!s&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(s=this.primaryMedia);const r=(t=s)==null?void 0:t.currentTime;if(!(r===void 0||!Oe(r)))return r}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const i=this.getAssetPlayer(e);i&&this.transferMediaFromPlayer(i,t)}transferMediaFromPlayer(e,t){const i=e.interstitial.appendInPlace,s=e.media;if(i&&s===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&s){this.detachedData={media:s};return}const r=e.transferMedia();this.log(`transfer MediaSource from ${e} ${fi(r)}`),this.detachedData=r}else t&&s&&(this.shouldPlay||(this.shouldPlay=!s.paused))}transferMediaTo(e,t){var i,s;if(e.media===t)return;let r=null;const o=this.hls,l=e!==o,d=l&&e.interstitial.appendInPlace,u=(i=this.detachedData)==null?void 0:i.mediaSource;let f;if(o.media)d&&(r=o.transferMedia(),this.detachedData=r),f="Primary";else if(u){const y=this.getBufferingPlayer();y?(r=y.transferMedia(),f=`${y}`):f="detached MediaSource"}else f="detached media";if(!r){if(u)r=this.detachedData,this.log(`using detachedData: MediaSource ${fi(r)}`);else if(!this.detachedData||o.media===t){const y=this.playerQueue;y.length>1&&y.forEach(w=>{if(l&&w.interstitial.appendInPlace!==d){const E=w.interstitial;this.clearInterstitial(w.interstitial,null),E.appendInPlace=!1,E.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${E}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const p=r&&"mediaSource"in r&&((s=r.mediaSource)==null?void 0:s.readyState)!=="closed",b=p&&r?r:t;this.log(`${p?"transfering MediaSource":"attaching media"} to ${l?e:"Primary"} from ${f} (media.currentTime: ${t.currentTime})`);const v=this.schedule;if(b===r&&v){const y=l&&e.assetId===v.assetIdAtEnd;b.overrides={duration:v.duration,endOfStream:!l||y,cueRemoval:!l}}e.attachMedia(b)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e?.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const i=this.timelinePos,s=this.effectivePlayingItem;if(i===-1){const r=this.hls.startPosition;if(this.log(Qh("checkStart",r)),this.timelinePos=r,t.length&&t[0].cue.pre){const o=e.findEventIndex(t[0].identifier);this.setSchedulePosition(o)}else if(r>=0||!this.primaryLive){const o=this.timelinePos=r>0?r:0,l=e.findItemIndexAtTime(o);this.setSchedulePosition(l)}}else if(s&&!this.playingItem){const r=e.findItemIndex(s);this.setSchedulePosition(r)}}advanceAssetBuffering(e,t){const i=e.event,s=i.findAssetIndex(t),r=Rb(i,s);if(!i.isAssetPastPlayoutLimit(r))this.bufferedToEvent(e,r);else if(this.schedule){var o;const l=(o=this.schedule.items)==null?void 0:o[this.findItemIndex(e)+1];l&&this.bufferedToItem(l)}}advanceAfterAssetEnded(e,t,i){const s=Rb(e,i);if(e.isAssetPastPlayoutLimit(s)){if(this.schedule){const r=this.schedule.items;if(r){const o=t+1,l=r.length;if(o>=l){this.setSchedulePosition(-1);return}const d=e.resumeTime;this.timelinePos<d&&(this.log(Qh("advanceAfterAssetEnded",d)),this.timelinePos=d,e.appendInPlace&&this.advanceInPlace(d),this.checkBuffer(this.bufferedPos<d)),this.setSchedulePosition(o)}}}else{if(e.appendInPlace){const r=e.assetList[s];r&&this.advanceInPlace(r.timelineStart)}this.setSchedulePosition(t,s)}}setScheduleToAssetAtTime(e,t){const i=this.schedule;if(!i)return;const s=t.parentIdentifier,r=i.getEvent(s);if(r){const o=i.findEventIndex(s),l=i.findAssetIndex(r,e);this.advanceAfterAssetEnded(r,o,l-1)}}setSchedulePosition(e,t){var i;const s=(i=this.schedule)==null?void 0:i.items;if(!s||this.playbackDisabled)return;const r=e>=0?s[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${r&&Ts(r)}) pos: ${this.timelinePos}`);const o=this.waitingItem||this.playingItem,l=this.playingLastItem;if(this.isInterstitial(o)){const f=o.event,p=this.playingAsset,b=p?.identifier,v=b?this.getAssetPlayer(b):null;if(v&&b&&(!this.eventItemsMatch(o,r)||t!==void 0&&b!==f.assetList[t].identifier)){var d;const y=f.findAssetIndex(p);if(this.log(`INTERSTITIAL_ASSET_ENDED ${y+1}/${f.assetList.length} ${Tl(p)}`),this.endedAsset=p,this.playingAsset=null,this.hls.trigger(I.INTERSTITIAL_ASSET_ENDED,{asset:p,assetListIndex:y,event:f,schedule:s.slice(0),scheduleIndex:e,player:v}),o!==this.playingItem){this.itemsMatch(o,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(f,this.findItemIndex(this.playingItem),y);return}this.retreiveMediaSource(b,r),v.media&&!((d=this.detachedData)!=null&&d.mediaSource)&&v.detachMedia()}if(!this.eventItemsMatch(o,r)&&(this.endedItem=o,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${f} ${Ts(o)}`),f.hasPlayed=!0,this.hls.trigger(I.INTERSTITIAL_ENDED,{event:f,schedule:s.slice(0),scheduleIndex:e}),f.cue.once)){var u;this.updateSchedule();const y=(u=this.schedule)==null?void 0:u.items;if(r&&y){const w=this.findItemIndex(r);this.advanceSchedule(w,y,t,o,l)}return}}this.advanceSchedule(e,s,t,o,l)}advanceSchedule(e,t,i,s,r){const o=this.schedule;if(!o)return;const l=t[e]||null,d=this.primaryMedia,u=this.playerQueue;if(u.length&&u.forEach(f=>{const p=f.interstitial,b=o.findEventIndex(p.identifier);(b<e||b>e+1)&&this.clearInterstitial(p,l)}),this.isInterstitial(l)){this.timelinePos=Math.min(Math.max(this.timelinePos,l.start),l.end);const f=l.event;if(i===void 0){i=o.findAssetIndex(f,this.timelinePos);const y=Rb(f,i-1);if(f.isAssetPastPlayoutLimit(y)||f.appendInPlace&&this.timelinePos===l.end){this.advanceAfterAssetEnded(f,e,i);return}i=y}const p=this.waitingItem;this.assetsBuffered(l,d)||this.setBufferingItem(l);let b=this.preloadAssets(f,i);if(this.eventItemsMatch(l,p||s)||(this.waitingItem=l,this.log(`INTERSTITIAL_STARTED ${Ts(l)} ${f.appendInPlace?"append in place":""}`),this.hls.trigger(I.INTERSTITIAL_STARTED,{event:f,schedule:t.slice(0),scheduleIndex:e})),!f.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${f}`);return}if(f.assetListLoader&&(f.assetListLoader.destroy(),f.assetListLoader=void 0),!d){this.log(`Waiting for attachMedia to start Interstitial ${f}`);return}this.waitingItem=this.endedItem=null,this.playingItem=l;const v=f.assetList[i];if(!v){this.advanceAfterAssetEnded(f,e,i||0);return}if(b||(b=this.getAssetPlayer(v.identifier)),b===null||b.destroyed){const y=f.assetList.length;this.warn(`asset ${i+1}/${y} player destroyed ${f}`),b=this.createAssetPlayer(f,v,i),b.loadSource()}if(!this.eventItemsMatch(l,this.bufferingItem)&&f.appendInPlace&&this.isAssetBuffered(v))return;this.startAssetPlayer(b,i,t,e,d),this.shouldPlay&&QA(b.media)}else l?(this.resumePrimary(l,e,s),this.shouldPlay&&QA(this.hls.media)):r&&this.isInterstitial(s)&&(this.endedItem=null,this.playingItem=s,s.event.appendInPlace||this.attachPrimary(o.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,i){var s,r;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Ts(e)}`),!((s=this.detachedData)!=null&&s.mediaSource)){let l=this.timelinePos;(l<e.start||l>=e.end)&&(l=this.getPrimaryResumption(e,t),this.log(Qh("resumePrimary",l)),this.timelinePos=l),this.attachPrimary(l,e)}if(!i)return;const o=(r=this.schedule)==null?void 0:r.items;o&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Ts(e)}`),this.hls.trigger(I.INTERSTITIALS_PRIMARY_RESUMED,{schedule:o.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const i=e.start;if(this.primaryLive){const s=this.primaryDetails;if(t===0)return this.hls.startPosition;if(s&&(i<s.fragmentStart||i>s.edge))return this.hls.liveSyncPosition||-1}return i}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:ft.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,i){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const s=this.primaryMedia;if(!s)return;const r=this.hls;r.media?this.checkBuffer():(this.transferMediaTo(r,s),i&&this.startLoadingPrimaryAt(e,i)),i||(this.log(Qh("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,i))}startLoadingPrimaryAt(e,t){var i;const s=this.hls;!s.loadingEnabled||!s.media||Math.abs((((i=s.mainForwardBufferInfo)==null?void 0:i.start)||s.media.currentTime)-e)>.5?s.startLoad(e,t):s.bufferingEnabled||s.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(I.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(I.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const i=this.hls.levels[t.level];if(!i.details)return;const s=ei(ei({},this.mediaSelection||this.altSelection),{},{main:i});this.mediaSelection=s,this.schedule.parseInterstitialDateRanges(s,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const i=this.hls.audioTracks[t.id],s=this.mediaSelection;if(!s){this.altSelection=ei(ei({},this.altSelection),{},{audio:i});return}const r=ei(ei({},s),{},{audio:i});this.mediaSelection=r}onSubtitleTrackUpdated(e,t){const i=this.hls.subtitleTracks[t.id],s=this.mediaSelection;if(!s){this.altSelection=ei(ei({},this.altSelection),{},{subtitles:i});return}const r=ei(ei({},s),{},{subtitles:i});this.mediaSelection=r}onAudioTrackSwitching(e,t){const i=oA(t);this.playerQueue.forEach(({hls:s})=>s&&(s.setAudioOption(t)||s.setAudioOption(i)))}onSubtitleTrackSwitch(e,t){const i=oA(t);this.playerQueue.forEach(({hls:s})=>s&&(s.setSubtitleOption(t)||t.id!==-1&&s.setSubtitleOption(i)))}onBufferCodecs(e,t){const i=t.tracks;i&&(this.requiredTracks=i)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const i=this.playingItem;if(i&&!this.itemsMatch(i,this.bufferingItem)&&!this.isInterstitial(i)){const s=this.timelinePos;this.bufferedPos=s,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let s=0;s<t.length;s++){const r=t[s];if(r.cue.post){var i;const o=this.schedule.findEventIndex(r.identifier),l=(i=this.schedule.items)==null?void 0:i[o];this.isInterstitial(l)&&this.eventItemsMatch(l,this.bufferingItem)&&this.bufferedToItem(l,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const i=this.findItemIndex(t);this.setSchedulePosition(i+1)}else this.shouldPlay=!1}updateItem(e,t){var i;const s=(i=this.schedule)==null?void 0:i.items;if(e&&s){const r=this.findItemIndex(e,t);return s[r]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((r,o)=>{e.event.isAssetPastPlayoutLimit(o)&&this.clearAssetPlayer(r.identifier,null)});const i=e.end+.25,s=ft.bufferInfo(this.primaryMedia,i,0);(s.end>i||(s.nextStart||0)>i)&&(this.log(`trim buffered interstitial ${Ts(e)} (was ${Ts(t)})`),this.attachPrimary(i,null,!0),this.flushFrontBuffer(i))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var i;return!!t&&(e===t||e.event.identifier===((i=t.event)==null?void 0:i.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const i=this.mediaSelection;i&&((t=this.schedule)==null||t.updateSchedule(i,[],e))}checkBuffer(e){var t;const i=(t=this.schedule)==null?void 0:t.items;if(!i)return;const s=ft.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=s.len<1),this.updateBufferedPos(s.end,i,e)}updateBufferedPos(e,t,i){const s=this.schedule,r=this.bufferingItem;if(this.bufferedPos>e||!s)return;if(t.length===1&&this.itemsMatch(t[0],r)){this.bufferedPos=e;return}const o=this.playingItem,l=this.findItemIndex(o);let d=s.findItemIndexAtTime(e);if(this.bufferedPos<e){var u;const f=this.findItemIndex(r),p=Math.min(f+1,t.length-1),b=t[p];if((d===-1&&r&&e>=r.end||(u=b.event)!=null&&u.appendInPlace&&e+.01>=b.start)&&(d=p),this.isInterstitial(r)){const v=r.event;if(p-l>1&&v.appendInPlace===!1||v.assetList.length===0&&v.assetListLoader)return}if(this.bufferedPos=e,d>f&&d>l)this.bufferedToItem(b);else{const v=this.primaryDetails;this.primaryLive&&v&&e>v.edge-v.targetduration&&b.start<v.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(b)&&this.preloadAssets(b.event,0)}}else i&&o&&!this.itemsMatch(o,r)&&(d===l?this.bufferedToItem(o):d===l+1&&this.bufferedToItem(t[d]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(s=>{const r=this.getAssetPlayer(s.identifier);return!(r!=null&&r.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,i=this.schedule;if(!this.itemsMatch(e,t)&&i){const{items:s,events:r}=i;if(!s||!r)return t;const o=this.isInterstitial(e),l=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const d=l?l.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Ts(e)}`+(t?` (${d.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(o){const u=i.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((f,p)=>{const b=this.getAssetPlayer(f.identifier);b&&(p===u&&b.loadSource(),b.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(u=>u.pauseBuffering());this.hls.trigger(I.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:r.slice(0),schedule:s.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const i=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(i!==null){this.bufferingAsset=null;const s=this.detachedData;s?s.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),i=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(i)}bufferedToEvent(e,t){const i=e.event,s=i.assetList.length===0&&!i.assetListLoader,r=i.cue.once;if(s||!r){const o=this.preloadAssets(i,t);if(o!=null&&o.interstitial.appendInPlace){const l=this.primaryMedia;l&&this.bufferAssetPlayer(o,l)}}}preloadAssets(e,t){const i=e.assetUrl,s=e.assetList.length,r=s===0&&!e.assetListLoader,o=e.cue.once;if(r){const d=e.timelineStart;if(e.appendInPlace){var l;const b=this.playingItem;!this.isInterstitial(b)&&(b==null||(l=b.nextEvent)==null?void 0:l.identifier)===e.identifier&&this.flushFrontBuffer(d+.25)}let u,f=0;if(!this.playingItem&&this.primaryLive&&(f=this.hls.startPosition,f===-1&&(f=this.hls.liveSyncPosition||0)),f&&!(e.cue.pre||e.cue.post)){const b=f-d;b>0&&(u=Math.round(b*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${i?1:s} ${e}${u?` live-start: ${f} start-offset: ${u}`:""}`),i)return this.createAsset(e,0,0,d,e.duration,i);const p=this.assetListLoader.loadAssetList(e,u);p&&(e.assetListLoader=p)}else if(!o&&s){for(let u=t;u<s;u++){const f=e.assetList[u],p=this.getAssetPlayerQueueIndex(f.identifier);(p===-1||this.playerQueue[p].destroyed)&&!f.error&&this.createAssetPlayer(e,f,u)}const d=e.assetList[t];if(d){const u=this.getAssetPlayer(d.identifier);return u&&u.loadSource(),u}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(s=>{this.hls.trigger(I.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:s})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let i=0;i<t.length;i++)if(e===t[i].assetId)return i;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let i=0;i<e.length;i++)if(e[i].media===t)return e[i]}return null}createAsset(e,t,i,s,r,o){const l={parentIdentifier:e.identifier,identifier:NQ(e,o,t),duration:r,startOffset:i,timelineStart:s,uri:o};return this.createAssetPlayer(e,l,t)}createAssetPlayer(e,t,i){const s=this.hls,r=s.userConfig;let o=r.videoPreference;const l=s.loadLevelObj||s.levels[s.currentLevel];(o||l)&&(o=ai({},o),l.videoCodec&&(o.videoCodec=l.videoCodec),l.videoRange&&(o.allowedVideoRanges=[l.videoRange]));const d=s.audioTracks[s.audioTrack],u=s.subtitleTracks[s.subtitleTrack];let f=0;if(this.primaryLive||e.appendInPlace){const O=this.timelinePos-t.timelineStart;if(O>1){const R=t.duration;R&&O<R&&(f=O)}}const p=t.identifier,b=ei(ei({},r),{},{maxMaxBufferLength:Math.min(180,s.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:s.sessionId,assetPlayerId:p,abrEwmaDefaultEstimate:s.bandwidthEstimate,interstitialsController:void 0,startPosition:f,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:o,audioPreference:d||r.audioPreference,subtitlePreference:u||r.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(b.timelineOffset=t.timelineStart));const v=b.cmcd;v!=null&&v.sessionId&&v.contentId&&(b.cmcd=ai({},v,{contentId:bd(t.uri)})),this.getAssetPlayer(p)&&this.warn(`Duplicate date range identifier ${e} and asset ${p}`);const y=new $Q(this.HlsPlayerClass,b,e,t);this.playerQueue.push(y),e.assetList[i]=t;let w=!0;const E=O=>{if(O.live){var R;const N=new Error(`Interstitials MUST be VOD assets ${e}`),L={fatal:!0,type:qe.OTHER_ERROR,details:le.INTERSTITIAL_ASSET_ITEM_ERROR,error:N},D=((R=this.schedule)==null?void 0:R.findEventIndex(e.identifier))||-1;this.handleAssetItemError(L,e,D,i,N.message);return}const M=O.edge-O.fragmentStart,P=t.duration;(w||P===null||M>P)&&(w=!1,this.log(`Interstitial asset "${p}" duration change ${P} > ${M}`),t.duration=M,this.updateSchedule())};y.on(I.LEVEL_UPDATED,(O,{details:R})=>E(R)),y.on(I.LEVEL_PTS_UPDATED,(O,{details:R})=>E(R)),y.on(I.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const T=(O,R)=>{const M=this.getAssetPlayer(p);if(M&&R.tracks){M.off(I.BUFFER_CODECS,T),M.tracks=R.tracks;const P=this.primaryMedia;this.bufferingAsset===M.assetItem&&P&&!M.media&&this.bufferAssetPlayer(M,P)}};y.on(I.BUFFER_CODECS,T);const k=()=>{var O;const R=this.getAssetPlayer(p);if(this.log(`buffered to end of asset ${R}`),!R||!this.schedule)return;const M=this.schedule.findEventIndex(e.identifier),P=(O=this.schedule.items)==null?void 0:O[M];this.isInterstitial(P)&&this.advanceAssetBuffering(P,t)};y.on(I.BUFFERED_TO_END,k);const _=O=>()=>{if(!this.getAssetPlayer(p)||!this.schedule)return;this.shouldPlay=!0;const M=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,M,O)};return y.once(I.MEDIA_ENDED,_(i)),y.once(I.PLAYOUT_LIMIT_REACHED,_(1/0)),y.on(I.ERROR,(O,R)=>{if(!this.schedule)return;const M=this.getAssetPlayer(p);if(R.details===le.BUFFER_STALLED_ERROR){if(M!=null&&M.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(R,e,this.schedule.findEventIndex(e.identifier),i,`Asset player error ${R.error} ${e}`)}),y.on(I.DESTROYING,()=>{if(!this.getAssetPlayer(p)||!this.schedule)return;const R=new Error(`Asset player destroyed unexpectedly ${p}`),M={fatal:!0,type:qe.OTHER_ERROR,details:le.INTERSTITIAL_ASSET_ITEM_ERROR,error:R};this.handleAssetItemError(M,e,this.schedule.findEventIndex(e.identifier),i,R.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Tl(t)}`),this.hls.trigger(I.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:i,event:e,player:y}),y}clearInterstitial(e,t){this.clearAssetPlayers(e,t),e.reset()}clearAssetPlayers(e,t){e.assetList.forEach(i=>{this.clearAssetPlayer(i.identifier,t)})}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const i=this.playerQueue[t];this.transferMediaFromPlayer(i,null),i.resetDetails()}}clearAssetPlayer(e,t){const i=this.getAssetPlayerQueueIndex(e);if(i!==-1){const s=this.playerQueue[i];this.log(`clear ${s} toSegment: ${t&&Ts(t)}`),this.transferMediaFromPlayer(s,t),this.playerQueue.splice(i,1),s.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,i,s,r){const{interstitial:o,assetItem:l,assetId:d}=e,u=o.assetList.length,f=this.playingAsset;this.endedAsset=null,this.playingAsset=l,(!f||f.identifier!==d)&&(f&&(this.clearAssetPlayer(f.identifier,i[s]),delete f.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${u} ${Tl(l)}`),this.hls.trigger(I.INTERSTITIAL_ASSET_STARTED,{asset:l,assetListIndex:t,event:o,schedule:i.slice(0),scheduleIndex:s,player:e})),this.bufferAssetPlayer(e,r)}bufferAssetPlayer(e,t){var i,s;if(!this.schedule)return;const{interstitial:r,assetItem:o}=e,l=this.schedule.findEventIndex(r.identifier),d=(i=this.schedule.items)==null?void 0:i[l];if(!d)return;e.loadSource(),this.setBufferingItem(d),this.bufferingAsset=o;const u=this.getBufferingPlayer();if(u===e)return;const f=r.appendInPlace;if(f&&u?.interstitial.appendInPlace===!1)return;const p=u?.tracks||((s=this.detachedData)==null?void 0:s.tracks)||this.requiredTracks;if(f&&o!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(p&&!AL(p,e.tracks)){const b=new Error(`Asset ${Tl(o)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(p)}')`),v={fatal:!0,type:qe.OTHER_ERROR,details:le.INTERSTITIAL_ASSET_ITEM_ERROR,error:b},y=r.findAssetIndex(o);this.handleAssetItemError(v,r,l,y,b.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,i=this.primaryMedia;if(!t||!i)return;const s=i.currentTime,r=t.findAssetIndex(e,s),o=e.assetList[r];if(o){const l=this.getAssetPlayer(o.identifier);if(l){const d=l.currentTime||s-o.timelineStart,u=l.duration-d;if(this.warn(`Stalled at ${d} of ${d+u} in ${l} ${e} (media.currentTime: ${s})`),d&&(u/i.playbackRate<.5||l.bufferedInPlaceToEnd(i))&&l.hls){const f=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,f,r)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,i,s,r){if(e.details===le.BUFFER_STALLED_ERROR)return;const o=t.assetList[s]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${o&&Tl(o)} ${e.error}`),!this.schedule)return;const l=o?.identifier||"",d=this.getAssetPlayerQueueIndex(l),u=this.playerQueue[d]||null,f=this.schedule.items,p=ai({},e,{fatal:!1,errorAction:Bl(!0),asset:o,assetListIndex:s,event:t,schedule:f,scheduleIndex:i,player:u});if(this.hls.trigger(I.INTERSTITIAL_ASSET_ERROR,p),!e.fatal)return;const b=this.playingAsset,v=this.bufferingAsset,y=new Error(r);if(o&&(this.clearAssetPlayer(l,null),o.error=y),!t.assetList.some(w=>!w.error))t.error=y;else for(let w=s;w<t.assetList.length;w++)this.resetAssetPlayer(t.assetList[w].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):b&&b.identifier===l?this.advanceAfterAssetEnded(t,i,s):v&&v.identifier===l&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,v)}primaryFallback(e){const t=e.timelineStart,i=this.effectivePlayingItem;let s=this.timelinePos;if(i){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${s} playing: ${Ts(i)} error: ${e.error}`),s===-1&&(s=this.hls.startPosition);const o=this.updateItem(i,s);this.itemsMatch(i,o)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}else if(s===-1){this.checkStart();return}if(!this.schedule)return;const r=this.schedule.findItemIndexAtTime(s);this.setSchedulePosition(r)}onAssetListLoaded(e,t){var i,s;const r=t.event,o=r.identifier,l=t.assetListResponse.ASSETS;if(!((i=this.schedule)!=null&&i.hasEvent(o)))return;const d=r.timelineStart,u=r.duration;let f=0;l.forEach((w,E)=>{const T=parseFloat(w.DURATION);this.createAsset(r,E,f,d+f,T,w.URI),f+=T}),r.duration=f,this.log(`Loaded asset-list with duration: ${f} (was: ${u}) ${r}`);const p=this.waitingItem,b=p?.event.identifier===o;this.updateSchedule();const v=(s=this.bufferingItem)==null?void 0:s.event;if(b){var y;const w=this.schedule.findEventIndex(o),E=(y=this.schedule.items)==null?void 0:y[w];if(E){if(!this.playingItem&&this.timelinePos>E.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==w){r.error=new Error(`Interstitial ${l.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${r}`),this.log(r.error.message),this.updateSchedule(!0),this.primaryFallback(r);return}this.setBufferingItem(E)}this.setSchedulePosition(w)}else if(v?.identifier===o){const w=r.assetList[0];if(w){const E=this.getAssetPlayer(w.identifier);if(v.appendInPlace){const T=this.primaryMedia;E&&T&&this.bufferAssetPlayer(E,T)}else E&&E.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case le.ASSET_LIST_PARSING_ERROR:case le.ASSET_LIST_LOAD_ERROR:case le.ASSET_LIST_LOAD_TIMEOUT:{const i=t.interstitial;i&&(this.updateSchedule(!0),this.primaryFallback(i));break}case le.BUFFER_STALLED_ERROR:{const i=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&i.event.appendInPlace){this.handleInPlaceStall(i.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const ZA=500;class UQ extends Lx{constructor(e,t,i){super(e,t,i,"subtitle-stream-controller",Fe.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(I.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(I.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(I.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(I.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=ve.IDLE,this.setInterval(ZA),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:s}=t;if(this.fragContextChanged(i)||(Pi(i)&&(this.fragPrevious=i),this.state=ve.IDLE),!s)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let o;const l=i.start;for(let u=0;u<r.length;u++)if(l>=r[u].start&&l<=r[u].end){o=r[u];break}const d=i.start+i.duration;o?o.end=d:(o={start:l,end:d},r.push(o)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:i,endOffset:s}=t;if(i===0&&s!==Number.POSITIVE_INFINITY){const r=s-1;if(r<=0)return;t.endOffsetSubtitles=Math.max(0,r),this.tracksBuffered.forEach(o=>{for(let l=0;l<o.length;){if(o[l].end<=r){o.shift();continue}else if(o[l].start<r)o[l].start=r;else break;l++}}),this.fragmentTracker.removeFragmentsInRange(i,r,Fe.SUBTITLE)}}onError(e,t){const i=t.frag;i?.type===Fe.SUBTITLE&&(t.details===le.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ve.STOPPED&&(this.state=ve.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&RD(this.levels,t)){this.levels=t.map(i=>new Md(i));return}this.tracksBuffered=[],this.levels=t.map(i=>{const s=new Md(i);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Fe.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var i;if(this.currentTrackId=t.id,!((i=this.levels)!=null&&i.length)||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.state!==ve.STOPPED&&this.setInterval(ZA)}onSubtitleTrackLoaded(e,t){var i;const{currentTrackId:s,levels:r}=this,{details:o,id:l}=t;if(!r){this.warn(`Subtitle tracks were reset while loading level ${l}`);return}const d=r[l];if(l>=r.length||!d)return;this.log(`Subtitle track ${l} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(o.live||(i=d.details)!=null&&i.live){if(o.deltaUpdateFailed)return;const p=this.mainDetails;if(!p){this.startFragRequested=!1;return}const b=p.fragments[0];if(!d.details)o.hasProgramDateTime&&p.hasProgramDateTime?(xp(o,p),u=o.fragmentStart):b&&(u=b.start,Xv(o,u));else{var f;u=this.alignPlaylists(o,d.details,(f=this.levelLastLoaded)==null?void 0:f.details),u===0&&b&&(u=b.start,Xv(o,u))}p&&!this.startFragRequested&&this.setStartPosition(p,u)}d.details=o,this.levelLastLoaded=d,l===s&&(this.hls.trigger(I.SUBTITLE_TRACK_UPDATED,{details:o,id:l,groupId:t.groupId}),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===ve.IDLE&&(Aa(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),d.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,s=t.decryptdata,r=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&s!=null&&s.key&&s.iv&&Ul(s.method)){const o=performance.now();this.decrypter.decrypt(new Uint8Array(i),s.key.buffer,s.iv.buffer,Ix(s.method)).catch(l=>{throw r.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:t}),l}).then(l=>{const d=performance.now();r.trigger(I.FRAG_DECRYPTED,{frag:t,payload:l,stats:{tstart:o,tdecrypt:d}})}).catch(l=>{this.warn(`${l.name}: ${l.message}`),this.state=ve.IDLE})}}doTick(){if(!this.media){this.state=ve.IDLE;return}if(this.state===ve.IDLE){const{currentTrackId:e,levels:t}=this,i=t?.[e];if(!i||!t.length||!i.details||this.waitForLive(i))return;const{config:s}=this,r=this.getLoadPosition(),o=ft.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,s.maxBufferHole),{end:l,len:d}=o,u=i.details,f=this.hls.maxBufferLength+u.levelTargetDuration;if(d>f)return;const p=u.fragments,b=p.length,v=u.edge;let y=null;const w=this.fragPrevious;if(l<v){const k=s.maxFragLookUpTolerance,_=l>v-k?0:k;y=Aa(w,p,Math.max(p[0].start,l),_),!y&&w&&w.start<p[0].start&&(y=p[0])}else y=p[b-1];if(y=this.filterReplacedPrimary(y,i.details),!y)return;const E=y.sn-u.startSN,T=p[E-1];if(T&&T.cc===y.cc&&this.fragmentTracker.getState(T)===qi.NOT_LOADED&&(y=T),this.fragmentTracker.getState(y)===qi.NOT_LOADED){const k=this.mapToInitFragWhenRequired(y);k&&this.loadFragment(k,i,l)}}}loadFragment(e,t,i){Pi(e)?super.loadFragment(e,t,i):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new zQ(this.tracksBuffered[this.currentTrackId]||[])}}class zQ{constructor(e){this.buffered=void 0;const t=(i,s,r)=>{if(s=s>>>0,s>r-1)throw new DOMException(`Failed to execute '${i}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${r})`);return e[s][i]};this.buffered={get length(){return e.length},end(i){return t("end",i,e.length)},start(i){return t("start",i,e.length)}}}}const HQ={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},qD=n=>String.fromCharCode(HQ[n]||n),ks=15,Tr=100,GQ={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},VQ={17:2,18:4,21:6,22:8,23:10,19:13,20:15},qQ={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},WQ={25:2,26:4,29:6,30:8,31:10,27:13,28:15},KQ=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class YQ{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i=typeof t=="function"?t():t;ti.log(`${this.time} [${e}] ${i}`)}}}const ca=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class WD{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const s=t[i];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class XQ{constructor(){this.uchar=" ",this.penState=new WD}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class QQ{constructor(e){this.chars=[],this.pos=0,this.currPenState=new WD,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Tr;t++)this.chars.push(new XQ);this.logger=e}equals(e){for(let t=0;t<Tr;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Tr;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Tr;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Tr&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Tr)}moveCursor(e){const t=this.pos+e;if(e>1)for(let i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=qD(e);if(this.pos>=Tr){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Tr;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<Tr;i++){const s=this.chars[i].uchar;s!==" "&&(t=!1),e.push(s)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Lb{constructor(e){this.rows=[],this.currRow=ks-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<ks;t++)this.rows.push(new QQ(e));this.logger=e}reset(){for(let e=0;e<ks;e++)this.rows[e].clear();this.currRow=ks-1}equals(e){let t=!0;for(let i=0;i<ks;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<ks;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<ks;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+fi(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let l=0;l<ks;l++)this.rows[l].clear();const r=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const l=o.rows[r].cueStartTime,d=this.logger.time;if(l!==null&&d!==null&&l<d)for(let u=0;u<this.nrRollUpRows;u++)this.rows[t-this.nrRollUpRows+u+1].copy(o.rows[r+u])}}this.currRow=t;const i=this.rows[this.currRow];if(e.indent!==null){const r=e.indent,o=Math.max(r-1,0);i.setCursor(e.indent),e.color=i.chars[o].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+fi(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",s=-1;for(let r=0;r<ks;r++){const o=this.rows[r].getTextString();o&&(s=r+1,e?t.push("Row "+s+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(e?i="["+t.join(" | ")+"]":i=t.join(`
`)),i}getTextAndFormat(){return this.rows}}class JA{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Lb(i),this.nonDisplayedMemory=new Lb(i),this.lastOutputScreen=new Lb(i),this.currRollUpRow=this.displayedMemory.rows[ks-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[ks-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=s[i]}this.logger.log(2,"MIDROW: "+fi(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class eC{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=JQ(),this.logger=void 0;const s=this.logger=new YQ;this.channels=[null,new JA(e,t,s),new JA(e+1,i,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let i=0;i<t.length;i+=2){const s=t[i]&127,r=t[i+1]&127;let o=!1,l=null;if(s===0&&r===0)continue;this.logger.log(3,()=>"["+ca([t[i],t[i+1]])+"] -> ("+ca([s,r])+")");const d=this.cmdHistory;if(s>=16&&s<=31){if(ZQ(s,r,d)){Zh(null,null,d),this.logger.log(3,()=>"Repeated command ("+ca([s,r])+") is dropped");continue}Zh(s,r,this.cmdHistory),o=this.parseCmd(s,r),o||(o=this.parseMidrow(s,r)),o||(o=this.parsePAC(s,r)),o||(o=this.parseBackgroundAttributes(s,r))}else Zh(null,null,d);if(!o&&(l=this.parseChars(s,r),l)){const f=this.currentChannel;f&&f>0?this.channels[f].insertChars(l):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!l&&this.logger.log(2,()=>"Couldn't parse cleaned data "+ca([s,r])+" orig: "+ca([t[i],t[i+1]]))}}parseCmd(e,t){const i=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=33&&t<=35;if(!(i||s))return!1;const r=e===20||e===21||e===23?1:2,o=this.channels[r];return e===20||e===21||e===28||e===29?t===32?o.ccRCL():t===33?o.ccBS():t===34?o.ccAOF():t===35?o.ccAON():t===36?o.ccDER():t===37?o.ccRU(2):t===38?o.ccRU(3):t===39?o.ccRU(4):t===40?o.ccFON():t===41?o.ccRDC():t===42?o.ccTR():t===43?o.ccRTD():t===44?o.ccEDM():t===45?o.ccCR():t===46?o.ccENM():t===47&&o.ccEOC():o.ccTO(t-32),this.currentChannel=r,!0}parseMidrow(e,t){let i=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?i=1:i=2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[i];return s?(s.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+ca([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let i;const s=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,r=(e===16||e===24)&&t>=64&&t<=95;if(!(s||r))return!1;const o=e<=23?1:2;t>=64&&t<=95?i=o===1?GQ[e]:qQ[e]:i=o===1?VQ[e]:WQ[e];const l=this.channels[o];return l?(l.setPAC(this.interpretPAC(i,t)),this.currentChannel=o,!0):!1}interpretPAC(e,t){let i;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?i=t-96:i=t-64,s.underline=(i&1)===1,i<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((i-16)/2)*4,s}parseChars(e,t){let i,s=null,r=null;if(e>=25?(i=2,r=e-8):(i=1,r=e),r>=17&&r<=19){let o;r===17?o=t+80:r===18?o=t+112:o=t+144,this.logger.log(2,()=>"Special char '"+qD(o)+"' in channel "+i),s=[o]}else e>=32&&e<=127&&(s=t===0?[e]:[e,t]);return s&&this.logger.log(3,()=>"Char codes =  "+ca(s).join(",")),s}parseBackgroundAttributes(e,t){const i=(e===16||e===24)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=45&&t<=47;if(!(i||s))return!1;let r;const o={};e===16||e===24?(r=Math.floor((t-32)/2),o.background=KQ[r],t%2===1&&(o.background=o.background+"_semi")):t===45?o.background="transparent":(o.foreground="black",t===47&&(o.underline=!0));const l=e<=23?1:2;return this.channels[l].setBkgData(o),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Zh(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function Zh(n,e,t){t.a=n,t.b=e}function ZQ(n,e,t){return t.a===n&&t.b===e}function JQ(){return{a:null,b:null}}var Hx=(function(){if(yp!=null&&yp.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(l,d){if(typeof d!="string"||!Array.isArray(l))return!1;const u=d.toLowerCase();return~l.indexOf(u)?u:!1}function i(l){return t(n,l)}function s(l){return t(e,l)}function r(l,...d){let u=1;for(;u<arguments.length;u++){const f=arguments[u];for(const p in f)l[p]=f[p]}return l}function o(l,d,u){const f=this,p={enumerable:!0};f.hasBeenReset=!1;let b="",v=!1,y=l,w=d,E=u,T=null,k="",_=!0,O="auto",R="start",M=50,P="middle",N=50,L="middle";Object.defineProperty(f,"id",r({},p,{get:function(){return b},set:function(D){b=""+D}})),Object.defineProperty(f,"pauseOnExit",r({},p,{get:function(){return v},set:function(D){v=!!D}})),Object.defineProperty(f,"startTime",r({},p,{get:function(){return y},set:function(D){if(typeof D!="number")throw new TypeError("Start time must be set to a number.");y=D,this.hasBeenReset=!0}})),Object.defineProperty(f,"endTime",r({},p,{get:function(){return w},set:function(D){if(typeof D!="number")throw new TypeError("End time must be set to a number.");w=D,this.hasBeenReset=!0}})),Object.defineProperty(f,"text",r({},p,{get:function(){return E},set:function(D){E=""+D,this.hasBeenReset=!0}})),Object.defineProperty(f,"region",r({},p,{get:function(){return T},set:function(D){T=D,this.hasBeenReset=!0}})),Object.defineProperty(f,"vertical",r({},p,{get:function(){return k},set:function(D){const $=i(D);if($===!1)throw new SyntaxError("An invalid or illegal string was specified.");k=$,this.hasBeenReset=!0}})),Object.defineProperty(f,"snapToLines",r({},p,{get:function(){return _},set:function(D){_=!!D,this.hasBeenReset=!0}})),Object.defineProperty(f,"line",r({},p,{get:function(){return O},set:function(D){if(typeof D!="number"&&D!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");O=D,this.hasBeenReset=!0}})),Object.defineProperty(f,"lineAlign",r({},p,{get:function(){return R},set:function(D){const $=s(D);if(!$)throw new SyntaxError("An invalid or illegal string was specified.");R=$,this.hasBeenReset=!0}})),Object.defineProperty(f,"position",r({},p,{get:function(){return M},set:function(D){if(D<0||D>100)throw new Error("Position must be between 0 and 100.");M=D,this.hasBeenReset=!0}})),Object.defineProperty(f,"positionAlign",r({},p,{get:function(){return P},set:function(D){const $=s(D);if(!$)throw new SyntaxError("An invalid or illegal string was specified.");P=$,this.hasBeenReset=!0}})),Object.defineProperty(f,"size",r({},p,{get:function(){return N},set:function(D){if(D<0||D>100)throw new Error("Size must be between 0 and 100.");N=D,this.hasBeenReset=!0}})),Object.defineProperty(f,"align",r({},p,{get:function(){return L},set:function(D){const $=s(D);if(!$)throw new SyntaxError("An invalid or illegal string was specified.");L=$,this.hasBeenReset=!0}})),f.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o})();class eZ{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function KD(n){function e(i,s,r,o){return(i|0)*3600+(s|0)*60+(r|0)+parseFloat(o||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class tZ{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let s=0;s<i.length;++s)if(t===i[s]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function YD(n,e,t,i){const s=i?n.split(i):[n];for(const r in s){if(typeof s[r]!="string")continue;const o=s[r].split(t);if(o.length!==2)continue;const l=o[0],d=o[1];e(l,d)}}const sy=new Hx(0,0,""),Jh=sy.align==="middle"?"middle":"center";function iZ(n,e,t){const i=n;function s(){const l=KD(n);if(l===null)throw new Error("Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),l}function r(l,d){const u=new tZ;YD(l,function(b,v){let y;switch(b){case"region":for(let w=t.length-1;w>=0;w--)if(t[w].id===v){u.set(b,t[w].region);break}break;case"vertical":u.alt(b,v,["rl","lr"]);break;case"line":y=v.split(","),u.integer(b,y[0]),u.percent(b,y[0])&&u.set("snapToLines",!1),u.alt(b,y[0],["auto"]),y.length===2&&u.alt("lineAlign",y[1],["start",Jh,"end"]);break;case"position":y=v.split(","),u.percent(b,y[0]),y.length===2&&u.alt("positionAlign",y[1],["start",Jh,"end","line-left","line-right","auto"]);break;case"size":u.percent(b,v);break;case"align":u.alt(b,v,["start",Jh,"end","left","right"]);break}},/:/,/\s/),d.region=u.get("region",null),d.vertical=u.get("vertical","");let f=u.get("line","auto");f==="auto"&&sy.line===-1&&(f=-1),d.line=f,d.lineAlign=u.get("lineAlign","start"),d.snapToLines=u.get("snapToLines",!0),d.size=u.get("size",100),d.align=u.get("align",Jh);let p=u.get("position","auto");p==="auto"&&sy.position===50&&(p=d.align==="start"||d.align==="left"?0:d.align==="end"||d.align==="right"?100:50),d.position=p}function o(){n=n.replace(/^\s+/,"")}if(o(),e.startTime=s(),o(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);n=n.slice(3),o(),e.endTime=s(),o(),r(n,e)}function XD(n){return n.replace(/<br(?: \/)?>/gi,`
`)}class nZ{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new eZ,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function i(){let r=t.buffer,o=0;for(r=XD(r);o<r.length&&r[o]!=="\r"&&r[o]!==`
`;)++o;const l=r.slice(0,o);return r[o]==="\r"&&++o,r[o]===`
`&&++o,t.buffer=r.slice(o),l}function s(r){YD(r,function(o,l){},/:/)}try{let r="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;r=i();const l=r.match(/^()?WEBVTT([ \t].*)?$/);if(!(l!=null&&l[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let o=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:r=i(),t.state){case"HEADER":/:/.test(r)?s(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;if(t.cue=new Hx(0,0,""),t.state="CUE",r.indexOf("-->")===-1){t.cue.id=r;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{iZ(r,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const l=r.indexOf("-->")!==-1;if(!r||l&&(o=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=r}continue;case"BADCUE":r||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const sZ=/\r\n|\n\r|\n|\r/g,Db=function(e,t,i=0){return e.slice(i,i+t.length)===t},rZ=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Oe(t)||!Oe(i)||!Oe(s)||!Oe(r))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=60*1e3*s,t+=3600*1e3*r,t};function Gx(n,e,t){return bd(n.toString())+bd(e.toString())+bd(t)}const oZ=function(e,t,i){let s=e[t],r=e[s.prevCC];if(!r||!r.new&&s.new){e.ccOffset=e.presentationOffset=s.start,s.new=!1;return}for(;(o=r)!=null&&o.new;){var o;e.ccOffset+=s.start-r.start,s.new=!1,s=r,r=e[s.prevCC]}e.presentationOffset=i};function aZ(n,e,t,i,s,r,o){const l=new nZ,d=ns(new Uint8Array(n)).trim().replace(sZ,`
`).split(`
`),u=[],f=e?fX(e.baseTime,e.timescale):0;let p="00:00.000",b=0,v=0,y,w=!0;l.oncue=function(E){const T=t[i];let k=t.ccOffset;const _=(b-f)/9e4;if(T!=null&&T.new&&(v!==void 0?k=t.ccOffset=T.start:oZ(t,i,_)),_){if(!e){y=new Error("Missing initPTS for VTT MPEGTS");return}k=_-t.presentationOffset}const O=E.endTime-E.startTime,R=Zn((E.startTime+k-v)*9e4,s*9e4)/9e4;E.startTime=Math.max(R,0),E.endTime=Math.max(R+O,0);const M=E.text.trim();E.text=decodeURIComponent(encodeURIComponent(M)),E.id||(E.id=Gx(E.startTime,E.endTime,M)),E.endTime>0&&u.push(E)},l.onparsingerror=function(E){y=E},l.onflush=function(){if(y){o(y);return}r(u)},d.forEach(E=>{if(w)if(Db(E,"X-TIMESTAMP-MAP=")){w=!1,E.slice(16).split(",").forEach(T=>{Db(T,"LOCAL:")?p=T.slice(6):Db(T,"MPEGTS:")&&(b=parseInt(T.slice(7)))});try{v=rZ(p)/1e3}catch(T){y=T}return}else E===""&&(w=!1);l.parse(E+`
`)}),l.flush()}const Ob="stpp.ttml.im1t",QD=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ZD=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,lZ={left:"start",center:"center",right:"end",start:"start",end:"end"};function tC(n,e,t,i){const s=_t(new Uint8Array(n),["mdat"]);if(s.length===0){i(new Error("Could not parse IMSC1 mdat"));return}const r=s.map(l=>ns(l)),o=hX(e.baseTime,1,e.timescale);try{r.forEach(l=>t(cZ(l,o)))}catch(l){i(l)}}function cZ(n,e){const s=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(r).reduce((p,b)=>(p[b]=s.getAttribute(`ttp:${b}`)||r[b],p),{}),l=s.getAttribute("xml:space")!=="preserve",d=iC(Nb(s,"styling","style")),u=iC(Nb(s,"layout","region")),f=Nb(s,"body","[begin]");return[].map.call(f,p=>{const b=JD(p,l);if(!b||!p.hasAttribute("begin"))return null;const v=Mb(p.getAttribute("begin"),o),y=Mb(p.getAttribute("dur"),o);let w=Mb(p.getAttribute("end"),o);if(v===null)throw nC(p);if(w===null){if(y===null)throw nC(p);w=v+y}const E=new Hx(v-e,w-e,b);E.id=Gx(E.startTime,E.endTime,E.text);const T=u[p.getAttribute("region")],k=d[p.getAttribute("style")],_=dZ(T,k,d),{textAlign:O}=_;if(O){const R=lZ[O];R&&(E.lineAlign=R),E.align=O}return ai(E,_),E}).filter(p=>p!==null)}function Nb(n,e,t){const i=n.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(t)):[]}function iC(n){return n.reduce((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function JD(n,e){return[].slice.call(n.childNodes).reduce((t,i,s)=>{var r;return i.nodeName==="br"&&s?t+`
`:(r=i.childNodes)!=null&&r.length?JD(i,e):e?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}function dZ(n,e,t){const i="http://www.w3.org/ns/ttml#styling";let s=null;const r=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return o&&t.hasOwnProperty(o)&&(s=t[o]),r.reduce((l,d)=>{const u=Pb(e,i,d)||Pb(n,i,d)||Pb(s,i,d);return u&&(l[d]=u),l},{})}function Pb(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function nC(n){return new Error(`Could not parse ttml timestamp ${n}`)}function Mb(n,e){if(!n)return null;let t=KD(n);return t===null&&(QD.test(n)?t=uZ(n,e):ZD.test(n)&&(t=hZ(n,e))),t}function uZ(n,e){const t=QD.exec(n),i=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+i/e.frameRate}function hZ(n,e){const t=ZD.exec(n),i=Number(t[1]);switch(t[2]){case"h":return i*3600;case"m":return i*60;case"ms":return i*1e3;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}class ef{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class fZ{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=rC(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(I.FRAG_LOADING,this.onFragLoading,this),e.on(I.FRAG_LOADED,this.onFragLoaded,this),e.on(I.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(I.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(I.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(I.FRAG_LOADING,this.onFragLoading,this),e.off(I.FRAG_LOADED,this.onFragLoaded,this),e.off(I.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(I.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(I.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new ef(this,"textTrack1"),t=new ef(this,"textTrack2"),i=new ef(this,"textTrack3"),s=new ef(this,"textTrack4");this.cea608Parser1=new eC(1,e,t),this.cea608Parser2=new eC(3,i,s)}addCues(e,t,i,s,r){let o=!1;for(let l=r.length;l--;){const d=r[l],u=pZ(d[0],d[1],t,i);if(u>=0&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],i),o=!0,u/(i-t)>.5))return}if(o||r.push([t,i]),this.config.renderTextTracksNatively){const l=this.captionsTracks[e];this.Cues.newCue(l,t,i,s)}else{const l=this.Cues.newCue(null,t,i,s);this.hls.trigger(I.CUES_PARSED,{type:"captions",cues:l,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:r,trackId:o}){const{unparsedVttFrags:l}=this;i===Fe.MAIN&&(this.initPTS[t.cc]={baseTime:s,timescale:r,trackId:o}),l.length&&(this.unparsedVttFrags=[],l.forEach(d=>{this.initPTS[d.frag.cc]?this.onFragLoaded(I.FRAG_LOADED,d):this.hls.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:d.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:i}=this;if(i)for(let s=0;s<i.textTracks.length;s++){const r=i.textTracks[s];if(sC(r,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:s}=this,{label:r,languageCode:o}=t[e],l=this.getExistingTrack(r,o);if(l)i[e]=l,Cl(i[e]),HD(i[e],s);else{const d=this.createTextTrack("captions",r,o);d&&(d[e]=!0,i[e]=d)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const i=t.label,s={_id:e,label:i,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(I.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,t,i){const s=this.media;if(s)return s.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const i=!!t.transferMedia;if(this.media=null,i)return;const{captionsTracks:s}=this;Object.keys(s).forEach(r=>{Cl(s[r]),delete s[r]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=rC(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let i=0;i<t.length;i++)Cl(t[i])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],s=i.some(r=>r.textCodec===Ob);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(RD(this.tracks,i)){this.tracks=i;return}if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const o=this.media,l=o?wf(o.textTracks):null;if(this.tracks.forEach((d,u)=>{let f;if(l){let p=null;for(let b=0;b<l.length;b++)if(l[b]&&sC(l[b],d)){p=l[b],l[b]=null;break}p&&(f=p)}if(f)Cl(f);else{const p=eO(d);f=this.createTextTrack(p,d.name,d.lang),f&&(f.mode="disabled")}f&&this.textTracks.push(f)}),l!=null&&l.length){const d=l.filter(u=>u!==null).map(u=>u.label);d.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${d.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(l=>({label:l.name,kind:l.type.toLowerCase(),default:l.default,subtitleTrack:l}));this.hls.trigger(I.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(i=>{const s=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!s)return;const r=`textTrack${s[1]}`,o=this.captionsProperties[r];o&&(o.label=i.name,i.lang&&(o.languageCode=i.lang),o.media=i)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Fe.MAIN){var i,s;const{cea608Parser1:r,cea608Parser2:o,lastSn:l}=this,{cc:d,sn:u}=t.frag,f=(i=(s=t.part)==null?void 0:s.index)!=null?i:-1;r&&o&&(u!==l+1||u===l&&f!==this.lastPartIndex+1||d!==this.lastCc)&&(r.reset(),o.reset()),this.lastCc=d,this.lastSn=u,this.lastPartIndex=f}}onFragLoaded(e,t){const{frag:i,payload:s}=t;if(i.type===Fe.SUBTITLE)if(s.byteLength){const r=i.decryptdata,o="stats"in t;if(r==null||!r.encrypted||o){const l=this.tracks[i.level],d=this.vttCCs;d[i.cc]||(d[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),l&&l.textCodec===Ob?this._parseIMSC1(i,s):this._parseVTTs(t)}}else this.hls.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;tC(t,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),i.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{i.logger.log(`Failed to parse IMSC1: ${s}`),i.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e){var t;const{frag:i,payload:s}=e,{initPTS:r,unparsedVttFrags:o}=this,l=r.length-1;if(!r[i.cc]&&l===-1){o.push(e);return}const d=this.hls,u=(t=i.initSegment)!=null&&t.data?bs(i.initSegment.data,new Uint8Array(s)).buffer:s;aZ(u,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,f=>{this._appendCues(f,i.level),d.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},f=>{const p=f.message==="Missing initPTS for VTT MPEGTS";p?o.push(e):this._fallbackToIMSC1(i,s),d.logger.log(`Failed to parse VTT cue: ${f}`),!(p&&l>i.cc)&&d.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:f})})}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||tC(t,this.initPTS[e.cc],()=>{i.textCodec=Ob,this._parseIMSC1(e,t)},()=>{i.textCodec="wvtt"})}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[t];if(!s||s.mode==="disabled")return;e.forEach(r=>GD(s,r))}else{const s=this.tracks[t];if(!s)return;const r=s.default?"default":"subtitles"+t;i.trigger(I.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===Fe.SUBTITLE&&this.onFragLoaded(I.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:i,samples:s}=t;if(!(i.type===Fe.MAIN&&this.closedCaptionsForLevel(i)==="NONE"))for(let r=0;r<s.length;r++){const o=s[r].bytes;if(o){this.cea608Parser1||this.initCea608Parsers();const l=this.extractCea608Data(o);this.cea608Parser1.addData(s[r].pts,l[0]),this.cea608Parser2.addData(s[r].pts,l[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:s,type:r}){const{media:o}=this;if(!(!o||o.currentTime<i)){if(!r||r==="video"){const{captionsTracks:l}=this;Object.keys(l).forEach(d=>ny(l[d],t,i))}if(this.config.renderTextTracksNatively&&t===0&&s!==void 0){const{textTracks:l}=this;Object.keys(l).forEach(d=>ny(l[d],t,s))}}}extractCea608Data(e){const t=[[],[]],i=e[0]&31;let s=2;for(let r=0;r<i;r++){const o=e[s++],l=127&e[s++],d=127&e[s++];if(l===0&&d===0)continue;if((4&o)!==0){const f=3&o;(f===0||f===1)&&(t[f].push(l),t[f].push(d))}}return t}}function eO(n){return n.characteristics&&/transcribes-spoken-dialog/gi.test(n.characteristics)&&/describes-music-and-sound/gi.test(n.characteristics)?"captions":"subtitles"}function sC(n,e){return!!n&&n.kind===eO(e)&&Jv(e,n)}function pZ(n,e,t,i){return Math.min(e,i)-Math.max(n,t)}function rC(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const mZ=/\s/,gZ={newCue(n,e,t,i){const s=[];let r,o,l,d,u;const f=self.VTTCue||self.TextTrackCue;for(let b=0;b<i.rows.length;b++)if(r=i.rows[b],l=!0,d=0,u="",!r.isEmpty()){var p;for(let w=0;w<r.chars.length;w++)mZ.test(r.chars[w].uchar)&&l?d++:(u+=r.chars[w].uchar,l=!1);r.cueStartTime=e,e===t&&(t+=1e-4),d>=16?d--:d++;const v=XD(u.trim()),y=Gx(e,t,v);n!=null&&(p=n.cues)!=null&&p.getCueById(y)||(o=new f(e,t,v),o.id=y,o.line=b+1,o.align="left",o.position=10+Math.min(80,Math.floor(d*8/32)*10),s.push(o))}return n&&s.length&&(s.sort((b,v)=>b.line==="auto"||v.line==="auto"?0:b.line>8&&v.line>8?v.line-b.line:b.line-v.line),s.forEach(b=>GD(n,b))),s}};function bZ(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const vZ=/(\d+)-(\d+)\/(\d+)/;class oC{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||SZ,this.controller=new self.AbortController,this.stats=new Sx}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const r=yZ(e,this.controller.signal),o=e.responseType==="arraybuffer",l=o?"byteLength":"length",{maxTimeToFirstByteMs:d,maxLoadTimeMs:u}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),t.timeout=d&&Oe(d)?d:u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},t.timeout),(jd(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(p=>{var b;this.response=this.loader=p;const v=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},u-(v-s.loading.start)),!p.ok){const{status:w,statusText:E}=p;throw new EZ(E||"fetch, bad network response",w,p)}s.loading.first=v,s.total=wZ(p.headers)||s.total;const y=(b=this.callbacks)==null?void 0:b.onProgress;return y&&Oe(t.highWaterMark)?this.loadProgressively(p,s,e,t.highWaterMark,y):o?p.arrayBuffer():e.responseType==="json"?p.json():p.text()}).then(p=>{var b,v;const y=this.response;if(!y)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const w=p[l];w&&(s.loaded=s.total=w);const E={url:y.url,data:p,code:y.status},T=(b=this.callbacks)==null?void 0:b.onProgress;T&&!Oe(t.highWaterMark)&&T(s,e,p,y),(v=this.callbacks)==null||v.onSuccess(E,s,e,y)}).catch(p=>{var b;if(self.clearTimeout(this.requestTimeout),s.aborted)return;const v=p&&p.code||0,y=p?p.message:null;(b=this.callbacks)==null||b.onError({code:v,text:y},e,p?p.details:null,s)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,s=0,r){const o=new dD,l=e.body.getReader(),d=()=>l.read().then(u=>{if(u.done)return o.dataLength&&r(t,i,o.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const f=u.value,p=f.length;return t.loaded+=p,p<s||o.dataLength?(o.push(f),o.dataLength>=s&&r(t,i,o.flush().buffer,e)):r(t,i,f.buffer,e),d()}).catch(()=>Promise.reject());return d()}}function yZ(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(ai({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function xZ(n){const e=vZ.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function wZ(n){const e=n.get("Content-Range");if(e){const i=xZ(e);if(Oe(i))return i}const t=n.get("Content-Length");if(t)return parseInt(t)}function SZ(n,e){return new self.Request(n.url,e)}class EZ extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const TZ=/^age:\s*[\d.]+\s*$/im;class tO{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Sx,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const i=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then(()=>{if(!(this.loader!==i||this.stats.aborted))return r(i,t.url)}).catch(o=>{if(!(this.loader!==i||this.stats.aborted))return i.open("GET",t.url,!0),r(i,t.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,t,e)}).catch(o=>{var l;(l=this.callbacks)==null||l.onError({code:i.status,text:o.message},t,i,s)}):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const s=t.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:o}=i.loadPolicy;if(s)for(const l in s)e.setRequestHeader(l,s[l]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=r&&Oe(r)?r:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const s=t.readyState,r=this.config;if(!i.aborted&&s>=2&&(i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const u=t.status,f=t.responseType==="text"?t.responseText:null;if(u>=200&&u<300){const y=f??t.response;if(y!=null){var o,l;i.loading.end=Math.max(self.performance.now(),i.loading.first);const w=t.responseType==="arraybuffer"?y.byteLength:y.length;i.loaded=i.total=w,i.bwEstimate=i.total*8e3/(i.loading.end-i.loading.first);const E=(o=this.callbacks)==null?void 0:o.onProgress;E&&E(i,e,y,t);const T={url:t.responseURL,data:y,code:u};(l=this.callbacks)==null||l.onSuccess(T,i,e,t);return}}const p=r.loadPolicy.errorRetry,b=i.retry,v={url:e.url,data:void 0,code:u};if(bp(p,b,!1,v))this.retry(p);else{var d;ti.error(`${u} while loading ${e.url}`),(d=this.callbacks)==null||d.onError({code:u,text:t.statusText},e,t,i)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(bp(e,t,!0))this.retry(e);else{var i;ti.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=_x(e,i.retry),i.retry++,ti.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&TZ.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const kZ={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},_Z=ei(ei({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:tO,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:FK,bufferController:CX,capLevelController:Bx,errorController:HK,fpsController:IQ,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:JL,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:kZ},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},AZ()),{},{subtitleStreamController:UQ,subtitleTrackController:DQ,timelineController:fZ,audioStreamController:TX,audioTrackController:kX,emeController:zl,cmcdController:kQ,contentSteeringController:AQ,interstitialsController:BQ});function AZ(){return{cueHandler:gZ,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function CZ(n,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const i=ry(n),s=["manifest","level","frag"],r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return s.forEach(o=>{const l=`${o==="level"?"playlist":o}LoadPolicy`,d=e[l]===void 0,u=[];r.forEach(f=>{const p=`${o}Loading${f}`,b=e[p];if(b!==void 0&&d){u.push(p);const v=i[l].default;switch(e[l]={default:v},f){case"TimeOut":v.maxLoadTimeMs=b,v.maxTimeToFirstByteMs=b;break;case"MaxRetry":v.errorRetry.maxNumRetry=b,v.timeoutRetry.maxNumRetry=b;break;case"RetryDelay":v.errorRetry.retryDelayMs=b,v.timeoutRetry.retryDelayMs=b;break;case"MaxRetryTimeout":v.errorRetry.maxRetryDelayMs=b,v.timeoutRetry.maxRetryDelayMs=b;break}}}),u.length&&t.warn(`hls.js config: "${u.join('", "')}" setting(s) are deprecated, use "${l}": ${fi(e[l])}`)}),ei(ei({},i),e)}function ry(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(ry):Object.keys(n).reduce((e,t)=>(e[t]=ry(n[t]),e),{}):n}function IZ(n,e){const t=n.loader;t!==oC&&t!==tO?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):bZ()&&(n.loader=oC,n.progressive=!0,n.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const Sf=2,RZ=.1,LZ=.05,DZ=100;class OZ extends KL{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var i;(i=this.media)!=null&&i.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var i;this.ended=((i=this.media)==null?void 0:i.currentTime)||1,this.hls.trigger(I.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(DZ),this.mediaSource=t.mediaSource;const i=this.media=t.media;kn(i,"playing",this.onMediaPlaying),kn(i,"waiting",this.onMediaWaiting),kn(i,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:i}=this;i&&(Un(i,"playing",this.onMediaPlaying),Un(i,"waiting",this.onMediaWaiting),Un(i,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var i,s;const r=(i=this.hls)==null?void 0:i.config;if(!r)return;const o=this.media;if(!o)return;const{seeking:l}=o,d=this.seeking&&!l,u=!this.seeking&&l,f=o.paused&&!l||o.ended||o.playbackRate===0;if(this.seeking=l,e!==t){t&&(this.ended=0),this.moved=!0,l||(this.nudgeRetry=0,r.nudgeOnVideoHole&&!f&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(u||d){d&&this.stallResolved(e);return}if(f){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&o.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(I.MEDIA_ENDED,{stalled:!1}));return}if(!ft.getBuffered(o).length){this.nudgeRetry=0;return}const p=ft.bufferInfo(o,e,0),b=p.nextStart||0,v=this.fragmentTracker;if(l&&v&&this.hls){const M=aC(this.hls.inFlightFragments,e),P=p.len>Sf,N=!b||M||b-e>Sf&&!v.getPartialFragment(e);if(P||N)return;this.moved=!1}const y=(s=this.hls)==null?void 0:s.latestLevelDetails;if(!this.moved&&this.stalled!==null&&v){if(!(p.len>0)&&!b)return;const P=Math.max(b,p.start||0)-e,L=!!(y!=null&&y.live)?y.targetduration*2:Sf,D=tf(e,v);if(P>0&&(P<=L||D)){o.paused||this._trySkipBufferHole(D);return}}const w=r.detectStallWithCurrentTimeMs,E=self.performance.now(),T=this.waiting;let k=this.stalled;if(k===null)if(T>0&&E-T<w)k=this.stalled=T;else{this.stalled=E;return}const _=E-k;if(!l&&(_>=w||T)&&this.hls){var O;if(((O=this.mediaSource)==null?void 0:O.readyState)==="ended"&&!(y!=null&&y.live)&&Math.abs(e-(y?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(I.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(p),!this.media||!this.hls)return}const R=ft.bufferInfo(o,e,r.maxBufferHole);this._tryFixBufferStall(R,_,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const i=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(i)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(I.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var i;const s=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(i=this.buffered.audio)!=null&&i.length&&s&&s.length>1&&e>s.end(0)){const r=ft.bufferedInfo(ft.timeRangesToArray(this.buffered.audio),e,0);if(r.len>1&&t>=r.start){const o=ft.timeRangesToArray(s),l=ft.bufferedInfo(o,t,0).bufferedIndex;if(l>-1&&l<o.length-1){const d=ft.bufferedInfo(o,e,0).bufferedIndex,u=o[l].end,f=o[l+1].start;if((d===-1||d>l)&&f-u<1&&e-u<2){const p=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${u} -> ${f} buffered index: ${d}`);this.warn(p.message),this.media.currentTime+=1e-6;let b=tf(e,this.fragmentTracker);b&&"fragment"in b?b=b.fragment:b||(b=void 0);const v=ft.bufferInfo(this.media,e,0);this.hls.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:p,reason:p.message,frag:b,buffer:v.len,bufferInfo:v})}}}}}_tryFixBufferStall(e,t,i){var s,r;const{fragmentTracker:o,media:l}=this,d=(s=this.hls)==null?void 0:s.config;if(!l||!o||!d)return;const u=(r=this.hls)==null?void 0:r.latestLevelDetails,f=tf(i,o);if((f||u!=null&&u.live&&i<u.fragmentStart)&&(this._trySkipBufferHole(f)||!this.media))return;const p=e.buffered,b=this.adjacentTraversal(e,i);(p&&p.length>1&&e.len>d.maxBufferHole||e.nextStart&&(e.nextStart-i<d.maxBufferHole||b))&&(t>d.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const i=this.fragmentTracker,s=e.nextStart;if(i&&s){const r=i.getFragAtPos(t,Fe.MAIN),o=i.getFragAtPos(s,Fe.MAIN);if(r&&o)return o.sn-r.sn<2}return!1}_reportStall(e){const{hls:t,media:i,stallReported:s,stalled:r}=this;if(!s&&r!==null&&i&&t){this.stallReported=!0;const o=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${fi(e)})`);this.warn(o.message),t.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.BUFFER_STALLED_ERROR,fatal:!1,error:o,buffer:e.len,bufferInfo:e,stalled:{start:r}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:i,media:s}=this,r=(t=this.hls)==null?void 0:t.config;if(!s||!i||!r)return 0;const o=s.currentTime,l=ft.bufferInfo(s,o,0),d=o<l.start?l.start:l.nextStart;if(d&&this.hls){const f=l.len<=r.maxBufferHole,p=l.len>0&&l.len<1&&s.readyState<3,b=d-o;if(b>0&&(f||p)){if(b>r.maxBufferHole){let y=!1;if(o===0){const w=i.getAppendedFrag(0,Fe.MAIN);w&&d<w.end&&(y=!0)}if(!y&&e){var u;if(!((u=this.hls.loadLevelObj)!=null&&u.details)||aC(this.hls.inFlightFragments,d))return 0;let E=!1,T=e.end;for(;T<d;){const k=tf(T,i);if(k)T+=k.duration;else{E=!0;break}}if(E)return 0}}const v=Math.max(d+LZ,o+RZ);if(this.warn(`skipping hole, adjusting currentTime from ${o} to ${v}`),this.moved=!0,s.currentTime=v,!(e!=null&&e.gap)){const y=new Error(`fragment loaded with buffer holes, seeking from ${o} to ${v}`),w={type:qe.MEDIA_ERROR,details:le.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,buffer:l.len,bufferInfo:l};e&&("fragment"in e?w.part=e:w.frag=e),this.hls.trigger(I.ERROR,w)}return v}}return 0}_tryNudgeBuffer(e){const{hls:t,media:i,nudgeRetry:s}=this,r=t?.config;if(!i||!r)return 0;const o=i.currentTime;if(this.nudgeRetry++,s<r.nudgeMaxRetry){const l=o+(s+1)*r.nudgeOffset,d=new Error(`Nudging 'currentTime' from ${o} to ${l}`);this.warn(d.message),i.currentTime=l,t.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.BUFFER_NUDGE_ON_STALL,error:d,fatal:!1,buffer:e.len,bufferInfo:e})}else{const l=new Error(`Playhead still not moving while enough data buffered @${o} after ${r.nudgeMaxRetry} nudges`);this.error(l.message),t.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.BUFFER_STALLED_ERROR,error:l,fatal:!0,buffer:e.len,bufferInfo:e})}}}function aC(n,e){const t=lC(n.main);if(t&&t.start<=e)return t;const i=lC(n.audio);return i&&i.start<=e?i:null}function lC(n){if(!n)return null;switch(n.state){case ve.IDLE:case ve.STOPPED:case ve.ENDED:case ve.ERROR:return null}return n.frag}function tf(n,e){return e.getAppendedFrag(n,Fe.MAIN)||e.getPartialFragment(n)}const NZ=.25;function oy(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function $b(n,e,t,i,s){let r=new n(e,t,"");try{r.value=i,s&&(r.type=s)}catch{r=new n(e,t,fi(s?ei({type:s},i):i))}return r}const nf=(()=>{const n=oy();try{n&&new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class PZ{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(I.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(I.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(I.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var i;this.media=t.media,((i=t.overrides)==null?void 0:i.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&Cl(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if(i.kind==="metadata"&&i.label==="id3")return HD(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:i,enableID3MetadataCues:s}=this.hls.config;if(!i&&!s)return;const{samples:r}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=oy();if(o)for(let l=0;l<r.length;l++){const d=r[l].type;if(d===es.emsg&&!i||!s)continue;const u=bD(r[l].data),f=r[l].pts;let p=f+r[l].duration;p>nf&&(p=nf),p-f<=0&&(p=f+NZ);for(let v=0;v<u.length;v++){const y=u[v];if(!vD(y)){this.updateId3CueEnds(f,d);const w=$b(o,f,p,y,d);w&&this.id3Track.addCue(w)}}}}updateId3CueEnds(e,t){var i;const s=(i=this.id3Track)==null?void 0:i.cues;if(s)for(let r=s.length;r--;){const o=s[r];o.type===t&&o.startTime<e&&o.endTime===nf&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:s}){const{id3Track:r,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:l,enableID3MetadataCues:d}}=o;if(r&&(l||d)){let u;s==="audio"?u=f=>f.type===es.audioId3&&d:s==="video"?u=f=>f.type===es.emsg&&l:u=f=>f.type===es.audioId3&&d||f.type===es.emsg&&l,ny(r,t,i,u)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:i,timelineOffset:s,enableDateRangeMetadataCues:r,interstitialsController:o}=this.hls.config;if(!r)return;const l=oy();if(i&&s&&!o){const{fragmentStart:w,fragmentEnd:E}=e;let T=this.assetCue;T?(T.startTime=w,T.endTime=E):l&&(T=this.assetCue=$b(l,w,E,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),T&&(T.id=i,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(T),T.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:d}=this,{dateRanges:u}=e,f=Object.keys(u);let p=this.dateRangeCuesAppended;if(d&&t){var b;if((b=d.cues)!=null&&b.length){const w=Object.keys(p).filter(E=>!f.includes(E));for(let E=w.length;E--;){var v;const T=w[E],k=(v=p[T])==null?void 0:v.cues;delete p[T],k&&Object.keys(k).forEach(_=>{const O=k[_];if(O){O.removeEventListener("enter",this.onEventCueEnter);try{d.removeCue(O)}catch{}}})}}else p=this.dateRangeCuesAppended={}}const y=e.fragments[e.fragments.length-1];if(!(f.length===0||!Oe(y?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let w=0;w<f.length;w++){const E=f[w],T=u[E],k=T.startTime,_=p[E],O=_?.cues||{};let R=_?.durationKnown||!1,M=nf;const{duration:P,endDate:N}=T;if(N&&P!==null)M=k+P,R=!0;else if(T.endOnNext&&!R){const D=f.reduce(($,U)=>{if(U!==T.id){const G=u[U];if(G.class===T.class&&G.startDate>T.startDate&&(!$||T.startDate<$.startDate))return G}return $},null);D&&(M=D.startTime,R=!0)}const L=Object.keys(T.attr);for(let D=0;D<L.length;D++){const $=L[D];if(!iY($))continue;const U=O[$];if(U)R&&!(_!=null&&_.durationKnown)?U.endTime=M:Math.abs(U.startTime-k)>.01&&(U.startTime=k,U.endTime=M);else if(l){let G=T.attr[$];nY($)&&(G=CL(G));const se=$b(l,k,M,{key:$,data:G},es.dateRange);se&&(se.id=E,this.id3Track.addCue(se),O[$]=se,o&&($==="X-ASSET-LIST"||$==="X-ASSET-URL")&&se.addEventListener("enter",this.onEventCueEnter))}}p[E]={cues:O,dateRange:T,durationKnown:R}}}}}class MZ{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,i=this.levelDetails;if(!t||!i)return;this.currentTime=t.currentTime;const s=this.computeLatency();if(s===null)return;this._latency=s;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:o}=this.config;if(!r||o===1||!i.live)return;const l=this.targetLatency;if(l===null)return;const d=s-l,u=Math.min(this.maxLatency,l+i.targetduration);if(d<u&&d>.05&&this.forwardBufferLength>1){const p=Math.min(2,Math.max(1,o)),b=Math.round(2/(1+Math.exp(-.75*d-this.edgeStalled))*20)/20,v=Math.min(p,Math.max(1,b));this.changeMediaPlaybackRate(t,v)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:i,targetduration:s}=e,{liveSyncDuration:r,liveSyncDurationCount:o,lowLatencyMode:l}=this.config,d=this.hls.userConfig;let u=l&&i||t;(this._targetLatencyUpdated||d.liveSyncDuration||d.liveSyncDurationCount||u===0)&&(u=r!==void 0?r:o*s);const f=s;return u+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,f)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const i=this.levelDetails;if(i===null)return null;const s=i.edge,r=e-t-this.edgeStalled,o=s-i.totalduration,l=s-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(o,r),l)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(I.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(I.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var i;t.details===le.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(i=this.levelDetails)!=null&&i.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var i,s;e.playbackRate!==t&&((i=this.hls)==null||i.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(s=this.targetLatency)==null?void 0:s.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class $Z extends jx{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this),e.on(I.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this),e.off(I.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=this.hls.config.preferManagedMediaSource,s=[],r={},o={};let l=!1,d=!1,u=!1;t.levels.forEach(f=>{const p=f.attrs;let{audioCodec:b,videoCodec:v}=f;b&&(f.audioCodec=b=fp(b,i)||void 0),v&&(v=f.videoCodec=yK(v));const{width:y,height:w,unknownCodecs:E}=f,T=E?.length||0;if(l||(l=!!(y&&w)),d||(d=!!v),u||(u=!!b),T||b&&!this.isAudioSupported(b)||v&&!this.isVideoSupported(v)){this.log(`Some or all CODECS not supported "${p.CODECS}"`);return}const{CODECS:k,"FRAME-RATE":_,"HDCP-LEVEL":O,"PATHWAY-ID":R,RESOLUTION:M,"VIDEO-RANGE":P}=p,L=`${`${R||"."}-`}${f.bitrate}-${M}-${_}-${k}-${P}-${O}`;if(r[L])if(r[L].uri!==f.url&&!f.attrs["PATHWAY-ID"]){const D=o[L]+=1;f.attrs["PATHWAY-ID"]=new Array(D+1).join(".");const $=this.createLevel(f);r[L]=$,s.push($)}else r[L].addGroupId("audio",p.AUDIO),r[L].addGroupId("text",p.SUBTITLES);else{const D=this.createLevel(f);r[L]=D,o[L]=1,s.push(D)}}),this.filterAndSortMediaOptions(s,t,l,d,u)}createLevel(e){const t=new Md(e),i=e.supplemental;if(i!=null&&i.videoCodec&&!this.isVideoSupported(i.videoCodec)){const s=new Error(`SUPPLEMENTAL-CODECS not supported "${i.videoCodec}"`);this.log(s.message),t.supportedResult=BL(s,[])}return t}isAudioSupported(e){return Nd(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Nd(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,i,s,r){var o;let l=[],d=[],u=e;const f=((o=t.stats)==null?void 0:o.parsing)||{};if((i||s)&&r&&(u=u.filter(({videoCodec:k,videoRange:_,width:O,height:R})=>(!!k||!!(O&&R))&&IK(_))),u.length===0){Promise.resolve().then(()=>{if(this.hls){let k="no level with compatible codecs found in manifest",_=k;t.levels.length&&(_=`one or more CODECS in variant not supported: ${fi(t.levels.map(R=>R.attrs.CODECS).filter((R,M,P)=>P.indexOf(R)===M))}`,this.warn(_),k+=` (${_})`);const O=new Error(k);this.hls.trigger(I.ERROR,{type:qe.MEDIA_ERROR,details:le.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:O,reason:_})}}),f.end=performance.now();return}t.audioTracks&&(l=t.audioTracks.filter(k=>!k.audioCodec||this.isAudioSupported(k.audioCodec)),cC(l)),t.subtitles&&(d=t.subtitles,cC(d));const p=u.slice(0);u.sort((k,_)=>{if(k.attrs["HDCP-LEVEL"]!==_.attrs["HDCP-LEVEL"])return(k.attrs["HDCP-LEVEL"]||"")>(_.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&k.height!==_.height)return k.height-_.height;if(k.frameRate!==_.frameRate)return k.frameRate-_.frameRate;if(k.videoRange!==_.videoRange)return pp.indexOf(k.videoRange)-pp.indexOf(_.videoRange);if(k.videoCodec!==_.videoCodec){const O=eA(k.videoCodec),R=eA(_.videoCodec);if(O!==R)return R-O}if(k.uri===_.uri&&k.codecSet!==_.codecSet){const O=hp(k.codecSet),R=hp(_.codecSet);if(O!==R)return R-O}return k.averageBitrate!==_.averageBitrate?k.averageBitrate-_.averageBitrate:0});let b=p[0];if(this.steering&&(u=this.steering.filterParsedLevels(u),u.length!==p.length)){for(let k=0;k<p.length;k++)if(p[k].pathwayId===u[0].pathwayId){b=p[k];break}}this._levels=u;for(let k=0;k<u.length;k++)if(u[k]===b){var v;this._firstLevel=k;const _=b.bitrate,O=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${u.length} level(s) found, first bitrate: ${_}`),((v=this.hls.userConfig)==null?void 0:v.abrEwmaDefaultEstimate)===void 0){const R=Math.min(_,this.hls.config.abrEwmaDefaultEstimateMax);R>O&&O===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=R)}break}const y=r&&!s,w=this.hls.config,E=!!(w.audioStreamController&&w.audioTrackController),T={levels:u,audioTracks:l,subtitleTracks:d,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:r,video:s,altAudio:E&&!y&&l.some(k=>!!k.url)};f.end=performance.now(),this.hls.trigger(I.MANIFEST_PARSED,T)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const f=new Error("invalid level idx"),p=e<0;if(this.hls.trigger(I.ERROR,{type:qe.OTHER_ERROR,details:le.LEVEL_SWITCH_ERROR,level:e,fatal:p,error:f,reason:f.message}),p)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,s=this.currentLevel,r=s?s.attrs["PATHWAY-ID"]:void 0,o=t[e],l=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,i===e&&s&&r===l)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${l?" with Pathway "+l:""} from level ${i}${r?" with Pathway "+r:""}`);const d={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(I.LEVEL_SWITCHING,d);const u=o.details;if(!u||u.live){const f=this.switchParams(o.uri,s?.details,u);this.loadPlaylist(f)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),i=e.filter(s=>t.indexOf(s)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=i}}onError(e,t){t.fatal||!t.context||t.context.type===At.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Fe.MAIN){const i=t.elementaryStreams;if(!Object.keys(i).some(r=>!!i[r]))return;const s=this._levels[t.level];s!=null&&s.loadError&&(this.log(`Resetting level error count of ${s.loadError} on frag buffered`),s.loadError=0)}}onLevelLoaded(e,t){var i;const{level:s,details:r}=t,o=t.levelInfo;if(!o){var l;this.warn(`Invalid level index ${s}`),(l=t.deliveryDirectives)!=null&&l.skip&&(r.deltaUpdateFailed=!0);return}if(o===this.currentLevel||t.withoutMultiVariant){o.fragmentError===0&&(o.loadError=0);let d=o.details;d===t.details&&d.advanced&&(d=void 0),this.playlistLoaded(s,t,d)}else(i=t.deliveryDirectives)!=null&&i.skip&&(r.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=this.getUrlWithDirectives(e.uri,t),s=this.currentLevelIndex,r=e.attrs["PATHWAY-ID"],o=e.details,l=o?.age;this.log(`Loading level index ${s}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${r?" Pathway "+r:""}${l&&o.live?" age "+l.toFixed(1)+(o.type&&" "+o.type||""):""} ${i}`),this.hls.trigger(I.LEVEL_LOADING,{url:i,level:s,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const i=this._levels.filter((r,o)=>o!==e?!0:(this.steering&&this.steering.removeLevel(r),r===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,r.details&&r.details.fragments.forEach(l=>l.level=-1)),!1));aD(i),this._levels=i,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const s=i.length-1;this._firstLevel=Math.min(this._firstLevel,s),this._startLevel&&(this._startLevel=Math.min(this._startLevel,s)),this.hls.trigger(I.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(I.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function cC(n){const e={};n.forEach(t=>{const i=t.groupId||"";t.id=e[i]=e[i]||0,e[i]++})}function iO(){return self.SourceBuffer||self.WebKitSourceBuffer}function nO(){if(!Bo())return!1;const e=iO();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function FZ(){if(!nO())return!1;const n=Bo();return typeof n?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>n.isTypeSupported(Pd(e,"video")))||["mp4a.40.2","fLaC"].some(e=>n.isTypeSupported(Pd(e,"audio"))))}function jZ(){var n;const e=iO();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}const BZ=100;class UZ extends Lx{constructor(e,t,i){super(e,t,i,"stream-controller",Fe.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const s=this.media,r=s?s.currentTime:null;if(r===null||!Oe(r)||(this.log(`Media seeked to ${r.toFixed(3)}`),!this.getBufferedFrag(r)))return;const o=this.getFwdBufferInfoAtPos(s,r,Fe.MAIN,0);if(o===null||o.len===0){this.warn(`Main forward buffer length at ${r} on "seeked" event ${o?o.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(I.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(I.BUFFER_CREATED,this.onBufferCreated,this),e.on(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(I.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(I.BUFFER_CREATED,this.onBufferCreated,this),e.off(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:i,hls:s}=this;if(this.stopLoad(),this.setInterval(BZ),this.level=-1,!this.startFragRequested){let r=s.startLevel;r===-1&&(s.config.testBandwidth&&this.levels.length>1?(r=0,this.bitrateTest=!0):r=s.firstAutoLevel),s.nextLoadLevel=r,this.level=s.loadLevel,this._hasEnoughToStart=!!t}i>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i),this.state=ve.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=ve.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ve.WAITING_LEVEL:{const{levels:e,level:t}=this,i=e?.[t],s=i?.details;if(s&&(!s.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(s))break;this.state=ve.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=ve.IDLE;break}break}case ve.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===ve.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:s}=this;if(t===null||!s&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const r=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(i!=null&&i[r]))return;const o=i[r],l=this.getMainFwdBufferInfo();if(l===null)return;const d=this.getLevelDetails();if(d&&this._streamEnded(l,d)){const w={};this.altAudio===2&&(w.type="video"),this.hls.trigger(I.BUFFER_EOS,w),this.state=ve.ENDED;return}if(!this.buffering)return;e.loadLevel!==r&&e.manualLevel===-1&&this.log(`Adapting to level ${r} from level ${this.level}`),this.level=e.nextLoadLevel=r;const u=o.details;if(!u||this.state===ve.WAITING_LEVEL||this.waitForLive(o)){this.level=r,this.state=ve.WAITING_LEVEL,this.startFragRequested=!1;return}const f=l.len,p=this.getMaxBufferLength(o.maxBitrate);if(f>=p)return;this.backtrackFragment&&this.backtrackFragment.start>l.end&&(this.backtrackFragment=null);const b=this.backtrackFragment?this.backtrackFragment.start:l.end;let v=this.getNextFragment(b,u);if(this.couldBacktrack&&!this.fragPrevious&&v&&Pi(v)&&this.fragmentTracker.getState(v)!==qi.OK){var y;const E=((y=this.backtrackFragment)!=null?y:v).sn-u.startSN,T=u.fragments[E-1];T&&v.cc===T.cc&&(v=T,this.fragmentTracker.removeFragment(T))}else this.backtrackFragment&&l.len&&(this.backtrackFragment=null);if(v&&this.isLoopLoading(v,b)){if(!v.gap){const E=this.audioOnly&&!this.altAudio?ui.AUDIO:ui.VIDEO,T=(E===ui.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;T&&this.afterBufferFlushed(T,E,Fe.MAIN)}v=this.getNextFragmentLoopLoading(v,u,l,Fe.MAIN,p)}v&&(v.initSegment&&!v.initSegment.data&&!this.bitrateTest&&(v=v.initSegment),this.loadFragment(v,o,b))}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);s===qi.NOT_LOADED||s===qi.PARTIAL?Pi(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,i):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Fe.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let i;const s=this.getAppendedFrag(t.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const r=this.getLevelDetails();if(r!=null&&r.live){const l=this.getMainFwdBufferInfo();if(!l||l.len<r.targetduration*2)return}if(!t.paused&&e){const l=this.hls.nextLoadLevel,d=e[l],u=this.fragLastKbps;u&&this.fragCurrent?i=this.fragCurrent.duration*d.maxBitrate/(1e3*u)+1:i=0}else i=0;const o=this.getBufferedFrag(t.currentTime+i);if(o){const l=this.followingBufferedFrag(o);if(l){this.abortCurrentFrag();const d=l.maxStartPTS?l.maxStartPTS:l.start,u=l.duration,f=Math.max(o.end,d+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,u*(this.couldBacktrack?.5:.125)),u*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(f,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case ve.KEY_LOADING:case ve.FRAG_LOADING:case ve.FRAG_LOADING_WAITING_RETRY:case ve.PARSING:case ve.PARSED:this.state=ve.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;kn(i,"playing",this.onMediaPlaying),kn(i,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:i}=this;i&&(Un(i,"playing",this.onMediaPlaying),Un(i,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(I.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let i=!1,s=!1;for(let r=0;r<t.levels.length;r++){const o=t.levels[r].audioCodec;o&&(i=i||o.indexOf("mp4a.40.2")!==-1,s=s||o.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=i&&s&&!jZ(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||this.state!==ve.IDLE)return;const s=t.levelInfo;(!s.details||s.details.live&&(this.levelLastLoaded!==s||s.details.expired)||this.waitForCdnTuneIn(s.details))&&(this.state=ve.WAITING_LEVEL)}onLevelLoaded(e,t){var i;const{levels:s,startFragRequested:r}=this,o=t.level,l=t.details,d=l.totalduration;if(!s){this.warn(`Levels were reset while loading level ${o}`);return}this.log(`Level ${o} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""}, cc [${l.startCC}, ${l.endCC}] duration:${d}`);const u=t.levelInfo,f=this.fragCurrent;f&&(this.state===ve.FRAG_LOADING||this.state===ve.FRAG_LOADING_WAITING_RETRY)&&f.level!==t.level&&f.loader&&this.abortCurrentFrag();let p=0;if(l.live||(i=u.details)!=null&&i.live){var b;if(this.checkLiveUpdate(l),l.deltaUpdateFailed)return;p=this.alignPlaylists(l,u.details,(b=this.levelLastLoaded)==null?void 0:b.details)}if(u.details=l,this.levelLastLoaded=u,r||this.setStartPosition(l,p),this.hls.trigger(I.LEVEL_UPDATED,{details:l,level:o}),this.state===ve.WAITING_LEVEL){if(this.waitForCdnTuneIn(l))return;this.state=ve.IDLE}r&&l.live&&this.synchronizeToLiveEdge(l),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const s=this.hls.liveSyncPosition,r=this.getLoadPosition(),o=e.fragmentStart,l=e.edge,d=r>=o-t.maxFragLookUpTolerance&&r<=l;if(s!==null&&i.duration>s&&(r<s||!d)){const f=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!d&&i.readyState<4||r<l-f)&&(this._hasEnoughToStart||(this.nextLoadPosition=s),i.readyState))if(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${l}, reset currentTime to : ${s.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var u;const p=ft.bufferInfo(i,s,0);if(!((u=p.buffered)!=null&&u.length)){i.currentTime=s;return}if(p.start<=r){i.currentTime=s;return}const{nextStart:v}=ft.bufferedInfo(p.buffered,r,0);v&&(i.currentTime=v)}else i.currentTime=s}}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:s,payload:r}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const l=o[i.level];if(!l){this.warn(`Level ${i.level} not found on progress`);return}const d=l.details;if(!d){this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),this.fragmentTracker.removeFragment(i);return}const u=l.videoCodec,f=d.PTSKnown||!d.live,p=(t=i.initSegment)==null?void 0:t.data,b=this._getAudioCodec(l),v=this.transmuxer=this.transmuxer||new ID(this.hls,Fe.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),y=s?s.index:-1,w=y!==-1,E=new Cx(i.level,i.sn,i.stats.chunkCount,r.byteLength,y,w),T=this.initPTS[i.cc];v.push(r,p,b,u,i,s,d.totalduration,f,E,T)}onAudioTrackSwitching(e,t){const i=this.hls,s=this.altAudio!==0;if(mp(t.url,i))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(s){this.altAudio=0,this.fragmentTracker.removeAllFragments(),i.once(I.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(I.AUDIO_TRACK_SWITCHED,t)}),i.trigger(I.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}i.trigger(I.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const i=mp(t.url,this.hls);if(i){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=i?2:0,this.tick()}onBufferCreated(e,t){const i=t.tracks;let s,r,o=!1;for(const l in i){const d=i[l];if(d.id==="main"){if(r=l,s=d,l==="video"){const u=i[l];u&&(this.videoBuffer=u.buffer)}}else o=!0}o&&s?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:s}=t,r=i.type===Fe.MAIN;if(r){if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),this.state===ve.PARSED&&(this.state=ve.IDLE);return}const l=s?s.stats:i.stats;this.fragLastKbps=Math.round(8*l.total/(l.buffering.end-l.loading.first)),Pi(i)&&(this.fragPrevious=i),this.fragBufferedComplete(i,s)}const o=this.media;o&&(!this._hasEnoughToStart&&ft.getBuffered(o).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),r&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var i;if(t.fatal){this.state=ve.ERROR;return}switch(t.details){case le.FRAG_GAP:case le.FRAG_PARSING_ERROR:case le.FRAG_DECRYPT_ERROR:case le.FRAG_LOAD_ERROR:case le.FRAG_LOAD_TIMEOUT:case le.KEY_LOAD_ERROR:case le.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Fe.MAIN,t);break;case le.LEVEL_LOAD_ERROR:case le.LEVEL_LOAD_TIMEOUT:case le.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===ve.WAITING_LEVEL&&((i=t.context)==null?void 0:i.type)===At.LEVEL&&(this.state=ve.IDLE);break;case le.BUFFER_ADD_CODEC_ERROR:case le.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case le.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case le.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=ve.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==ui.AUDIO||!this.altAudio){const i=(t===ui.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;i&&(this.afterBufferFlushed(i,t,Fe.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking){this.log(`could not seek to ${i}, already seeking at ${t}`);return}const s=this.timelineOffset;s&&i&&(i+=s);const r=this.getLevelDetails(),o=ft.getBuffered(e),l=o.length?o.start(0):0,d=l-i,u=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||d>0&&(d<u||this.loadingParts&&d<2*(r?.partTarget||0)))&&(this.log(`adjusting start position by ${d} to match buffer start`),i+=d,this.startPosition=i),t<i&&(this.log(`seek to target start position ${i} from current time ${t} buffer start ${l}`),e.currentTime=i)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(i=>{const{hls:s}=this,r=i?.frag;if(!r||this.fragContextChanged(r))return;t.fragmentError=0,this.state=ve.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const o=r.stats;o.parsing.start=o.parsing.end=o.buffering.start=o.buffering.end=self.performance.now(),s.trigger(I.FRAG_LOADED,i),r.bitrateTest=!1}).catch(i=>{this.state===ve.STOPPED||this.state===ve.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:i}=this,{remuxResult:s,chunkMeta:r}=e,o=this.getCurrentContext(r);if(!o){this.resetWhenMissingContext(r);return}const{frag:l,part:d,level:u}=o,{video:f,text:p,id3:b,initSegment:v}=s,{details:y}=u,w=this.altAudio?void 0:s.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=ve.PARSING,v){const E=v.tracks;if(E){const O=l.initSegment||l;if(this.unhandledEncryptionError(v,l))return;this._bufferInitSegment(u,E,O,r),i.trigger(I.FRAG_PARSING_INIT_SEGMENT,{frag:O,id:t,tracks:E})}const T=v.initPTS,k=v.timescale,_=this.initPTS[l.cc];if(Oe(T)&&(!_||_.baseTime!==T||_.timescale!==k)){const O=v.trackId;this.initPTS[l.cc]={baseTime:T,timescale:k,trackId:O},i.trigger(I.INIT_PTS_FOUND,{frag:l,id:t,initPTS:T,timescale:k,trackId:O})}}if(f&&y){w&&f.type==="audiovideo"&&this.logMuxedErr(l);const E=y.fragments[l.sn-1-y.startSN],T=l.sn===y.startSN,k=!E||l.cc>E.cc;if(s.independent!==!1){const{startPTS:_,endPTS:O,startDTS:R,endDTS:M}=f;if(d)d.elementaryStreams[f.type]={startPTS:_,endPTS:O,startDTS:R,endDTS:M};else if(f.firstKeyFrame&&f.independent&&r.id===1&&!k&&(this.couldBacktrack=!0),f.dropped&&f.independent){const P=this.getMainFwdBufferInfo(),N=(P?P.end:this.getLoadPosition())+this.config.maxBufferHole,L=f.firstKeyFramePTS?f.firstKeyFramePTS:_;if(!T&&N<L-this.config.maxBufferHole&&!k){this.backtrack(l);return}else k&&(l.gap=!0);l.setElementaryStreamInfo(f.type,l.start,O,l.start,M,!0)}else T&&_-(y.appliedTimelineOffset||0)>Sf&&(l.gap=!0);l.setElementaryStreamInfo(f.type,_,O,R,M),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(f,l,d,r,T||k)}else if(T||k)l.gap=!0;else{this.backtrack(l);return}}if(w){const{startPTS:E,endPTS:T,startDTS:k,endDTS:_}=w;d&&(d.elementaryStreams[ui.AUDIO]={startPTS:E,endPTS:T,startDTS:k,endDTS:_}),l.setElementaryStreamInfo(ui.AUDIO,E,T,k,_),this.bufferFragmentData(w,l,d,r)}if(y&&b!=null&&b.samples.length){const E={id:t,frag:l,details:y,samples:b.samples};i.trigger(I.FRAG_PARSING_METADATA,E)}if(y&&p){const E={id:t,frag:l,details:y,samples:p.samples};i.trigger(I.FRAG_PARSING_USERDATA,E)}}logMuxedErr(e){this.warn(`${Pi(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,i,s){if(this.state!==ve.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(i));const{audio:r,video:o,audiovideo:l}=t;if(r){const u=e.audioCodec;let f=mf(r.codec,u);f==="mp4a"&&(f="mp4a.40.5");const p=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){f&&(f.indexOf("mp4a.40.5")!==-1?f="mp4a.40.2":f="mp4a.40.5");const b=r.metadata;b&&"channelCount"in b&&(b.channelCount||1)!==1&&p.indexOf("firefox")===-1&&(f="mp4a.40.5")}f&&f.indexOf("mp4a.40.5")!==-1&&p.indexOf("android")!==-1&&r.container!=="audio/mpeg"&&(f="mp4a.40.2",this.log(`Android: force audio codec to ${f}`)),u&&u!==f&&this.log(`Swapping manifest audio codec "${u}" for "${f}"`),r.levelCodec=f,r.id=Fe.MAIN,this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${f||""}/${u||""}/${r.codec}]`),delete t.audiovideo}if(o){o.levelCodec=e.videoCodec,o.id=Fe.MAIN;const u=o.codec;if(u?.length===4)switch(u){case"hvc1":case"hev1":o.codec="hvc1.1.6.L120.90";break;case"av01":o.codec="av01.0.04M.08";break;case"avc1":o.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${u}]${o.codec!==u?" parsed-corrected="+o.codec:""}${o.supplemental?" supplemental="+o.supplemental:""}`),delete t.audiovideo}l&&(this.log(`Init audiovideo buffer, container:${l.container}, codecs[level/parsed]=[${e.codecs}/${l.codec}]`),delete t.video,delete t.audio);const d=Object.keys(t);if(d.length){if(this.hls.trigger(I.BUFFER_CODECS,t),!this.hls)return;d.forEach(u=>{const p=t[u].initSegment;p!=null&&p.byteLength&&this.hls.trigger(I.BUFFER_APPENDING,{type:u,data:p,frag:i,part:null,chunkMeta:s,parent:i.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Fe.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,i=e?.[t];return i?this.getMaxBufferLength(i.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=ve.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const i=e.currentTime;if(ft.isBuffered(e,i)?t=this.getAppendedFrag(i):ft.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const s=this.fragPlaying,r=t.level;(!s||t.sn!==s.sn||s.level!==r)&&(this.fragPlaying=t,this.hls.trigger(I.FRAG_CHANGED,{frag:t}),(!s||s.level!==r)&&this.hls.trigger(I.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Oe(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Oe(t)){const i=this.getLevelDetails(),s=this.currentFrag||(i?Aa(null,i.fragments,t):null);if(s){const r=s.programDateTime;if(r!==null){const o=r+(t-s.start)*1e3;return new Date(o)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class zZ extends ys{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyIdToKeyInfo){const s=this.keyIdToKeyInfo[i].loader;if(s){var t;if(e&&e!==((t=s.context)==null?void 0:t.frag.type))return;s.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=le.KEY_LOAD_ERROR,i,s,r){return new _r({type:qe.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:i,networkDetails:s})}loadClear(e,t,i){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let s=0,r=t.length;s<r;s++){const o=t[s];if(e.cc<=o.cc&&(!Pi(e)||!Pi(o)||e.sn<o.sn)||!i&&s==r-1)return this.emeController.selectKeySystemFormat(o).then(l=>{if(!this.emeController)return;o.setKeyFormat(l);const d=bf(l);if(d)return this.emeController.getKeySystemAccess([d])})}if(this.config.requireKeySystemAccessOnStart){const s=ad(this.config);if(s.length)return this.emeController.getKeySystemAccess(s)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var i,s;t&&e.setKeyFormat(t);const r=e.decryptdata;if(!r){const u=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,le.KEY_LOAD_ERROR,u))}const o=r.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,le.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));const l=Fb(r);let d=this.keyIdToKeyInfo[l];if((i=d)!=null&&i.decryptdata.key)return r.key=d.decryptdata.key,Promise.resolve({frag:e,keyInfo:d});if(this.emeController&&(s=d)!=null&&s.keyLoadPromise)switch(this.emeController.getKeyStatus(d.decryptdata)){case"usable":case"usable-in-future":return d.keyLoadPromise.then(f=>{const{keyInfo:p}=f;return r.key=p.decryptdata.key,{frag:e,keyInfo:p}})}switch(this.log(`${this.keyIdToKeyInfo[l]?"Rel":"L"}oading${r.keyId?" keyId: "+fn(r.keyId):""} URI: ${r.uri} from ${e.type} ${e.level}`),d=this.keyIdToKeyInfo[l]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return r.keyFormat==="identity"?this.loadKeyHTTP(d,e):this.loadKeyEME(d,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(d,e);default:return Promise.reject(this.createKeyLoadError(e,le.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var s;if(!e.decryptdata.keyId&&(s=t.initSegment)!=null&&s.data){const o=aK(t.initSegment.data);if(o.length){let l=o[0];l.some(d=>d!==0)?(this.log(`Using keyId found in init segment ${fn(l)}`),$o.setKeyIdForUri(e.decryptdata.uri,l)):(l=$o.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${fn(l)}`)),e.decryptdata.keyId=l}}if(!e.decryptdata.keyId&&!Pi(t))return Promise.resolve(i);const r=this.emeController.loadKey(i);return(e.keyLoadPromise=r.then(o=>(e.mediaKeySessionContext=o,i))).catch(o=>{throw e.keyLoadPromise=null,"data"in o&&(o.data.frag=t),o})}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,s=i.loader,r=new s(i);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((o,l)=>{const d={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},u=i.keyLoadPolicy.default,f={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(b,v,y,w)=>{const{frag:E,keyInfo:T}=y,k=Fb(T.decryptdata);if(!E.decryptdata||T!==this.keyIdToKeyInfo[k])return l(this.createKeyLoadError(E,le.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),w));T.decryptdata.key=E.decryptdata.key=new Uint8Array(b.data),E.keyLoader=null,T.loader=null,o({frag:E,keyInfo:T})},onError:(b,v,y,w)=>{this.resetLoader(v),l(this.createKeyLoadError(t,le.KEY_LOAD_ERROR,new Error(`HTTP Error ${b.code} loading key ${b.text}`),y,ei({url:d.url,data:void 0},b)))},onTimeout:(b,v,y)=>{this.resetLoader(v),l(this.createKeyLoadError(t,le.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),y))},onAbort:(b,v,y)=>{this.resetLoader(v),l(this.createKeyLoadError(t,le.INTERNAL_ABORTED,new Error("key loading aborted"),y))}};r.load(d,f,p)})}resetLoader(e){const{frag:t,keyInfo:i,url:s}=e,r=i.loader;t.keyLoader===r&&(t.keyLoader=null,i.loader=null);const o=Fb(i.decryptdata)||s;delete this.keyIdToKeyInfo[o],r&&r.destroy()}}function Fb(n){if(n.keyFormat!==pn.FAIRPLAY){const e=n.keyId;if(e)return fn(e)}return n.uri}function dC(n){const{type:e}=n;switch(e){case At.AUDIO_TRACK:return Fe.AUDIO;case At.SUBTITLE_TRACK:return Fe.SUBTITLE;default:return Fe.MAIN}}function jb(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class HZ{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(I.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_LOADING,this.onLevelLoading,this),e.off(I.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(I.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,i=t.pLoader,s=t.loader,r=i||s,o=new r(t);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:At.MANIFEST,url:i,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:i,level:s,pathwayId:r,url:o,deliveryDirectives:l,levelInfo:d}=t;this.load({id:i,level:s,pathwayId:r,responseType:"text",type:At.LEVEL,url:o,deliveryDirectives:l,levelOrTrack:d})}onAudioTrackLoading(e,t){const{id:i,groupId:s,url:r,deliveryDirectives:o,track:l}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:At.AUDIO_TRACK,url:r,deliveryDirectives:o,levelOrTrack:l})}onSubtitleTrackLoading(e,t){const{id:i,groupId:s,url:r,deliveryDirectives:o,track:l}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:At.SUBTITLE_TRACK,url:r,deliveryDirectives:o,levelOrTrack:l})}onLevelsUpdated(e,t){const i=this.loaders[At.LEVEL];if(i){const s=i.context;s&&!t.levels.some(r=>r===s.levelOrTrack)&&(i.abort(),delete this.loaders[At.LEVEL])}}load(e){var t;const i=this.hls.config;let s=this.getInternalLoader(e);if(s){const u=this.hls.logger,f=s.context;if(f&&f.levelOrTrack===e.levelOrTrack&&(f.url===e.url||f.deliveryDirectives&&!e.deliveryDirectives)){f.url===e.url?u.log(`[playlist-loader]: ignore ${e.url} ongoing request`):u.log(`[playlist-loader]: ignore ${e.url} in favor of ${f.url}`);return}u.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),s.abort()}let r;if(e.type===At.MANIFEST?r=i.manifestLoadPolicy.default:r=ai({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),Oe((t=e.deliveryDirectives)==null?void 0:t.part)){let u;if(e.type===At.LEVEL&&e.level!==null?u=this.hls.levels[e.level].details:e.type===At.AUDIO_TRACK&&e.id!==null?u=this.hls.audioTracks[e.id].details:e.type===At.SUBTITLE_TRACK&&e.id!==null&&(u=this.hls.subtitleTracks[e.id].details),u){const f=u.partTarget,p=u.targetduration;if(f&&p){const b=Math.max(f*3,p*.8)*1e3;r=ai({},r,{maxTimeToFirstByteMs:Math.min(b,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(b,r.maxTimeToFirstByteMs)})}}}const o=r.errorRetry||r.timeoutRetry||{},l={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},d={onSuccess:(u,f,p,b)=>{const v=this.getInternalLoader(p);this.resetInternalLoader(p.type);const y=u.data;f.parsing.start=performance.now(),Js.isMediaPlaylist(y)||p.type!==At.MANIFEST?this.handleTrackOrLevelPlaylist(u,f,p,b||null,v):this.handleMasterPlaylist(u,f,p,b)},onError:(u,f,p,b)=>{this.handleNetworkError(f,p,!1,u,b)},onTimeout:(u,f,p)=>{this.handleNetworkError(f,p,!0,void 0,u)}};s.load(e,l,d)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:i}=this.hls;(e||i)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,i,s){const r=this.hls,o=e.data,l=jb(e,i),d=Js.parseMasterPlaylist(o,l);if(d.playlistParsingError){t.parsing.end=performance.now(),this.handleManifestParsingError(e,i,d.playlistParsingError,s,t);return}const{contentSteering:u,levels:f,sessionData:p,sessionKeys:b,startTimeOffset:v,variableList:y}=d;this.variableList=y,f.forEach(k=>{const{unknownCodecs:_}=k;if(_){const{preferManagedMediaSource:O}=this.hls.config;let{audioCodec:R,videoCodec:M}=k;for(let P=_.length;P--;){const N=_[P];Nd(N,"audio",O)?(k.audioCodec=R=R?`${R},${N}`:N,Zl.audio[R.substring(0,4)]=2,_.splice(P,1)):Nd(N,"video",O)&&(k.videoCodec=M=M?`${M},${N}`:N,Zl.video[M.substring(0,4)]=2,_.splice(P,1))}}});const{AUDIO:w=[],SUBTITLES:E,"CLOSED-CAPTIONS":T}=Js.parseMasterPlaylistMedia(o,l,d);w.length&&!w.some(_=>!_.url)&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),w.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Si({}),bitrate:0,url:""})),r.trigger(I.MANIFEST_LOADED,{levels:f,audioTracks:w,subtitles:E,captions:T,contentSteering:u,url:l,stats:t,networkDetails:s,sessionData:p,sessionKeys:b,startTimeOffset:v,variableList:y})}handleTrackOrLevelPlaylist(e,t,i,s,r){const o=this.hls,{id:l,level:d,type:u}=i,f=jb(e,i),p=Oe(d)?d:Oe(l)?l:0,b=dC(i),v=Js.parseLevelPlaylist(e.data,f,p,b,0,this.variableList);if(u===At.MANIFEST){const y={attrs:new Si({}),bitrate:0,details:v,name:"",url:f};v.requestScheduled=t.loading.start+sD(v,0),o.trigger(I.MANIFEST_LOADED,{levels:[y],audioTracks:[],url:f,stats:t,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=v,this.handlePlaylistLoaded(v,e,t,i,s,r)}handleManifestParsingError(e,t,i,s,r){this.hls.trigger(I.ERROR,{type:qe.NETWORK_ERROR,details:le.MANIFEST_PARSING_ERROR,fatal:t.type===At.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:s,stats:r})}handleNetworkError(e,t,i=!1,s,r){let o=`A network ${i?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===At.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===At.AUDIO_TRACK||e.type===At.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const l=new Error(o);this.hls.logger.warn(`[playlist-loader]: ${o}`);let d=le.UNKNOWN,u=!1;const f=this.getInternalLoader(e);switch(e.type){case At.MANIFEST:d=i?le.MANIFEST_LOAD_TIMEOUT:le.MANIFEST_LOAD_ERROR,u=!0;break;case At.LEVEL:d=i?le.LEVEL_LOAD_TIMEOUT:le.LEVEL_LOAD_ERROR,u=!1;break;case At.AUDIO_TRACK:d=i?le.AUDIO_TRACK_LOAD_TIMEOUT:le.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case At.SUBTITLE_TRACK:d=i?le.SUBTITLE_TRACK_LOAD_TIMEOUT:le.SUBTITLE_LOAD_ERROR,u=!1;break}f&&this.resetInternalLoader(e.type);const p={type:qe.NETWORK_ERROR,details:d,fatal:u,url:e.url,loader:f,context:e,error:l,networkDetails:t,stats:r};if(s){const b=t?.url||e.url;p.response=ei({url:b,data:void 0},s)}this.hls.trigger(I.ERROR,p)}handlePlaylistLoaded(e,t,i,s,r,o){const l=this.hls,{type:d,level:u,levelOrTrack:f,id:p,groupId:b,deliveryDirectives:v}=s,y=jb(t,s),w=dC(s);let E=typeof s.level=="number"&&w===Fe.MAIN?u:void 0;const T=e.playlistParsingError;if(T){if(this.hls.logger.warn(`${T} ${e.url}`),!l.config.ignorePlaylistParsingErrors){l.trigger(I.ERROR,{type:qe.NETWORK_ERROR,details:le.LEVEL_PARSING_ERROR,fatal:!1,url:y,error:T,reason:T.message,response:t,context:s,level:E,parent:w,networkDetails:r,stats:i});return}e.playlistParsingError=null}if(!e.fragments.length){const k=e.playlistParsingError=new Error("No Segments found in Playlist");l.trigger(I.ERROR,{type:qe.NETWORK_ERROR,details:le.LEVEL_EMPTY_ERROR,fatal:!1,url:y,error:k,reason:k.message,response:t,context:s,level:E,parent:w,networkDetails:r,stats:i});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),d){case At.MANIFEST:case At.LEVEL:if(E){if(!f)E=0;else if(f!==l.levels[E]){const k=l.levels.indexOf(f);k>-1&&(E=k)}}l.trigger(I.LEVEL_LOADED,{details:e,levelInfo:f||l.levels[0],level:E||0,id:p||0,stats:i,networkDetails:r,deliveryDirectives:v,withoutMultiVariant:d===At.MANIFEST});break;case At.AUDIO_TRACK:l.trigger(I.AUDIO_TRACK_LOADED,{details:e,track:f,id:p||0,groupId:b||"",stats:i,networkDetails:r,deliveryDirectives:v});break;case At.SUBTITLE_TRACK:l.trigger(I.SUBTITLE_TRACK_LOADED,{details:e,track:f,id:p||0,groupId:b||"",stats:i,networkDetails:r,deliveryDirectives:v});break}}}class Ls{static get version(){return $d}static isMSESupported(){return nO()}static isSupported(){return FZ()}static getMediaSource(){return Bo()}static get Events(){return I}static get MetadataSchema(){return es}static get ErrorTypes(){return qe}static get ErrorDetails(){return le}static get DefaultConfig(){return Ls.defaultConfig?Ls.defaultConfig:_Z}static set DefaultConfig(e){Ls.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Dx,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=YW(e.debug||!1,"Hls instance",e.assetPlayerId),i=this.config=CZ(Ls.DefaultConfig,e,t);this.userConfig=e,i.progressive&&IZ(i,t);const{abrController:s,bufferController:r,capLevelController:o,errorController:l,fpsController:d}=i,u=new l(this),f=this.abrController=new s(this),p=new GK(this),b=i.interstitialsController,v=b?this.interstitialsController=new b(this,Ls):null,y=this.bufferController=new r(this,p),w=this.capLevelController=new o(this),E=new d(this),T=new HZ(this),k=i.contentSteeringController,_=k?new k(this):null,O=this.levelController=new $Z(this,_),R=new PZ(this),M=new zZ(this.config,this.logger),P=this.streamController=new UZ(this,p,M),N=this.gapController=new OZ(this,p);w.setStreamController(P),E.setStreamController(P);const L=[T,O,P];v&&L.splice(1,0,v),_&&L.splice(1,0,_),this.networkControllers=L;const D=[f,y,N,w,E,R,p];this.audioTrackController=this.createController(i.audioTrackController,L);const $=i.audioStreamController;$&&L.push(this.audioStreamController=new $(this,p,M)),this.subtitleTrackController=this.createController(i.subtitleTrackController,L);const U=i.subtitleStreamController;U&&L.push(this.subtititleStreamController=new U(this,p,M)),this.createController(i.timelineController,D),M.emeController=this.emeController=this.createController(i.emeController,D),this.cmcdController=this.createController(i.cmcdController,D),this.latencyController=this.createController(MZ,D),this.coreComponents=D,L.push(u);const G=u.onErrorOut;typeof G=="function"&&this.on(I.ERROR,G,u),this.on(I.MANIFEST_LOADED,T.onManifestLoaded,T)}createController(e,t){if(e){const i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,s){this._emitter.off(e,t,i,s)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(i){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const s=e===I.ERROR;this.trigger(I.ERROR,{type:qe.OTHER_ERROR,details:le.INTERNAL_EXCEPTION,fatal:s,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(I.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const r=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(I.ERROR,{type:qe.OTHER_ERROR,details:le.ATTACH_MEDIA_ERROR,fatal:!0,error:r});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,i=t?e.media:e,s=t?e:{media:i};this._media=i,this.trigger(I.MEDIA_ATTACHING,s)}detachMedia(){this.logger.log("detachMedia"),this.trigger(I.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(I.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,i=this._url,s=this._url=wx.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${s}`),t&&i&&(i!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(I.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let i=0;i<this.networkControllers.length&&(this.networkControllers[i].startLoad(e,t),!(!this.started||!this.networkControllers));i++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Fe.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Fe.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Fe.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=OQ()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){CK(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let s=0;s<i;s++)if(e[s].maxBitrate>=t)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let s;if(t===-1&&e!=null&&e.length?s=e.length-1:s=t,i)for(let r=s;r--;){const o=e[r].attrs["HDCP-LEVEL"];if(o&&o<=i)return r}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const i=HL(t);return UL(e,i,navigator.mediaCapabilities)}}Ls.defaultConfig=void 0;const sO=C.forwardRef(({videoSrc:n,hlsSrc:e,...t},i)=>{const s=C.useRef(null),r=C.useRef(null);return C.useEffect(()=>{const o=s.current;if(!(!o||!e)){if(o.canPlayType("application/vnd.apple.mpegurl")){o.src=e;return}if(Ls.isSupported()){r.current&&(r.current.destroy(),r.current=null);const l=new Ls({enableWorker:!0,lowLatencyMode:!1});l.loadSource(e),l.attachMedia(o),l.on(Ls.Events.MANIFEST_PARSED,()=>{}),l.on(Ls.Events.ERROR,(d,u)=>{u.fatal&&console.error("HLS error, falling back to regular video",u)}),r.current=l}else console.warn("HLS is not supported in this browser, using regular video source");return()=>{r.current&&(r.current.destroy(),r.current=null)}}},[e]),C.useImperativeHandle(i,()=>({play:async()=>{s.current&&await s.current.play()},pause:()=>{s.current&&s.current.pause()},getCurrentTime:()=>s.current?.currentTime||0,getMuted:()=>s.current?.muted||!1,getVolume:()=>s.current?.volume||0,setMuted:o=>{s.current&&(s.current.muted=o)},setVolume:o=>{s.current&&(s.current.volume=o)},setCurrentTime:o=>{s.current&&(s.current.currentTime=o)}}),[]),m.jsx("video",{ref:s,src:e?void 0:n,...t})});sO.displayName="ReelPlayer";function GZ(){vs();const{settings:n}=Ti(),{user:e,setUser:t}=Ki(),i=Yi(),s=wn(),{showNotification:r}=In(),[o,l]=C.useState([]),[d,u]=C.useState("trending"),[f,p]=C.useState(0),[b,v]=C.useState(!0),[y,w]=C.useState(null),[E,T]=C.useState(!1),[k,_]=C.useState(!1),[O,R]=C.useState(!1),[M,P]=C.useState(!1),[N,L]=C.useState(!1),[D,$]=C.useState(!1),[U,G]=C.useState(null),[Z,se]=C.useState(!1),[z,Y]=C.useState(!1),[V,q]=C.useState(!0),[ie,j]=C.useState(null),[H,K]=C.useState(""),[X,ae]=C.useState(0),[re,ge]=C.useState(!1),[Se,De]=C.useState(0),[ze,Qe]=C.useState(null),[nt,Pt]=C.useState(""),[Ce,at]=C.useState(!1),[Ie,et]=C.useState(""),[we,ee]=C.useState(""),[_e,Be]=C.useState(!1),[Xe,tt]=C.useState(!1),He=C.useRef(null),We=C.useRef(null),vt=C.useRef({}),Yt=C.useRef(0),ii=C.useRef(""),$t=C.useRef(!1),Te=C.useRef(!1);C.useRef(null);const Me=C.useRef(null),kt=C.useRef(null),Ct=C.useRef(null),Bt=C.useRef(null);C.useEffect(()=>{if(!n?.siteUrl||!e?.id)return;const pe=()=>{if(Ct.current)return;const Ke={"uppy-file-selected":Ye=>{const{fileUrl:pt,fileType:ki}=Ye.detail;R(!0),l([]),We.current&&(We.current.slideTo(0),We.current.destroy(),We.current=null),Qe(pt),ge(!0),De(0),Pt(""),at(!1),et(""),Be(!1),setTimeout(()=>{He.current&&(He.current.innerHTML=`<video webkit-playsinline="true" playsinline="true" autoplay muted loop><source src="${pt}" type="${ki}"></video>`,He.current.classList.add("uploadingReelVideo"),He.current.classList.add("isPrivate"),He.current.style.display="block")},100)},"uppy-upload-progress":Ye=>{De(Ye.detail.percent)},"uppy-upload-success":Ye=>{ee(Ye.detail.path),ge(!1),Be(!0),He.current&&(He.current.classList.remove("uploadingReelVideo"),He.current.classList.remove("isPrivate"))},"uppy-upload-error":Ye=>{const pt=Ye.detail.useSuccessStyle?"success":"error";r(Ye.detail.message,pt,5e3,e?.profile_photo||""),ge(!1)}};Object.entries(Ke).forEach(([Ye,pt])=>{window.addEventListener(Ye,pt)}),Ct.current=Ke},je=()=>{Ct.current&&(Object.entries(Ct.current).forEach(([rt,xi])=>{window.removeEventListener(rt,xi)}),Ct.current=null)};let xt=!1;return(async()=>{try{BW()?Me.current=jW():(kt.current||(kt.current=FW(n.siteUrl).then(rt=>(Me.current=rt,rt)).catch(rt=>{throw kt.current=null,rt})),await kt.current),xt||pe()}catch(rt){console.error("Error initializing Uppy:",rt)}})(),()=>{xt=!0,je()}},[n?.siteUrl,e?.id,e?.profile_photo,r]),C.useEffect(()=>{console.log("Reels: User effect",{userId:e?.id,activeTab:d}),e?.id?Xt("",!0,d==="trending"?1:0):(console.log("Reels: No user ID, waiting..."),v(!0))},[e?.id,d]),C.useEffect(()=>{if(o.length>0&&f===0&&e?.id){const pe=o[0];pe&&pe.user_id!==e.id&&Bt.current!==pe.id&&(Bt.current=pe.id,Ne.reels({action:"viewed",rid:String(pe.id),uid:String(e.id),from_trending:String(d==="trending"?1:0)},n).catch(je=>{console.error("Error tracking first video view:",je)}))}},[o.length,f,e?.id,d,n]);const Xt=async(pe="",je=!1,xt=0)=>{if(!e?.id){console.log("Reels: Cannot load - no user ID"),w("User not logged in"),v(!1);return}if(Te.current){console.log("Reels: Already loading, skipping...");return}console.log("Reels: Loading reels",{customFilter:pe,forceNewLoad:je,trending:xt,userId:e.id}),Te.current=!0,v(!0),w(null),T(!1),_(!1),R(!1);try{if(o.length>0&&!je){console.log("Reels: Using cached reels"),v(!1),Te.current=!1,setTimeout(()=>{ke(f)},1e3);return}Yt.current=0,p(0),ii.current=pe,Bt.current=null;const Mt=await Ne.reels({action:"loadDynamicReels",uid:String(e.id),looking:String(e.s_gender||e.gender||""),customFilter:pe,trending:String(xt),limit:String(Yt.current)},n);if(console.log("Reels: Response data",Mt),Mt.html==="NORESULTS")console.log("Reels: No results found"),pe==="me"?(R(!0),l([]),We.current&&(We.current.slideTo(0),We.current.destroy(),We.current=null)):(R(!1),T(!0)),l([]);else{const rt=Mt.reels||[];console.log("Reels: Loaded",rt.length,"reels"),l(rt),rt.length>=10?P(!0):P(!1),setTimeout(()=>{ke(0)},100)}}catch(Mt){console.error("Reels: Error loading reels",Mt),w(Mt.message||"Failed to load reels"),T(!0)}finally{v(!1),Te.current=!1}},Ut=async()=>{if(!(!e?.id||N||!M||Te.current)){L(!0),Te.current=!0;try{d==="trending"?Yt.current=parseInt(String(Yt.current+10)):Yt.current=0;const pe=await Ne.reels({action:"loadDynamicReels",uid:String(e.id),looking:String(e.s_gender||e.gender||""),customFilter:ii.current,trending:d==="trending"?"1":"0",limit:String(Yt.current)},n);if(pe.html==="NORESULTS")P(!1);else{const je=pe.reels||[];l(xt=>[...xt,...je]),je.length===10?P(!0):P(!1),We.current&&We.current.update()}}catch(pe){console.error("Error loading more reels:",pe)}finally{L(!1),Te.current=!1}}},ke=(pe=0)=>{We.current&&pe!==void 0&&We.current.slideTo(pe,0)},lt=async pe=>{const je=pe.activeIndex;p(je);const xt=je-1;if(xt>=0&&vt.current[xt]){const rt=vt.current[xt];rt&&(rt.pause(),rt.setCurrentTime(0),rt.setMuted(!0))}if(vt.current[je]){const rt=vt.current[je];rt&&(rt.play().catch(console.error),rt.setMuted(!1),rt.setVolume(1))}const Mt=je+1;if(Mt<o.length&&vt.current[Mt]){const rt=vt.current[Mt];rt&&(rt.pause(),rt.setCurrentTime(0),rt.setMuted(!0))}if(je<o.length){const rt=o[je];if(rt&&rt.user_id!==e?.id&&!$t.current){$t.current=!0;try{await Ne.reels({action:"viewed",rid:String(rt.id),uid:String(e?.id),from_trending:String(d==="trending"?1:0)},n)}catch(xi){console.error("Error tracking view:",xi)}setTimeout(()=>{$t.current=!1},1500)}}pe.progress>.85&&M&&!N&&Ut(),pe.progress===1&&!N&&_(!0)},Ee=pe=>{u(pe),l([]),p(0),We.current&&(We.current.slideTo(0),We.current.destroy(),We.current=null),Xt("",!0,pe==="trending"?1:0)},$e=async(pe,je)=>{if(e?.id)try{await Ne.reelsPost({action:"reelLike",rid:String(pe),user:String(e.id),motive:je===0?"remove":"like"},n),l(xt=>xt.map(Mt=>Mt.id===pe?{...Mt,liked:je}:Mt))}catch(xt){console.error("Error liking reel:",xt)}},It=async(pe,je)=>{if(e?.id){if(e.credits<parseInt(String(je))){se(!0);return}try{await Ne.reelsPost({action:"purchase_reel",rid:String(pe),user:String(e.id),purchase_action:"purchase"},n);const xt=e.credits-parseInt(String(je));t({...e,credits:xt});const Mt=`${s[610]||"Spent"} ${je} ${s[73]||"credits"}`;if(r(Mt,"success",3e3,e.profile_photo||""),l(rt=>rt.map(xi=>xi.id===pe?{...xi,purchased:"Yes"}:xi)),vt.current[f]){const rt=vt.current[f];rt&&rt.play().catch(console.error)}}catch(xt){console.error("Error purchasing reel:",xt)}}},Et=()=>{Y(!0)};Pe.useCallback((pe,je)=>{He.current&&(He.current.innerHTML=`<video webkit-playsinline="true" playsinline="true" autoplay muted loop><source src="${je}" type="${pe.type}"></video>`,He.current.classList.add("uploadingReelVideo"),He.current.classList.add("isPrivate"),He.current.style.display="block")},[]);const Tt=pe=>{Pt(pe.target.value)},ni=pe=>{const je=pe.detail.checked;at(je),je||et("")},Qt=pe=>{const je=pe.target.value;(je===""||/^\d*$/.test(je))&&et(je)},yt=async()=>{if(e?.id){if(!nt.trim()){r(s[943]||"Please enter a caption","error",5e3,e.profile_photo||"");return}if(!we){r(s[945]||"Please wait for upload to complete","error",5e3,e.profile_photo||"");return}try{Be(!1),tt(!0);const pe=await Ne.reelsPost({action:"uploadReel",uid:String(e.id),gender:String(e.gender||""),caption:nt,price:Ie===""?"0":String(Ie),path:we},n);R(!1),Qe(null),Pt(""),at(!1),et(""),ee(""),De(0),tt(!1),Me.current&&Me.current.cancelAll(),pe.status==="rejected"?r(pe.message||"Your reel was rejected due to content policy violations.","error",5e3,e.profile_photo||""):pe.status==="pending"?(r(pe.message||"Your reel is pending review and will be visible after moderation.","success",5e3,e.profile_photo||""),await Xt("me",!0)):(r(s[946]||"Reel uploaded successfully","success",5e3,e.profile_photo||""),await Xt("me",!0))}catch(pe){console.error("Error uploading reel:",pe),tt(!1),r(pe.message||"Failed to upload reel","error",5e3,e.profile_photo||"")}}},ct=async pe=>{console.log("handleMenuAction called with index:",pe),Y(!1),setTimeout(()=>{if(pe===0){console.log("Opening Uppy Dashboard...");const je=document.getElementById("uppyModalOpener");je?je.click():console.error("Uppy trigger button not found")}else pe===1?Xt("purchased",!0):pe===2?Xt("liked",!0):pe===3&&Xt("me",!0)},100)},pi=pe=>{ie===pe.id?Qi(pe.id):(j(pe.id),K(pe.caption),ae(pe.price))},Xi=pe=>{if(pe===""){ae("");return}const je=Number(pe);Number.isNaN(je)||ae(je)},Qi=async pe=>{if(e?.id)try{const je=X===""?0:X;await Ne.reelsPost({action:"editReel",rid:String(pe),caption:H,price:String(je)},n),l(xt=>xt.map(Mt=>Mt.id===pe?{...Mt,caption:H,price:je}:Mt)),j(null)}catch(je){console.error("Error editing reel:",je)}},Sn=async pe=>{if(!e?.id)return;const je=s[947]||"Are you sure you want to delete this reel?";if(window.confirm(je))try{await Ne.reels({action:"removeReel",rid:String(pe),uid:String(e.id)},n),l(xt=>xt.filter(Mt=>Mt.id!==pe)),ie===pe&&j(null),r(s[944]||"Reel deleted","success",4e3,e.profile_photo||"")}catch(xt){console.error("Error deleting reel:",xt),r(s[945]||"Failed to delete reel","error",4e3,e.profile_photo||"")}},Zi=pe=>{G({userId:pe.user_id,userName:pe.name,userPhoto:pe.photoBig,userAge:pe.age,userCity:pe.city}),$(!0)};return n?.siteUrl,e?.id?m.jsx($i,{className:"has-tabbar reels-page",children:m.jsxs(Wt,{fullscreen:!0,scrollY:!1,className:"reels-content",children:[m.jsx("div",{className:"swipe-top-bar dark",children:m.jsxs("div",{id:"discover-toggles",children:[m.jsx("button",{type:"button",onClick:()=>Ee("trending"),"data-reel-tab":"trending",className:d==="trending"?"reel-tab-selected":"",children:s[932]||"Trending"}),m.jsx("button",{type:"button",onClick:()=>Ee("latest"),"data-reel-tab":"latest",className:d==="latest"?"reel-tab-selected":"",children:s[931]||"Latest"})]})}),E&&m.jsx("div",{className:"detail reel-nothing-found reel-overlay",children:m.jsx("div",{className:"video-item",children:m.jsx("div",{className:"video-wraper black",children:m.jsx("div",{className:"mask",children:m.jsxs("div",{className:"guide-info",children:[m.jsx("div",{className:"ani-guide",children:m.jsx("img",{src:e.profile_photo,alt:"",className:"reel-overlay-avatar"})}),m.jsx("p",{className:"title",children:s[933]||"Nothing found"})]})})})})}),k&&m.jsx("div",{className:"detail reel-nothing-found reel-overlay",onClick:()=>_(!1),children:m.jsx("div",{className:"video-item",children:m.jsx("div",{className:"video-wraper",children:m.jsx("div",{className:"mask",children:m.jsxs("div",{className:"guide-info",children:[m.jsx("div",{className:"ani-guide",children:m.jsx("img",{src:e.profile_photo,alt:"",className:"reel-overlay-avatar"})}),m.jsx("p",{className:"title",children:s[934]||"Nothing to show"})]})})})})}),O&&m.jsx("div",{className:"detail upload-reel-container reel-overlay",children:m.jsx("div",{className:"video-item",children:m.jsxs("div",{className:"video-wraper black",children:[m.jsx("div",{className:"play-button",style:{display:"none"}}),m.jsx("div",{className:"poster isTop isPrivate uploadingReelVideo ",id:"uploadingReelVideo",ref:He,style:{display:ze?"block":"none"}}),m.jsx("div",{className:"refresh-wrapper",style:{backgroundImage:`url('${e.profile_photo}')`,display:"none"}}),m.jsx("div",{className:"side-bar",id:"uploadReelSidebar",style:{bottom:"6rem",display:ze?"block":"none"},children:m.jsx("svg",{onClick:Xe?void 0:yt,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#fff",style:{cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:m.jsx("path",{d:"M20 13v6a2 2 0 01-2 2H6a2 2 0 01-2-2v-6M12 15V3m0 0L8.5 6.5M12 3l3.5 3.5",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsxs("div",{className:"info-wraper",id:"uploadReelInfo",style:{bottom:"5.35rem",display:ze?"block":"none"},children:[m.jsxs("div",{className:"user-info",style:{marginLeft:"12px"},children:[m.jsx("a",{href:"#",children:m.jsx("img",{src:e.profile_photo,className:"avator",style:{objectFit:"cover"},id:"uploadReelPhoto",alt:""})}),m.jsx("p",{className:"name",id:"uploadReelName",children:e.name})]}),m.jsx("div",{className:"list m-n",children:m.jsx("div",{className:"item reel-form",children:m.jsx("textarea",{className:"reel-mobile-textarea",onChange:Tt,value:nt,id:"uploadReelCaption",placeholder:s[935]||"Enter caption...",disabled:Xe})})}),m.jsxs("div",{className:"item item-toggle comforta reel-form",children:[m.jsx("span",{children:s[936]||"Private"}),m.jsx("label",{className:"toggle toggle-assertive reel-track",children:m.jsx(nF,{checked:Ce,onIonChange:ni,id:"privateReelCheckbox",className:"reel-mobile-private-input",disabled:Xe})})]}),Ce&&m.jsxs("div",{className:"item item-toggle comforta reel-form",id:"reelPrice",children:[m.jsx("span",{children:s[937]||"Price"}),m.jsx("label",{className:"toggle toggle-assertive reel-track",children:m.jsx("input",{type:"number",value:Ie,onChange:Qt,id:"privateReelPrice",className:"reel-mobile-price-input",min:"0",disabled:Xe})})]})]}),m.jsx("div",{className:"mask uploadingReel",style:{display:re?"flex":"none"},children:m.jsxs("div",{className:"guide-info",style:{width:"80%"},children:[m.jsx("div",{className:"ani-guide",children:m.jsx("img",{src:e.profile_photo,style:{width:"100%",borderRadius:"50%"},alt:""})}),m.jsx("p",{className:"title",id:"uploadingReelTitleStart",style:{display:ze?"none":"block",fontWeight:400,border:"none"},children:s[938]||"Upload your first reel"}),m.jsx("p",{className:"title",id:"uploadingReelTitle",style:{display:ze?"block":"none"},children:s[939]||"Uploading..."}),m.jsx("p",{className:"content",style:{padding:0},children:m.jsxs("strong",{className:"uploadingReelProgress",children:[Se,"%"]})})]})}),m.jsx("div",{className:"mask uploadingReel",style:{display:Xe?"flex":"none"},children:m.jsxs("div",{className:"guide-info",style:{width:"80%"},children:[m.jsx("div",{className:"ani-guide",children:m.jsx(Wi,{style:{width:"100px",height:"100px"}})}),m.jsx("p",{className:"title",style:{fontWeight:400,border:"none"},children:"Processing your reel..."}),m.jsx("p",{className:"content",style:{padding:"10px 0",fontSize:"14px",opacity:.8},children:"Content moderation is in progress. This may take 5-30 seconds. Please wait..."})]})})]})})}),V&&m.jsx("div",{className:"upload-reel vivify swoopInBottom delay-50",onClick:Et,children:m.jsx("div",{className:"btn-upload-reel",children:s[940]||"UPLOAD"})}),o.length>0&&!O&&!E&&m.jsx("div",{className:"swiper-plugin detail active-reels",children:m.jsx("div",{className:"container reels-container",children:m.jsx(Wd,{direction:"vertical",modules:[dU],keyboard:{enabled:!0},className:"swiper-container reels-swiper",allowTouchMove:!0,touchEventsTarget:"container",touchRatio:1,touchAngle:45,threshold:10,resistance:!0,resistanceRatio:.85,slidesPerView:1,spaceBetween:0,speed:300,onSwiper:pe=>{We.current=pe,console.log("Swiper initialized",pe)},onSlideChange:lt,initialSlide:f,children:o.map((pe,je)=>m.jsx(yn,{children:m.jsx("div",{className:"video-item",children:m.jsxs("div",{className:"video-wraper black",children:[m.jsx("div",{className:`poster isTop ${pe.price>0&&pe.purchased==="No"?"isPrivate":""}`,id:`reel${pe.id}`,children:m.jsx(sO,{ref:xt=>{vt.current[je]=xt},id:`video${je}`,"data-reel-id":pe.id,"data-reel-user-id":pe.user_id,videoSrc:pe.play,hlsSrc:pe.playHls,loop:!0,playsInline:!0,preload:"auto",onLoadedData:()=>{je===f&&vt.current[je]&&vt.current[je]?.play().catch(console.error)}})}),m.jsx("div",{className:"side-bar",children:pe.user_id===e.id?m.jsxs(m.Fragment,{children:[ie===pe.id?m.jsxs("svg",{width:"32px",height:"32px",onClick:()=>pi(pe),strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#fff",children:[m.jsx("path",{d:"M7 12.5l3 3 7-7",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}):m.jsx("svg",{onClick:()=>pi(pe),width:"32px",height:"32px",viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#fff",children:m.jsx("path",{d:"M14.363 5.652l1.48-1.48a2 2 0 012.829 0l1.414 1.414a2 2 0 010 2.828l-1.48 1.48m-4.243-4.242l-9.616 9.615a2 2 0 00-.578 1.238l-.242 2.74a1 1 0 001.084 1.085l2.74-.242a2 2 0 001.24-.578l9.615-9.616m-4.243-4.242l4.243 4.242",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),pe.price>0&&m.jsxs("svg",{width:"32px",height:"32px",strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#fff",children:[m.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M15 8.5c-.685-.685-1.891-1.161-3-1.191M9 15c.644.86 1.843 1.35 3 1.391m0-9.082c-1.32-.036-2.5.561-2.5 2.191 0 3 5.5 1.5 5.5 4.5 0 1.711-1.464 2.446-3 2.391m0-9.082V5.5m0 10.891V18.5",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),m.jsx("svg",{width:"32px",height:"32px",viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#fff",style:{cursor:"pointer"},onClick:()=>Sn(pe.id),children:m.jsx("path",{d:"M20 9l-1.995 11.346A2 2 0 0116.035 22h-8.07a2 2 0 01-1.97-1.654L4 9M21 6h-5.625M3 6h5.625m0 0V4a2 2 0 012-2h2.75a2 2 0 012 2v2m-6.75 0h6.75",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}):m.jsx(m.Fragment,{children:pe.liked===0?m.jsx("svg",{onClick:()=>$e(pe.id,1),id:`reelNoLiked${pe.id}`,width:"32px",height:"32px",strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#fff",children:m.jsx("path",{d:"M22 8.862a5.95 5.95 0 01-1.654 4.13c-2.441 2.531-4.809 5.17-7.34 7.608-.581.55-1.502.53-2.057-.045l-7.295-7.562c-2.205-2.286-2.205-5.976 0-8.261a5.58 5.58 0 018.08 0l.266.274.265-.274A5.612 5.612 0 0116.305 3c1.52 0 2.973.624 4.04 1.732A5.95 5.95 0 0122 8.862z",stroke:"#fff",strokeWidth:"1.5",strokeLinejoin:"round"})}):m.jsx("svg",{onClick:()=>$e(pe.id,0),id:`reelLiked${pe.id}`,width:"32px",height:"32px",strokeWidth:"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"rgb(255, 48, 64)",color:"rgb(255, 48, 64)",children:m.jsx("path",{fill:"rgb(255, 48, 64)",d:"M22 8.862a5.95 5.95 0 01-1.654 4.13c-2.441 2.531-4.809 5.17-7.34 7.608-.581.55-1.502.53-2.057-.045l-7.295-7.562c-2.205-2.286-2.205-5.976 0-8.261a5.58 5.58 0 018.08 0l.266.274.265-.274A5.612 5.612 0 0116.305 3c1.52 0 2.973.624 4.04 1.732A5.95 5.95 0 0122 8.862z",stroke:"rgb(255, 48, 64)",strokeWidth:"1.5",strokeLinejoin:"round"})})})}),pe.user_id===e.id&&ie===pe.id?m.jsxs("div",{className:"info-wraper reel-edit-info",style:{bottom:"5.35rem"},children:[m.jsxs("div",{className:"user-info",style:{marginLeft:"12px"},children:[m.jsx("a",{href:"javascript:;",children:m.jsx("img",{src:e.profile_photo,className:"avator",style:{objectFit:"cover"},alt:""})}),m.jsx("p",{className:"name",children:e.name})]}),m.jsx("div",{className:"list m-n",children:m.jsx("div",{className:"item reel-form",children:m.jsx("textarea",{className:"input-reel-caption reel-edit-textarea",value:H,onChange:xt=>K(xt.target.value),placeholder:s[935]||"Caption"})})}),m.jsxs("div",{className:"item item-toggle comforta reel-form",children:[m.jsx("span",{children:s[937]||"Price"}),m.jsx("label",{className:"toggle toggle-assertive reel-track",children:m.jsx("input",{type:"number",value:X===""?"":X,onChange:xt=>Xi(xt.target.value),className:"input-reel-price reel-edit-price-input",style:{display:"block"}})})]})]}):m.jsxs("div",{className:`info-wraper ${pe.user_id!==e.id?"info-wraper--clickable":""}`,id:`reelInfo${pe.id}`,onClick:()=>pe.user_id!==e.id&&Zi(pe),children:[m.jsxs("div",{className:"user-info",children:[m.jsx("img",{src:pe.photo,alt:"",className:"avator"}),m.jsx("p",{className:"name",children:pe.name})]}),m.jsx("p",{className:"video-info",children:pe.caption})]}),pe.price>0&&pe.purchased==="No"&&m.jsx("div",{className:"mask",id:`reelMask${pe.id}`,onClick:()=>It(pe.id,pe.price),children:m.jsxs("div",{className:"guide-info",children:[m.jsx("div",{className:"ani-guide",children:m.jsx("img",{src:pe.photo,alt:"",className:"reel-overlay-avatar"})}),m.jsx("p",{className:"title",children:s[936]||"Private"}),m.jsxs("p",{className:"content",children:[s[941]||"Unlock for"," ",m.jsxs("strong",{children:[pe.price," ",s[73]||"credits"]})]})]})})]})})},pe.id))})})}),b&&o.length===0&&!E&&!O&&m.jsx("div",{className:"reel-overlay reel-overlay--loading",children:m.jsxs("div",{className:"reel-loading",children:[m.jsx(Wi,{}),m.jsx("p",{children:"Loading reels..."})]})}),y&&!b&&m.jsx("div",{className:"reel-overlay reel-overlay--error",children:m.jsxs("div",{className:"reel-error",children:[m.jsx("p",{children:y}),m.jsx("button",{onClick:()=>Xt("",!0,d==="trending"?1:0),children:"Retry"})]})}),m.jsx(Bn,{isOpen:z,onDidDismiss:()=>Y(!1),buttons:[{text:s[940]||"Upload Reel",handler:()=>(console.log("Upload Reel button clicked in ActionSheet"),ct(0),!1)},{text:s[948]||"Purchased",handler:()=>ct(1)},{text:s[949]||"Liked",handler:()=>ct(2)},{text:s[950]||"My Reels",handler:()=>ct(3)},{text:i[2]||"Cancel",role:"cancel"}]}),U&&m.jsx(Da,{isOpen:D,onClose:()=>{$(!1),G(null)},userId:U.userId}),m.jsx(Vy,{isOpen:Z,onClose:()=>se(!1),userPhoto:e.profile_photo})]})}):m.jsx($i,{className:"has-tabbar reels-page",children:m.jsx(Wt,{fullscreen:!0,className:"reels-content",children:m.jsx("div",{className:"reel-overlay reel-overlay--loading",children:m.jsxs("div",{className:"reel-loading",children:[m.jsx(Wi,{}),m.jsx("p",{children:"Loading..."})]})})})})}const VZ=({isOpen:n,onClose:e,userId:t,storyId:i})=>{const{settings:s}=Ti(),{user:r,config:o}=Ki(),l=Yi(),{showNotification:d}=In(),u=o?.plugins||{},[f,p]=C.useState([]),[b,v]=C.useState(0),[y,w]=C.useState(!0),[E,T]=C.useState(!1),[k,_]=C.useState(0),[O,R]=C.useState(""),[M,P]=C.useState(!1),[N,L]=C.useState(!1),D=C.useRef(null),$=C.useRef(null),U=C.useRef(null),G=C.useRef(0),Z=C.useRef(0),se=C.useRef(0),z=C.useRef(0),Y=C.useRef(!1),V=C.useCallback(async()=>{if(t)try{w(!0);const ee=await Ne.custom("/requests/api.php",{action:"viewStory",uid:t},s);if(ee.stories&&Array.isArray(ee.stories)&&ee.stories.length>0){console.log("Stories fetched:",ee.stories),console.log("Looking for storyId:",i),p(ee.stories);let _e=0;if(i===-1)_e=ee.stories.length-1,console.log("Starting at last story, index:",_e);else if(i){const Be=String(i),Xe=ee.stories.findIndex(tt=>String(tt.sid)===Be||String(tt.id)===Be);console.log("Found story at index:",Xe,"for storyId:",Be),Xe!==-1?_e=Xe:console.log("Story not found, starting from beginning. Available stories:",ee.stories.map(tt=>({sid:tt.sid,id:tt.id})))}v(_e)}else console.log("No stories found or empty response:",ee),e()}catch(ee){console.error("Error fetching stories:",ee),e()}finally{w(!1)}},[t,i,s,e]);C.useEffect(()=>{n&&t?V():(p([]),v(0),_(0),R(""))},[n,t,V,r]);const q=C.useCallback(()=>{b<f.length-1?(v(ee=>ee+1),_(0)):(v(0),_(0))},[b,f.length]),ie=C.useCallback(()=>{b>0?(v(ee=>ee-1),_(0)):(v(f.length-1),_(0))},[b,f.length]),j=()=>{if(D.current&&f[b]?.stype==="video"){const ee=D.current.currentTime/D.current.duration*100;_(ee)}},H=()=>{q()};C.useEffect(()=>{if(!n||f.length===0){$.current&&(clearInterval($.current),$.current=null);return}const ee=f[b];if(ee&&($.current&&(clearInterval($.current),$.current=null),_(0),!E)){if(ee.stype==="video")D.current&&(D.current.src=ee.url,D.current.load(),D.current.play().catch(_e=>console.log("Video play error:",_e)));else{const _e=ee.duration||5e3,Be=100,Xe=Be/_e*100;$.current=setInterval(()=>{_(tt=>{const He=tt+Xe;return He>=100?($.current&&(clearInterval($.current),$.current=null),q(),100):He})},Be)}return()=>{$.current&&(clearInterval($.current),$.current=null)}}},[n,f,b,E,q]);const K=ee=>{v(ee),_(0)},X=ee=>{G.current=ee.touches[0].clientX,Z.current=ee.touches[0].clientY},ae=ee=>{se.current=ee.touches[0].clientX,z.current=ee.touches[0].clientY},re=()=>{const ee=G.current-se.current,_e=Z.current-z.current;Math.abs(ee)>Math.abs(_e)&&Math.abs(ee)>50&&(ee>0?q():ie()),G.current=0,Z.current=0,se.current=0,z.current=0},ge=ee=>{Y.current=!0,G.current=ee.clientX,Z.current=ee.clientY},Se=ee=>{Y.current&&(se.current=ee.clientX,z.current=ee.clientY)},De=()=>{if(Y.current){const ee=G.current-se.current,_e=Z.current-z.current;Math.abs(ee)>Math.abs(_e)&&Math.abs(ee)>50&&(ee>0?q():ie()),Y.current=!1,G.current=0,Z.current=0,se.current=0,z.current=0}},ze=()=>{Y.current&&(Y.current=!1,G.current=0,Z.current=0,se.current=0,z.current=0)},Qe=()=>{D.current&&(D.current.pause(),D.current.src=""),$.current&&(clearInterval($.current),$.current=null),e()},nt=()=>{T(!0),D.current&&D.current.pause()},Pt=()=>{T(!1),D.current&&f[b]?.stype==="video"&&D.current.play()},Ce=async()=>{if(!r||!f[b])return{success:!1,creditsDeducted:0};const ee=f[b],_e=parseInt(u?.story?.sendMessage||"5");if(_e>0){if(!await rn.wasteCredit(_e,"Credits for story message",!0,!0))return{success:!1,creditsDeducted:0};if(u?.story?.storyCreditsMessageTransfer==="Yes")try{const Xe=`${ee.uid},${_e},2,Credits for message from story,`;await Ne.query("updateCredits",Xe,s)}catch(Xe){console.error("Error transferring credits:",Xe)}return{success:!0,creditsDeducted:_e}}return{success:!0,creditsDeducted:0}},at=async()=>{if(!O.trim()||!r?.id)return;const ee=f[b];if(ee)try{const{success:_e,creditsDeducted:Be}=await Ce();if(!_e)return;const Xe=`${r.id}[message]${ee.uid}[message]${O}[message]story[message]${ee.sid}[message]${Be}`,tt=`${r.id}[rt]${ee.uid}[rt]${r.profile_photo}[rt]${r.first_name}[rt]${O}[rt]story[rt]${ee.url}[rt]${ee.stype}`;await Ne.custom("/requests/chat.php",{action:"message",query:tt},s),await Ne.custom("/requests/api.php",{action:"sendMessage",query:Xe},s),R(""),Be===0&&d("Message sent!","success",2e3)}catch(_e){console.error("Error sending message:",_e),d("Failed to send message","error",3e3)}},Ie=async()=>{const ee=f[b];if(ee)try{await Ne.custom("/requests/api.php",{action:"deleteStory",query:String(ee.sid)},s);const _e=f.filter((Be,Xe)=>Xe!==b);_e.length===0?(d("Story deleted successfully","success",2e3),e()):(p(_e),b>=_e.length&&v(_e.length-1),d("Story deleted successfully","success",2e3))}catch(_e){console.error("Error deleting story:",_e),d("Failed to delete story","error",3e3)}};if(!n)return null;const et=f[b],we=et?.uid===r?.id?1:0;return m.jsxs("div",{className:"storytime",style:{opacity:1,display:"block"},children:[m.jsx("div",{className:"story-cover",onClick:Qe}),m.jsxs("div",{className:"story-window",id:"storyWindow",ref:U,onTouchStart:X,onTouchMove:ae,onTouchEnd:re,onMouseDown:ge,onMouseMove:Se,onMouseUp:De,onMouseLeave:ze,children:[we!==1&&m.jsxs(m.Fragment,{children:[m.jsx("div",{id:"chat-input","data-story-chat-input":!0,className:"",children:m.jsx("input",{type:"text",id:"replyStoryMessage",value:O,onChange:ee=>R(ee.target.value),onFocus:nt,onBlur:Pt,placeholder:"Send a message..."})}),m.jsx("div",{id:"chat-input-send","data-story-chat-input":!0,children:m.jsx("i",{onClick:at,className:"icon icon--lg icon--white ion-android-send"})})]}),m.jsx("div",{className:"story-arrow left",onClick:ie}),m.jsx("div",{className:"story-arrow right",onClick:q}),m.jsxs("div",{className:"story-nav",children:[m.jsxs("div",{className:"story-nav-left",children:[m.jsx("div",{className:"paused",style:{display:E?"block":"none"},children:m.jsx("span",{children:l[614]||"Paused"})}),m.jsx("div",{className:"story-icon vivify popIn box-shadow",style:{width:"50px",height:"50px",backgroundImage:`url(${et?.icon||""})`}}),m.jsx("span",{className:"story-text text-shadow",children:et?.title||""}),m.jsx("span",{className:"story-date text-shadow",children:et?.date||""})]}),m.jsxs("div",{className:"story-nav-right",children:[we===1&&m.jsx("div",{className:"storySettings",onClick:()=>P(!0),children:m.jsx("i",{className:"icon ion-android-more-horizontal"})}),m.jsx("div",{className:"close story-close",onClick:Qe})]})]}),m.jsx("div",{className:"story-timeline",children:f.map((ee,_e)=>m.jsxs("div",{className:"story-timeline-item",onClick:()=>K(_e),children:[m.jsx("div",{className:"story-timeline-line"}),m.jsx("div",{className:`story-timeline-line-active story-active-${_e}`,style:{width:_e<b?"100%":_e===b?`${k}%`:"0%"}})]},ee.sid))}),m.jsx("div",{className:"story-video",children:y?m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:m.jsx(Wi,{color:"light"})}):et?.stype==="video"?m.jsxs(m.Fragment,{children:[m.jsx("video",{ref:D,className:"story-next videoStory",playsInline:!0,onTimeUpdate:j,onEnded:H}),m.jsx("div",{className:"leftSection",onClick:ie}),m.jsx("div",{className:"rightSection",onClick:q})]}):m.jsxs(m.Fragment,{children:[m.jsx("img",{className:"story-next videoStory",src:et?.url||"",alt:""}),m.jsx("div",{className:"leftSection",onClick:ie}),m.jsx("div",{className:"rightSection",onClick:q})]})}),y&&m.jsxs("div",{className:"spinner",children:[m.jsx("div",{className:"bounce1"}),m.jsx("div",{className:"bounce2"}),m.jsx("div",{className:"bounce3"})]})]}),m.jsx(Bn,{isOpen:M,onDidDismiss:()=>P(!1),buttons:[{text:l[619]||"Delete Story",role:"destructive",handler:()=>{P(!1),L(!0)}},{text:l[620]||"Cancel",role:"cancel",handler:()=>{P(!1)}}]}),m.jsx(Bn,{isOpen:N,onDidDismiss:()=>L(!1),header:l[616]||"Are you sure you want to delete this story?",buttons:[{text:l[616]||"Delete",role:"destructive",handler:()=>{Ie(),L(!1)}},{text:l[617]||"Cancel",role:"cancel",handler:()=>{L(!1)}}]})]})},qZ=({story:n,index:e,getPhotoUrl:t,onStoryClick:i,onProfileClick:s})=>m.jsx("div",{className:`story-container vivify fadeIn delay-${n.fadeDelay||e*50}`,id:`story${e}`,"data-current-story-position":e,onClick:()=>i(n),children:m.jsxs("div",{className:"story-preview",children:[m.jsx("div",{className:"backgroundAnimation sloader",style:{display:"none"}}),n.video===1&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"story-preview-background profile-photo discoverStoryPhoto",style:{backgroundImage:`url(${t(n.profile_photo)})`}}),m.jsx("div",{className:"story-preview-mask"})]}),n.video===0&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"story-preview-background profile-photo discoverStoryPhoto",style:{backgroundImage:`url(${t(n.profile_photo)})`}}),m.jsx("div",{className:"story-preview-mask"})]}),m.jsx("div",{id:`storyUser${n.id}`,className:"stories-user-open",onClick:r=>s(n,r)}),m.jsx("p",{className:"story-preview-name",children:m.jsx("span",{children:n.name})})]})}),uC=52428800;async function WZ(n,e){let t=window.uppyStoryInstance;if(t){console.log("Story Uppy already initialized, reusing instance");const s=t.getPlugin("Dashboard");return s&&document.getElementById("uppyStoryModalOpener")&&s.opts&&(s.opts.trigger="#uppyStoryModalOpener"),t}const i=`${n}/assets/sources/upload.php`;return t=new Bp({debug:!1,autoProceed:!1,restrictions:{maxNumberOfFiles:1,minNumberOfFiles:1,maxFileSize:uC,maxTotalFileSize:uC,allowedFileTypes:["image/*"]}}),t.on("file-added",async s=>{if(s.data instanceof File&&!s.type.startsWith("image/")){t.removeFile(s.id);try{const l=t.getPlugin("Dashboard");l&&typeof l.closeModal=="function"?l.closeModal():l&&typeof l.close=="function"&&l.close(),setTimeout(()=>{const d=document.querySelector('.uppy-Dashboard-close, [aria-label*="close" i], button[aria-label*="Close"]');d&&d.click()},50)}catch(l){console.error("Error closing Dashboard:",l)}const o="Only images are allowed for stories. Videos are not supported.";setTimeout(()=>{window.dispatchEvent(new CustomEvent("uppy-story-upload-error",{detail:{message:o,useSuccessStyle:!0}}))},300);return}const r=URL.createObjectURL(s.data);window.dispatchEvent(new CustomEvent("uppy-story-file-selected",{detail:{fileUrl:r,fileType:s.type}}))}),t.getPlugin("Dashboard")||t.use(up,{trigger:"#uppyStoryModalOpener",theme:"dark",showProgressDetails:!0,proudlyDisplayPoweredByUppy:!1,closeAfterFinish:!1,note:"Upload images only, 50MB or less",browserBackButtonClose:!0}),t.getPlugin("Webcam")||t.use(kL,{target:up,modes:["picture"],showVideoSourceDropdown:!1,showRecordingLength:!1}),t.use(_L,{endpoint:i,fieldName:"file",getResponseData(s){const r=s.responseText||s.response;console.log("Story upload response:",r);try{const o=JSON.parse(r);if(o.contetnerror)return window.dispatchEvent(new CustomEvent("uppy-story-upload-error",{detail:{message:o.contetnerror}})),{};if(o.status==="ok"&&o.path)return window.dispatchEvent(new CustomEvent("uppy-story-upload-success",{detail:{path:o.path,thumb:o.thumb}})),o;if(o.status!=="ok"){const l=o.error||o.message||"Upload failed. Please try again.";return window.dispatchEvent(new CustomEvent("uppy-story-upload-error",{detail:{message:l}})),{}}return window.dispatchEvent(new CustomEvent("uppy-story-upload-success",{detail:{path:o.path,thumb:o.thumb}})),o}catch(o){return console.error("Error parsing upload response:",o),window.dispatchEvent(new CustomEvent("uppy-story-upload-error",{detail:{message:"Failed to parse upload response"}})),{}}},getResponseError(s){const r=s.responseText||s.response;return console.error("Story upload error:",r),window.dispatchEvent(new CustomEvent("uppy-story-upload-error",{detail:{message:"Upload failed. Please try again."}})),new Error("Upload failed")}}),t.on("upload-progress",(s,r)=>{if(r&&r.bytesUploaded&&r.bytesTotal){const o=Math.round(r.bytesUploaded/r.bytesTotal*100);window.dispatchEvent(new CustomEvent("uppy-story-upload-progress",{detail:{percent:o}}))}}),t.on("upload-success",(s,r)=>{console.log("Story file uploaded to server successfully")}),t.on("upload-error",(s,r,o)=>{console.error("Story upload error:",r,o);const l=r?.message||"Upload failed. Please try again.";window.dispatchEvent(new CustomEvent("uppy-story-upload-error",{detail:{message:l}}))}),window.uppyStoryInstance=t,t}function KZ(){return window.uppyStoryInstance||null}function YZ(){return!!window.uppyStoryInstance}function XZ(){vs();const{settings:n}=Ti(),{user:e,config:t}=Ki(),i=Yi(),s=wn(),{showNotification:r}=In(),[o,l]=C.useState("stories"),[d,u]=C.useState([]),[f,p]=C.useState([]),[b,v]=C.useState(!0),[y,w]=C.useState(!1),[E,T]=C.useState(!0),[k,_]=C.useState(!0),[O,R]=C.useState(!1),[M,P]=C.useState("is-active"),[N,L]=C.useState(""),[D,$]=C.useState(0),[U,G]=C.useState(!0),[Z,se]=C.useState(!1),[z,Y]=C.useState(null),[V,q]=C.useState(!1),[ie,j]=C.useState(!1),[H,K]=C.useState(!1),[X,ae]=C.useState(!1),[re,ge]=C.useState(null),[Se,De]=C.useState(null),ze=C.useRef(null),Qe=C.useRef(null),nt=C.useRef(!0),[Pt,Ce]=C.useState(""),[at,Ie]=C.useState(0),[et,we]=C.useState(!1),[ee,_e]=C.useState(!1),Be=C.useRef(null),Xe=C.useRef(null),tt=C.useRef(null),He=async()=>{if(e?.id)try{v(!0),$(0),G(!0);const ke=`${e.lat||0},${e.lng||0},${e.s_gender||0},0`,lt=await Ne.query("viewStories",ke,n);if(console.log("Stories API response:",lt),lt.result==="empty")u([]),T(!1),G(!1);else if(lt.stories&&Array.isArray(lt.stories)&&lt.stories.length>0){const Ee=lt.stories,$e=Ee.length,It=Ee.map((Et,Tt)=>({id:Et.id,uid:Et.uid,name:Et.name||"",profile_photo:Et.profile_photo||"",video:Et.video||0,fadeDelay:Et.fadeDelay||Tt*50}));u(It),T(!0),$($e)}else u([]),T(!1),G(!1)}catch(ke){console.error("Error loading stories:",ke),T(!1),u([])}finally{v(!1)}},We=C.useCallback(async()=>{if(!(!e?.id||!U||y||!nt.current))try{w(!0),nt.current=!1;const ke=D,lt=`${e.lat||0},${e.lng||0},${e.s_gender||0},${ke}`,Ee=await Ne.query("viewStories",lt,n);if(console.log("Load more stories response:",Ee),Ee.result==="empty")G(!1);else if(Ee.stories&&Array.isArray(Ee.stories)&&Ee.stories.length>0){const $e=Ee.stories.length;u(It=>{const Et=Ee.stories.map((Tt,ni)=>({id:Tt.id,uid:Tt.uid,name:Tt.name||"",profile_photo:Tt.profile_photo||"",video:Tt.video||0,fadeDelay:(It.length+ni)*50}));return[...It,...Et]}),$(ke+$e),G(!0)}else G(!1)}catch(ke){console.error("Error loading more stories:",ke),G(!1)}finally{w(!1),nt.current=!0}},[e?.id,e?.lat,e?.lng,e?.s_gender,U,y,n,D]);C.useEffect(()=>{if(o!=="stories"||!U||y||!Qe.current)return;const ke=new IntersectionObserver(Ee=>{Ee[0].isIntersecting&&U&&!y&&nt.current&&(console.log("Triggering load more stories..."),We())},{root:null,rootMargin:"200px",threshold:.01}),lt=Qe.current;return ke.observe(lt),()=>{lt&&ke.unobserve(lt)}},[U,y,o,We,d.length]);const vt=async()=>{if(e?.id)try{v(!0);const ke=await Ne.query("getLiveStreams","",n);ke.result&&ke.result!=="empty"&&ke.streams?p(Array.isArray(ke.streams)?ke.streams:[]):p([])}catch(ke){console.error("Error loading streams:",ke),p([])}finally{v(!1)}},Yt=C.useCallback(async ke=>{if(!e?.id||!ke){we(!1);return}try{const lt={action:"uploadStory",uid:String(e.id),path:ke,thumb:ke},Ee=await Ne.bellooPost(lt,n);if(console.log("bellooPost response:",Ee),Ee.error||Ee.error_m){const $e=String(Ee.error_m||Ee.error||"Error uploading story");r($e,"error",3e3)}else{const $e=Ee.status;if($e==="rejected"){const It=String(Ee.message||"Your story was rejected due to content policy violations.");r(It,"error",5e3)}else if($e==="pending"){const It=String(Ee.message||"Your story is pending review and will be visible after moderation.");r(It,"neutral",5e3),await He()}else r("Story uploaded successfully!","success",3e3),await He(),setTimeout(()=>{ge(e.id),De(-1),ae(!0)},500)}}catch(lt){console.error("Error saving story:",lt),r("Error uploading story","error",3e3)}finally{we(!1),_e(!1),Ce(""),Ie(0)}},[e?.id,n,r,He]);C.useEffect(()=>{if(e?.id){const ke=t?.plugins?.live?.enabled||"No";K(ke==="Yes"),o==="stories"?He():o==="live"&&vt()}},[e?.id,o]),C.useEffect(()=>{if(!n?.siteUrl||!e?.id||o!=="stories"){tt.current&&(Object.entries(tt.current).forEach(([yt,ct])=>{window.removeEventListener(yt,ct)}),tt.current=null);return}const ke=yt=>{const{fileUrl:ct}=yt.detail;we(!0),Ie(0),_e(!1)},lt=yt=>{Ie(yt.detail.percent)},Ee=yt=>{const ct=yt.detail.path;if(Ce(ct),Be.current){const pi=Be.current.getPlugin("Dashboard");pi&&typeof pi.closeModal=="function"&&pi.closeModal(),Be.current.cancelAll()}we(!0),_e(!1),Yt(ct)},$e=yt=>{const ct=yt.detail.useSuccessStyle?"success":"error";r(yt.detail.message,ct,5e3),we(!1)},It=()=>{tt.current&&Object.entries(tt.current).forEach(([ct,pi])=>{window.removeEventListener(ct,pi)});const yt={"uppy-story-file-selected":ke,"uppy-story-upload-progress":lt,"uppy-story-upload-success":Ee,"uppy-story-upload-error":$e};Object.entries(yt).forEach(([ct,pi])=>{window.addEventListener(ct,pi)}),tt.current=yt},Et=()=>{tt.current&&(Object.entries(tt.current).forEach(([yt,ct])=>{window.removeEventListener(yt,ct)}),tt.current=null)};let Tt=!1;const ni=async()=>{try{if(Tt)return;let yt=document.getElementById("uppyStoryModalOpener");if(!yt&&(await new Promise(ct=>setTimeout(ct,200)),yt=document.getElementById("uppyStoryModalOpener"),!yt)){console.warn("Uppy story trigger button not found in DOM");return}if(!YZ())Xe.current||(Xe.current=WZ(n.siteUrl).then(ct=>(Tt||(Be.current=ct),Xe.current=null,ct)).catch(ct=>{throw Xe.current=null,ct})),await Xe.current;else if(Be.current=KZ(),Be.current){const ct=Be.current.getPlugin("Dashboard");if(ct&&yt)try{ct.opts&&(ct.opts.trigger="#uppyStoryModalOpener")}catch(pi){console.log("Dashboard configuration check:",pi)}}!Tt&&Be.current&&It()}catch(yt){console.error("Error initializing story Uppy:",yt),Xe.current=null}},Qt=setTimeout(()=>{ni()},300);return()=>{Tt=!0,clearTimeout(Qt),Et()}},[n?.siteUrl,e?.id,o,r,Yt]);const ii=ke=>{l(ke),P(""),L(""),ke==="stories"?(_(!0),R(!1),P("is-active")):ke==="live"&&(_(!1),R(!0),L("is-active"))},$t=ke=>ke?ke.startsWith("http")?ke:`${n?.siteUrl||""}${ke.startsWith("/")?ke:`/${ke}`}`:"",Te=ke=>{if(!e?.id||!ke)return;if(console.log("openStory called with story:",ke),(n?.plugins?.story?.onlyPremium||"No")==="Yes"&&e?.premium===0&&ke.uid!==e?.id){r("Premium membership required to view stories","error",3e3);return}console.log("Opening story viewer for userId:",ke.uid,"storyId:",ke.id),ge(ke.uid),De(ke.id),ae(!0)},Me=(ke,lt)=>{console.log("openProfile",ke),lt&&lt.stopPropagation(),Y(ke),se(!0)},kt=()=>{console.log("handleMyStoryClick"),e?.id&&j(!0)},Ct=async()=>{if(e?.id)try{((await Ne.query("checkHasStory",String(e.id),n)).story||0)>0?(ge(e.id),De(null),ae(!0)):r(i[270]||"You have no stories","neutral",3e3)}catch(ke){console.error("Error checking stories:",ke)}},Bt=()=>{if(console.log("Opening Uppy Dashboard for story upload..."),Be.current){const ke=Be.current.getPlugin("Dashboard");ke&&typeof ke.openModal=="function"?ke.openModal():(console.error("Dashboard plugin not available or openModal method not found"),r("Upload story feature is not available","error",3e3))}else console.error("Uppy story instance not initialized"),r("Upload story feature is not available","error",3e3)},Xt=(ke,lt,Ee,$e,It,Et,Tt,ni,Qt,yt,ct,pi)=>{window.watchLive&&window.watchLive(ke,lt,Ee,$e,It,Et,Tt,ni,parseInt(String(Qt)),parseInt(String(yt)),ct,pi)};n?.siteUrl;const Ut=o==="stories"?i[259]||"Stories":s[765]||"Live Streams";return e?m.jsxs($i,{className:"has-tabbar",children:[m.jsxs("div",{className:"content-header-meet",children:[m.jsx("div",{className:"content-header-messages-title",children:m.jsx("h2",{className:"twigo-font",children:Ut})}),m.jsx("div",{className:"content-header-meet-right",onClick:()=>q(!0),children:m.jsxs("svg",{id:"Filters_btn",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"40",height:"38.667",viewBox:"0 0 40 38.667",children:[m.jsx("defs",{children:m.jsx("clipPath",{id:"clip-path",children:m.jsx("ellipse",{id:"Oval",cx:"20",cy:"19.333",rx:"20",ry:"19.333",fill:"rgba(0,0,0,0.1)"})})}),m.jsx("ellipse",{id:"Oval-2","data-name":"Oval",cx:"20",cy:"19.333",rx:"20",ry:"19.333",fill:"rgba(0,0,0,0.1)"}),m.jsx("path",{id:"Filters",d:"M5.45,14.5a1.45,1.45,0,1,1,0-2.9h9.1a1.45,1.45,0,0,1,0,2.9Zm-2-5.8a1.45,1.45,0,0,1,0-2.9h13.1a1.45,1.45,0,0,1,0,2.9Zm-2-5.8a1.45,1.45,0,1,1,0-2.9h17.1a1.45,1.45,0,0,1,0,2.9Z",transform:"translate(10 12.567)",fill:"#fff"})]})}),m.jsxs("div",{className:"tabs tabs-top visible meet-tabs-select",children:[m.jsx("div",{className:`tab ${M} meet-tabs`,onClick:()=>ii("stories"),children:m.jsx("div",{className:"tab__label comforta stories-tab",children:i[259]||"Stories"})}),H&&m.jsx("div",{className:`tab ${N} meet-tabs-live`,onClick:()=>ii("live"),children:m.jsxs("div",{className:"tab__label comforta stories-tab",children:[s[765]||"Live Streams",f.length>0&&m.jsx("span",{className:"badge badge-tab",children:f.length})]})})]})]}),m.jsx(Wt,{scrollY:!0,className:"vivify fadeIn meet-content",style:{paddingBottom:"0px",marginBottom:"70px"},children:m.jsxs("div",{className:"page-content stories-page",children:[k&&m.jsx("div",{className:"stories-feed-layout stories-discover stories-list","data-stories-discover":!0,children:m.jsx("div",{className:"stories-feed stories-discover-feed stories-list-feed",style:{height:"inherit",position:"relative",display:"block",marginBottom:"70px",overflow:"auto",textAlign:"center"},children:m.jsx("div",{id:"storiesMobile",ref:ze,className:b?"":"stories-grid-container",children:b?m.jsx("div",{className:"stories-loading-container",children:m.jsx(Wi,{})}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"story-container",onClick:kt,children:m.jsxs("div",{className:"story-preview vivify stories-my-story",children:[m.jsx("div",{className:"story-preview-background profile-photo","data-discover-upload-story":"1",style:{backgroundImage:`url(${$t(e.profile_photo||"")})`}}),m.jsx("div",{className:"story-preview-mask-me"}),m.jsx("p",{className:"story-preview-name",id:"uploadStoryMobile","data-upload-story":!0,children:m.jsx("span",{children:s[618]||"My Story"})})]})}),E&&d.length>0&&m.jsx(m.Fragment,{children:d.map((ke,lt)=>m.jsx(qZ,{story:ke,index:lt,getPhotoUrl:$t,onStoryClick:Te,onProfileClick:Me},ke.id))}),!E&&!b&&m.jsx("div",{style:{padding:"50px 20px",textAlign:"center"},children:m.jsxs("div",{className:"encounters-message",children:[m.jsx("h1",{className:"comforta",children:i[162]||"No stories available"}),m.jsx("span",{children:i[163]||"Try again later"})]})}),U&&E&&m.jsx("div",{ref:Qe,className:"stories-load-more-trigger",children:y?m.jsx("div",{className:"stories-loading-spinner",children:m.jsx(Wi,{})}):m.jsx("div",{style:{height:"1px",width:"100%"}})})]})})})}),O&&m.jsx("div",{className:"stream-page__content",children:m.jsx("div",{className:"stream-page__section",children:b?m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"50px"},children:m.jsx(Wi,{})}):f.length>0?m.jsx("section",{className:"stream-list",children:m.jsx("div",{className:"stream-list__content",children:m.jsx("section",{className:"stream-slider",children:m.jsx("div",{className:"stream-slider__scroll",children:m.jsx("div",{className:"stream-slider__items vivify fadeIn",children:f.map((ke,lt)=>m.jsx("div",{className:"stream-slider__item",children:m.jsx("div",{className:"stream-card",children:m.jsx("figure",{className:"user-card",id:"figure1","data-qa":"user-card",onClick:()=>Xt(ke.full.id,ke.streamPhoto,ke.full.uid,ke.streamName,ke.streamAge,ke.streamTimeCounter,ke.streamCustomTxt,ke.streamTimeM,ke.full.viewers,ke.full.credits,ke.full.in_private,ke.full.private_price),children:m.jsxs("div",{className:"user-card__content",children:[m.jsx("div",{className:"user-card__photo",children:m.jsx("img",{className:"user-card__img",id:`live_preview${ke.full.id}`,src:ke.full.live_preview,alt:ke.streamName})}),ke.full.in_private==="Yes"&&m.jsx("div",{className:"icon icon--block icon--xsm stories-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),m.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),m.jsx("div",{className:"user-card__slot-bottom",children:m.jsx("div",{className:"user-card-stack",children:m.jsx("div",{className:"user-card-stack__left",children:m.jsx("div",{className:"user-card-stack__item",children:m.jsx("div",{className:"user-card-caption",children:m.jsx("div",{className:"user-card-caption__main",children:m.jsx("div",{className:"user-card-caption__account",children:m.jsx("div",{className:"user-card-caption__name",title:ke.streamName,dir:"auto",children:ke.streamName})})})})})})})})]})})})},ke.full.id))})})})})}):m.jsxs("div",{className:"credits-section text-center mt-25",children:[m.jsx("div",{className:"wrapper text-center",children:m.jsx("div",{className:"pos-rlt bg-none",children:m.jsx("div",{className:"thumb-xl",children:m.jsx("img",{src:$t(t?.theme_url+"/images/no-streams.svg")||"",alt:"No streams"})})})}),m.jsx("h1",{className:"font-bold fs-18",children:s[734]||"No live streams available"}),m.jsxs("h4",{className:"font-bold fs-13-color",children:[s[735]||"Check back later",m.jsx("br",{}),s[592]||"for new streams"]}),m.jsx("br",{})]})})})]})}),X&&re&&m.jsx(VZ,{isOpen:X,onClose:()=>{ae(!1),ge(null),De(null)},userId:re,storyId:Se}),Z&&z&&z.uid&&m.jsx(Da,{isOpen:Z,onClose:()=>{se(!1),Y(null)},userId:z.uid}),V&&m.jsx(jp,{isOpen:V,onClose:()=>{q(!1),o==="stories"&&He()}}),m.jsx(Bn,{isOpen:ie,onDidDismiss:()=>j(!1),buttons:[{text:i[260]||"View my stories",handler:()=>{Ct()}},{text:i[269]||"Upload story",handler:()=>{Bt()}},{text:i[2]||"Cancel",role:"cancel"}]}),m.jsx("button",{id:"uppyStoryModalOpener",style:{display:"none"},type:"button",children:"Upload Story"}),et&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",zIndex:99999,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[m.jsx(Wi,{style:{width:"80px",height:"80px",color:"#fff"}}),m.jsx("p",{style:{color:"#fff",fontSize:"18px",marginTop:"20px",fontWeight:"bold",textAlign:"center"},children:"Processing your story..."}),m.jsx("p",{style:{color:"#fff",fontSize:"14px",marginTop:"10px",textAlign:"center",opacity:.8},children:"Please wait while we check your content"})]})]}):m.jsx($i,{children:m.jsx(Wt,{fullscreen:!0,children:m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:m.jsx(Wi,{})})})})}function QZ(){return m.jsxs($i,{children:[m.jsx(Ca,{children:m.jsx(Ra,{children:m.jsx(Ia,{children:"menu"})})}),m.jsx(Wt,{fullscreen:!0,children:m.jsx("div",{style:{padding:16},children:"menu"})})]})}function ZZ(){return m.jsxs($i,{children:[m.jsx(Ca,{children:m.jsx(Ra,{children:m.jsx(Ia,{children:"location"})})}),m.jsx(Wt,{fullscreen:!0,children:m.jsx("div",{style:{padding:16},children:"location"})})]})}function JZ(){const n=vs(),{settings:e}=Ti(),{user:t,config:i,prices:s,setUser:r}=Ki(),o=Yi(),l=wn(),{showNotification:d}=In(),[u,f]=C.useState([]),[p,b]=C.useState([]),[v,y]=C.useState(!0),[w,E]=C.useState(!1),[T,k]=C.useState(!1),[_,O]=C.useState(""),[R,M]=C.useState(10),[P,N]=C.useState(!1),[L,D]=C.useState(!1),[$,U]=C.useState(!1),[G,Z]=C.useState(!1),[se,z]=C.useState(!1),[Y,V]=C.useState(!1),[q,ie]=C.useState(null),[j,H]=C.useState([]),[K,X]=C.useState(!1),[ae,re]=C.useState(0),[ge,Se]=C.useState(!1),De=C.useRef(null);C.useEffect(()=>{if(!t?.id||!e){n("/loader");return}const Te=new Date().getTime()/1e3;t.last_access>Te&&t.discover>0?N(!1):N(!0),ze(),Qe(),nt(),Pt();const Me=kt=>{const Ct=kt.detail;Ct.id!=ae&&(ze(),X(!0)),q.id!=Ct.id&&d(Ct.message||"","success")};return window.addEventListener("pusher:notification",Me),()=>{window.removeEventListener("pusher:notification",Me)}},[t?.id,e,ae]);const ze=async()=>{if(t?.id)try{const Te=await Ne.game("getChat",t.id,e);Te.matches&&(f(Te.matches),b(Te.matches))}catch(Te){console.error("Error loading chats:",Te)}finally{y(!1)}},Qe=async()=>{if(t?.id)try{const Te=await Ne.game("spotlight",t.id,e);Te.spotlight&&H(Te.spotlight)}catch(Te){console.error("Error loading spotlight:",Te)}},nt=async()=>{if(t?.id)try{const Te=await Ne.device("unreadMessageCnt",String(t.id),e);if(Te.unreadMessageCount!==void 0){const Me=Te.unreadMessageCount;if(t){const kt={...t,unreadMessagesCount:Me};r(kt)}X(Me>0)}}catch(Te){console.error("Error loading unread message count:",Te)}},Pt=async()=>{if(e?.aUrl)try{const Me=await(await fetch(`${e.aUrl}?action=dateRequests&data=&filter=&mobile=true`,{credentials:"include"})).json();Me.results>0&&(window.dating_plans=Me.data)}catch(Te){console.error("Error loading dates:",Te)}},Ce=Te=>{if(O(Te),Te.length===0){b(u),k(!1);return}k(!0);const Me=u.filter(kt=>{const Ct=Te.toUpperCase();return kt.name.toUpperCase().indexOf(Ct)>=0});b(Me)},at=()=>{O(""),b(u),k(!1)},Ie=async Te=>{if(t?.id){f(Me=>Me.filter(kt=>kt.id!==Te.id)),b(Me=>Me.filter(kt=>kt.id!==Te.id));try{const Me=`${t.id},${Te.id}`;await Ne.query("del_conv",Me,e)}catch(Me){console.error("Error deleting conversation:",Me)}}},et=(Te,Me,kt)=>{re(kt.id),ie(kt),V(!0)},we=Te=>{U(!0)},ee=()=>{U(!1)},_e=async()=>{if(!t?.id||ge)return;const Te=parseInt(String(s?.discover||0));try{if(Se(!0),!await rn.wasteCredit(Te,o[231]||"Boost Discover",!1,!0)){U(!1);return}const kt=`${t.id},${Te}`,Ct=await Ne.query("discover100",kt,e);Ct.user&&(r(Ct.user),localStorage.setItem("user",JSON.stringify(Ct.user)),N(!1),U(!1))}catch(Me){console.error("Error boosting discover:",Me),d(l[305]||"Something went wrong. Please try again.","error",3e3)}finally{Se(!1)}},Be=()=>{D(!1)},Xe=async()=>{if(!t?.id)return;const Te=s?.spotlight||0;if(rn.hasEnoughCredits(parseInt(String(Te))))try{await Ne.query("addToSpotlight",String(t.id),e)&&Qe()}catch(Me){console.error("Error adding to spotlight:",Me)}},tt=(Te,Me)=>{window.openStoryDiscover&&window.openStoryDiscover(0,Te)},He=Te=>Te?Te.startsWith("http")?Te:`${e?.siteUrl||""}${Te.startsWith("/")?Te:`/${Te}`}`:"",We=Te=>Te?Te.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'"):"",vt=Te=>Te?Te.split(`
`).map((Me,kt)=>m.jsxs(Pe.Fragment,{children:[Me,kt<Te.split(`
`).length-1&&m.jsx("br",{})]},kt)):"",ii=p.slice(0,R);e?.siteUrl;const $t=t?.profile_photo||"";return m.jsxs($i,{children:[m.jsxs("div",{className:"content-header-messages",children:[m.jsx("div",{className:"content-header-messages-title",children:m.jsx("h2",{className:"twigo-font",children:o[96]||"Messages"})}),m.jsx("div",{className:`loader02 chats-loader ${v||w?"":"hidden"}`}),m.jsxs("div",{className:"contact-list-search chats-search",children:[m.jsx(af,{icon:KH,className:"contact-list-search__icon",style:{fontSize:"22px"}}),m.jsx("input",{type:"search",onChange:Te=>Ce(Te.target.value),value:_,placeholder:l[621]||"Search",className:"font-base2 contact-list-search__input twigo-font"}),T&&m.jsx("span",{className:"font-base2 contact-list-search__cancel twigo-font",onClick:at,children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"#5e5b5b",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"}),m.jsx("line",{x1:"18",y1:"9",x2:"12",y2:"15"}),m.jsx("line",{x1:"12",y1:"9",x2:"18",y2:"15"})]})})]})]}),m.jsx(Wt,{className:"vivify chats-content",scrollEvents:!0,children:m.jsx("div",{className:"page matches visible page-container",ref:De,children:m.jsx("div",{className:"folder-view",children:m.jsxs("div",{className:"contact-list mt-85",children:[P&&m.jsx("div",{className:"csms-connections-item csms-connections-item--user",onClick:()=>we(),children:m.jsxs("div",{className:"feature-card",children:[m.jsx("div",{className:"feature-card__promo",children:m.jsxs("div",{className:"brick brick--md","data-qa":"brick",children:[m.jsx("div",{className:"brick__image",style:{backgroundImage:`url('${He($t)}')`}}),m.jsx("div",{className:"brick__badge brick__badge--br",children:m.jsx("div",{className:"icon icon--md icon--branded icon--shadow","data-qa":"icon",children:m.jsx("svg",{className:"icon__content icon__content--inactive",children:m.jsxs("svg",{viewBox:"0 0 64 64",id:"icon-circle-extra-shows",width:"100%",height:"100%",children:[m.jsx("circle",{fill:"#00CAA8",cx:"32",cy:"32",r:"32"}),m.jsx("path",{d:"M37.19 21.33h5.84a3.2 3.2 0 0 1 3.2 3.2v17.78a3.2 3.2 0 0 1-3.2 3.2H30.21a3.2 3.2 0 0 1-2.74-1.56l10.25-2.75A4.62 4.62 0 0 0 41 35.54l-3.8-14.2zM16.47 23.7l4.6 17.18A3.2 3.2 0 0 0 25 43.14l12.35-3.32a3.2 3.2 0 0 0 2.27-3.91l-4.6-17.18a3.2 3.2 0 0 0-3.92-2.26l-12.36 3.31a3.2 3.2 0 0 0-2.27 3.92z",fill:"#FFF"})]})})})})]})}),m.jsx("div",{className:"feature-card__content",children:m.jsx("div",{className:"feature-card__title",children:o[231]||"Boost Discover"})})]})}),m.jsx($y,{className:"",children:ii.map((Te,Me)=>m.jsxs(eF,{children:[m.jsx(Vf,{className:"item-content chats-list","nav-transition":"none",children:m.jsx("div",{className:"csms-connections-item csms-connections-item--user vivify",children:m.jsxs("div",{className:"csms-spring-box",children:[m.jsx("div",{className:"csms-spring-box__media",children:m.jsx("div",{className:"csms-connections-item__media",children:m.jsxs("div",{className:`csms-brick csms-brick--circle csms-brick--sm ${Te.story&&Te.story>0?"storyOn profile-view-story-border-matches":""}`,onClick:()=>Te.story&&Te.story>0&&tt(Te.id,Te.story),children:[m.jsx("div",{className:"csms-brick__avatar",children:m.jsx("div",{className:"csms-avatar",children:m.jsx("div",{className:"csms-avatar__image",style:{backgroundImage:`url('${He(Te.photo)}')`}})})}),Te.unreadCount>0&&m.jsx("div",{className:"csms-brick__badge csms-brick__badge--br",children:m.jsx("div",{className:"csms-mark csms-mark--red csms-mark--shadow",children:m.jsx("span",{className:"csms-p-3",children:Te.unreadCount})})})]})})}),m.jsxs("div",{className:"csms-spring-box__content",onClick:()=>et("home.messaging","left",Te),children:[m.jsx("div",{className:"csms-connections-item__profile",children:m.jsx("span",{className:"csms-p-1",children:m.jsxs("div",{className:"csms-profile-info",children:[m.jsx("div",{className:"csms-profile-info__name",children:m.jsx("span",{className:"csms-profile-info__name-inner twigo-font font-bold font-dark-gray",children:Te.name})}),m.jsx("div",{className:"csms-profile-info__status",children:Te.status===1&&m.jsx("div",{className:"csms-online-status csms-online-status--online"})})]})})}),m.jsxs("div",{className:"csms-connections-item__message","data-qa":"csms-connections-item__message",children:[m.jsx("span",{className:"csms-p-1 twigo-font",children:vt(We(Te.last_m))}),Te.last_m_t&&m.jsx("div",{className:"text-xs text-muted text-right ng-binding chats-last-m-t",children:Te.last_m_t})]})]})]})})}),m.jsx(J8,{side:"end",children:m.jsx(rF,{color:"danger",className:"button-chat-delete",onClick:()=>Ie(Te),children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("polyline",{points:"3 6 5 6 21 6"}),m.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),m.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),m.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})})]},Te.id))})]})})})}),L&&m.jsx("div",{className:"wrapper-reward",children:m.jsxs("div",{className:"modal-reward modal--congratulations gradient18 vivify fadeIn",style:{borderRadius:"10px"},children:[m.jsxs("div",{className:"modal-reward-top boostSpotlight",style:{background:"none"},children:[m.jsx("div",{className:"klose animated fadeInUp",style:{background:"#333"},onClick:Be,children:m.jsx(af,{icon:Iv,style:{lineHeight:"27px",fontSize:"24px"}})}),m.jsx("div",{className:"modal-reward-icon u-imgResponsive animated fadeInUp rounded profileP",style:{width:"120px",height:"120px",backgroundImage:`url(${He($t)})`}}),m.jsx("div",{className:"modal-reward-header animated fadeInUp",children:o[119]||"Add to Spotlight"}),m.jsxs("div",{className:"modal-reward-subheader animated fadeInUp comforta",style:{fontSize:"12px"},children:[o[120]||"Get more visibility",m.jsx("br",{}),o[121]||"Cost"," ",m.jsx("strong",{children:s?.spotlight||0})," ",o[48]||"credits"]})]}),m.jsx("div",{className:"modal-reward-bottom",style:{background:"none"},onClick:Xe,children:m.jsx("button",{className:"modal-reward-btn u-btn u-btn--danger comforta",style:{background:"#fff",color:"#333",fontSize:"16px"},children:o[122]||"Add to Spotlight"})})]})}),$&&m.jsx("div",{className:"wrapper-reward",children:m.jsxs("div",{className:"modal-reward modal--congratulations vivify fadeIn boostDiscover",style:{borderRadius:"10px"},children:[m.jsxs("div",{className:"modal-reward-top",style:{background:"none"},children:[m.jsx("div",{className:"klose animated fadeInUp",style:{background:"#333"},onClick:ee,children:m.jsx(af,{icon:Iv,style:{lineHeight:"27px",fontSize:"24px"}})}),m.jsx("div",{className:"modal-reward-icon u-imgResponsive animated fadeInUp rounded profileP",style:{width:"120px",height:"120px",backgroundImage:`url(${He($t)})`}}),m.jsx("div",{className:"modal-reward-header animated fadeInUp",children:o[231]||"Boost Discover"}),m.jsxs("div",{className:"modal-reward-subheader animated fadeInUp comforta",style:{fontSize:"12px"},children:[o[232]||"Get discovered by more people",m.jsx("br",{}),o[121]||"Cost"," ",m.jsx("strong",{children:s?.discover||0})," ",o[48]||"credits"]})]}),m.jsx("div",{className:"modal-reward-bottom",style:{background:"none",opacity:ge?.7:1},onClick:_e,children:m.jsx("button",{className:"modal-reward-btn u-btn u-btn--danger comforta",style:{background:"#fff",color:"#333"},disabled:ge,children:ge?o[1133]||"Processing...":o[235]||"Boost"})})]})}),m.jsx(tu,{isOpen:G,onClose:()=>Z(!1),userPhoto:$t}),q&&m.jsx(Da,{isOpen:se,onClose:()=>{z(!1),ie(null)},userId:q.id}),q&&m.jsx(LR,{isOpen:Y,onClose:()=>{V(!1),ie(null),ze()},selectedUser:q})]})}const eJ=({isOpen:n,onClose:e,user:t,onUserUpdate:i})=>{const{settings:s}=Ti(),{config:r,setUser:o,reloadUser:l}=Ki(),d=Yi(),u=wn(),{showNotification:f}=In(),p=C.useRef(null),b=C.useRef(null),v=C.useRef(null),y=C.useRef(null),w=C.useRef(null),E=C.useRef(null),[T,k]=C.useState(!1),[_,O]=C.useState([]),[R,M]=C.useState(""),[P,N]=C.useState(""),[L,D]=C.useState(""),[$,U]=C.useState(""),[G,Z]=C.useState(""),[se,z]=C.useState(""),[Y,V]=C.useState(0),[q,ie]=C.useState(""),[j,H]=C.useState([]),[K,X]=C.useState([]),[ae,re]=C.useState(!1),[ge,Se]=C.useState(!1),[De,ze]=C.useState(!1),[Qe,nt]=C.useState(!1),[Pt,Ce]=C.useState(!1),[at,Ie]=C.useState(!1),[et,we]=C.useState(!1),[ee,_e]=C.useState(!1),[Be,Xe]=C.useState(!1),[tt,He]=C.useState(null),[We,vt]=C.useState(-1),[Yt,ii]=C.useState(0),$t=s?.languages||[];let Te=r?.genders;(!Te||!Array.isArray(Te)||Te.length===0)&&(Te=[{id:1,text:"Male"},{id:2,text:"Female"}]);const Me=Te.map((te,Re)=>typeof te=="string"?{id:Re+1,text:te}:{id:te.id!==void 0?te.id:Re+1,text:te.text||te.name||String(te)});C.useEffect(()=>(n&&t&&kt(),()=>{b.current&&clearTimeout(b.current),v.current&&clearTimeout(v.current),y.current&&clearTimeout(y.current),w.current&&clearTimeout(w.current),E.current&&clearTimeout(E.current)}),[n,t]);const kt=()=>{if(!t)return;const te=t.photos||[],Re=[null,null,null,null,null,null];te.forEach((ot,fe)=>{fe<6&&(Re[fe]=ot)}),O(Re),M(t.username||""),N(t.email||""),D(t.name||t.first_name||""),U(t.age||""),Z(t.bio||"");const Ke=t.gender||1;V(Ke);let Ye="";const pt=Me.find(ot=>ot.id===Ke);if(pt)Ye=pt.text||pt.name||"";else if(Me.length>0){const ot=Ke-1;Me[ot]&&(Ye=Me[ot].text||Me[ot].name||"")}!Ye&&Me.length>0&&(Ye=Me[0].text||Me[0].name||"Male"),z(Ye);const ki=t.lang||1,Ri=$t.find(ot=>ot.id===ki);ie(Ri?.name||Ri?.text||""),H(t.question||[]);const bi=r?.interests||[],ue=t.interest||{},Le=bi.map(ot=>({...ot,selected:ue[ot.id]!==void 0?"":"grayScale",action:ue[ot.id]!==void 0?"remove":"add"}));X(Le);const Ge=t.notification||{};re(Ge.match_me?.inapp==1||!1),Se(Ge.fan?.inapp==1||!1),ze(Ge.message?.inapp==1||!1),nt(Ge.near_me?.inapp==1||!1)},Ct=async(te,Re,Ke=!0)=>{if(!(!t||!t.id))try{let Ye=`${t.id},${Re},${te}`;if(te==="bio"){Ye=`${t.id}[divider]${Re}[divider]${te}`;const pt=await Ne.custom("/requests/api.php",{action:"updateUser",query:Ye,divider:"[divider]"},s);pt.user&&Zi(pt.user,Ke)}else{const pt=await Ne.custom("/requests/api.php",{action:"updateUser",query:Ye},s);pt.user&&Zi(pt.user,Ke)}}catch(Ye){console.error("Error updating user field:",Ye),f("Error updating profile","error",2e3)}},Bt=te=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(te),Xt=async(te,Re,Ke)=>{if(!(!t||!t.id)){if(te==="email"&&Ke&&!Bt(Ke)){console.log("Email validation failed:",Ke),f(u[28]?`${u[28]} is invalid`:"Email is invalid","error",3e3),N(t.email||"");return}try{k(!0);const Ye=`${Re},${Ke}`,pt=await Ne.query("checkUsername",Ye,s),ki=pt.validUsername,Ri=pt.validEmail;if(ki==="No"&&te==="username"){const bi=pt.validUsernameMsg||(u[331]?`${u[331]} is already taken`:"Username already taken");console.log("Username validation failed:",bi),f(bi,"error",3e3),M(t.username||"");return}if(Ri==="No"&&te==="email"){const bi=pt.validEmailMsg||(u[28]?`${u[28]} is already taken or invalid`:"Email is already taken or invalid");console.log("Email validation failed from API:",bi),f(bi,"error",3e3),N(t.email||"");return}ki==="Yes"&&Ri==="Yes"&&await Ct(te,te==="username"?Re:Ke)}catch(Ye){console.error("Error checking username/email:",Ye),f("Error validating username/email","error",3e3),te==="username"?M(t.username||""):te==="email"&&N(t.email||"")}finally{k(!1)}}},Ut=te=>{M(te),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{te&&te!==t.username&&Xt("username",te,P)},500)},ke=te=>{if(N(te),E.current&&clearTimeout(E.current),te.trim()!==""){if(te!==t.email&&!Bt(te)){E.current=setTimeout(()=>{const Re=u[28]?`${u[28]} is invalid`:"Email is invalid";console.log("Showing invalid email notification:",Re),f(Re,"error",3e3),setTimeout(()=>{N(t.email||"")},100)},500);return}E.current=setTimeout(()=>{te&&te!==t.email&&Xt("email",R,te)},500)}},lt=te=>{D(te),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{te&&te!==(t.name||t.first_name)&&Ct("name",te)},500)},Ee=te=>{U(te),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{te&&te!==String(t.age)&&Ct("age",te)},500)},$e=te=>{Z(te),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{te!==t.bio&&Ct("bio",te)},500)},It=async te=>{if(!t||!t.id||!te)return;const Re=te.text||te.name||"",Ke=te.id||Me.indexOf(te)+1;z(Re),V(Ke),Ce(!1);try{k(!0);const Ye=`${t.id},${Ke}`,pt=await Ne.custom("/requests/api.php",{action:"updateUserGender",query:Ye},s);pt.user&&Zi(pt.user)}catch(Ye){console.error("Error updating gender:",Ye),f("Error updating gender","error",2e3)}finally{k(!1)}},Et=async te=>{if(!t||!t.id)return;if(s?.updateVisitorLanguage){const Ke=s?.siteUrl||"";window.location.href=`${Ke}/mobile/index.php?lang=${te}`;return}try{k(!0);const Ke=`${t.id},${te}`,Ye=await Ne.query("updateUserLanguage",Ke,s);Ye.user&&(Zi(Ye.user),f("Language updated","success",2e3),Ie(!1),e(),window.location.reload())}catch(Ke){console.error("Error updating language:",Ke),f("Error updating language","error",2e3)}finally{k(!1)}},Tt=async(te,Re)=>{!t||!t.id||te.method!=="select"||(He(te),we(!0))},ni=async te=>{if(!(!t||!t.id||!tt))try{k(!0);const Re=`${t.id}[divider]${tt.id}[divider]${te.text}`,Ke=await Ne.custom("/requests/api.php",{action:"updateUserExtended",query:Re,divider:"[divider]"},s);if(Ke.user){Zi(Ke.user);const Ye=j.map(pt=>pt.id===tt.id?{...pt,userAnswer:te.text}:pt);H(Ye)}}catch(Re){console.error("Error updating question:",Re),f("Error updating answer","error",2e3)}finally{k(!1),we(!1),He(null)}},Qt=async te=>{if(!t||!t.id)return;const Re=K.find(ue=>ue.id===te);if(!Re)return;const Ke=Re.action,Ye=Ke==="add"?"remove":"add",pt=Ke==="add"?"":"grayScale",ki=K.map(ue=>ue.id===te?{...ue,action:Ye,selected:pt}:ue);X(ki);const Ri=`${t.id},${te}`,bi=Ke==="add"?"add_interest":"del_interest";await Ne.query(bi,Ri,s)},yt=async(te,Re)=>{if(!t||!t.id)return;const Ke=Re?1:0,Ye=`${t.id},${te},${Ke}`;try{await Ne.query("updateNotification",Ye,s)}catch(pt){console.error("Error updating notification:",pt)}},ct=(te=0)=>{const Re=te===0?0:te-1;vt(Re),p.current?.click()},pi=async te=>{const Re=te.target.files?.[0];if(!(!Re||!t||!t.id))try{k(!0);const Ke=new FormData;Ke.append("file",Re);const Ye=We===0?0:We+1;Ke.append("slot",String(Ye)),Ke.append("uid",String(t.id));const pt=s?.siteUrl||"",ki=await fetch(`${pt}assets/sources/upload.php`,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},body:Ke});if(!ki.ok)throw new Error(`Upload failed: ${ki.status}`);const Ri=await ki.json();if(Ri.error||Ri.erorr||Ri.status!=="ok"){f("Error uploading photo","error",2e3);return}const bi={path:Ri.path,thumb:Ri.thumb||"",video:Ri.video||0},ue=new FormData;ue.append("action","uploadMedia"),ue.append("media[0][path]",bi.path),ue.append("media[0][thumb]",bi.thumb),ue.append("media[0][video]",String(bi.video));const Le=await Ne.bellooPost(ue,s);if(Le.error||!Le.data)f("Error processing photo","error",2e3);else{const Ge=[..._];if(Ge[We]=Le.data,O(Ge),t.photos){const ot=[...t.photos];ot[We]=Le.data;const fe={...t,photos:ot};Zi(fe)}f("Photo uploaded successfully","success",2e3)}}catch(Ke){console.error("Error uploading photo:",Ke),f("Error uploading photo","error",2e3)}finally{k(!1),p.current&&(p.current.value="")}},Xi=(te,Re,Ke)=>{if(Ke===0){f(u[697]||"Photo not approved","error",2e3);return}vt(te),ii(Re),_e(!0)},Qi=async te=>{if(!(!t||!t.id||We<0))try{k(!0);const Re=`${t.id},${Yt}`;if(te==="setMain"){const Ke=_[0],Ye=_[We],pt=[..._];pt[0]=Ye,pt[We]=Ke,O(pt);const ki=await Ne.query("updateUserProfilePhoto",Re,s);ki.user&&Zi(ki.user)}else if(te==="delete"){const Ke=[..._];Ke[We]=null,O(Ke);const Ye=await Ne.query("deletePhoto",Re,s);Ye.user&&Zi(Ye.user)}}catch(Re){console.error("Error handling photo action:",Re),f("Error updating photo","error",2e3)}finally{k(!1),_e(!1),vt(-1),ii(0)}},Sn=async()=>{if(!(!t||!t.id))try{k(!0);const te=String(t.id);await Ne.query("delete_profile",te,s),localStorage.setItem("user",""),localStorage.setItem("userHistory",""),window.userId=null,window.location.href="/loader"}catch(te){console.error("Error deleting profile:",te),f("Error deleting profile","error",2e3)}finally{k(!1),Xe(!1)}},Zi=(te,Re=!1)=>{localStorage.setItem("user",JSON.stringify(te)),te.photos&&(localStorage.setItem("usPhotos",JSON.stringify(te.photos)),window.usPhotos=te.photos),window.user=te,window.user_info=te,Re||(o(te),i&&n&&i(te))},pe=te=>te?te.startsWith("http")?te:`${s?.siteUrl||""}${te.startsWith("/")?te:`/${te}`}`:"",je=te=>te?te.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'"):"",xt=()=>{const Re=`${s?.site_url||s?.siteUrl||window.location.origin}index.php?page=pp`;window.open(Re,"_blank")},Mt=()=>{const Re=`${s?.site_url||s?.siteUrl||window.location.origin}index.php?page=tac`;window.open(Re,"_blank")},rt=()=>{localStorage.setItem("user",""),localStorage.setItem("userHistory",""),window.userId=null,window.location.href="/welcome"},xi=tt?.answers||[];return We>=0&&(u[289],u[292],d[2]),m.jsxs(ms,{isOpen:n,onDidDismiss:e,children:[m.jsx(Ca,{children:m.jsxs(Ra,{children:[m.jsx(Ia,{className:"twigo-font",children:u[135]||"Edit Profile"}),m.jsx(My,{slot:"end",children:m.jsx(jy,{onClick:e,children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),m.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})})})]})}),m.jsxs(Wt,{className:"profile mt-45px",children:[T&&m.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:9999},children:m.jsx(Wi,{})}),m.jsxs("div",{className:"photos edit-photos",children:[m.jsxs("div",{className:"row",children:[m.jsx("div",{className:"col col-66",children:_[0]===null?m.jsx("div",{className:"photo-pickable",children:m.jsx("div",{className:"w-full r-3x profileP photo1",onClick:()=>ct()})}):m.jsxs("div",{className:"photo-pickable",children:[m.jsx("div",{className:"w-full r-3x profileP photo1",style:{backgroundImage:`url(${pe(_[0]?.photo||"")})`}}),m.jsx("div",{className:"edit-profile-photo-number",children:m.jsx("span",{children:"1"})})]})}),m.jsxs("div",{className:"col col-33",children:[_[1]===null?m.jsxs("div",{className:"photo-pickable",onClick:()=>ct(2),children:[m.jsx("div",{className:"w-full r-3x m-b-xs profileP photo2",id:"photo2"}),m.jsx("div",{className:"edit-profile-photo-number",children:m.jsx("span",{children:"2"})})]}):m.jsxs("div",{className:"photo-pickable",children:[m.jsx("div",{className:"w-full r-3x m-b-xs profileP photo2",onClick:()=>Xi(1,_[1]?.id,_[1]?.approved||0),style:{backgroundImage:`url(${pe(_[1]?.photo||"")})`}}),m.jsx("div",{className:"edit-profile-photo-number",children:m.jsx("span",{children:"2"})})]}),_[2]===null?m.jsxs("div",{className:"photo-pickable mt-15px",onClick:()=>ct(3),children:[m.jsx("div",{className:"w-full r-3x profileP photo2",id:"photo3"}),m.jsx("div",{className:"edit-profile-photo-number",children:m.jsx("span",{children:"3"})})]}):m.jsxs("div",{className:"photo-pickable mt-15px",children:[m.jsx("div",{className:"w-full r-3x profileP photo2",onClick:()=>Xi(2,_[2]?.id,_[2]?.approved||0),style:{backgroundImage:`url(${pe(_[2]?.photo||"")})`}}),m.jsx("div",{className:"edit-profile-photo-number",children:m.jsx("span",{children:"3"})})]})]})]}),m.jsxs("div",{className:"row mt-2px",children:[m.jsx("div",{className:"col col-33",children:_[3]===null?m.jsxs("div",{className:"photo-pickable",onClick:()=>ct(4),children:[m.jsx("div",{className:"w-full r-3x profileP photo2",id:"photo4"}),m.jsx("div",{className:"edit-profile-photo-number",children:m.jsx("span",{children:"4"})})]}):m.jsxs("div",{className:"photo-pickable",children:[m.jsx("div",{className:"w-full r-3x profileP photo2",onClick:()=>Xi(3,_[3]?.id,_[3]?.approved||0),style:{backgroundImage:`url(${pe(_[3]?.photo||"")})`}}),m.jsx("div",{className:"edit-profile-photo-number",children:m.jsx("span",{children:"4"})})]})}),m.jsx("div",{className:"col col-33",children:_[4]===null?m.jsxs("div",{className:"photo-pickable",onClick:()=>ct(5),children:[m.jsx("div",{className:"w-full r-3x profileP photo2",id:"photo5"}),m.jsx("div",{className:"edit-profile-photo-number",children:m.jsx("span",{children:"5"})})]}):m.jsxs("div",{className:"photo-pickable",children:[m.jsx("div",{className:"w-full r-3x profileP photo2",onClick:()=>Xi(4,_[4]?.id,_[4]?.approved||0),style:{backgroundImage:`url(${pe(_[4]?.photo||"")})`}}),m.jsx("div",{className:"edit-profile-photo-number",children:m.jsx("span",{children:"5"})})]})}),m.jsx("div",{className:"col col-33",children:_[5]===null?m.jsxs("div",{className:"photo-pickable",onClick:()=>ct(6),children:[m.jsx("div",{className:"w-full r-3x profileP photo2",id:"photo6"}),m.jsx("div",{className:"edit-profile-photo-number",children:m.jsx("span",{children:"6"})})]}):m.jsxs("div",{className:"photo-pickable",children:[m.jsx("div",{className:"w-full r-3x profileP photo2",onClick:()=>Xi(5,_[5]?.id,_[5]?.approved||0),style:{backgroundImage:`url(${pe(_[5]?.photo||"")})`}}),m.jsx("div",{className:"edit-profile-photo-number",children:m.jsx("span",{children:"6"})})]})})]})]}),m.jsxs("div",{className:"list m-n profile-edit-list",children:[m.jsxs("div",{className:"item border-t-white",children:[m.jsx("span",{className:"fs-15",children:u[331]||"Username"}),m.jsx("input",{className:"profile-edit-input",value:R,onChange:te=>Ut(te.target.value)})]}),m.jsxs("div",{className:"item",children:[m.jsx("span",{className:"fs-15",children:u[28]||"Email"}),m.jsx("input",{className:"profile-edit-input",value:P,onChange:te=>ke(te.target.value)})]}),m.jsx("div",{className:"item",children:m.jsx("h2",{className:"twigo-font profile-edit-h2",children:u[132]||"Basic Info"})}),m.jsxs("div",{className:"item border-t-white",children:[m.jsx("span",{className:"fs-15",children:u[26]||"Name"}),m.jsx("input",{className:"profile-edit-input",id:"userName",value:L,onChange:te=>lt(te.target.value)})]}),m.jsxs("div",{className:"item",children:[m.jsx("span",{className:"fs-15",children:u[300]||"Age"}),m.jsx("input",{className:"profile-edit-input",id:"userAge",type:"number",value:$,onChange:te=>Ee(te.target.value)})]}),m.jsxs("div",{className:"item item-toggle",onClick:()=>Ce(!0),children:[m.jsx("span",{className:"fs-15",children:u[34]||"Gender"}),m.jsx("label",{className:"toggle profile-edit-toggle",children:m.jsx("span",{children:se})})]}),m.jsxs("div",{className:"item",children:[m.jsx("h2",{className:"twigo-font profile-edit-h2",children:u[117]||"About"}),m.jsx(iF,{id:"userBio",className:"profile-edit-textarea",value:je(G),onIonInput:te=>$e(te.detail.value||""),rows:4})]}),j.filter(te=>te.method==="select").map(te=>m.jsxs("div",{className:"item item-toggle",onClick:()=>Tt(te,te.answers),children:[m.jsx("span",{className:"fs-15",children:te.question}),m.jsx("label",{className:"toggle fs-15c-444",children:m.jsx("span",{className:te.userAnswer?"c-888":"c-aaa",children:te.userAnswer||"..."})})]},te.id)),j.filter(te=>te.method==="text").map(te=>m.jsxs("div",{className:"list m-n",children:[m.jsx("div",{className:"item item-divider b-none"}),m.jsx("div",{className:"item item-divider b-none text-u-c comforta fs-15",children:te.question}),m.jsx("div",{className:"item",children:m.jsx("textarea",{className:"edit-asnwer",value:te.userAnswer||"",onChange:Re=>{const Ke=j.map(Ye=>Ye.id===te.id?{...Ye,userAnswer:Re.target.value}:Ye);H(Ke)},onBlur:async()=>{if(!(!t||!t.id))try{const Re=`${t.id}[divider]${te.id}[divider]${te.userAnswer}`;await Ne.custom("/requests/api.php",{action:"updateUserExtended",query:Re,divider:"[divider]"},s)}catch(Re){console.error("Error updating question:",Re)}}})})]},te.id))]}),m.jsx("div",{className:"item border-c-item",children:m.jsx("h2",{className:"twigo-font profile-edit-h2",children:u[276]||"Interests"})}),m.jsx("div",{className:"row i-row",children:K.map(te=>m.jsx("div",{className:"col col-25",onClick:()=>Qt(te.id),children:m.jsx("div",{className:`w-full r-3x profileP ${te.selected} i-image`,"data-interest-action":te.action,id:`interest${te.id}`,style:{backgroundImage:`url(${pe(te.icon||"")})`}})},te.id))}),$t.length>1&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"item border-c-item",children:m.jsx("h2",{className:"twigo-font profile-edit-h2",children:u[459]||"Language"})}),m.jsxs("div",{className:"item item-toggle border-none",onClick:()=>Ie(!0),children:[m.jsx("span",{children:u[134]||"Language"}),m.jsx("label",{className:"toggle profile-edit-toggle",children:q})]})]}),m.jsxs("div",{className:"list m-n mt-25px",children:[m.jsx("div",{className:"item border-c-item",children:m.jsx("h2",{className:"twigo-font profile-edit-h2",children:d[93]||"Notifications"})}),m.jsxs("div",{className:"item item-toggle comforta border-c-item fs-15",children:[d[94]||"Matches",m.jsxs("label",{className:"toggle toggle-assertive",children:[m.jsx("input",{type:"checkbox",checked:ae,onChange:te=>{const Re=te.target.checked;re(Re),yt("match_me",Re).catch(()=>{re(!Re)})}}),m.jsx("div",{className:"track",children:m.jsx("div",{className:"handle"})})]})]}),m.jsxs("div",{className:"item item-toggle comforta border-c-item fs-15",children:[d[95]||"Fans",m.jsxs("label",{className:"toggle toggle-assertive",children:[m.jsx("input",{type:"checkbox",checked:ge,onChange:te=>{const Re=te.target.checked;Se(Re),yt("fan",Re).catch(()=>{Se(!Re)})}}),m.jsx("div",{className:"track",children:m.jsx("div",{className:"handle"})})]})]}),m.jsxs("div",{className:"item item-toggle comforta border-c-item fs-15",children:[d[96]||"Messages",m.jsxs("label",{className:"toggle toggle-assertive",children:[m.jsx("input",{type:"checkbox",checked:De,onChange:te=>{const Re=te.target.checked;ze(Re),yt("message",Re).catch(()=>{ze(!Re)})}}),m.jsx("div",{className:"track",children:m.jsx("div",{className:"handle"})})]})]}),m.jsxs("div",{className:"item item-toggle comforta border-c-item fs-15",children:[d[207]||"Near Me",m.jsxs("label",{className:"toggle toggle-assertive",children:[m.jsx("input",{type:"checkbox",checked:Qe,onChange:te=>{const Re=te.target.checked;nt(Re),yt("near_me",Re).catch(()=>{nt(!Re)})}}),m.jsx("div",{className:"track",children:m.jsx("div",{className:"handle"})})]})]})]}),m.jsxs("div",{className:"list m-n",children:[m.jsx("div",{className:"item border-c-white",children:m.jsx("h2",{className:"twigo-font profile-edit-h2",children:d[98]||"Settings"})}),m.jsxs("div",{className:"item comforta border-c-item fs-15",onClick:xt,children:[d[100]||"Privacy Policy",m.jsx("span",{className:"item-note",children:m.jsx("i",{className:"icon ion-chevron-right"})})]}),m.jsxs("div",{className:"item comforta border-c-item fs-15",onClick:Mt,children:[d[101]||"Terms & Conditions",m.jsx("span",{className:"item-note",children:m.jsx("i",{className:"icon ion-chevron-right"})})]}),m.jsxs("div",{className:"item comforta border-c-item fs-15 edit-profile-logout",onClick:rt,children:[d[42]||"Logout",m.jsx("span",{className:"item-note",children:m.jsx("i",{className:"icon ion-chevron-right"})})]})]}),m.jsx("input",{ref:p,type:"file",accept:"image/*",style:{display:"none"},onChange:pi}),m.jsx("div",{className:"item item-divider b-none background-white"})]}),m.jsx(Bn,{isOpen:Pt,onDidDismiss:()=>Ce(!1),header:u[34]||"Select Gender",buttons:[...Me.map(te=>({text:te.text||te.name||String(te),handler:()=>It(te)})),{text:d[2]||"Cancel",role:"cancel"}]}),m.jsx(Bn,{isOpen:at,onDidDismiss:()=>Ie(!1),header:u[459]||"Select Language",buttons:[...$t.map(te=>({text:te.name||te.text,handler:()=>Et(te.id)})),{text:d[2]||"Cancel",role:"cancel"}]}),m.jsx(Bn,{isOpen:et,onDidDismiss:()=>{we(!1),He(null)},header:tt?.question||"",buttons:[...xi.map(te=>({text:te.text,handler:()=>ni(te)})),{text:d[2]||"Cancel",role:"cancel"}]}),m.jsx(Bn,{isOpen:ee,onDidDismiss:()=>{_e(!1),vt(-1),ii(0)},buttons:[{text:u[289]||"Set as main photo",handler:()=>Qi("setMain")},{text:u[292]||"Delete",role:"destructive",handler:()=>Qi("delete")},{text:d[2]||"Cancel",role:"cancel"}]}),m.jsx(Bn,{isOpen:Be,onDidDismiss:()=>Xe(!1),header:d[98]||"Delete Profile",buttons:[{text:u[150]||"Delete Profile",role:"destructive",handler:()=>Sn()},{text:d[2]||"Cancel",role:"cancel"}]})]})};function tJ(){const n=vs();nc();const{settings:e}=Ti(),{user:t,loading:i,setUser:s}=Ki(),r=Yi(),o=wn(),[l,d]=C.useState(null),[u,f]=C.useState(!0),[p,b]=C.useState(!1),[v,y]=C.useState(!1),[w,E]=C.useState(!1),[T,k]=C.useState("mylikes"),[_,O]=C.useState(!1),[R,M]=C.useState(!1),[P,N]=C.useState(!1);C.useEffect(()=>{t&&!i&&!v&&L()},[e,t?.id,i]);const L=async()=>{try{if(f(!0),!t||!t.id){n("/loader");return}const q=await Ne.custom("/requests/api.php",{action:"userProfile",id:t.id},e);if(q.user){const ie={...t,...q.user,question:t.question||q.user.question,blockedProfiles:t.blockedProfiles||q.user.blockedProfiles,extended:t.extended||q.user.extended,interest:t.interest||q.user.interest,rnd_f:t.rnd_f||q.user.rnd_f,photos:q.user.photos||t.photos,galleria:q.user.galleria||t.galleria,notification:q.user.notification||t.notification};d(ie)}else d(t)}catch(q){console.error("Error loading user profile:",q),t&&(d(t),t?.story&&t.story>0&&b(!0))}finally{f(!1)}},D=()=>{y(!0)},$=()=>{y(!1),t&&!i&&L()},U=q=>{d(q)},G=()=>{M(!0)},Z=()=>{N(!0)},se=()=>{console.log("Open profile story")},z=()=>{console.log("Open withdrawal")};if(i||u)return m.jsx($i,{children:m.jsx(Wt,{fullscreen:!0,children:m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:m.jsx(Wi,{})})})});if(!l)return m.jsx($i,{children:m.jsx(Wt,{fullscreen:!0,children:m.jsx("div",{style:{padding:16},children:"No user data available"})})});e?.siteUrl;const Y=e?.plugins?.withdrawal?.enabled!=="No",V=e?.account_basic?.referrals||!1;return m.jsxs($i,{className:"has-tabbar",children:[m.jsxs(Wt,{fullscreen:!0,"delegate-handle":"modalContent",scrollY:!0,className:"zIndex-600",children:[m.jsxs("div",{className:"twigo-navigation",children:[m.jsx("div",{className:"nav-left",children:m.jsx("h2",{className:"twigo-font",children:o[46]||"Profile"})}),m.jsx("div",{className:"nav-right-icon",onClick:D,children:m.jsx("div",{className:"icon",children:m.jsxs("svg",{className:"icon__content icon__content--inactive icon-profile",viewBox:"0 0 64 64",width:"100%",height:"100%",children:[m.jsx("path",{fill:"#fff",d:"M29.44 29.44a11.52 11.52 0 1 0 0-23.04 11.52 11.52 0 0 0 0 23.04zm0 2.56a14.08 14.08 0 1 1 0-28.16 14.08 14.08 0 0 1 0 28.16zm13.24 4.65H16.07C8.1 36.65 0 45 0 54.13v3.47h2.56v-3.47c0-7.75 6.97-14.92 13.5-14.92H42.7v-2.56z"}),m.jsx("path",{fill:"#fff",d:"M39.17 55.04c.23 0 .82-.24.97-.4l20.96-20.9a.69.69 0 0 0 0-.97l-5.36-5.36a.69.69 0 0 0-.98 0L34.01 48.16c-.15.15-.4.75-.4.96v5.92h5.56zm13.78-29.45a3.25 3.25 0 0 1 4.6 0l5.36 5.36a3.25 3.25 0 0 1 0 4.6l-20.95 20.9a4.52 4.52 0 0 1-2.78 1.15h-6.5a1.63 1.63 0 0 1-1.63-1.62v-6.86c0-.9.52-2.14 1.15-2.77l20.75-20.76z"}),m.jsx("path",{fill:"#fff",d:"M46.54 33.48l7.56 7.66 1.82-1.8-7.56-7.66z"})]})})})]}),m.jsx("div",{className:"page own-profile visible",children:m.jsx("div",{children:m.jsxs("div",{className:"layout layout--centered-content h-tabbar-affected own-profile-abtest-control",children:[m.jsx("div",{className:"myprofile-bg twigo-gradient2"}),m.jsxs("div",{className:"layout__content box-shadow-credits myprofile-card",children:[m.jsx("div",{className:"own-profile__userpic myphoto",onClick:()=>se(),children:m.jsx("div",{className:"brick brick--stretch box-shadow",children:m.jsx("div",{className:`brick__image box-shadow-credits border-radius-50 ${p?"storyOn":""}`,style:{backgroundImage:`url('${l.profile_photo||""}')`}})})}),m.jsxs("div",{className:"own-profile__username twigo-font mt-50px myprofile-text",onClick:()=>se(),children:[m.jsxs("span",{className:"myprofile-name-font",children:[l.first_name," ",m.jsx("small",{children:l.age})]}),m.jsxs("span",{className:"myprofile-loc-font",children:[l.city||"",", ",l.country||""]})]}),m.jsx("div",{className:"myprofile-separator"}),m.jsxs("div",{className:"own-profile__payments",children:[m.jsxs("div",{className:"own-profile__payments-row",children:[m.jsx("div",{className:"own-profile__payments-item",onClick:()=>{k("matches"),E(!0)},children:m.jsxs("div",{className:"own-profile__payments-label twigo-font font-size-14px",children:[m.jsx("br",{}),o[22]||"Matches"]})}),m.jsx("div",{className:"own-profile__payments-item",onClick:()=>Z(),children:m.jsxs("div",{className:"own-profile__payments-label twigo-font font-size-14px",children:[m.jsx("br",{}),r[48]||"Credits"]})}),m.jsx("div",{className:"own-profile__payments-item",onClick:()=>G(),children:m.jsxs("div",{className:"own-profile__payments-label twigo-font font-size-14px","data-lid":"438",children:[m.jsx("br",{}),o[438]||r[76]||"Premium"]})})]}),m.jsxs("div",{className:"own-profile__payments-row",children:[m.jsx("div",{className:"own-profile__payments-item",onClick:()=>{k("matches"),E(!0)},children:m.jsx("div",{className:"own-profile__payments-value",children:l.totalMatches||0})}),m.jsx("div",{className:"own-profile__payments-item",onClick:()=>Z(),children:m.jsx("div",{className:"own-profile__payments-value",children:l.credits||0})}),m.jsx("div",{className:"own-profile__payments-item",onClick:()=>G(),children:m.jsx("div",{className:"own-profile__payments-value twigo-font",children:l.premium===1?r[248]||"Yes":r[247]||"No"})})]})]})]}),m.jsxs("div",{className:"layout__footer layout__footer--hpadded layout__footer--vpadded mt-0",children:[m.jsxs("div",{className:"layout__content box-shadow-credits myprofile-menu",children:[m.jsxs("div",{className:"selector border-bottom-selector",onClick:()=>{k("matches"),E(!0)},children:[m.jsx("div",{className:"selector__icon selector__icon--chevron-righ myprofile-menu-icon bg-ED4A47",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"#fff",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),m.jsx("div",{className:"selector__label twigo-font","data-lid":"22",children:o[22]||"Matches"}),m.jsx("div",{className:"selector__icon mr-5px",children:m.jsx("span",{children:l.totalMatches||0})})]}),m.jsxs("div",{className:"selector border-bottom-selector",onClick:()=>{k("visitors"),E(!0)},children:[m.jsx("div",{className:"selector__icon selector__icon--chevron-righ myprofile-menu-icon bg-50E3C2",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),m.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),m.jsx("div",{className:"selector__label twigo-font","data-lid":"286",children:o[286]||"Visited my profile"}),m.jsx("div",{className:"selector__icon mr-5px",children:l.newVisits>0?m.jsx("small",{className:"twigo-font bg-50E3C2 myprofile-new",children:r[261]||"New"}):m.jsx("span",{children:l.totalVisits||0})})]}),m.jsxs("div",{className:"selector border-bottom-selector",onClick:()=>{k("likesme"),E(!0)},children:[m.jsx("div",{className:"selector__icon selector__icon--chevron-righ myprofile-menu-icon bg-9013FE",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})}),m.jsx("div",{className:"selector__label comforta","data-lid":"101",children:o[101]||"Likes me"}),m.jsx("div",{className:"selector__icon mr-5px",children:l.newFans>0?m.jsx("small",{className:"comforta bg-9013FE myprofile-new",children:r[261]||"New"}):m.jsx("span",{children:l.totalFans||0})})]}),m.jsxs("div",{className:"selector border-bottom-selector-last",onClick:()=>{k("mylikes"),E(!0)},children:[m.jsx("div",{className:"selector__icon selector__icon--chevron-righ myprofile-menu-icon bg-F05522",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),m.jsx("div",{className:"selector__label comforta","data-lid":"295",children:o[295]||"My likes"}),m.jsx("div",{className:"selector__icon mr-5px",children:m.jsx("span",{children:l.totalMyLikes||0})})]})]}),m.jsxs("div",{className:"layout__content box-shadow-credits myprofile-menu-secondary",children:[Y&&m.jsxs("div",{className:"selector border-bottom-selector",onClick:()=>z(),children:[m.jsx("div",{className:"selector__icon selector__icon--chevron-righ myprofile-menu-icon bg-92DA44",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),m.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})}),m.jsx("div",{className:"selector__label comforta",children:r[262]||"Withdrawal"}),m.jsx("div",{className:"selector__icon",children:m.jsx("small",{className:"comforta myprofile-new bg-92DA44"})})]}),V&&m.jsxs("div",{className:"selector border-bottom-selector",onClick:()=>{},children:[m.jsx("div",{className:"selector__icon selector__icon--chevron-righ myprofile-menu-icon bg-0c0f38",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),m.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})}),m.jsx("div",{className:"selector__label comforta",children:o[814]||"Referrals"})]}),m.jsxs("div",{className:"selector border-bottom-selector-last",onClick:()=>O(!0),children:[m.jsx("div",{className:"selector__icon selector__icon--chevron-righ myprofile-menu-icon bg-DAD9E2",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"3"}),m.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),m.jsx("div",{className:"selector__label comforta",children:r[40]||"Settings"})]})]}),l.premium===0&&m.jsx("div",{className:"layout__content box-shadow-credits myprofile-menu-secondary",children:m.jsx("div",{className:"btn-open-premium",onClick:()=>G(),children:m.jsx("div",{children:r[76]||"GET PREMIUM"})})})]})]})})})]}),l&&m.jsx(eJ,{isOpen:v,onClose:$,user:l,onUserUpdate:U}),m.jsx(RR,{isOpen:w,onClose:()=>E(!1),type:T}),m.jsx(jp,{isOpen:_,onClose:()=>{O(!1),t&&!i&&L()}}),m.jsx(tu,{isOpen:R,onClose:()=>M(!1),userPhoto:l?.profile_photo}),m.jsx(Vy,{isOpen:P,onClose:()=>N(!1),userPhoto:l?.profile_photo})]})}function iJ(){return m.jsxs($i,{children:[m.jsx(Ca,{children:m.jsx(Ra,{children:m.jsx(Ia,{children:"match"})})}),m.jsx(Wt,{fullscreen:!0,children:m.jsx("div",{style:{padding:16},children:"match"})})]})}const Bb=({profile:n,index:e,siteUrl:t,getPhotoUrl:i,onProfileClick:s,showOnlineStatus:r=!1})=>{const o=(n.show||e+1)*50;return m.jsxs("div",{className:`twigo-meet-card vivify fadeInRightMeet delay-${o}`,onClick:()=>s(n),children:[m.jsxs("span",{className:"tphotos",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 48 48",fill:"none",children:m.jsx("path",{d:"M20 4C19.2 4 18.6 4.4 18.2 5.1L16.5 8H9C6.2 8 4 10.2 4 13V37C4 39.8 6.2 42 9 42H39C41.8 42 44 39.8 44 37V13C44 10.2 41.8 8 39 8H31.5L29.8 5.1C29.4 4.4 28.8 4 28 4H20ZM24 36C18.5 36 14 31.5 14 26C14 20.5 18.5 16 24 16C29.5 16 34 20.5 34 26C34 31.5 29.5 36 24 36ZM24 32C27.3 32 30 29.3 30 26C30 22.7 27.3 20 24 20C20.7 20 18 22.7 18 26C18 29.3 20.7 32 24 32Z",fill:"#fff"})}),n.total_photos||0]}),m.jsx("div",{className:"profile-photo ",style:{backgroundImage:`url(${i(n.photo)})`}}),m.jsxs("div",{className:"meet-user-name twigo-font font-w-500",children:[n.name,r&&n.status===1&&m.jsx("div",{className:"csms-online-status csms-online-status--online"})]}),m.jsx(DR,{age:n.age,gender:n.gender}),n.fan===1?m.jsx("i",{className:"icon-svg icon-svg--stretch vivify popIn delay-700 meet-icon-fan",children:m.jsxs("svg",{viewBox:"0 0 64 64",id:"icon-floating-yes",width:"20px",height:"20px",children:[m.jsx("circle",{fill:"#fff",cx:"32",cy:"32",r:"32"}),m.jsx("path",{d:"M18.5 29.7c0-4.25 3.43-7.7 7.65-7.7A7.67 7.67 0 0 1 32 24.73 7.67 7.67 0 0 1 37.85 22a7.68 7.68 0 0 1 7.65 7.7C45.5 36.57 36.46 45 32 45s-13.5-8.42-13.5-15.3z",fill:"#ef5464"})]})}):m.jsx("i",{className:"icon-svg icon-svg--stretch meet-icon-nofan",id:`meetLike${n.id}`,children:m.jsxs("svg",{viewBox:"0 0 64 64",id:"icon-floating-yes",width:"20px",height:"20px",children:[m.jsx("circle",{fill:"#fff",cx:"32",cy:"32",r:"32"}),m.jsx("path",{d:"M18.5 29.7c0-4.25 3.43-7.7 7.65-7.7A7.67 7.67 0 0 1 32 24.73 7.67 7.67 0 0 1 37.85 22a7.68 7.68 0 0 1 7.65 7.7C45.5 36.57 36.46 45 32 45s-13.5-8.42-13.5-15.3z",fill:"#ef5464"})]})}),m.jsx("div",{className:"footer-gradient"})]})};function nJ(){vs();const{settings:n}=Ti(),{user:e,config:t,prices:i}=Ki(),s=Yi(),r=wn(),{showNotification:o}=In(),[l,d]=C.useState("all"),[u,f]=C.useState([]),[p,b]=C.useState([]),[v,y]=C.useState([]),[w,E]=C.useState(!0),[T,k]=C.useState(!0),[_,O]=C.useState(!1),[R,M]=C.useState(!1),[P,N]=C.useState(0),[L,D]=C.useState(!0),[$,U]=C.useState(!1),[G,Z]=C.useState(null),[se,z]=C.useState(!1),[Y,V]=C.useState(!1),[q,ie]=C.useState(!0),j=C.useRef(null);C.useEffect(()=>{e?.id&&(l==="all"&&K(),l==="spotlight"&&X(),H())},[e?.id,l]),C.useEffect(()=>{if(e){const Ce=new Date().getTime()/1e3;e.last_access>Ce&&e.meet===1?ie(!1):ie(!0)}},[e]);const H=()=>{if(e){const Ce=new Date().getTime()/1e3;e.last_access>Ce&&e.meet===1?ie(!1):ie(!0)}},K=async()=>{if(e?.id)try{E(!0),k(!0),N(0),D(!0);const at=await Ne.meet("meet",e.id,0,0,n);if(at.result&&Array.isArray(at.result)&&at.result.length>0){const Ie=at.result.map((et,we)=>({...et,show:we+1}));f(Ie),O(!1)}else f([]),O(!0);at.popular&&Array.isArray(at.popular)&&at.popular.length>0?(y(at.popular),M(!0)):(y([]),M(!1))}catch(Ce){console.error("Error loading meet data:",Ce),O(!0)}finally{E(!1),k(!1)}},X=async()=>{if(e?.id)try{const Ce=await Ne.game("spotlight",e.id,n);Ce.spotlight&&Array.isArray(Ce.spotlight)?b(Ce.spotlight):b([])}catch(Ce){console.error("Error loading spotlight:",Ce)}},ae=async()=>{if(!e?.id||!L||l!=="all"){j.current&&j.current.complete();return}try{k(!0);const Ce=P+1,Ie=await Ne.meet("meet",e.id,Ce,0,n);if(Ie.result&&Array.isArray(Ie.result)&&Ie.result.length>0){const et=Ie.result.map((we,ee)=>({...we,show:u.length+ee+1}));f([...u,...et]),N(Ce)}else D(!1)}catch(Ce){console.error("Error loading more profiles:",Ce),D(!1)}finally{k(!1),j.current&&j.current.complete()}},re=Ce=>{d(Ce),O(!1)},ge=()=>{if(!e)return"";if(e.s_radius>=1e3)return"All the world";if(e.s_radius<550&&e.s_radius>=500||e.s_radius<50)return e.city||"";if(e.s_radius>30&&e.s_radius<500||e.s_radius>550&&e.s_radius<1e3){const Ce=t?.plugins?.settings?.distanceMeter||"km";return`${e.s_radius} ${Ce}`}return e.country||""},Se=Ce=>Ce?Ce.startsWith("http")?Ce:`${n?.siteUrl||""}${Ce.startsWith("/")?Ce:`/${Ce}`}`:"",De=Ce=>{Z(Ce),U(!0)},ze=()=>{z(!0)},Qe=async()=>{if(!e?.id)return;const Ce=parseInt(String(i?.spotlight||0));try{if(!rn.hasEnoughCredits(Ce)){rn.openCreditsModal(),z(!1);return}await rn.wasteCredit(Ce,s[119]||"Put the Spotlight on you!",!1,!0),await Ne.query("addToSpotlight",String(e.id),n)}catch{}finally{z(!1)}},nt=n?.siteUrl||"",Pt=i?.spotlight||0;return e?m.jsxs($i,{className:"has-tabbar",children:[m.jsxs("div",{className:"content-header-meet",children:[m.jsx("div",{className:"content-header-messages-title",children:m.jsx("div",{className:"landing-logo",children:m.jsx("img",{width:"130",src:n?.site_theme?.logo?.val||"",alt:"Logo"})})}),m.jsx("center",{children:m.jsx("div",{className:`loader02 meet-loader ${T?"":"hidden"}`})}),m.jsx("div",{className:"content-header-meet-right",onClick:()=>V(!0),children:m.jsxs("svg",{id:"Filters_btn",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"40",height:"38.667",viewBox:"0 0 40 38.667",children:[m.jsx("defs",{children:m.jsx("clipPath",{id:"clip-path",children:m.jsx("ellipse",{id:"Oval",cx:"20",cy:"19.333",rx:"20",ry:"19.333",fill:"rgba(0,0,0,0.1)"})})}),m.jsx("ellipse",{id:"Oval-2","data-name":"Oval",cx:"20",cy:"19.333",rx:"20",ry:"19.333",fill:"rgba(0,0,0,0.1)"}),m.jsx("path",{id:"Filters",d:"M5.45,14.5a1.45,1.45,0,1,1,0-2.9h9.1a1.45,1.45,0,0,1,0,2.9Zm-2-5.8a1.45,1.45,0,0,1,0-2.9h13.1a1.45,1.45,0,0,1,0,2.9Zm-2-5.8a1.45,1.45,0,1,1,0-2.9h17.1a1.45,1.45,0,0,1,0,2.9Z",transform:"translate(10 12.567)",fill:"#fff"})]})}),m.jsxs("div",{className:"tabs tabs-top visible meet-tabs-select",children:[m.jsx("div",{className:`tab ${l==="all"?"is-active":""} ng-empty meet-tabs`,onClick:()=>re("all"),children:m.jsx("div",{className:"tab__label comforta ng-binding inside-tab",children:ge()})}),m.jsx("div",{className:`tab ${l==="spotlight"?"is-active":""} ng-empty meet-tabs`,onClick:()=>re("spotlight"),children:m.jsx("div",{className:"tab__label comforta ng-binding inside-tab",children:r[334]||"Spotlight"})}),m.jsx("div",{className:`tab ${l==="popular"?"is-active":""} ng-empty meet-tabs`,onClick:()=>re("popular"),children:m.jsx("div",{className:"tab__label comforta ng-binding inside-tab",children:r[52]||"Most populars"})})]})]}),m.jsxs(Wt,{fullscreen:!0,className:"vivify fadeIn meet-content",scrollY:!0,children:[m.jsxs("div",{className:"page-content mt-115",children:[m.jsxs("div",{className:"twigo-meet-results pb-45",children:[l==="all"&&!w&&!_&&u.length>0&&m.jsx("div",{children:u.filter(Ce=>(Ce.blocked??0)<1).map((Ce,at)=>m.jsx(Bb,{profile:Ce,index:at,siteUrl:nt,getPhotoUrl:Se,onProfileClick:De,showOnlineStatus:!0},Ce.id))}),l==="spotlight"&&m.jsxs("div",{children:[m.jsxs("div",{className:"twigo-meet-card",onClick:ze,children:[m.jsx("div",{className:"profile-photo",style:{backgroundImage:`url(${Se(e.profile_photo||"")})`}}),m.jsxs("div",{className:"wrapper-add-to-spotlight",children:[m.jsx("div",{className:"top-icon",children:m.jsx("img",{src:`${nt}mobile/twigo/img/add-spotlight.svg`,alt:"Spotlight"})}),m.jsx("div",{className:"spotlight-text twigo-font",children:s[222]||"Put the Spotlight on you!"}),m.jsx("div",{className:"spotlight-activate twigo-gradient2 twigo-font",children:s[190]||"Activate"})]})]}),p.map((Ce,at)=>m.jsx(Bb,{profile:Ce,index:at,siteUrl:nt,getPhotoUrl:Se,onProfileClick:De,showOnlineStatus:!0},Ce.id))]}),l==="popular"&&!w&&m.jsx("div",{children:v.filter(Ce=>(Ce.blocked??0)<1).map((Ce,at)=>m.jsx(Bb,{profile:Ce,index:at,siteUrl:nt,getPhotoUrl:Se,onProfileClick:De,showOnlineStatus:!0},Ce.id))})]}),_&&m.jsx("div",{className:"users-folder users-folder--chess",children:m.jsx("div",{className:"users-folder__list",children:m.jsx("div",{className:"encounters-disabled expand-filter",children:m.jsxs("div",{className:"encounters-message meet-no-result",children:[m.jsx("div",{className:"brick brick--xxlg vivify meet-no-result-brick",children:m.jsx("div",{className:"brick-img profile-photo box-shadow-credits",style:{backgroundImage:`url('${nt}mobile/twigo/img/no-result.png')`}})}),m.jsx("h1",{className:"comforta",children:s[162]||"No more profiles"}),m.jsxs("span",{children:[s[163]||"Try adjusting your filters",".",m.jsx("br",{}),s[164]||"Want to see more profiles","?"]}),m.jsx("div",{className:"button-wrapper zIndex99",children:m.jsx("button",{className:"button meet-no-result-btn",onClick:()=>V(!0),children:m.jsx("div",{className:"button__content",children:m.jsx("span",{className:"button__text comforta",children:s[165]||"Adjust Filters"})})})})]})})})}),!_&&l==="all"&&q&&m.jsx("div",{className:"people-nearby-banner mt-50px",children:m.jsxs("div",{className:"cta-box",children:[m.jsx("div",{className:"cta-box__content",children:m.jsxs("div",{className:"brick-group brick-group--promo",children:[m.jsx("div",{className:"brick brick--sm vivify popInBottom delay-100",children:m.jsx("div",{className:"brick__image",style:{backgroundImage:`url('${nt}mobile/img/gata0.jpg')`}})}),m.jsx("div",{className:"brick vivify popInBottom delay-100",children:m.jsx("div",{className:"brick__image",style:{backgroundImage:`url(${Se(e.profile_photo||"")})`}})}),m.jsx("div",{className:"brick brick--sm vivify popInBottom delay-100",children:m.jsx("div",{className:"brick__image",style:{backgroundImage:`url('${nt}mobile/img/gata1.jpg')`}})})]})}),m.jsxs("div",{className:"cta-box__content vivify fadeIn delay-100",children:[s[198]||"Rise up in"," ",m.jsx("b",{children:e.city||""}),"."]}),m.jsx("div",{className:"cta-box__buttons vivify fadeIn delay-200",children:m.jsx("div",{className:"button-wrapper",children:m.jsx("button",{className:"button button--riseup twigo-gradient2",children:m.jsx("div",{className:"button__content",children:m.jsx("span",{className:"button__text comforta fc-fff",children:s[199]||"Rise Up"})})})})})]})})]}),l==="all"&&!_&&m.jsx(Q8,{ref:j,onIonInfinite:ae,threshold:"5%",children:m.jsx(Z8,{loadingText:"Loading more profiles..."})}),l==="all"&&!L&&u.length>0&&m.jsx("div",{style:{textAlign:"center",padding:"50px 16px"},children:m.jsxs("div",{className:"text-muted text-center l-h comforta mt-50px",children:[s[117]||"No more profiles to show",m.jsx("br",{}),m.jsx("a",{href:"#",onClick:Ce=>{Ce.preventDefault(),V(!0)},children:s[118]||"Adjust your filters"})]})})]}),$&&G&&m.jsx(Da,{isOpen:$,onClose:()=>{U(!1),Z(null)},userId:G.id}),se&&m.jsx("div",{className:"wrapper-reward modal-spotlight",children:m.jsxs("div",{className:"modal-reward modal--congratulations twigo-gradient2 vivify fadeIn border-radius-10",children:[m.jsxs("div",{className:"modal-reward-top boostSpotlight bg-none",children:[m.jsx("div",{className:"klose animated fadeInUp bg-333",onClick:()=>z(!1),children:m.jsx("i",{className:"icon ion-close-round close-modal-boost"})}),m.jsx("img",{className:"modal-reward-icon u-imgResponsive animated fadeInUp rounded profileP modal-user-photo",style:{backgroundImage:`url(${Se(e?.profile_photo||"")})`},alt:""}),m.jsx("div",{className:"modal-reward-header animated fadeInUp",children:s[119]||"Put the Spotlight on you!"}),m.jsxs("div",{className:"modal-reward-subheader animated fadeInUp comforta font-s-12",children:[s[120]||"Get more visibility"," ",m.jsx("br",{}),s[121]||"Cost"," ",m.jsx("strong",{children:Pt})," ",s[48]||"credits"]})]}),m.jsx("div",{className:"modal-reward-bottom bg-none",onClick:Qe,children:m.jsx("button",{className:"modal-reward-btn u-btn u-btn--danger comforta btn-add-to-stop",children:s[122]||"Add to Spotlight"})})]})}),m.jsx(jp,{isOpen:Y,onClose:()=>{V(!1),l==="all"||l==="popular"?K():l==="spotlight"&&X()}})]}):m.jsx($i,{children:m.jsx(Wt,{fullscreen:!0,children:m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:m.jsx(Wi,{})})})})}function sJ(){const n=nc();return C.useEffect(()=>{const e=n.pathname;let t="";const i=e.replace(/^\//,"").split("/");i.length>0&&(t=i[i.length-1]),(!t||t==="home")&&(i.length>1?t=i[1]:i.length===1&&i[0]==="home"&&(t="explore"));const s=t.toLowerCase();window.url=s},[n.pathname]),null}function hC(){const n="/mobile/",e=n.endsWith("/")?n.slice(0,-1):n;return m.jsxs(_j,{basename:e,future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[m.jsx(sJ,{}),m.jsxs(Ej,{children:[m.jsx(nn,{path:"/welcome",element:m.jsx(PH,{})}),m.jsx(nn,{path:"/register",element:m.jsx(FH,{})}),m.jsx(nn,{path:"/register3",element:m.jsx(BH,{})}),m.jsxs(nn,{path:"/home",element:m.jsx(Lj,{children:m.jsx(_U,{})}),children:[m.jsx(nn,{index:!0,element:m.jsx(v0,{to:"/home/explore",replace:!0})}),m.jsx(nn,{path:"explore",element:m.jsx(QH,{})}),m.jsx(nn,{path:"feed",element:m.jsx(ZH,{})}),m.jsx(nn,{path:"reels",element:m.jsx(GZ,{})}),m.jsx(nn,{path:"stories",element:m.jsx(XZ,{})}),m.jsx(nn,{path:"menu",element:m.jsx(QZ,{})}),m.jsx(nn,{path:"location",element:m.jsx(ZZ,{})}),m.jsx(nn,{path:"matches",element:m.jsx(JZ,{})}),m.jsx(nn,{path:"profile",element:m.jsx(tJ,{})}),m.jsx(nn,{path:"match",element:m.jsx(iJ,{})}),m.jsx(nn,{path:"meet",element:m.jsx(nJ,{})})]}),m.jsx(nn,{path:"/",element:m.jsx(v0,{to:"/home/explore",replace:!0})}),m.jsx(nn,{path:"*",element:m.jsx(v0,{to:"/register",replace:!0})})]})]})}const Vx=document.createElement("link");Vx.href="https://fonts.googleapis.com/css?family=Inter";Vx.rel="stylesheet";document.head.appendChild(Vx);RF();const rJ=()=>{const{settings:n,loading:e,error:t}=Ti(),i=(r,o,l=[])=>{["crossplatform.css","live.css","live-discover.css","feed.css","swiper.css","/vendor/swiper.css","scroller.css"].forEach(u=>{if(document.querySelector(`link[href*="${u}"]`))return;const p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.href=`${r}/themes/default/css/${u}`,console.log(p.href),document.head.appendChild(p)}),l&&Array.isArray(l)&&l.forEach(u=>{if(u.css_file&&u.css_file.trim()!==""){const f=u.css_file.trim();if(document.querySelector(`link[href*="${f}"]`))return;const b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.id=`style${f}`,b.href=`${o}/css/vendor/${f}.css`,document.head.appendChild(b)}})},s=(r,o=[])=>{o&&Array.isArray(o)&&o.forEach(l=>{if(l.js_file&&l.js_file.trim()!==""){const d=l.js_file.trim();if(document.querySelector(`script[src*="${d}"]`))return;const f=document.createElement("script");f.src=`${r}themes/plugins/${d}.js`,document.head.appendChild(f)}})};return Pe.useEffect(()=>{if(n){window.siteSettings=n,window.site_url=n.site_url,window.siteUrl=n.siteUrl,window.user=n.user,window.plugins=n.plugins,window.site_theme=n.site_theme,window.mobile_theme=n.mobile_theme,window.account_basic=n.account_basic,window.mobileSite=n.mobileSite,window.mobileTheme=n.mobileTheme,window.liveEnabled=n.liveEnabled,window.feedEnabled=n.feedEnabled,window.reelsEnabled=n.reelsEnabled,window.storyEnabled=n.storyEnabled;const r=n.user||{},o=n.plugins||{},l=n.allG||3;if(window.allG=l,window.user_name=r.name||r.first_name||"",window.current_user_id=r.id||n.current_user_id||0,window.uploadStory=n.uploadStory||!1,window.ph=n.ph||0,window.upphotos=n.upphotos||[],window.extFilter=n.extFilter||["jpg","jpeg","png","mp4","ogg","webm"],window.storyAlbumFilter=n.storyAlbumFilter||["video/3gpp","video/mpeg","video/mp4","video/webm","video/ogg"],window.rnd_f_c=n.rnd_f_c||0,window.dating_plans=n.dating_plans||[],window.dating_plans_length=n.dating_plans_length||0,o.date&&o.date.budgetValues){const p=typeof o.date.budgetValues=="string"?o.date.budgetValues.split(",").map(b=>b.trim()):o.date.budgetValues;window.dating_budgets=p}else window.dating_budgets=n.dating_budgets||[];if(o.date&&o.date.type){const p=typeof o.date.type=="string"?o.date.type.split(",").map(b=>b.trim()):o.date.type;window.dating_types=p}else window.dating_types=n.dating_types||[];window.dating_cities=n.dating_cities||[],window.ajax_path=n.ajax_path||n.site_url+"/requests",window.request_source=function(){return window.ajax_path||n.ajax_path||n.site_url+"/requests"};const d=window.request_source();if(window.gUrl=d+"/rt.php",window.aUrl=d+"/api.php",o.pusher?.key&&o.pusher?.cluster){const p=async()=>{if(window.Pusher)try{const{default:b}=await jn(async()=>{const{default:v}=await Promise.resolve().then(()=>kU);return{default:v}},void 0);b.setSettings(n),b.init(),console.log("Pusher initialized globally")}catch(b){console.error("Error initializing Pusher:",b)}else setTimeout(p,100)};p()}const u=n.theme_url||`${n.site_url}/themes/default`,f=n.plugin||[];i(n.site_url,u,f),s(n.site_url,f)}},[n]),Pe.useEffect(()=>{if(!n?.site_url)return;const r=()=>{typeof window>"u"||window.innerWidth>768&&(console.log(n.site_url),window.location.href=n.site_url)};return window.addEventListener("resize",r),r(),()=>{window.removeEventListener("resize",r)}},[n?.site_url]),e?m.jsx($I,{}):t?(()=>{try{const l=localStorage.getItem("config");if(l){const d=JSON.parse(l);return{}}}catch(l){console.error("Error loading from localStorage:",l)}return null})()?m.jsx(hC,{}):m.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",gap:"20px",padding:"20px",textAlign:"center"},children:[m.jsx("h2",{children:"Error Loading Settings"}),m.jsx("p",{style:{color:"red"},children:t.message}),m.jsxs("p",{style:{fontSize:"12px",color:"#666"},children:["Make sure the API is accessible at: ",Cs.getMobileApiUrl("/getsetting.php?page=index")]}),m.jsxs("div",{style:{display:"flex",gap:"10px"},children:[m.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",cursor:"pointer"},children:"Retry"}),m.jsx("button",{onClick:()=>{localStorage.setItem("config",JSON.stringify({site_url:window.location.origin,siteUrl:window.location.origin,mobileTheme:"twigo",mobile_theme:{},languages:[]})),window.location.reload()},style:{padding:"10px 20px",cursor:"pointer"},children:"Continue Without API"})]})]}):n?m.jsx(hC,{}):m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:m.jsx("p",{children:"No settings available"})})};k5.createRoot(document.getElementById("root")).render(m.jsx(Pe.StrictMode,{children:m.jsx(tI,{children:m.jsx(Ij,{children:m.jsxs(Dj,{children:[m.jsx(Wt,{}),m.jsx(rJ,{})]})})})}));export{y2 as K,ts as a,Fo as b,Tp as c,ld as d,NP as e,Vl as f,PP as g,rv as h,Ll as i,ci as j,is as k,iv as l,mJ as m,ht as n,aJ as o,oJ as p,va as r,pJ as s,An as w};
